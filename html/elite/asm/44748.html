<!DOCTYPE html>
<html>
<head>
<title>Elite: Routine at AECC</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Elite</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="44682.html">AE8A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44748">Map</a></td>
<td class="next">
Next: <a href="44834.html">AF22</a>
</td>
</tr>
</table>
<div class="description">AECC: Setup the table at <a href="43412.html">ship_calculations</a>.</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
sidev is calculated from nosev and roofz instead of just copied.
</div>
<div class="paragraph">
Used by the routine at <a href="43085.html">draw_ship_and_laser</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">IX</td>
<td class="register-desc">Ship structure</td>
</tr>
<tr>
<td class="register">IY</td>
<td class="register-desc">Table of ship calculations</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">init_ship_calculations</td>
<td class="address-2"><span id="44748"></span>AECC</td>
<td class="instruction">LD IY,<a href="43412.html">ship_calculations</a></td>
<td class="comment-1" rowspan="1">Normals table</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44752"></span>AED0</td>
<td class="instruction">LD B,(IX+$0C)</td>
<td class="comment-1" rowspan="1">nosev_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44755"></span>AED3</td>
<td class="instruction">LD C,(IX+$14)</td>
<td class="comment-1" rowspan="1">roofv_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44758"></span>AED6</td>
<td class="instruction">LD D,(IX+$0E)</td>
<td class="comment-1" rowspan="1">nosev_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44761"></span>AED9</td>
<td class="instruction">LD E,(IX+$12)</td>
<td class="comment-1" rowspan="1">roofv_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44764"></span>AEDC</td>
<td class="instruction">CALL <a href="44834.html">dot_product</a></td>
<td class="comment-1" rowspan="1">HL = nosev_yz ⋅ roofv_zy</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44767"></span>AEDF</td>
<td class="instruction">LD (IX+$16),H</td>
<td class="comment-1" rowspan="1">sidev_x_hi = nosev_yz ⋅ roofv_zy</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44770"></span>AEE2</td>
<td class="instruction">LD (IY+$01),H</td>
<td class="comment-1" rowspan="1">$01 = sidev_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44773"></span>AEE5</td>
<td class="instruction">LD B,(IX+$0E)</td>
<td class="comment-1" rowspan="1">nosev_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44776"></span>AEE8</td>
<td class="instruction">LD (IY+$11),B</td>
<td class="comment-1" rowspan="1">$11 = nosev_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44779"></span>AEEB</td>
<td class="instruction">LD C,(IX+$10)</td>
<td class="comment-1" rowspan="1">roofv_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44782"></span>AEEE</td>
<td class="instruction">LD (IY+$03),C</td>
<td class="comment-1" rowspan="1">$03 = roofv_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44785"></span>AEF1</td>
<td class="instruction">LD D,(IX+$0A)</td>
<td class="comment-1" rowspan="1">nosev_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44788"></span>AEF4</td>
<td class="instruction">LD E,(IX+$14)</td>
<td class="comment-1" rowspan="1">roofv_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44791"></span>AEF7</td>
<td class="instruction">LD (IY+$0F),E</td>
<td class="comment-1" rowspan="1">$0F = roofv_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44794"></span>AEFA</td>
<td class="instruction">CALL <a href="44834.html">dot_product</a></td>
<td class="comment-1" rowspan="1">HL = nosev_zx ⋅ roofv_xz</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44797"></span>AEFD</td>
<td class="instruction">LD (IX+$18),H</td>
<td class="comment-1" rowspan="1">sidev_y_hi = nosev_zx ⋅ roofv_xz</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44800"></span>AF00</td>
<td class="instruction">LD (IY+$07),H</td>
<td class="comment-1" rowspan="1">$07 = sidev_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44803"></span>AF03</td>
<td class="instruction">LD B,(IX+$0A)</td>
<td class="comment-1" rowspan="1">nosev_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44806"></span>AF06</td>
<td class="instruction">LD (IY+$05),B</td>
<td class="comment-1" rowspan="1">$05 = nosev_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44809"></span>AF09</td>
<td class="instruction">LD C,(IX+$12)</td>
<td class="comment-1" rowspan="1">roofv_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44812"></span>AF0C</td>
<td class="instruction">LD (IY+$09),C</td>
<td class="comment-1" rowspan="1">$09 = roofv_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44815"></span>AF0F</td>
<td class="instruction">LD D,(IX+$0C)</td>
<td class="comment-1" rowspan="1">nosev_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44818"></span>AF12</td>
<td class="instruction">LD (IY+$0B),D</td>
<td class="comment-1" rowspan="1">$0B = nosev_y_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44821"></span>AF15</td>
<td class="instruction">LD E,(IX+$10)</td>
<td class="comment-1" rowspan="1">roofv_x_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44824"></span>AF18</td>
<td class="instruction">CALL <a href="44834.html">dot_product</a></td>
<td class="comment-1" rowspan="1">HL = nosev_xy ⋅ roofv_yx</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44827"></span>AF1B</td>
<td class="instruction">LD (IX+$1A),H</td>
<td class="comment-1" rowspan="1">sidev_z_hi = nosev_xy ⋅ roofv_yx</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44830"></span>AF1E</td>
<td class="instruction">LD (IY+$0D),H</td>
<td class="comment-1" rowspan="1">$0D = sidev_z_hi</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="44833"></span>AF21</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="44682.html">AE8A</a>
</td>
<td class="up">Up: <a href="../maps/all.html#44748">Map</a></td>
<td class="next">
Next: <a href="44834.html">AF22</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright"></div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.5.</div>
</footer>
</body>
</html>