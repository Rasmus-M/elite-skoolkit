<!DOCTYPE html>
<html>
<head>
<title>Elite: Routine at 8080</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">Elite</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="32834.html">8042</a>
</td>
<td class="up">Up: <a href="../maps/all.html#32896">Map</a></td>
<td class="next">
Next: <a href="32977.html">80D1</a>
</td>
</tr>
</table>
<div class="description">8080: Clear 3D area and draw a border</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="29560.html">title_loop</a>, <a href="29809.html">L7471</a>, <a href="37526.html">L9296</a>, <a href="37697.html">L9341</a> and <a href="37869.html">L93ED</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">clear_3d_area</td>
<td class="address-2"><span id="32896"></span>8080</td>
<td class="instruction">DI</td>
<td class="comment-1" rowspan="1">Disable interrupts</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32897"></span>8081</td>
<td class="instruction">LD (<a href="32977.html">save_sp</a>),SP</td>
<td class="comment-1" rowspan="1">Save stack pointer</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32901"></span>8085</td>
<td class="instruction">LD SP,<a href="53248.html">jump_table_at_D000</a></td>
<td class="comment-1" rowspan="1">Set SP just above screen buffer</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32904"></span>8088</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-1" rowspan="1">For drawing empty bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32907"></span>808B</td>
<td class="instruction">LD DE,$00FF</td>
<td class="comment-1" rowspan="1">For bottom right corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32910"></span>808E</td>
<td class="instruction">LD IX,<a href="65280.html">LFF00</a></td>
<td class="comment-1" rowspan="1">For bottom left corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32914"></span>8092</td>
<td class="instruction">LD BC,<a href="65368.html#65535">$FFFF</a></td>
<td class="comment-1" rowspan="1">For middle border</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32917"></span>8095</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Draw bottom right corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32918"></span>8096</td>
<td class="instruction">LD A,$0E</td>
<td class="comment-1" rowspan="4">Draw 28 middle bytes of bottom border</td>
</tr>
<tr>
<td class="asm-label">clear_3d_area_0</td>
<td class="address-2"><span id="32920"></span>8098</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32921"></span>8099</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32922"></span>809A</td>
<td class="instruction">JR NZ,<a href="32896.html#32920">clear_3d_area_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32924"></span>809C</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Draw bottom left corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32926"></span>809E</td>
<td class="instruction">LD E,$01</td>
<td class="comment-1" rowspan="1">For right side</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32928"></span>80A0</td>
<td class="instruction">LD IX,$8000</td>
<td class="comment-1" rowspan="1">For left side</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32932"></span>80A4</td>
<td class="instruction">LD B,$7E</td>
<td class="comment-1" rowspan="1">126 lines</td>
</tr>
<tr>
<td class="asm-label">clear_3d_area_1</td>
<td class="address-2"><span id="32934"></span>80A6</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Draw right side</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32935"></span>80A7</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="14">Draw 28 empty bytes</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32936"></span>80A8</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32937"></span>80A9</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32938"></span>80AA</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32939"></span>80AB</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32940"></span>80AC</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32941"></span>80AD</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32942"></span>80AE</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32943"></span>80AF</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32944"></span>80B0</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32945"></span>80B1</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32946"></span>80B2</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32947"></span>80B3</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32948"></span>80B4</td>
<td class="instruction">PUSH HL</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32949"></span>80B5</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Draw left side</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32951"></span>80B7</td>
<td class="instruction">DJNZ <a href="32896.html#32934">clear_3d_area_1</a></td>
<td class="comment-1" rowspan="1">Repeat 126 times</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32953"></span>80B9</td>
<td class="instruction">LD BC,<a href="65368.html#65535">$FFFF</a></td>
<td class="comment-1" rowspan="1">For middle border</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32956"></span>80BC</td>
<td class="instruction">LD E,$FF</td>
<td class="comment-1" rowspan="1">For top right corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32958"></span>80BE</td>
<td class="instruction">LD IX,<a href="65280.html">LFF00</a></td>
<td class="comment-1" rowspan="1">For top left corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32962"></span>80C2</td>
<td class="instruction">PUSH DE</td>
<td class="comment-1" rowspan="1">Draw top right corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32963"></span>80C3</td>
<td class="instruction">LD A,$0E</td>
<td class="comment-1" rowspan="4">Draw 28 middle bytes of top border</td>
</tr>
<tr>
<td class="asm-label">clear_3d_area_2</td>
<td class="address-2"><span id="32965"></span>80C5</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32966"></span>80C6</td>
<td class="instruction">DEC A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32967"></span>80C7</td>
<td class="instruction">JR NZ,<a href="32896.html#32965">clear_3d_area_2</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32969"></span>80C9</td>
<td class="instruction">PUSH IX</td>
<td class="comment-1" rowspan="1">Draw top left corner</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32971"></span>80CB</td>
<td class="instruction">LD SP,(<a href="32977.html">save_sp</a>)</td>
<td class="comment-1" rowspan="1">Restore stack pointer</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32975"></span>80CF</td>
<td class="instruction">EI</td>
<td class="comment-1" rowspan="1">Enable interrupts</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="32976"></span>80D0</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="32834.html">8042</a>
</td>
<td class="up">Up: <a href="../maps/all.html#32896">Map</a></td>
<td class="next">
Next: <a href="32977.html">80D1</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright"></div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.5.</div>
</footer>
</body>
</html>