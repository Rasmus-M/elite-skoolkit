@start
@org
; #UDGTABLE
; { #SCR(loading) | loading screen. }
; TABLE#
@label=zx_screen
b$4000 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4020 DEFB $00,$00,$2A,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$F8,$00,$00,$A0,$B0,$D2,$82,$4A,$05,$28,$14
 $4040 DEFB $01,$EF,$CA,$AA,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$FF,$CF,$FE,$00,$A1,$40,$2A,$84,$8A,$05,$10,$14
 $4060 DEFB $00,$FF,$FF,$CA,$AA,$88,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$EF,$FF,$CF,$D9,$FC,$00,$00,$3F,$77,$FF,$F7,$66,$00,$00
 $4080 DEFB $00,$07,$FF,$F3,$8A,$AA,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$FF,$C7,$F7,$FF,$80,$00,$3D,$FD,$7F,$6B,$FE,$DF,$DE,$00
 $40A0 DEFB $00,$0F,$9F,$FE,$1F,$AA,$AA,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$FF,$D7,$FD,$A5,$E7,$C0,$06,$3E,$29,$1D,$08,$5C,$4A,$3E,$30
 $40C0 DEFB $00,$0F,$3F,$FE,$FF,$0F,$AA,$AA,$A0,$00,$01,$80,$1C,$00,$00,$1F,$FF,$D7,$37,$FD,$D0,$F7,$C0,$1E,$FF,$27,$80,$80,$80,$F2,$7F,$BC
 $40E0 DEFB $00,$03,$FF,$3B,$BF,$FF,$7F,$6A,$A8,$00,$03,$40,$16,$00,$01,$FF,$DB,$A3,$FF,$F7,$FF,$FF,$00,$1E,$FF,$27,$00,$14,$00,$72,$7F,$BC
 $4100 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4120 DEFB $00,$01,$55,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$FF,$00,$00,$A1,$20,$4A,$81,$4A,$05,$28,$14
 $4140 DEFB $01,$C7,$E5,$55,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$FF,$9F,$FE,$00,$A1,$20,$4A,$82,$4A,$05,$28,$14
 $4160 DEFB $00,$FF,$CF,$E5,$55,$14,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$F3,$FF,$9F,$DB,$FC,$00,$00,$17,$17,$FF,$F4,$6C,$00,$00
 $4180 DEFB $00,$07,$FF,$F9,$95,$55,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$FF,$87,$EB,$FF,$80,$00,$1A,$F8,$53,$6B,$66,$0F,$AC,$00
 $41A0 DEFB $00,$0F,$CF,$FE,$87,$D5,$55,$50,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$FF,$AF,$FD,$C7,$CF,$C0,$07,$8F,$D1,$01,$EB,$C0,$45,$F8,$F0
 $41C0 DEFB $00,$0F,$9F,$FE,$FF,$8F,$D5,$55,$50,$00,$01,$C0,$1C,$00,$00,$3F,$FF,$AF,$EE,$FD,$E1,$DA,$C0,$00,$F8,$C8,$00,$41,$00,$09,$8F,$80
 $41E0 DEFB $00,$01,$FF,$8C,$DF,$FF,$1F,$B5,$54,$00,$03,$40,$16,$00,$01,$FF,$B7,$55,$FF,$EF,$FF,$FE,$00,$1F,$E6,$FA,$80,$14,$00,$AF,$B3,$FC
 $4200 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4220 DEFB $00,$02,$AA,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$00,$00,$A1,$40,$2A,$81,$4A,$05,$28,$08
 $4240 DEFB $01,$E3,$F2,$AA,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$3F,$FE,$00,$A0,$B0,$D0,$00,$0A,$05,$28,$14
 $4260 DEFB $00,$7F,$C7,$F2,$A8,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FC,$FF,$3F,$97,$F8,$00,$01,$9F,$BF,$FF,$FE,$CC,$C0,$00
 $4280 DEFB $00,$03,$FF,$9D,$6A,$AA,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$5B,$D5,$FF,$00,$00,$8C,$FA,$BD,$AA,$DD,$AF,$98,$80
 $42A0 DEFB $00,$0F,$E7,$FE,$C3,$EA,$AA,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$5F,$FD,$E3,$9F,$C0,$07,$B3,$A5,$00,$2A,$00,$52,$E6,$F0
 $42C0 DEFB $00,$0F,$0B,$FE,$FF,$E7,$EA,$AA,$A8,$00,$01,$C0,$14,$00,$00,$7F,$FF,$5F,$92,$FD,$F0,$F5,$C0,$1F,$F0,$F1,$00,$22,$00,$47,$87,$FC
 $42E0 DEFB $00,$00,$FF,$07,$EF,$FF,$8F,$DA,$AA,$00,$03,$40,$16,$00,$01,$FF,$6F,$7D,$FF,$DF,$FF,$FC,$00,$0F,$FE,$D5,$00,$14,$00,$55,$BF,$F8
 $4300 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4320 DEFB $00,$39,$55,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FE,$70,$00,$A1,$40,$2A,$82,$4A,$05,$27,$80
 $4340 DEFB $01,$F1,$F9,$55,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FE,$7F,$FE,$00,$A0,$8F,$01,$BE,$C1,$F9,$27,$E4
 $4360 DEFB $00,$7F,$E3,$F9,$51,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$7E,$7F,$A5,$F8,$00,$03,$CB,$BA,$FF,$AE,$D9,$E0,$00
 $4380 DEFB $00,$03,$FF,$8F,$75,$55,$54,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FE,$BB,$A3,$FF,$00,$01,$E3,$FD,$4F,$2A,$7F,$5F,$E3,$C0
 $43A0 DEFB $00,$1F,$F7,$FE,$C1,$F5,$55,$54,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FE,$BF,$FD,$C7,$BF,$E0,$01,$F6,$E0,$80,$00,$00,$83,$B7,$C0
 $43C0 DEFB $00,$0F,$C1,$FF,$7F,$C7,$F5,$55,$50,$00,$01,$40,$14,$00,$00,$7F,$FE,$BF,$8D,$FB,$EA,$D8,$C0,$1F,$F0,$0F,$CE,$22,$39,$78,$07,$FC
 $43E0 DEFB $00,$00,$7F,$03,$F3,$FF,$C7,$DD,$54,$00,$03,$40,$16,$00,$03,$FE,$DF,$5F,$FF,$3F,$FF,$F8,$00,$0F,$E6,$BC,$80,$36,$00,$DE,$B3,$F8
 $4400 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4420 DEFB $00,$7C,$AA,$AA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FC,$F8,$00,$A1,$40,$2A,$84,$8A,$05,$10,$70
 $4440 DEFB $01,$F9,$FC,$AA,$AA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FC,$FF,$FE,$00,$A0,$60,$0F,$BE,$F8,$02,$10,$08
 $4460 DEFB $00,$3F,$F1,$FC,$82,$AA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$8C,$FF,$D5,$F0,$00,$05,$E3,$CA,$C9,$A9,$83,$D0,$00
 $4480 DEFB $00,$01,$FF,$C7,$7A,$AA,$AA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FD,$7B,$C1,$FE,$00,$01,$B1,$FE,$8D,$5D,$58,$BF,$C6,$C0
 $44A0 DEFB $00,$1F,$FF,$FE,$F0,$FA,$AA,$AA,$00,$00,$01,$00,$04,$00,$00,$01,$FF,$FD,$7F,$FD,$AB,$FF,$E0,$0E,$3F,$B9,$80,$00,$00,$CE,$FE,$38
 $44C0 DEFB $00,$07,$E1,$FF,$7F,$E3,$F6,$AA,$A8,$00,$01,$40,$14,$00,$00,$FF,$FD,$BF,$47,$FB,$D4,$75,$80,$1F,$FF,$FE,$31,$14,$46,$3F,$FF,$FC
 $44E0 DEFB $00,$00,$3F,$80,$FD,$FF,$E3,$EE,$AA,$00,$03,$40,$16,$00,$03,$FD,$BF,$83,$FE,$FF,$FF,$F0,$00,$0E,$3F,$B9,$C0,$55,$01,$9E,$FE,$38
 $4500 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$FE,$1F,$81,$FE,$04,$02,$0F,$F0
 $4520 DEFB $00,$7E,$55,$55,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$FF,$F9,$F8,$00,$A1,$40,$2A,$89,$0A,$05,$0F,$08
 $4540 DEFB $01,$FF,$FE,$55,$55,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$FF,$F9,$FF,$FE,$00,$40,$18,$EF,$BE,$FB,$9C,$0F,$F0
 $4560 DEFB $00,$1F,$78,$FE,$55,$55,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$FF,$ED,$FF,$63,$E0,$00,$0E,$A6,$DF,$88,$FD,$B2,$B8,$00
 $4580 DEFB $00,$03,$FF,$E3,$7D,$55,$55,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$FF,$FA,$FB,$23,$FF,$00,$01,$E4,$9E,$26,$9C,$BE,$3C,$93,$C0
 $45A0 DEFB $00,$1F,$FF,$FE,$F8,$FD,$55,$55,$00,$00,$01,$80,$0C,$00,$00,$03,$FF,$FA,$FF,$FD,$CD,$FF,$E0,$0F,$E6,$BC,$80,$00,$00,$9E,$B3,$F8
 $45C0 DEFB $00,$07,$F0,$FF,$7F,$B1,$FB,$55,$54,$00,$01,$40,$14,$00,$00,$FF,$FB,$7F,$E1,$FB,$FB,$BE,$80,$1F,$F0,$0F,$0E,$94,$B8,$78,$07,$FC
 $45E0 DEFB $00,$00,$1F,$E0,$F8,$7F,$77,$EF,$54,$00,$03,$40,$16,$00,$03,$FB,$BF,$C5,$F8,$7F,$FF,$E0,$00,$01,$F6,$E0,$80,$00,$00,$97,$B7,$C0
 $4600 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$06,$00,$00,$10,$01,$60,$62,$01,$0A,$05,$10,$08
 $4620 DEFB $00,$FF,$2A,$AA,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$FF,$F3,$FC,$00,$A1,$40,$2A,$92,$0A,$05,$00,$E4
 $4640 DEFB $01,$FF,$FF,$2A,$AA,$88,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$FF,$F3,$FF,$FE,$00,$00,$02,$EF,$BE,$FB,$A0,$00,$00
 $4660 DEFB $00,$1F,$3C,$FF,$0A,$AA,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$FF,$E7,$FF,$D5,$E0,$00,$17,$52,$FF,$88,$FF,$65,$74,$00
 $4680 DEFB $00,$06,$7F,$F3,$7E,$AA,$AA,$80,$00,$00,$00,$00,$00,$00,$00,$00,$07,$FF,$F5,$FB,$85,$F9,$80,$03,$FF,$2F,$01,$9C,$C0,$7A,$7F,$E0
 $46A0 DEFB $00,$0F,$FF,$FE,$FE,$FE,$AA,$AA,$80,$00,$01,$80,$0C,$00,$00,$07,$FF,$F5,$FF,$FD,$EF,$FF,$C0,$0F,$FE,$D5,$3E,$00,$3E,$55,$BF,$F8
 $46C0 DEFB $00,$07,$FC,$FF,$7F,$D8,$FD,$AA,$A8,$00,$01,$40,$16,$00,$00,$FF,$F6,$FF,$90,$FB,$FD,$DF,$80,$1F,$F0,$F1,$00,$55,$00,$47,$87,$FC
 $46E0 DEFB $00,$00,$1F,$78,$FB,$BF,$23,$F7,$2A,$00,$03,$45,$16,$00,$03,$F7,$7F,$C3,$F7,$7F,$FF,$E0,$00,$07,$B3,$A5,$60,$00,$03,$55,$E6,$F0
 $4700 DEFB $00,$00,$05,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$C0,$00,$0F,$BE,$8F,$12,$FC,$8A,$05,$27,$E4
 $4720 DEFB $00,$FF,$95,$55,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$FF,$E7,$FC,$00,$A1,$40,$2A,$89,$0A,$05,$00,$14
 $4740 DEFB $00,$FF,$FF,$95,$55,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$8F,$FF,$E7,$FF,$FC,$00,$00,$1E,$77,$3E,$77,$30,$00,$00
 $4760 DEFB $00,$0F,$9E,$FF,$95,$55,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$FF,$E7,$FF,$FF,$C0,$00,$3B,$9B,$68,$88,$8B,$6C,$EE,$00
 $4780 DEFB $00,$0F,$3F,$FF,$FF,$55,$55,$40,$00,$00,$00,$00,$00,$00,$00,$00,$0F,$FF,$EB,$FF,$CB,$F3,$C0,$00,$F9,$93,$EA,$BE,$B3,$E4,$CF,$80
 $47A0 DEFB $00,$0F,$FF,$FE,$FE,$FF,$55,$55,$40,$00,$01,$80,$0C,$00,$00,$0F,$FF,$EB,$FF,$FD,$A7,$FF,$C0,$1F,$E6,$FA,$41,$00,$41,$2F,$B3,$FC
 $47C0 DEFB $00,$03,$FE,$FF,$BF,$F9,$FE,$D5,$54,$00,$03,$40,$16,$00,$00,$FF,$ED,$FF,$B9,$F7,$FF,$FF,$00,$00,$F8,$C8,$00,$14,$00,$09,$8F,$80
 $47E0 DEFB $00,$00,$0F,$BC,$F7,$DF,$EA,$F7,$94,$00,$03,$4E,$96,$00,$03,$EF,$7F,$65,$EF,$BF,$FF,$C0,$00,$07,$8F,$D1,$E0,$00,$03,$C6,$78,$F0
 $4800 DEFB $00,$00,$07,$FF,$F7,$EF,$E6,$F7,$AA,$00,$03,$6F,$36,$00,$03,$EF,$FB,$FF,$DF,$BF,$FF,$80,$00,$06,$3E,$29,$D0,$7F,$05,$CA,$9E,$30
 $4820 DEFB $00,$00,$00,$07,$FB,$FE,$FF,$FD,$E8,$00,$03,$6F,$B6,$00,$01,$BD,$61,$FD,$FF,$7F,$80,$00,$00,$00,$3D,$FD,$7F,$EB,$7F,$5F,$DE,$00
 $4840 DEFB $00,$00,$00,$FF,$FF,$7E,$9F,$FB,$C0,$00,$02,$CD,$9A,$00,$00,$5E,$FF,$FD,$FB,$FF,$FC,$00,$00,$00,$00,$3F,$77,$FF,$F7,$7E,$00,$00
 $4860 DEFB $00,$00,$00,$7F,$DD,$FB,$8D,$EF,$00,$00,$00,$FF,$F8,$00,$00,$17,$BF,$FF,$7F,$FF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4880 DEFB $00,$00,$00,$00,$FF,$F7,$3E,$F6,$AA,$F0,$00,$6F,$B0,$00,$BF,$FB,$7F,$FF,$BF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $48A0 DEFB $00,$00,$00,$03,$FF,$7F,$7F,$FF,$9F,$FF,$CD,$FF,$FD,$9F,$FF,$8F,$FF,$FB,$FA,$AB,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $48C0 DEFB $00,$00,$01,$C0,$00,$7E,$FF,$FF,$87,$F0,$3E,$BF,$E3,$FF,$FE,$1F,$FF,$F8,$F8,$00,$14,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $48E0 DEFB $00,$00,$00,$1F,$FF,$FF,$7D,$00,$43,$E0,$55,$4F,$80,$8F,$80,$17,$C0,$04,$1F,$FF,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4900 DEFB $00,$00,$03,$FF,$F7,$F7,$C2,$FB,$D4,$00,$03,$6E,$B6,$00,$03,$DE,$B5,$FF,$BF,$BF,$FF,$00,$00,$00,$F9,$93,$E8,$80,$8B,$E4,$E7,$80
 $4920 DEFB $00,$00,$00,$0F,$FB,$FF,$7F,$FD,$E4,$00,$03,$4F,$96,$00,$01,$BD,$E0,$FB,$FF,$7F,$C0,$00,$00,$00,$3B,$9B,$68,$88,$8B,$6C,$EE,$00
 $4940 DEFB $00,$00,$00,$FF,$BF,$9E,$CF,$F7,$D0,$00,$02,$CF,$9A,$00,$00,$5F,$7F,$FD,$E7,$FF,$FC,$00,$00,$00,$00,$1E,$77,$3E,$77,$3C,$00,$00
 $4960 DEFB $00,$00,$00,$3F,$CF,$FB,$CF,$EF,$40,$00,$00,$FF,$F8,$00,$00,$17,$BF,$55,$7F,$FF,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4980 DEFB $00,$00,$00,$00,$7F,$F7,$0F,$F6,$55,$F7,$FF,$EF,$BF,$FF,$BF,$FB,$7F,$FF,$BF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $49A0 DEFB $00,$00,$00,$05,$FF,$BF,$BF,$FF,$E0,$00,$05,$FF,$FD,$00,$00,$7F,$FF,$F7,$F5,$5C,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $49C0 DEFB $00,$00,$01,$BF,$FF,$FE,$00,$00,$40,$00,$7E,$00,$04,$00,$01,$00,$00,$04,$7F,$FF,$E8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $49E0 DEFB $00,$00,$00,$0F,$FF,$FF,$7F,$FF,$C3,$E0,$2A,$8F,$81,$0F,$80,$37,$FF,$FC,$1F,$FF,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4A00 DEFB $00,$00,$01,$FF,$F7,$FB,$E7,$FB,$CA,$00,$03,$65,$36,$00,$03,$DE,$5A,$FF,$7F,$BF,$FE,$00,$00,$03,$FF,$2F,$00,$3E,$00,$7A,$71,$E0
 $4A20 DEFB $00,$00,$00,$19,$FB,$FF,$7F,$FD,$E8,$00,$03,$5F,$D6,$00,$01,$BD,$70,$FB,$FF,$7E,$60,$00,$00,$00,$17,$52,$FF,$88,$FF,$A5,$74,$00
 $4A40 DEFB $00,$00,$00,$FF,$9F,$E1,$C3,$F7,$C0,$00,$3F,$67,$37,$E0,$00,$1F,$7F,$FE,$1F,$FF,$FC,$00,$00,$00,$00,$02,$EF,$BE,$FB,$A0,$00,$00
 $4A60 DEFB $00,$00,$00,$1F,$C7,$FB,$E7,$EF,$20,$00,$00,$7F,$F0,$00,$00,$37,$BF,$FF,$7F,$FF,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4A80 DEFB $00,$00,$00,$00,$3F,$F7,$0F,$F6,$AB,$F0,$00,$07,$00,$00,$7F,$FB,$7F,$FF,$BF,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4AA0 DEFB $00,$00,$00,$0B,$FF,$BF,$FF,$FF,$FF,$FF,$E6,$FF,$FF,$3F,$FF,$FF,$FF,$FF,$F2,$BF,$40,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4AC0 DEFB $00,$00,$03,$7F,$FF,$FE,$FF,$FF,$C7,$F0,$7F,$5F,$C7,$FF,$FF,$0F,$FF,$FC,$3F,$FF,$F4,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4AE0 DEFB $00,$00,$00,$07,$FF,$FF,$7F,$FF,$C3,$E0,$55,$4F,$80,$AF,$80,$37,$FF,$FC,$1F,$FF,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4B00 DEFB $00,$00,$00,$FF,$F7,$FD,$EF,$FB,$D4,$00,$03,$60,$36,$00,$03,$DE,$B5,$FE,$FF,$BF,$FC,$00,$00,$01,$E4,$9E,$24,$00,$12,$3C,$94,$40
 $4B20 DEFB $00,$00,$00,$3C,$FB,$FF,$7F,$FD,$E4,$00,$03,$67,$36,$00,$01,$BD,$B9,$FB,$FF,$7C,$F0,$00,$00,$00,$0E,$A6,$DF,$88,$FD,$B2,$B8,$00
 $4B40 DEFB $00,$00,$00,$FF,$8F,$FD,$F1,$F7,$A0,$00,$1F,$A7,$2F,$C0,$00,$2F,$7F,$FE,$FF,$FF,$FC,$00,$00,$00,$00,$00,$EF,$BE,$FB,$80,$00,$00
 $4B60 DEFB $00,$00,$00,$1F,$E3,$FB,$F5,$EE,$50,$00,$00,$15,$40,$00,$00,$7B,$BF,$77,$7F,$FF,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4B80 DEFB $00,$00,$00,$00,$1F,$FB,$81,$FB,$55,$FF,$DB,$F2,$7E,$DF,$FF,$F6,$FF,$FF,$7F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4BA0 DEFB $00,$00,$00,$1B,$FF,$DF,$FF,$FF,$FB,$FF,$F2,$FF,$F3,$7F,$FC,$FF,$FF,$DF,$E5,$7E,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4BC0 DEFB $00,$00,$02,$FF,$FF,$FF,$7F,$FF,$C3,$E0,$7F,$2F,$87,$FF,$FF,$07,$FF,$FC,$1F,$FF,$FA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4BE0 DEFB $00,$00,$00,$03,$FF,$FF,$7F,$FF,$C3,$E0,$00,$0F,$81,$2F,$81,$B7,$FF,$FC,$1F,$FF,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4C00 DEFB $00,$00,$00,$7F,$F7,$FD,$E3,$FB,$EA,$00,$03,$62,$36,$00,$03,$BE,$99,$FE,$FF,$BF,$F8,$00,$00,$01,$B1,$FE,$8C,$00,$18,$BF,$C7,$00
 $4C20 DEFB $00,$00,$00,$3E,$7D,$FF,$7F,$FB,$E8,$00,$03,$37,$66,$00,$00,$BE,$78,$FB,$FE,$F9,$F0,$00,$00,$00,$05,$E3,$CA,$C9,$A9,$E3,$D0,$00
 $4C40 DEFB $00,$00,$00,$FF,$C7,$FD,$F9,$F7,$80,$00,$03,$B7,$6E,$00,$00,$0F,$7F,$FE,$FF,$FF,$FC,$00,$00,$00,$00,$00,$0F,$BE,$F8,$00,$00,$00
 $4C60 DEFB $00,$00,$00,$0F,$F1,$F7,$F5,$EE,$A8,$01,$FF,$15,$43,$FE,$00,$FB,$BF,$DD,$BF,$FF,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4C80 DEFB $00,$00,$00,$00,$0F,$FB,$81,$FB,$2B,$FF,$DC,$18,$C1,$DF,$FF,$E6,$FF,$FF,$7F,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4CA0 DEFB $00,$00,$00,$37,$FF,$DF,$E0,$00,$02,$00,$F3,$60,$34,$00,$02,$00,$00,$2F,$EA,$AF,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4CC0 DEFB $00,$00,$01,$FF,$FF,$FF,$7F,$FF,$C3,$E0,$7F,$AF,$87,$FF,$FF,$07,$FF,$FC,$1F,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4CE0 DEFB $00,$00,$00,$00,$00,$00,$7F,$FF,$C3,$E0,$FF,$8F,$80,$2F,$80,$37,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4D00 DEFB $00,$00,$00,$3F,$F7,$FE,$F3,$FD,$E4,$00,$03,$67,$36,$00,$03,$BD,$87,$FD,$FF,$BF,$F0,$00,$00,$01,$E3,$FD,$4E,$00,$39,$5F,$E3,$80
 $4D20 DEFB $00,$00,$00,$7F,$3D,$FE,$FF,$FB,$E4,$00,$03,$7A,$F6,$00,$00,$BE,$AC,$FD,$FE,$F3,$F8,$00,$00,$00,$03,$CB,$BA,$FF,$AE,$E9,$E0,$00
 $4D40 DEFB $00,$00,$00,$FF,$E3,$FD,$78,$F7,$C0,$00,$01,$D7,$5C,$00,$00,$1F,$7F,$FE,$FF,$FF,$FC,$00,$00,$00,$00,$00,$01,$BE,$C0,$00,$00,$00
 $4D60 DEFB $00,$00,$00,$07,$F8,$F7,$FD,$EE,$55,$5B,$FF,$95,$47,$FF,$7F,$FB,$BF,$FF,$BF,$FF,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4D80 DEFB $00,$00,$00,$00,$07,$FD,$80,$FD,$97,$FF,$DF,$FF,$FF,$DF,$FF,$CD,$FF,$FE,$FF,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4DA0 DEFB $00,$00,$00,$77,$FF,$DF,$DF,$FF,$F0,$FE,$F9,$4F,$97,$FF,$FE,$7F,$FF,$F7,$E5,$5F,$A0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4DC0 DEFB $00,$00,$00,$00,$00,$00,$7F,$FF,$C3,$E0,$00,$2F,$87,$FF,$FF,$07,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4DE0 DEFB $00,$00,$00,$00,$00,$00,$7F,$FF,$C3,$E1,$FF,$0F,$80,$2F,$80,$37,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4E00 DEFB $00,$00,$00,$1F,$F7,$FE,$F7,$FD,$EA,$00,$03,$67,$36,$00,$03,$BD,$C3,$FD,$FF,$BF,$E0,$00,$00,$00,$8C,$FA,$BD,$00,$5E,$AF,$98,$80
 $4E20 DEFB $00,$00,$00,$7F,$FE,$FE,$FF,$FB,$C8,$00,$03,$1A,$C6,$00,$00,$DE,$D5,$FD,$FD,$FF,$F8,$00,$00,$00,$01,$9F,$BF,$FF,$FE,$FC,$C0,$00
 $4E40 DEFB $00,$00,$00,$7F,$F1,$FD,$3D,$EF,$00,$00,$01,$DF,$DC,$00,$00,$17,$BF,$FE,$FF,$FF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4E60 DEFB $00,$00,$00,$03,$FC,$F7,$B9,$EE,$AA,$BB,$FF,$DF,$CF,$FF,$BF,$FB,$BF,$77,$BF,$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4E80 DEFB $00,$00,$00,$00,$01,$FE,$E1,$FE,$CF,$FF,$CB,$FD,$FE,$9F,$FF,$3B,$FF,$FD,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4EA0 DEFB $00,$00,$00,$EF,$FF,$DF,$BF,$FF,$E1,$FC,$7D,$DF,$D7,$FF,$FF,$3F,$FF,$FB,$EA,$BF,$D0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4EC0 DEFB $00,$00,$00,$00,$00,$00,$7C,$00,$43,$E0,$00,$0F,$84,$0F,$81,$17,$C0,$04,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4EE0 DEFB $00,$00,$00,$00,$7F,$FF,$7C,$00,$43,$E3,$FE,$0F,$81,$AF,$81,$B7,$C0,$04,$1F,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4F00 DEFB $00,$00,$00,$0F,$F7,$FE,$EB,$FD,$E4,$00,$03,$67,$36,$00,$03,$BD,$A1,$FD,$FF,$BF,$C0,$00,$00,$00,$1A,$F8,$53,$80,$E5,$0F,$AC,$00
 $4F20 DEFB $00,$00,$00,$7F,$FE,$FE,$FF,$FB,$D0,$00,$02,$9D,$CA,$00,$00,$5E,$BF,$FD,$FD,$FF,$F8,$00,$00,$00,$00,$17,$17,$FF,$F4,$74,$00,$00
 $4F40 DEFB $00,$00,$00,$7F,$F9,$FD,$9C,$EF,$40,$00,$01,$FF,$FC,$00,$00,$17,$BF,$FE,$FF,$FF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4F60 DEFB $00,$00,$00,$01,$FE,$F7,$1C,$EE,$55,$77,$FF,$DF,$DF,$FF,$BF,$FB,$BF,$DD,$BF,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4F80 DEFB $00,$00,$00,$00,$00,$FE,$F9,$FF,$70,$00,$0B,$FF,$FE,$80,$00,$F7,$FF,$FD,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4FA0 DEFB $00,$00,$00,$EF,$FF,$BF,$7F,$FF,$C3,$F8,$7C,$BF,$E7,$FF,$FF,$3F,$FF,$FD,$F5,$7F,$E8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4FC0 DEFB $00,$00,$00,$3F,$FF,$FF,$7C,$00,$03,$E0,$2A,$8F,$81,$0F,$80,$17,$C0,$00,$1F,$FF,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $4FE0 DEFB $00,$00,$00,$00,$3F,$FF,$7C,$00,$03,$E7,$FE,$0F,$81,$AF,$81,$B7,$C0,$00,$1F,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5000 DEFB $00,$00,$00,$00,$1F,$FF,$7D,$00,$43,$E0,$01,$0F,$81,$AF,$81,$B7,$C0,$04,$1F,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5020 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5040 DEFB $00,$00,$00,$00,$00,$00,$01,$80,$00,$00,$7E,$BF,$F5,$F8,$00,$00,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5060 DEFB $00,$00,$00,$00,$00,$00,$00,$1F,$FC,$AA,$BF,$EA,$BF,$F5,$54,$FF,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5080 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$AB,$FC,$FE,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$4F,$FF,$EA,$BA,$AF,$FF,$E5,$00
 $50A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$AF,$D4,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$64,$80,$00,$92,$00,$02,$4C,$00
 $50C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FC,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$00,$08,$00,$0C,$00
 $50E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5100 DEFB $00,$00,$00,$00,$0F,$FF,$7F,$FF,$C3,$FF,$FF,$0F,$81,$AF,$81,$77,$FF,$FC,$1F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5120 DEFB $00,$00,$00,$00,$00,$0F,$F8,$00,$01,$E0,$00,$00,$00,$7F,$81,$FF,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5140 DEFB $00,$00,$00,$00,$00,$00,$03,$00,$00,$00,$FD,$7F,$FA,$FC,$00,$00,$01,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5160 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$22,$00,$7F,$D7,$5F,$F8,$01,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5180 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$57,$FB,$7F,$50,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$3F,$FF,$FA,$BA,$BF,$FF,$F9,$00
 $51A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$AF,$D4,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$49,$00,$00,$FE,$00,$01,$24,$00
 $51C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$F0,$3C,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$08,$01,$01,$01,$00,$20,$04,$00
 $51E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5200 DEFB $00,$00,$00,$00,$07,$FF,$7F,$FF,$C3,$FF,$FF,$0F,$81,$2F,$81,$77,$FF,$FC,$1F,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5220 DEFB $00,$00,$00,$00,$00,$07,$F0,$00,$01,$E0,$00,$00,$00,$3F,$00,$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5240 DEFB $00,$00,$00,$00,$00,$00,$06,$00,$00,$01,$FA,$FF,$FD,$7E,$00,$00,$00,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5260 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$45,$FF,$FF,$AF,$AF,$FF,$FE,$84,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$00,$00,$02,$00,$00
 $5280 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$AF,$F4,$BF,$A8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FB,$FF,$BF,$FF,$FE,$00
 $52A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$5F,$EA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$49,$00,$00,$7C,$00,$01,$24,$00
 $52C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$C0,$0E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$6F,$EF,$EF,$ED,$FD,$FC,$00
 $52E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$07,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5300 DEFB $00,$00,$00,$00,$03,$FF,$7F,$FF,$C3,$FF,$FF,$0F,$81,$6F,$81,$77,$FF,$FC,$1F,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5320 DEFB $00,$00,$00,$00,$00,$03,$FF,$FF,$FD,$EF,$FF,$F3,$BF,$FF,$FF,$FF,$FF,$FF,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5340 DEFB $00,$00,$00,$00,$00,$00,$03,$FF,$FF,$FF,$F5,$FF,$FE,$BF,$FF,$FF,$FF,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5360 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$AB,$FF,$FF,$5F,$D7,$FF,$FF,$52,$00,$00,$00,$00,$00,$00,$00,$00,$00,$90,$00,$00,$00,$12,$00,$00
 $5380 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$5F,$F4,$BF,$D0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$FB,$FF,$BF,$FF,$FC,$00
 $53A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$5F,$EA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$49,$00,$00,$7C,$00,$01,$24,$00
 $53C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$07,$82,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$20,$08,$28,$05,$04,$00
 $53E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5400 DEFB $00,$00,$00,$00,$01,$FE,$FF,$FF,$C7,$FF,$FF,$0F,$81,$AF,$81,$AF,$FF,$FC,$1F,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5420 DEFB $00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$EB,$5F,$FF,$FF,$FF,$FF,$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5440 DEFB $00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$EB,$FF,$FF,$5F,$FF,$FF,$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5460 DEFB $00,$00,$00,$00,$00,$00,$00,$01,$87,$FF,$FE,$BF,$EB,$FF,$FF,$83,$00,$00,$00,$00,$00,$00,$00,$00,$05,$DA,$00,$00,$00,$B7,$40,$00
 $5480 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$BF,$EB,$5F,$E8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$FB,$FF,$BF,$FF,$FC,$00
 $54A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$BF,$F4,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$49,$00,$00,$38,$00,$01,$24,$00
 $54C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$4F,$CF,$EF,$E9,$F9,$24,$00
 $54E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5500 DEFB $00,$00,$00,$00,$00,$FE,$FF,$FF,$C7,$FF,$FF,$1F,$C1,$DF,$C1,$CF,$FF,$FC,$1E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5520 DEFB $00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$FF,$D7,$AF,$FF,$FF,$FF,$FF,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5540 DEFB $00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$D7,$FD,$FF,$AF,$FF,$FF,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5560 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FD,$7F,$F5,$FF,$FF,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$15,$DB,$40,$10,$05,$B7,$50,$00
 $5580 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7F,$EB,$5F,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FE,$00,$00,$00,$00
 $55A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$BF,$F4,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$38,$00,$00,$00,$00
 $55C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$E0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$49,$08,$08,$29,$21,$04,$00
 $55E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5600 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$01,$00,$01,$E0,$01,$E0,$00,$04,$1C,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5620 DEFB $00,$00,$00,$00,$00,$00,$7F,$FF,$FF,$FF,$FF,$AF,$D7,$FF,$FF,$FF,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5640 DEFB $00,$00,$00,$00,$00,$00,$00,$7F,$FF,$FF,$AF,$FA,$FF,$D7,$FF,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5660 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$7F,$FF,$FA,$FF,$FA,$FF,$FF,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$17,$FF,$40,$54,$05,$FF,$D0,$00
 $5680 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$D7,$AF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7C,$00,$00,$00,$00
 $56A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$7F,$FA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00
 $56C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$48,$88,$28,$29,$11,$0C,$00
 $56E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5700 DEFB $00,$00,$00,$00,$00,$3F,$F0,$00,$01,$C0,$00,$00,$01,$FE,$01,$FF,$00,$00,$18,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5720 DEFB $00,$00,$00,$00,$00,$00,$3F,$FF,$FF,$FF,$FF,$5F,$EB,$FF,$FF,$FF,$FF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5740 DEFB $00,$00,$00,$00,$00,$00,$00,$3F,$FE,$00,$5F,$F5,$7F,$E8,$01,$FF,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $5760 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$05,$FF,$FD,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$5B,$FF,$E9,$BB,$2F,$FF,$B4,$00
 $5780 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$57,$AA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$1F,$FF,$FF,$39,$FF,$FF,$F0,$00
 $57A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$7F,$FA,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00
 $57C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$3F,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$21,$28,$67,$EF,$C5,$0C,$F4,$00
 $57E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

; attributes
@label=zx_attrs
b$5800 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07
 $5820 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$07,$07,$07,$07,$07,$07,$07,$07
 $5840 DEFB $06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$07,$07,$07,$07,$07,$07,$07,$07
 $5860 DEFB $06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$07,$07,$17,$07,$1F,$07,$17,$07,$07
 $5880 DEFB $06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$07,$07,$17,$17,$17,$17,$07,$07,$07
 $58A0 DEFB $06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$07,$07,$17,$17,$17,$17,$17,$07,$07
 $58C0 DEFB $06,$06,$36,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$36,$36,$06,$07,$1F,$17,$17,$17,$17,$17,$1F,$07
 $58E0 DEFB $06,$06,$06,$36,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$07,$07,$17,$17,$17,$17,$17,$07,$07
 $5900 DEFB $06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$07,$17,$17,$17,$17,$17,$17,$17,$07
 $5920 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$07,$07,$17,$07,$1F,$07,$17,$07,$07
 $5940 DEFB $06,$06,$06,$06,$36,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$05,$07,$07,$07,$07,$07,$07,$07
 $5960 DEFB $06,$06,$06,$06,$36,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$07,$05,$05,$05,$05,$05,$05,$05,$07
 $5980 DEFB $06,$06,$06,$06,$06,$06,$36,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$06,$06,$05,$06,$06,$06,$06,$07
 $59A0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$06,$06,$05,$06,$06,$06,$06,$07
 $59C0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$06,$06,$06,$06,$06,$06,$06,$07
 $59E0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$06,$06,$05,$05,$06,$06,$06,$07
 $5A00 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$05,$05,$05,$05,$05,$05,$05,$07
 $5A20 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$05,$05,$05,$05,$05,$05,$05,$07
 $5A40 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$05,$05,$05,$05,$05,$05,$05,$07
 $5A60 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$02,$02,$02,$02,$02,$02,$02,$02,$07
 $5A80 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$02,$02,$02,$02,$02,$02,$02,$02,$07
 $5AA0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$02,$02,$02,$02,$02,$02,$02,$02,$07
 $5AC0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$07,$07,$07,$07,$07,$07,$07,$07
 $5AE0 DEFB $06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$06,$07,$07,$07,$07,$07,$07,$07,$07,$07

; printer buffer
@label=ctrl_panel_attrs
b$5B00 DEFB $07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07
 $5B20 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$00,$00,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07
 $5B40 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$00,$00,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07
 $5B60 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07
 $5B80 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07
 $5BA0 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07
 $5BC0 DEFB $07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$00
 $5BE0 DEFB $07,$07,$07,$17,$17,$17,$17,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$07,$17,$17,$17,$17,$17,$07,$07,$00

; system variables
b$5C00 DEFB $FF,$00,$1F,$20,$0D,$05,$20,$0D
 $5C08 DEFB $0D,$23,$05,$00,$00,$00,$10,$00
 $5C10 DEFB $01,$00,$06,$00,$0B,$00,$01,$00
 $5C18 DEFB $01,$00,$06,$00,$10,$00,$00,$00
 $5C20 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5C28 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5C30 DEFB $00,$00,$00,$00,$00,$00,$00,$3C
 $5C38 DEFB $40,$00,$FF,$CC,$01,$00,$00,$8D
 $5C40 DEFB $65,$00,$00,$00,$FF,$FE,$FF,$01
 $5C48 DEFB $07,$00,$00,$05,$5D,$00,$00,$F0
 $5C50 DEFB $5C,$F0,$5C,$05,$5D,$14,$5D,$04
 $5C58 DEFB $5D,$06,$5D,$0D,$5D,$13,$5D,$13
 $5C60 DEFB $00,$15,$5D,$15,$5D,$15,$5D,$2D
 $5C68 DEFB $92,$5C,$10,$02,$00,$00,$FE,$FF
 $5C70 DEFB $01,$00,$00,$00,$B6,$1A,$00,$00
 $5C78 DEFB $C7,$22,$00,$58,$FF,$00,$00,$21
 $5C80 DEFB $00,$5B,$21,$17,$00,$40,$E0,$50
 $5C88 DEFB $21,$18,$21,$17,$01,$07,$00,$07
 $5C90 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5C98 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5CA0 DEFB $00,$04,$00,$00,$00,$00,$00,$00
 $5CA8 DEFB $00,$00,$00,$01,$01,$00,$00,$00
 $5CB0 DEFB $00,$00,$90,$65,$FF,$FF,$00,$F0
 $5CB8 DEFB $01,$21,$53,$05,$CD,$7B,$00,$22

; reserved
b$5CC0 DEFB $BA,$5C,$C9,$0C,$00,$01,$00,$00
 $5CC8 DEFB $00,$12,$16

; available
b$5CCB DEFB $07,$5D,$FF,$FF,$FF,$FF,$FF,$FF
 $5CD3 DEFB $FF,$FF,$FF,$01,$00,$FF,$4D,$03
 $5CDB DEFB $00,$88,$5F,$03,$00,$00,$00,$00
 $5CE3 DEFB $FF,$00,$00,$03,$00,$00,$50,$C3
 $5CEB DEFB $00,$80,$98,$DE,$01,$F4,$09,$A8
 $5CF3 DEFB $10,$4B,$F4,$09,$C4,$15,$53,$81
 $5CFB DEFB $0F,$C4,$15,$52,$F4,$09,$C4,$15
 $5D03 DEFB $50,$80,$80,$F9,$C0,$35,$30,$30
 $5D0B DEFB $30,$30,$0E,$00,$00,$50,$C3,$00
 $5D13 DEFB $0D,$80,$00,$00,$50,$C3,$00,$00
 $5D1B DEFB $0A,$00,$00,$00,$00,$00,$00,$00
 $5D23 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D2B DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D33 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D3B DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D43 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D4B DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D53 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D5B DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D63 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D6B DEFB $00,$00,$00,$00,$00

; Font #HTML[#FONT$5D70,96]
@label=font
b$5D70 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5D78 DEFB $7F,$40,$40,$20,$20,$10,$0C,$03
 $5D80 DEFB $FE,$02,$02,$04,$04,$08,$30,$C0
 $5D88 DEFB $7F,$7F,$7F,$3F,$3F,$1F,$0F,$03
 $5D90 DEFB $FE,$FE,$FE,$FC,$FC,$F8,$F0,$C0
 $5D98 DEFB $00,$7E,$42,$42,$42,$7E,$00,$FF
 $5DA0 DEFB $00,$C0,$F0,$F8,$FC,$FC,$FE,$FE
 $5DA8 DEFB $00,$08,$10,$00,$00,$00,$00,$00
 $5DB0 DEFB $00,$10,$20,$20,$20,$20,$10,$00
 $5DB8 DEFB $00,$08,$04,$04,$04,$04,$08,$00
 $5DC0 DEFB $00,$10,$10,$10,$10,$00,$10,$00
 $5DC8 DEFB $01,$01,$01,$01,$01,$01,$01,$FF
 $5DD0 DEFB $00,$00,$00,$00,$00,$08,$08,$10
 $5DD8 DEFB $00,$00,$00,$00,$3E,$00,$00,$00
 $5DE0 DEFB $00,$00,$00,$00,$00,$18,$18,$00
 $5DE8 DEFB $00,$00,$02,$04,$08,$10,$20,$00
 $5DF0 DEFB $00,$3C,$62,$42,$42,$46,$3C,$00
 $5DF8 DEFB $00,$18,$08,$08,$08,$08,$1C,$00
 $5E00 DEFB $00,$7C,$02,$3C,$40,$40,$7E,$00
 $5E08 DEFB $00,$7C,$02,$1C,$02,$02,$7C,$00
 $5E10 DEFB $00,$44,$44,$7E,$04,$04,$04,$00
 $5E18 DEFB $00,$7E,$40,$7C,$02,$02,$7C,$00
 $5E20 DEFB $00,$3C,$40,$40,$7C,$42,$3C,$00
 $5E28 DEFB $00,$7C,$02,$02,$04,$04,$04,$00
 $5E30 DEFB $00,$3C,$42,$3C,$42,$42,$3C,$00
 $5E38 DEFB $00,$7C,$42,$3E,$02,$02,$02,$00
 $5E40 DEFB $00,$00,$00,$10,$00,$00,$10,$00
 $5E48 DEFB $00,$00,$1F,$1F,$18,$18,$18,$1F
 $5E50 DEFB $00,$00,$E0,$E0,$00,$00,$00,$C0
 $5E58 DEFB $18,$18,$18,$1F,$1F,$00,$00,$FF
 $5E60 DEFB $00,$00,$00,$E0,$E0,$00,$00,$FF
 $5E68 DEFB $00,$7E,$42,$06,$08,$00,$08,$00
 $5E70 DEFB $00,$00,$00,$00,$00,$00,$00,$FF
 $5E78 DEFB $00,$1E,$22,$42,$7E,$42,$42,$00
 $5E80 DEFB $00,$7C,$42,$42,$7C,$42,$7C,$00
 $5E88 DEFB $00,$7E,$42,$40,$40,$42,$7E,$00
 $5E90 DEFB $00,$78,$44,$42,$42,$42,$7E,$00
 $5E98 DEFB $00,$7E,$40,$40,$7C,$40,$7E,$00
 $5EA0 DEFB $00,$7E,$40,$40,$7C,$40,$40,$00
 $5EA8 DEFB $00,$7E,$42,$40,$4E,$42,$7E,$00
 $5EB0 DEFB $00,$42,$42,$42,$7E,$42,$42,$00
 $5EB8 DEFB $00,$7E,$10,$10,$10,$10,$7E,$00
 $5EC0 DEFB $00,$02,$02,$02,$42,$42,$7E,$00
 $5EC8 DEFB $00,$42,$42,$44,$78,$44,$42,$00
 $5ED0 DEFB $00,$40,$40,$40,$40,$40,$7E,$00
 $5ED8 DEFB $00,$42,$42,$66,$5A,$42,$42,$00
 $5EE0 DEFB $00,$42,$42,$62,$52,$4A,$46,$00
 $5EE8 DEFB $00,$7E,$42,$42,$42,$42,$7E,$00
 $5EF0 DEFB $00,$7E,$42,$42,$7C,$40,$40,$00
 $5EF8 DEFB $00,$7E,$42,$42,$4A,$44,$7A,$00
 $5F00 DEFB $00,$7E,$42,$44,$78,$44,$42,$00
 $5F08 DEFB $00,$7E,$42,$40,$7E,$02,$7E,$00
 $5F10 DEFB $00,$7E,$10,$10,$10,$10,$10,$00
 $5F18 DEFB $00,$42,$42,$42,$42,$42,$7E,$00
 $5F20 DEFB $00,$42,$42,$42,$42,$24,$18,$00
 $5F28 DEFB $00,$42,$42,$42,$42,$5A,$66,$00
 $5F30 DEFB $00,$42,$24,$18,$18,$24,$42,$00
 $5F38 DEFB $00,$42,$42,$42,$24,$18,$18,$00
 $5F40 DEFB $00,$7E,$04,$08,$10,$20,$7E,$00
 $5F48 DEFB $00,$00,$07,$07,$06,$06,$06,$07
 $5F50 DEFB $01,$01,$F1,$F1,$31,$01,$01,$F1
 $5F58 DEFB $00,$00,$06,$07,$07,$00,$00,$FF
 $5F60 DEFB $31,$31,$31,$F1,$F1,$01,$01,$FF
 $5F68 DEFB $01,$01,$01,$01,$01,$01,$01,$01
 $5F70 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $5F78 DEFB $00,$00,$38,$04,$3C,$44,$7C,$00
 $5F80 DEFB $00,$20,$20,$2E,$32,$22,$3C,$00
 $5F88 DEFB $00,$00,$1C,$20,$20,$20,$3C,$00
 $5F90 DEFB $00,$04,$04,$74,$4C,$44,$3C,$00
 $5F98 DEFB $00,$00,$3C,$44,$78,$40,$3C,$00
 $5FA0 DEFB $00,$1C,$20,$38,$20,$20,$20,$00
 $5FA8 DEFB $00,$00,$3C,$44,$4C,$74,$04,$78
 $5FB0 DEFB $00,$40,$40,$5C,$64,$44,$44,$00
 $5FB8 DEFB $00,$10,$00,$30,$10,$10,$08,$00
 $5FC0 DEFB $00,$04,$00,$0C,$04,$04,$24,$38
 $5FC8 DEFB $00,$20,$20,$2C,$30,$28,$24,$00
 $5FD0 DEFB $00,$10,$10,$10,$10,$10,$0C,$00
 $5FD8 DEFB $00,$00,$78,$54,$54,$54,$54,$00
 $5FE0 DEFB $00,$00,$70,$48,$44,$44,$44,$00
 $5FE8 DEFB $00,$00,$38,$44,$44,$44,$38,$00
 $5FF0 DEFB $00,$00,$78,$44,$64,$5C,$40,$40
 $5FF8 DEFB $00,$00,$3C,$44,$4C,$74,$04,$04
 $6000 DEFB $00,$00,$1C,$24,$20,$20,$20,$00
 $6008 DEFB $00,$00,$3C,$40,$7C,$04,$78,$00
 $6010 DEFB $00,$20,$38,$20,$20,$20,$18,$00
 $6018 DEFB $00,$00,$44,$44,$44,$44,$78,$00
 $6020 DEFB $00,$00,$44,$44,$48,$50,$60,$00
 $6028 DEFB $00,$00,$44,$54,$54,$54,$68,$00
 $6030 DEFB $00,$00,$44,$28,$10,$28,$44,$00
 $6038 DEFB $00,$00,$44,$44,$24,$1C,$04,$38
 $6040 DEFB $00,$00,$7C,$08,$10,$20,$7C,$00
 $6048 DEFB $20,$2A,$2A,$2A,$2D,$2D,$2D,$22
 $6050 DEFB $0D,$80,$EC,$33,$30,$30,$30,$0E
 $6058 DEFB $00,$00,$B8,$0B,$00,$0D,$80,$00
 $6060 DEFB $00,$22,$5B,$00,$00,$00,$70,$00
 $6068 DEFB $00,$00,$F0,$9D,$6A,$7F,$0C,$00
 $6070 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6078 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6080 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6088 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6090 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6098 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60A8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60B0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60B8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60C8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60D0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60D8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60E8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60F0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $60F8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6100 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6108 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6110 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6118 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6120 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6128 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6130 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6138 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6140 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6148 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6150 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6158 DEFB $00

; Structure of a ship ($26 bytes)
;
; #TABLE
; { =h Type | =h Offset | =h Content }
; { byte | $00 | x_lo }
; { byte | $01 | x_hi }
; { byte | $02 | x_sign }
; { byte | $03 | y_lo }
; { byte | $04 | y_hi }
; { byte | $05 | y_sign }
; { byte | $06 | z_lo }
; { byte | $07 | z_hi }
; { byte | $08 | z_sign }
; { byte | $09 | nosev_x_lo }
; { byte | $0A | nosev_x_hi }
; { byte | $0B | nosev_y_lo }
; { byte | $0C | nosev_y_hi }
; { byte | $0D | nosev_z_lo }
; { byte | $0E | nosev_z_hi }
; { byte | $0F | roofv_x_lo }
; { byte | $10 | roofv_x_hi }
; { byte | $11 | roofv_y_lo }
; { byte | $12 | roofv_y_hi }
; { byte | $13 | roofv_z_lo }
; { byte | $14 | roofv_z_hi }
; { byte | $15 | sidev_x_lo }
; { byte | $16 | sidev_x_hi }
; { byte | $17 | sidev_y_lo }
; { byte | $18 | sidev_y_hi }
; { byte | $19 | sidev_z_lo }
; { byte | $1A | sidev_z_hi }
; { byte | $1B | Speed }
; { byte | $1C | Acceleration?} { byte | $1D | Roll counter? Set to $C0 }
; { byte | $1E | Pitch counter?  Set to $C0 }
; { byte | $1F | Unknown }
; { byte | $20 | From blueprint byte $0A - bit field. Bit 3 fire laser }
; { byte | $21 | From blueprint byte $12 - bit field }
; { byte | $22 | Energy }
; { word | $23 | Address of blueprint }
; { byte | $25 | Unknown, set to $7E }
; { byte | $26 | Unknown, set to $00 }
; TABLE#
;
; .
;
; Current ship
@label=current_ship
b$6159 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6161 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6169 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6171 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6179 DEFB $00,$00

; Data block at 617B
b$617B DEFB $00,$00,$00,$00

; Unused
s$617F DEFS $01

; Ship blueprint lookup table
@label=ship_blueprints
b$6180 DEFB $C3
 $6181 DEFW $6A9D
 $6183 DEFB $00
 $6184 DEFB $C3
 $6185 DEFW $67A6
 $6187 DEFB $00
 $6188 DEFB $C3
 $6189 DEFW $6632
 $618B DEFB $01
 $618C DEFB $C3
 $618D DEFW $68A7
 $618F DEFB $01
 $6190 DEFB $C3
 $6191 DEFW $63E5
 $6193 DEFB $01
 $6194 DEFB $C3
 $6195 DEFW $6BBC
 $6197 DEFB $01
 $6198 DEFB $C3
 $6199 DEFW $630C
 $619B DEFB $01
 $619C DEFB $C3
 $619D DEFW $62F5
 $619F DEFB $02
 $61A0 DEFB $C3
 $61A1 DEFW $6E1B
 $61A3 DEFB $02
 $61A4 DEFB $C3
 $61A5 DEFW $6490
 $61A7 DEFB $02
 $61A8 DEFB $C3
 $61A9 DEFW $68E6
 $61AB DEFB $02
 $61AC DEFB $C3
 $61AD DEFW $68FD
 $61AF DEFB $03
 $61B0 DEFB $C3
 $61B1 DEFW $64A7
 $61B3 DEFB $03
 $61B4 DEFB $C3
 $61B5 DEFW $61CC
 $61B7 DEFB $03
 $61B8 DEFB $C3
 $61B9 DEFW $6689
 $61BB DEFB $03
 $61BC DEFB $C3
 $61BD DEFW $6C13
 $61BF DEFB $03
 $61C0 DEFB $C3
 $61C1 DEFW $69F2
 $61C3 DEFB $04
 $61C4 DEFB $C3
 $61C5 DEFW $6D32
 $61C7 DEFB $04
 $61C8 DEFB $C3
 $61C9 DEFW $6EF8
 $61CB DEFB $04

; Unknown ship 1
;
; Structure of a blueprint ($17 bytes):
; #TABLE
; { =h Type | =h Offset | =h Content }
; { byte | $00 | Max canisters released }
; { byte | $01 | Targetable area? }
; { byte | $02 | Targetable area? }
; { byte | $03 | Number of vertices }
; { byte | $04 | Number of edges }
; { byte | $05 | Number of faces }
; { byte | $06 | Max speed }
; { byte | $07 | Max energy }
; { word | $08 | Bounty }
; { byte | $0A | Unknown }
; { byte | $0B | Visibility distance }
; { word | $0C | Offset to vertices from byte 0 }
; { word | $0E | Offset to edges }
; { word | $10 | Offset to faces }
; { byte | $12 | Unknown }
; { byte | $13 | Normals scaled by }
; { byte | $14 | Gun vertex }
; { byte | $15 | Unknown }
; { byte | $16 | Unknown }
; TABLE#
; Unknown could be: Max. edge count, Explosion count, Laser power/missiles
@label=unknown_ship_1
b$61CC DEFB $00,$3C,$FA,$13,$1C,$0C,$28,$96
 $61D4 DEFB $C8,$00,$01,$18,$17,$00,$89,$00
 $61DC DEFB $F9,$00,$8C,$01,$08,$40,$03

; Unknown ship 1 vertices
;
; Structure of a vertex ($06 bytes):
; #TABLE
; { =h Offset | =h Content }
; { $00 | Magnitude of the vertex's x-coordinate }
; { $01 | Magnitude of the vertex's y-coordinate }
; { $02 | Magnitude of the vertex's z-coordinate }
; { $03 | Bits 0-4 = visibility distance. Bits 7-5 = the sign bits of x, y and
; z. }
; { $04 | Bits 0-3 = the number of face 1. Bits 4-7 = the number of face 2. }
; { $05 | Bits 0-3 = the number of face 3. Bits 4-7 = the number of face 4. }
; TABLE#
b$61E3 DEFB $00,$12,$00,$56,$01,$22
 $61E9 DEFB $00,$09,$2D,$7F,$12,$BB
 $61EF DEFB $2B,$00,$2D,$3F,$16,$BB
 $61F5 DEFB $45,$03,$00,$5F,$16,$79
 $61FB DEFB $2B,$0E,$1C,$5F,$01,$77
 $6201 DEFB $2B,$00,$2D,$BF,$25,$BB
 $6207 DEFB $45,$03,$00,$DF,$25,$8A
 $620D DEFB $2B,$0E,$1C,$DF,$02,$88
 $6213 DEFB $1A,$07,$49,$5F,$04,$79
 $6219 DEFB $1A,$07,$49,$DF,$04,$8A
 $621F DEFB $2B,$0E,$1C,$1F,$34,$69
 $6225 DEFB $2B,$0E,$1C,$9F,$34,$5A
 $622B DEFB $00,$09,$2D,$3F,$35,$6B
 $6231 DEFB $11,$00,$2D,$AA,$BB,$BB
 $6237 DEFB $11,$00,$2D,$29,$BB,$BB
 $623D DEFB $00,$04,$2D,$6A,$BB,$BB
 $6243 DEFB $00,$04,$2D,$28,$BB,$BB
 $6249 DEFB $00,$07,$49,$4A,$04,$04
 $624F DEFB $00,$07,$53,$4A,$04,$04

; Unknown ship 1 edges
;
; Structure of an edge ($04 bytes):
; #TABLE
; { =h Offset | =h Content }
; { $00 | Visibility distance }
; { $01 | The number of the vertex at the start of the edge }
; { $02 | The number of the vertex at the end of the edge }
; { $03 | Bits 0-3 = the number of face 1. Bits 4-7 = the number of face 2 }
; TABLE#
b$6255 DEFB $16,$00,$01,$12
 $6259 DEFB $16,$00,$04,$01
 $625D DEFB $16,$00,$07,$02
 $6261 DEFB $1F,$01,$02,$1B
 $6265 DEFB $1F,$02,$03,$16
 $6269 DEFB $10,$03,$08,$79
 $626D DEFB $1F,$08,$09,$04
 $6271 DEFB $10,$06,$09,$8A
 $6275 DEFB $1F,$05,$06,$25
 $6279 DEFB $1F,$01,$05,$2B
 $627D DEFB $1F,$03,$04,$17
 $6281 DEFB $1F,$04,$08,$07
 $6285 DEFB $1F,$06,$07,$28
 $6289 DEFB $1F,$07,$09,$08
 $628D DEFB $1F,$02,$0C,$6B
 $6291 DEFB $1F,$05,$0C,$5B
 $6295 DEFB $16,$0A,$0C,$36
 $6299 DEFB $16,$0B,$0C,$35
 $629D DEFB $16,$0A,$0B,$34
 $62A1 DEFB $1F,$06,$0B,$5A
 $62A5 DEFB $1F,$09,$0B,$4A
 $62A9 DEFB $1F,$03,$0A,$69
 $62AD DEFB $1F,$08,$0A,$49
 $62B1 DEFB $0A,$0D,$0F,$BB
 $62B5 DEFB $09,$0F,$0E,$BB
 $62B9 DEFB $08,$0E,$10,$BB
 $62BD DEFB $08,$10,$0D,$BB
 $62C1 DEFB $0A,$12,$11,$04

; Unknown ship 1 faces
;
; Structure of a face ($04 bytes):
; #TABLE
; { =h Offset | =h Content }
; { $00 | Face normal x }
; { $01 | Face normal y }
; { $02 | Face normal z }
; { $03 | Bits 0-4 = visibility distance. Bits 7-5 = the sign bits of normals }
; TABLE#
b$62C5 DEFB $00,$23,$05,$5F
 $62C9 DEFB $08,$26,$07,$7F
 $62CD DEFB $08,$26,$07,$FF
 $62D1 DEFB $00,$18,$01,$36
 $62D5 DEFB $00,$2B,$13,$1F
 $62D9 DEFB $06,$1C,$02,$BF
 $62DD DEFB $06,$1C,$02,$3F
 $62E1 DEFB $3B,$40,$1F,$5F
 $62E5 DEFB $3B,$40,$1F,$DF
 $62E9 DEFB $50,$2E,$32,$1F
 $62ED DEFB $50,$2E,$32,$9F
 $62F1 DEFB $00,$00,$5A,$3F

; Unknown ship 2
@label=unknown_ship_2
b$62F5 DEFB $07,$50,$50,$09,$15,$0E,$1E,$B4
 $62FD DEFB $00,$00,$52,$32,$2E,$00,$64,$00
 $6305 DEFB $B8,$00,$A1,$01,$00,$00,$01

; Ship asteroid
@label=ship_asteroid
b$630C DEFB $00,$50,$00,$09,$15,$0E,$1E,$3C
 $6314 DEFB $05,$00,$00,$32,$17,$00,$4D,$00
 $631C DEFB $A1,$00,$00,$01,$00,$19,$00

; Ship asteroid vertices
b$6323 DEFB $00,$50,$00,$1F,$FF,$FF
 $6329 DEFB $50,$0A,$00,$DF,$FF,$FF
 $632F DEFB $00,$50,$00,$5F,$FF,$FF
 $6335 DEFB $46,$28,$00,$5F,$FF,$FF
 $633B DEFB $3C,$32,$00,$1F,$65,$DC
 $6341 DEFB $32,$00,$3C,$1F,$FF,$FF
 $6347 DEFB $28,$00,$46,$9F,$10,$32
 $634D DEFB $00,$1E,$4B,$3F,$FF,$FF
 $6353 DEFB $00,$32,$3C,$7F,$98,$BA

; Ship asteroid edges
b$6359 DEFB $1F,$00,$01,$72
 $635D DEFB $1F,$00,$04,$D6
 $6361 DEFB $1F,$03,$04,$C5
 $6365 DEFB $1F,$02,$03,$B4
 $6369 DEFB $1F,$01,$02,$A3
 $636D DEFB $1F,$01,$06,$32
 $6371 DEFB $1F,$02,$06,$31
 $6375 DEFB $1F,$02,$05,$41
 $6379 DEFB $1F,$05,$06,$10
 $637D DEFB $1F,$00,$05,$60
 $6381 DEFB $1F,$03,$05,$54
 $6385 DEFB $1F,$00,$06,$20
 $6389 DEFB $1F,$04,$05,$65
 $638D DEFB $1F,$01,$08,$A8
 $6391 DEFB $1F,$01,$07,$87
 $6395 DEFB $1F,$00,$07,$D7
 $6399 DEFB $1F,$04,$07,$DC
 $639D DEFB $1F,$03,$07,$C9
 $63A1 DEFB $1F,$03,$08,$B9
 $63A5 DEFB $1F,$02,$08,$BA
 $63A9 DEFB $1F,$07,$08,$98

; Ship asteroid faces
b$63AD DEFB $09,$42,$51,$1F
 $63B1 DEFB $09,$42,$51,$5F
 $63B5 DEFB $48,$40,$1F,$9F
 $63B9 DEFB $40,$49,$2F,$DF
 $63BD DEFB $2D,$4F,$41,$5F
 $63C1 DEFB $87,$0F,$23,$1F
 $63C5 DEFB $26,$4C,$46,$1F
 $63C9 DEFB $42,$3B,$27,$BF
 $63CD DEFB $43,$0F,$50,$FF
 $63D1 DEFB $42,$0E,$4B,$7F
 $63D5 DEFB $46,$50,$28,$FF
 $63D9 DEFB $3A,$66,$33,$7F
 $63DD DEFB $51,$09,$43,$3F
 $63E1 DEFB $2F,$5E,$3F,$3F

; Ship canister
@label=ship_canister
b$63E5 DEFB $00,$14,$00,$0A,$0F,$07,$0F,$11
 $63ED DEFB $00,$00,$00,$0C,$17,$00,$53,$00
 $63F5 DEFB $8F,$00,$00,$02,$00,$1F,$00

; Ship canister vertices
b$63FC DEFB $18,$10,$00,$1F,$10,$55
 $6402 DEFB $18,$05,$0F,$1F,$10,$22
 $6408 DEFB $18,$0D,$09,$5F,$20,$33
 $640E DEFB $18,$0D,$09,$7F,$30,$44
 $6414 DEFB $18,$05,$0F,$3F,$40,$55
 $641A DEFB $18,$10,$00,$9F,$51,$66
 $6420 DEFB $18,$05,$0F,$9F,$21,$66
 $6426 DEFB $18,$0D,$09,$DF,$32,$66
 $642C DEFB $18,$0D,$09,$FF,$43,$66
 $6432 DEFB $18,$05,$0F,$BF,$54,$66

; Ship canister edges
b$6438 DEFB $1F,$00,$01,$10
 $643C DEFB $1F,$01,$02,$20
 $6440 DEFB $1F,$02,$03,$30
 $6444 DEFB $1F,$03,$04,$40
 $6448 DEFB $1F,$00,$04,$50
 $644C DEFB $1F,$00,$05,$51
 $6450 DEFB $1F,$01,$06,$21
 $6454 DEFB $1F,$02,$07,$32
 $6458 DEFB $1F,$03,$08,$43
 $645C DEFB $1F,$04,$09,$54
 $6460 DEFB $1F,$05,$06,$61
 $6464 DEFB $1F,$06,$07,$62
 $6468 DEFB $1F,$07,$08,$63
 $646C DEFB $1F,$08,$09,$64
 $6470 DEFB $1F,$09,$05,$65

; Ship canister faces
b$6474 DEFB $60,$00,$00,$1F
 $6478 DEFB $00,$29,$1E,$1F
 $647C DEFB $00,$12,$30,$5F
 $6480 DEFB $00,$33,$00,$5F
 $6484 DEFB $00,$12,$30,$7F
 $6488 DEFB $00,$29,$1E,$3F
 $648C DEFB $60,$00,$00,$9F

; Ship cobra mk 3 v1
@label=ship_cobra_mk_3_v1
b$6490 DEFB $03,$5F,$8C,$1C,$26,$0D,$1C,$96
 $6498 DEFB $00,$00,$04,$32,$2E,$00,$D6,$00
 $64A0 DEFB $6E,$01,$A0,$01,$15,$00,$02

; Ship cobra mk 3 v2
@label=ship_cobra_mk_3_v2
b$64A7 DEFB $01,$5F,$A0,$1C,$26,$0D,$1C,$96
 $64AF DEFB $AF,$00,$02,$32,$17,$00,$BF,$00
 $64B7 DEFB $57,$01,$8C,$01,$15,$80,$03

; Ship cobra mk 3 vertices
b$64BE DEFB $20,$00,$4C,$1F,$FF,$FF
 $64C4 DEFB $20,$00,$4C,$9F,$FF,$FF
 $64CA DEFB $00,$1A,$18,$1F,$FF,$FF
 $64D0 DEFB $78,$03,$08,$FF,$73,$AA
 $64D6 DEFB $78,$03,$08,$7F,$84,$CC
 $64DC DEFB $58,$10,$28,$BF,$FF,$FF
 $64E2 DEFB $58,$10,$28,$3F,$FF,$FF
 $64E8 DEFB $80,$08,$28,$7F,$98,$CC
 $64EE DEFB $80,$08,$28,$FF,$97,$AA
 $64F4 DEFB $00,$1A,$28,$3F,$65,$99
 $64FA DEFB $20,$18,$28,$FF,$A9,$BB
 $6500 DEFB $20,$18,$28,$7F,$B9,$CC
 $6506 DEFB $24,$08,$28,$B4,$99,$99
 $650C DEFB $08,$0C,$28,$B4,$99,$99
 $6512 DEFB $08,$0C,$28,$34,$99,$99
 $6518 DEFB $24,$08,$28,$34,$99,$99
 $651E DEFB $24,$0C,$28,$74,$99,$99
 $6524 DEFB $08,$10,$28,$74,$99,$99
 $652A DEFB $08,$10,$28,$F4,$99,$99
 $6530 DEFB $24,$0C,$28,$F4,$99,$99
 $6536 DEFB $00,$00,$4C,$06,$B0,$BB
 $653C DEFB $00,$00,$5A,$1F,$B0,$BB
 $6542 DEFB $50,$06,$28,$E8,$99,$99
 $6548 DEFB $50,$06,$28,$A8,$99,$99
 $654E DEFB $58,$00,$28,$A6,$99,$99
 $6554 DEFB $50,$06,$28,$28,$99,$99
 $655A DEFB $58,$00,$28,$26,$99,$99
 $6560 DEFB $50,$06,$28,$68,$99,$99

; Ship cobra mk 3 edges
b$6566 DEFB $1F,$00,$01,$B0
 $656A DEFB $1F,$00,$04,$C4
 $656E DEFB $1F,$01,$03,$A3
 $6572 DEFB $1F,$03,$08,$A7
 $6576 DEFB $1F,$04,$07,$C8
 $657A DEFB $1F,$06,$07,$98
 $657E DEFB $1F,$06,$09,$96
 $6582 DEFB $1F,$05,$09,$95
 $6586 DEFB $1F,$05,$08,$97
 $658A DEFB $1F,$02,$05,$51
 $658E DEFB $1F,$02,$06,$62
 $6592 DEFB $1F,$03,$05,$73
 $6596 DEFB $1F,$04,$06,$84
 $659A DEFB $1F,$01,$02,$10
 $659E DEFB $1F,$00,$02,$20
 $65A2 DEFB $1F,$08,$0A,$A9
 $65A6 DEFB $1F,$0A,$0B,$B9
 $65AA DEFB $1F,$07,$0B,$C9
 $65AE DEFB $1F,$01,$0A,$BA
 $65B2 DEFB $1F,$00,$0B,$CB
 $65B6 DEFB $1D,$01,$05,$31
 $65BA DEFB $1D,$00,$06,$42
 $65BE DEFB $06,$14,$15,$B0
 $65C2 DEFB $14,$0C,$0D,$99
 $65C6 DEFB $14,$12,$13,$99
 $65CA DEFB $14,$0E,$0F,$99
 $65CE DEFB $14,$10,$11,$99
 $65D2 DEFB $13,$0F,$10,$99
 $65D6 DEFB $11,$0E,$11,$99
 $65DA DEFB $13,$0D,$12,$99
 $65DE DEFB $13,$0C,$13,$99
 $65E2 DEFB $1E,$02,$09,$65
 $65E6 DEFB $06,$16,$18,$99
 $65EA DEFB $06,$17,$18,$99
 $65EE DEFB $08,$16,$17,$99
 $65F2 DEFB $06,$19,$1A,$99
 $65F6 DEFB $06,$1A,$1B,$99
 $65FA DEFB $08,$19,$1B,$99

; Ship cobra mk 3 faces
b$65FE DEFB $00,$3E,$1F,$1F
 $6602 DEFB $12,$37,$10,$9F
 $6606 DEFB $12,$37,$10,$1F
 $660A DEFB $10,$34,$0E,$9F
 $660E DEFB $10,$34,$0E,$1F
 $6612 DEFB $0E,$2F,$00,$9F
 $6616 DEFB $0E,$2F,$00,$1F
 $661A DEFB $3D,$66,$00,$9F
 $661E DEFB $3D,$66,$00,$1F
 $6622 DEFB $00,$00,$50,$3F
 $6626 DEFB $07,$2A,$09,$DF
 $662A DEFB $00,$1E,$06,$5F
 $662E DEFB $07,$2A,$09,$5F

; Ship escape pod
@label=ship_escapepod
b$6632 DEFB $20,$10,$00,$04,$06,$04,$08,$11
 $663A DEFB $00,$00,$00,$08,$17,$00,$2F,$00
 $6642 DEFB $47,$00,$01,$04,$00,$32,$00

; Ship escape pod vertices
b$6649 DEFB $07,$00,$24,$9F,$12,$33
 $664F DEFB $07,$0E,$0C,$FF,$02,$33
 $6655 DEFB $07,$0E,$0C,$BF,$01,$33
 $665B DEFB $15,$00,$00,$1F,$01,$22

; Ship escape pod edges
b$6661 DEFB $1F,$00,$01,$23
 $6665 DEFB $1F,$01,$02,$03
 $6669 DEFB $1F,$02,$03,$01
 $666D DEFB $1F,$03,$00,$12
 $6671 DEFB $1F,$00,$02,$13
 $6675 DEFB $1F,$03,$01,$02

; Ship escape pod faces
b$6679 DEFB $34,$00,$7A,$3F
 $667D DEFB $27,$67,$1E,$1F
 $6681 DEFB $27,$67,$1E,$5F
 $6685 DEFB $70,$00,$00,$9F

; Unknown ship 4
@label=unknown_ship_4
b$6689 DEFB $00,$28,$FF,$13,$1B,$0A,$1E,$A0
 $6691 DEFB $00,$00,$02,$1E,$17,$00,$89,$00
 $6699 DEFB $F5,$00,$82,$01,$00,$00,$03

; Unknown ship 4 vertices
b$66A0 DEFB $00,$0E,$6C,$5F,$01,$59
 $66A6 DEFB $28,$0E,$04,$FF,$12,$99
 $66AC DEFB $0C,$0E,$34,$FF,$23,$99
 $66B2 DEFB $0C,$0E,$34,$7F,$34,$99
 $66B8 DEFB $28,$0E,$04,$7F,$45,$99
 $66BE DEFB $28,$0E,$04,$BC,$01,$26
 $66C4 DEFB $0C,$02,$34,$BC,$23,$67
 $66CA DEFB $0C,$02,$34,$3C,$34,$78
 $66D0 DEFB $28,$0E,$04,$3C,$04,$58
 $66D6 DEFB $00,$12,$14,$2F,$06,$78
 $66DC DEFB $03,$0B,$61,$CB,$00,$00
 $66E2 DEFB $1A,$08,$12,$89,$00,$00
 $66E8 DEFB $10,$0E,$04,$AB,$00,$00
 $66EE DEFB $03,$0B,$61,$4B,$00,$00
 $66F4 DEFB $1A,$08,$12,$09,$00,$00
 $66FA DEFB $10,$0E,$04,$2B,$00,$00
 $6700 DEFB $00,$0E,$14,$6C,$99,$99
 $6706 DEFB $0E,$0E,$2C,$CC,$99,$99
 $670C DEFB $0E,$0E,$2C,$4C,$99,$99

; Unknown ship 4 edges
b$6712 DEFB $1F,$00,$01,$19
 $6716 DEFB $1F,$01,$02,$29
 $671A DEFB $1F,$02,$03,$39
 $671E DEFB $1F,$03,$04,$49
 $6722 DEFB $1F,$00,$04,$59
 $6726 DEFB $1C,$00,$05,$01
 $672A DEFB $1C,$05,$06,$26
 $672E DEFB $1C,$06,$07,$37
 $6732 DEFB $1C,$07,$08,$48
 $6736 DEFB $1C,$00,$08,$05
 $673A DEFB $0F,$05,$09,$06
 $673E DEFB $0B,$06,$09,$67
 $6742 DEFB $0B,$07,$09,$78
 $6746 DEFB $0F,$08,$09,$08
 $674A DEFB $0E,$01,$05,$12
 $674E DEFB $0E,$02,$06,$23
 $6752 DEFB $0E,$03,$07,$34
 $6756 DEFB $0E,$04,$08,$45
 $675A DEFB $08,$0A,$0B,$00
 $675E DEFB $09,$0B,$0C,$00
 $6762 DEFB $0B,$0A,$0C,$00
 $6766 DEFB $08,$0D,$0E,$00
 $676A DEFB $09,$0E,$0F,$00
 $676E DEFB $0B,$0D,$0F,$00
 $6772 DEFB $0C,$10,$11,$99
 $6776 DEFB $0C,$10,$12,$99
 $677A DEFB $08,$11,$12,$99

; Unknown ship 4 faces
b$677E DEFB $00,$18,$06,$1C
 $6782 DEFB $44,$00,$18,$9F
 $6786 DEFB $3F,$00,$25,$BF
 $678A DEFB $00,$00,$68,$3F
 $678E DEFB $3F,$00,$25,$3F
 $6792 DEFB $44,$00,$18,$1F
 $6796 DEFB $0C,$2E,$13,$BC
 $679A DEFB $00,$2D,$16,$3C
 $679E DEFB $0C,$2E,$13,$3C
 $67A2 DEFB $00,$1C,$00,$5F

; Ship missile
@label=ship_missile
b$67A6 DEFB $00,$28,$00,$11,$18,$09,$2C,$02
 $67AE DEFB $00,$00,$00,$0E,$17,$00,$7D,$00
 $67B6 DEFB $DD,$00,$00,$02,$00,$C0,$01

; Ship missile vertices
b$67BD DEFB $00,$00,$44,$1F,$10,$32
 $67C3 DEFB $08,$08,$24,$5F,$21,$54
 $67C9 DEFB $08,$08,$24,$1F,$32,$74
 $67CF DEFB $08,$08,$24,$9F,$30,$76
 $67D5 DEFB $08,$08,$24,$DF,$10,$65
 $67DB DEFB $08,$08,$2C,$3F,$74,$88
 $67E1 DEFB $08,$08,$2C,$7F,$54,$88
 $67E7 DEFB $08,$08,$2C,$FF,$65,$88
 $67ED DEFB $08,$08,$2C,$BF,$76,$88
 $67F3 DEFB $0C,$0C,$2C,$28,$74,$88
 $67F9 DEFB $0C,$0C,$2C,$68,$54,$88
 $67FF DEFB $0C,$0C,$2C,$E8,$65,$88
 $6805 DEFB $0C,$0C,$2C,$A8,$76,$88
 $680B DEFB $08,$08,$0C,$A8,$76,$77
 $6811 DEFB $08,$08,$0C,$E8,$65,$66
 $6817 DEFB $08,$08,$0C,$28,$74,$77
 $681D DEFB $08,$08,$0C,$68,$54,$55

; Ship missible edges
b$6823 DEFB $1F,$00,$01,$21
 $6827 DEFB $1F,$00,$02,$32
 $682B DEFB $1F,$00,$03,$30
 $682F DEFB $1F,$00,$04,$10
 $6833 DEFB $1F,$01,$02,$24
 $6837 DEFB $1F,$01,$04,$51
 $683B DEFB $1F,$03,$04,$60
 $683F DEFB $1F,$02,$03,$73
 $6843 DEFB $1F,$02,$05,$74
 $6847 DEFB $1F,$01,$06,$54
 $684B DEFB $1F,$04,$07,$65
 $684F DEFB $1F,$03,$08,$76
 $6853 DEFB $1F,$07,$08,$86
 $6857 DEFB $1F,$05,$08,$87
 $685B DEFB $1F,$05,$06,$84
 $685F DEFB $1F,$06,$07,$85
 $6863 DEFB $08,$06,$0A,$85
 $6867 DEFB $08,$05,$09,$87
 $686B DEFB $08,$08,$0C,$87
 $686F DEFB $08,$07,$0B,$85
 $6873 DEFB $08,$09,$0F,$74
 $6877 DEFB $08,$0A,$10,$54
 $687B DEFB $08,$0C,$0D,$76
 $687F DEFB $08,$0B,$0E,$65

; Ship missile faces
b$6883 DEFB $40,$00,$10,$9F
 $6887 DEFB $00,$40,$10,$5F
 $688B DEFB $40,$00,$10,$1F
 $688F DEFB $00,$40,$10,$1F
 $6893 DEFB $20,$00,$00,$1F
 $6897 DEFB $00,$20,$00,$5F
 $689B DEFB $20,$00,$00,$9F
 $689F DEFB $00,$20,$00,$1F
 $68A3 DEFB $00,$00,$B0,$3F

; Unknown ship 5
@label=unknown_ship_5
b$68A7 DEFB $80,$0A,$00,$04,$04,$00,$10,$10
 $68AF DEFB $00,$00,$00,$0C,$17,$00,$2F,$00
 $68B7 DEFB $00,$00,$00,$03,$00,$20,$00

; Unknown ship 5 vertices
b$68BE DEFB $0F,$16,$09,$FF,$FF,$FF
 $68C4 DEFB $0F,$26,$09,$BF,$FF,$FF
 $68CA DEFB $13,$20,$0B,$14,$FF,$FF
 $68D0 DEFB $0A,$2E,$06,$54,$FF,$FF

; Unknown ship 5 edges
b$68D6 DEFB $1F,$00,$01,$FF
 $68DA DEFB $10,$01,$02,$FF
 $68DE DEFB $14,$02,$03,$FF
 $68E2 DEFB $10,$03,$00,$FF

; Unknown ship 6
@label=unknown_ship_6
b$68E6 DEFB $05,$50,$82,$0B,$1A,$0D,$14,$FA
 $68EE DEFB $00,$00,$00,$28,$2E,$00,$70,$00
 $68F6 DEFB $D8,$00,$A0,$00,$00,$00,$02

; Ship python
@label=ship_python
b$68FD DEFB $02,$50,$96,$0B,$1A,$0D,$14,$FA
 $6905 DEFB $C8,$00,$00,$28,$17,$00,$59,$00
 $690D DEFB $C1,$00,$8C,$00,$00,$80,$03

; Ship python vertices
b$6914 DEFB $00,$00,$E0,$1F,$10,$32
 $691A DEFB $00,$30,$30,$1F,$10,$54
 $6920 DEFB $60,$00,$10,$3F,$FF,$FF
 $6926 DEFB $60,$00,$10,$BF,$FF,$FF
 $692C DEFB $00,$30,$20,$3F,$54,$98
 $6932 DEFB $00,$18,$70,$3F,$89,$CC
 $6938 DEFB $30,$00,$70,$BF,$B8,$CC
 $693E DEFB $30,$00,$70,$3F,$A9,$CC
 $6944 DEFB $00,$30,$30,$5F,$32,$76
 $694A DEFB $00,$30,$20,$7F,$76,$BA
 $6950 DEFB $00,$18,$70,$7F,$BA,$CC

; Ship python edges
b$6956 DEFB $1F,$00,$08,$32
 $695A DEFB $1F,$00,$03,$20
 $695E DEFB $1F,$00,$02,$31
 $6962 DEFB $1F,$00,$01,$10
 $6966 DEFB $1F,$02,$04,$59
 $696A DEFB $1F,$01,$02,$51
 $696E DEFB $1F,$02,$08,$37
 $6972 DEFB $1F,$01,$03,$40
 $6976 DEFB $1F,$03,$08,$62
 $697A DEFB $1F,$02,$09,$A7
 $697E DEFB $1F,$03,$04,$84
 $6982 DEFB $1F,$03,$09,$B6
 $6986 DEFB $09,$03,$05,$88
 $698A DEFB $09,$03,$0A,$BB
 $698E DEFB $09,$02,$05,$99
 $6992 DEFB $09,$02,$0A,$AA
 $6996 DEFB $1F,$02,$07,$A9
 $699A DEFB $1F,$03,$06,$B8
 $699E DEFB $1F,$05,$06,$C8
 $69A2 DEFB $1F,$05,$07,$C9
 $69A6 DEFB $1F,$07,$0A,$AC
 $69AA DEFB $1F,$06,$0A,$CB
 $69AE DEFB $1F,$04,$05,$98
 $69B2 DEFB $1F,$09,$0A,$BA
 $69B6 DEFB $1F,$01,$04,$54
 $69BA DEFB $1F,$08,$09,$76

; Ship python faces
b$69BE DEFB $1B,$28,$0B,$9F
 $69C2 DEFB $1B,$28,$0B,$1F
 $69C6 DEFB $1B,$28,$0B,$DF
 $69CA DEFB $1B,$28,$0B,$5F
 $69CE DEFB $13,$26,$00,$9F
 $69D2 DEFB $13,$26,$00,$1F
 $69D6 DEFB $13,$26,$00,$DF
 $69DA DEFB $13,$26,$00,$5F
 $69DE DEFB $19,$25,$0B,$BF
 $69E2 DEFB $19,$25,$0B,$3F
 $69E6 DEFB $19,$25,$0B,$7F
 $69EA DEFB $19,$25,$0B,$FF
 $69EE DEFB $00,$00,$70,$3F

; Ship sidewinder
@label=ship_sidewinder
b$69F2 DEFB $00,$41,$82,$0A,$0F,$07,$25,$46
 $69FA DEFB $32,$00,$01,$14,$17,$00,$53,$00
 $6A02 DEFB $8F,$00,$0C,$02,$00,$00,$01

; Ship sidewinder vertices
b$6A09 DEFB $20,$00,$24,$9F,$10,$54
 $6A0F DEFB $20,$00,$24,$1F,$20,$65
 $6A15 DEFB $40,$00,$1C,$3F,$32,$66
 $6A1B DEFB $40,$00,$1C,$BF,$31,$44
 $6A21 DEFB $00,$10,$1C,$3F,$10,$32
 $6A27 DEFB $00,$10,$1C,$7F,$43,$65
 $6A2D DEFB $0C,$06,$1C,$AF,$33,$33
 $6A33 DEFB $0C,$06,$1C,$2F,$33,$33
 $6A39 DEFB $0C,$06,$1C,$6C,$33,$33
 $6A3F DEFB $0C,$06,$1C,$EC,$33,$33

; Ship sidewinder edges
b$6A45 DEFB $1F,$00,$01,$50
 $6A49 DEFB $1F,$01,$02,$62
 $6A4D DEFB $1F,$01,$04,$20
 $6A51 DEFB $1F,$00,$04,$10
 $6A55 DEFB $1F,$00,$03,$41
 $6A59 DEFB $1F,$03,$04,$31
 $6A5D DEFB $1F,$02,$04,$32
 $6A61 DEFB $1F,$03,$05,$43
 $6A65 DEFB $1F,$02,$05,$63
 $6A69 DEFB $1F,$01,$05,$65
 $6A6D DEFB $1F,$00,$05,$54
 $6A71 DEFB $0F,$06,$07,$33
 $6A75 DEFB $0C,$07,$08,$33
 $6A79 DEFB $0C,$06,$09,$33
 $6A7D DEFB $0C,$08,$09,$33

; Ship sidewinder faces
b$6A81 DEFB $00,$20,$08,$1F
 $6A85 DEFB $0C,$2F,$06,$9F
 $6A89 DEFB $0C,$2F,$06,$1F
 $6A8D DEFB $00,$00,$70,$3F
 $6A91 DEFB $0C,$2F,$06,$DF
 $6A95 DEFB $00,$20,$08,$5F
 $6A99 DEFB $0C,$2F,$06,$5F

; Ship coriolis
@label=ship_coriolis
b$6A9D DEFB $00,$A0,$00,$10,$1C,$0E,$00,$F0
 $6AA5 DEFB $00,$00,$06,$78,$17,$00,$77,$00
 $6AAD DEFB $E7,$00,$00,$00,$00,$00,$00

; Ship coriolis vertices
b$6AB4 DEFB $A0,$00,$A0,$1F,$10,$62
 $6ABA DEFB $00,$A0,$A0,$1F,$20,$83
 $6AC0 DEFB $A0,$00,$A0,$9F,$30,$74
 $6AC6 DEFB $00,$A0,$A0,$5F,$10,$54
 $6ACC DEFB $A0,$A0,$00,$5F,$51,$A6
 $6AD2 DEFB $A0,$A0,$00,$1F,$62,$B8
 $6AD8 DEFB $A0,$A0,$00,$9F,$73,$C8
 $6ADE DEFB $A0,$A0,$00,$DF,$54,$97
 $6AE4 DEFB $A0,$00,$A0,$3F,$A6,$DB
 $6AEA DEFB $00,$A0,$A0,$3F,$B8,$DC
 $6AF0 DEFB $A0,$00,$A0,$BF,$97,$DC
 $6AF6 DEFB $00,$A0,$A0,$7F,$95,$DA
 $6AFC DEFB $0A,$1E,$A0,$5E,$00,$00
 $6B02 DEFB $0A,$1E,$A0,$1E,$00,$00
 $6B08 DEFB $0A,$1E,$A0,$9E,$00,$00
 $6B0E DEFB $0A,$1E,$A0,$DE,$00,$00

; Ship coriolis edges
b$6B14 DEFB $1F,$00,$03,$10
 $6B18 DEFB $1F,$00,$01,$20
 $6B1C DEFB $1F,$01,$02,$30
 $6B20 DEFB $1F,$02,$03,$40
 $6B24 DEFB $1F,$03,$04,$51
 $6B28 DEFB $1F,$00,$04,$61
 $6B2C DEFB $1F,$00,$05,$62
 $6B30 DEFB $1F,$05,$01,$82
 $6B34 DEFB $1F,$01,$06,$83
 $6B38 DEFB $1F,$02,$06,$73
 $6B3C DEFB $1F,$02,$07,$74
 $6B40 DEFB $1F,$03,$07,$54
 $6B44 DEFB $1F,$08,$0B,$DA
 $6B48 DEFB $1F,$08,$09,$DB
 $6B4C DEFB $1F,$09,$0A,$DC
 $6B50 DEFB $1F,$0A,$0B,$D9
 $6B54 DEFB $1F,$04,$0B,$A5
 $6B58 DEFB $1F,$04,$08,$A6
 $6B5C DEFB $1F,$05,$08,$B6
 $6B60 DEFB $1F,$05,$09,$B8
 $6B64 DEFB $1F,$06,$09,$C8
 $6B68 DEFB $1F,$06,$0A,$C7
 $6B6C DEFB $1F,$07,$0A,$97
 $6B70 DEFB $1F,$07,$0B,$95
 $6B74 DEFB $1E,$0C,$0D,$00
 $6B78 DEFB $1E,$0D,$0E,$00
 $6B7C DEFB $1E,$0E,$0F,$00
 $6B80 DEFB $1E,$0F,$0C,$00

; Ship coriolis faces
b$6B84 DEFB $00,$00,$A0,$1F
 $6B88 DEFB $6B,$6B,$6B,$5F
 $6B8C DEFB $6B,$6B,$6B,$1F
 $6B90 DEFB $6B,$6B,$6B,$9F
 $6B94 DEFB $6B,$6B,$6B,$DF
 $6B98 DEFB $00,$A0,$00,$5F
 $6B9C DEFB $A0,$00,$00,$1F
 $6BA0 DEFB $A0,$00,$00,$9F
 $6BA4 DEFB $00,$A0,$00,$1F
 $6BA8 DEFB $6B,$6B,$6B,$FF
 $6BAC DEFB $6B,$6B,$6B,$7F
 $6BB0 DEFB $6B,$6B,$6B,$3F
 $6BB4 DEFB $6B,$6B,$6B,$BF
 $6BB8 DEFB $00,$00,$A0,$3F

; Unknown ship 7
@label=unknown_ship_7
b$6BBC DEFB $B0,$10,$00,$04,$06,$04,$0A,$14
 $6BC4 DEFB $00,$00,$00,$0A,$17,$00,$2F,$00
 $6BCC DEFB $47,$00,$00,$05,$00,$1E,$00

; Unknown ship 7 vertices
b$6BD3 DEFB $18,$19,$10,$DF,$12,$33
 $6BD9 DEFB $00,$0C,$0A,$3F,$02,$33
 $6BDF DEFB $0B,$06,$02,$5F,$01,$33
 $6BE5 DEFB $0C,$2A,$07,$1F,$01,$22

; Unknown ship 7 edges
b$6BEB DEFB $1F,$00,$01,$23
 $6BEF DEFB $1F,$01,$02,$03
 $6BF3 DEFB $1F,$02,$03,$01
 $6BF7 DEFB $1F,$03,$00,$12
 $6BFB DEFB $1F,$00,$02,$13
 $6BFF DEFB $1F,$03,$01,$02

; Unknown ship 7 faces
b$6C03 DEFB $B1,$0C,$94,$3F
 $6C07 DEFB $64,$19,$D5,$5F
 $6C0B DEFB $CA,$68,$22,$BF
 $6C0F DEFB $02,$33,$4A,$FF

; Ship thargoid
@label=ship_thargoid
b$6C13 DEFB $00,$63,$FF,$14,$1A,$0A,$27,$F0
 $6C1B DEFB $F4,$01,$36,$37,$17,$00,$8F,$00
 $6C23 DEFB $F7,$00,$0C,$02,$0F,$00,$08

; Ship thargoid vertices
b$6C2A DEFB $20,$30,$30,$5F,$40,$88
 $6C30 DEFB $20,$44,$00,$5F,$10,$44
 $6C36 DEFB $20,$30,$30,$7F,$21,$44
 $6C3C DEFB $20,$00,$44,$3F,$32,$44
 $6C42 DEFB $20,$30,$30,$3F,$43,$55
 $6C48 DEFB $20,$44,$00,$1F,$54,$66
 $6C4E DEFB $20,$30,$30,$1F,$64,$77
 $6C54 DEFB $20,$00,$44,$1F,$74,$88
 $6C5A DEFB $18,$74,$74,$DF,$80,$99
 $6C60 DEFB $18,$A4,$00,$DF,$10,$99
 $6C66 DEFB $18,$74,$74,$FF,$21,$99
 $6C6C DEFB $18,$00,$A4,$BF,$32,$99
 $6C72 DEFB $18,$74,$74,$BF,$53,$99
 $6C78 DEFB $18,$A4,$00,$9F,$65,$99
 $6C7E DEFB $18,$74,$74,$9F,$76,$99
 $6C84 DEFB $18,$00,$A4,$9F,$87,$99
 $6C8A DEFB $18,$40,$50,$9E,$99,$99
 $6C90 DEFB $18,$40,$50,$BE,$99,$99
 $6C96 DEFB $18,$40,$50,$FE,$99,$99
 $6C9C DEFB $18,$40,$50,$DE,$99,$99

; Ship thargoid edges
b$6CA2 DEFB $1F,$00,$07,$84
 $6CA6 DEFB $1F,$00,$01,$40
 $6CAA DEFB $1F,$01,$02,$41
 $6CAE DEFB $1F,$02,$03,$42
 $6CB2 DEFB $1F,$03,$04,$43
 $6CB6 DEFB $1F,$04,$05,$54
 $6CBA DEFB $1F,$05,$06,$64
 $6CBE DEFB $1F,$06,$07,$74
 $6CC2 DEFB $1F,$00,$08,$80
 $6CC6 DEFB $1F,$01,$09,$10
 $6CCA DEFB $1F,$02,$0A,$21
 $6CCE DEFB $1F,$03,$0B,$32
 $6CD2 DEFB $1F,$04,$0C,$53
 $6CD6 DEFB $1F,$05,$0D,$65
 $6CDA DEFB $1F,$06,$0E,$76
 $6CDE DEFB $1F,$07,$0F,$87
 $6CE2 DEFB $1F,$08,$0F,$98
 $6CE6 DEFB $1F,$08,$09,$90
 $6CEA DEFB $1F,$09,$0A,$91
 $6CEE DEFB $1F,$0A,$0B,$92
 $6CF2 DEFB $1F,$0B,$0C,$93
 $6CF6 DEFB $1F,$0C,$0D,$95
 $6CFA DEFB $1F,$0D,$0E,$96
 $6CFE DEFB $1F,$0E,$0F,$97
 $6D02 DEFB $1E,$10,$11,$99
 $6D06 DEFB $1E,$12,$13,$99

; Ship thargoid faces
b$6D0A DEFB $67,$3C,$19,$5F
 $6D0E DEFB $67,$3C,$19,$7F
 $6D12 DEFB $67,$19,$3C,$7F
 $6D16 DEFB $67,$19,$3C,$3F
 $6D1A DEFB $40,$00,$00,$1F
 $6D1E DEFB $67,$3C,$19,$3F
 $6D22 DEFB $67,$3C,$19,$1F
 $6D26 DEFB $67,$19,$3C,$1F
 $6D2A DEFB $67,$19,$3C,$5F
 $6D2E DEFB $30,$00,$00,$9F

; Unknown ship 8
@label=unknown_ship_8
b$6D32 DEFB $01,$3C,$6E,$11,$15,$06,$1E,$50
 $6D3A DEFB $64,$00,$00,$14,$17,$00,$7D,$00
 $6D42 DEFB $D1,$00,$8C,$01,$00,$00,$01

; Unknown ship 8 vertices
b$6D49 DEFB $00,$00,$60,$1F,$01,$23
 $6D4F DEFB $00,$12,$30,$3F,$03,$45
 $6D55 DEFB $00,$12,$30,$7F,$12,$45
 $6D5B DEFB $5A,$00,$03,$3F,$01,$44
 $6D61 DEFB $5A,$00,$03,$BF,$23,$55
 $6D67 DEFB $5A,$00,$57,$1E,$01,$11
 $6D6D DEFB $5A,$00,$57,$9E,$23,$33
 $6D73 DEFB $00,$05,$35,$09,$00,$33
 $6D79 DEFB $00,$07,$26,$06,$00,$33
 $6D7F DEFB $12,$07,$13,$89,$33,$33
 $6D85 DEFB $12,$07,$13,$09,$00,$00
 $6D8B DEFB $12,$0B,$27,$28,$44,$44
 $6D91 DEFB $12,$0B,$27,$68,$44,$44
 $6D97 DEFB $24,$00,$1E,$28,$44,$44
 $6D9D DEFB $12,$0B,$27,$A8,$55,$55
 $6DA3 DEFB $12,$0B,$27,$E8,$55,$55
 $6DA9 DEFB $24,$00,$1E,$A8,$55,$55

; Unknown ship 8 edges
b$6DAF DEFB $1F,$00,$01,$03
 $6DB3 DEFB $1F,$00,$02,$12
 $6DB7 DEFB $1F,$00,$03,$01
 $6DBB DEFB $1F,$00,$04,$23
 $6DBF DEFB $1F,$01,$04,$35
 $6DC3 DEFB $1F,$04,$02,$25
 $6DC7 DEFB $1F,$02,$03,$14
 $6DCB DEFB $1F,$03,$01,$04
 $6DCF DEFB $1E,$03,$05,$01
 $6DD3 DEFB $1E,$04,$06,$23
 $6DD7 DEFB $08,$01,$02,$45
 $6DDB DEFB $09,$07,$0A,$00
 $6DDF DEFB $06,$08,$0A,$00
 $6DE3 DEFB $09,$07,$09,$33
 $6DE7 DEFB $06,$08,$09,$33
 $6DEB DEFB $08,$0B,$0D,$44
 $6DEF DEFB $08,$0D,$0C,$44
 $6DF3 DEFB $07,$0C,$0B,$44
 $6DF7 DEFB $07,$0E,$0F,$55
 $6DFB DEFB $08,$0F,$10,$55
 $6DFF DEFB $08,$10,$0E,$55

; Unknown ship 8 faces
b$6E03 DEFB $03,$18,$03,$1F
 $6E07 DEFB $03,$18,$03,$5F
 $6E0B DEFB $03,$18,$03,$DF
 $6E0F DEFB $03,$18,$03,$9F
 $6E13 DEFB $26,$00,$4D,$3F
 $6E17 DEFB $26,$00,$4D,$BF

; Ship viper
@label=ship_viper
b$6E1B DEFB $00,$4B,$78,$0F,$14,$07,$20,$8C
 $6E23 DEFB $00,$00,$02,$17,$17,$00,$71,$00
 $6E2B DEFB $C1,$00,$C2,$01,$00,$50,$00

; Ship viper vertices
b$6E32 DEFB $00,$00,$48,$1F,$21,$43
 $6E38 DEFB $00,$10,$18,$1E,$10,$22
 $6E3E DEFB $00,$10,$18,$5E,$43,$55
 $6E44 DEFB $30,$00,$18,$3F,$42,$66
 $6E4A DEFB $30,$00,$18,$BF,$31,$66
 $6E50 DEFB $18,$10,$18,$7E,$54,$66
 $6E56 DEFB $18,$10,$18,$FE,$35,$66
 $6E5C DEFB $18,$10,$18,$3F,$20,$66
 $6E62 DEFB $18,$10,$18,$BF,$10,$66
 $6E68 DEFB $20,$00,$18,$B3,$66,$66
 $6E6E DEFB $20,$00,$18,$33,$66,$66
 $6E74 DEFB $08,$08,$18,$33,$66,$66
 $6E7A DEFB $08,$08,$18,$B3,$66,$66
 $6E80 DEFB $08,$08,$18,$F2,$66,$66
 $6E86 DEFB $08,$08,$18,$72,$66,$66

; Ship viper edges
b$6E8C DEFB $1F,$00,$03,$42
 $6E90 DEFB $1E,$00,$01,$21
 $6E94 DEFB $1E,$00,$02,$43
 $6E98 DEFB $1F,$00,$04,$31
 $6E9C DEFB $1E,$01,$07,$20
 $6EA0 DEFB $1E,$01,$08,$10
 $6EA4 DEFB $1E,$02,$05,$54
 $6EA8 DEFB $1E,$02,$06,$53
 $6EAC DEFB $1F,$07,$08,$60
 $6EB0 DEFB $1E,$05,$06,$65
 $6EB4 DEFB $1F,$04,$08,$61
 $6EB8 DEFB $1E,$04,$06,$63
 $6EBC DEFB $1F,$03,$07,$62
 $6EC0 DEFB $1E,$03,$05,$46
 $6EC4 DEFB $13,$09,$0C,$66
 $6EC8 DEFB $12,$09,$0D,$66
 $6ECC DEFB $13,$0A,$0B,$66
 $6ED0 DEFB $12,$0A,$0E,$66
 $6ED4 DEFB $10,$0B,$0E,$66
 $6ED8 DEFB $10,$0C,$0D,$66

; Ship viper faces
b$6EDC DEFB $00,$20,$00,$1F
 $6EE0 DEFB $16,$21,$0B,$9F
 $6EE4 DEFB $16,$21,$0B,$1F
 $6EE8 DEFB $16,$21,$0B,$DF
 $6EEC DEFB $16,$21,$0B,$5F
 $6EF0 DEFB $00,$20,$00,$5F
 $6EF4 DEFB $00,$00,$30,$3F

; Ship thargon
@label=ship_thargon
b$6EF8 DEFB $F0,$28,$78,$0A,$0F,$07,$1E,$14
 $6F00 DEFB $32,$00,$01,$14,$17,$00,$53,$00
 $6F08 DEFB $8F,$00,$04,$02,$00,$64,$00

; Ship thargon vertices
b$6F0F DEFB $09,$00,$28,$9F,$01,$55
 $6F15 DEFB $09,$26,$0C,$DF,$01,$22
 $6F1B DEFB $09,$18,$20,$FF,$02,$33
 $6F21 DEFB $09,$18,$20,$BF,$03,$44
 $6F27 DEFB $09,$26,$0C,$9F,$04,$55
 $6F2D DEFB $09,$00,$08,$3F,$15,$66
 $6F33 DEFB $09,$0A,$0F,$7F,$12,$66
 $6F39 DEFB $09,$06,$1A,$7F,$23,$66
 $6F3F DEFB $09,$06,$1A,$3F,$34,$66
 $6F45 DEFB $09,$0A,$0F,$3F,$45,$66

; Ship thargon edges
b$6F4B DEFB $1F,$00,$01,$01
 $6F4F DEFB $1F,$01,$02,$02
 $6F53 DEFB $1F,$02,$03,$03
 $6F57 DEFB $1F,$03,$04,$04
 $6F5B DEFB $1F,$04,$00,$05
 $6F5F DEFB $1F,$00,$05,$15
 $6F63 DEFB $1F,$01,$06,$12
 $6F67 DEFB $1F,$02,$07,$23
 $6F6B DEFB $1F,$03,$08,$43
 $6F6F DEFB $1F,$04,$09,$45
 $6F73 DEFB $1F,$05,$06,$61
 $6F77 DEFB $1F,$06,$07,$62
 $6F7B DEFB $1F,$07,$08,$63
 $6F7F DEFB $1F,$08,$09,$64
 $6F83 DEFB $1F,$09,$05,$65

; Ship thargon faces
b$6F87 DEFB $24,$00,$00,$9F
 $6F8B DEFB $14,$05,$07,$5F
 $6F8F DEFB $2E,$2A,$0E,$7F
 $6F93 DEFB $24,$00,$68,$3F
 $6F97 DEFB $2E,$2A,$0E,$3F
 $6F9B DEFB $14,$05,$07,$1F
 $6F9F DEFB $24,$00,$00,$1F

; Data block at 6FA3
b$6FA3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FAB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FB3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FBB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FC3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FCB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FD3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FDB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FE3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $6FEB DEFB $00,$00,$00,$00,$00,$00,$00

; Code start
;
; Used by the routine at #R$9A40.
c$6FF2 JP $7089      ;
 $6FF5 JP $70A9      ;

; Routine at 6FF8
;
; Used by the routines at #R$7222, #R$7471, #R$8F0D, #R$93C0, #R$DB62 and
; #R$DE67.
@label=jump_to_70B0
c$6FF8 JP $70B0      ;

; Data block at 6FFB
b$6FFB DEFB $00,$38,$7C,$7C,$7C,$38,$00,$00
 $7003 DEFB $38,$7C,$FE,$FE,$FE,$7C,$38,$00
 $700B DEFB $7C,$FE,$FE,$FE,$FE,$FE,$7C,$00
 $7013 DEFB $00,$38,$7C,$7C,$7C,$38,$00,$00
 $701B DEFB $13,$82,$06,$01,$14,$81,$0A,$03
 $7023 DEFB $41,$83,$02,$07,$28,$85,$E2,$1F
 $702B DEFB $53,$85,$FB,$0F,$C4,$08,$36,$03
 $7033 DEFB $EB,$1D,$08,$78,$9A,$0E,$38,$03
 $703B DEFB $75,$06,$28,$07,$4E,$01,$11,$1F
 $7043 DEFB $7C,$0D,$1D,$07,$B0,$89,$DC,$3F
 $704B DEFB $20,$81,$35,$03,$61,$A1,$42,$07
 $7053 DEFB $AB,$A2,$37,$1F,$2D,$C1,$FA,$0F
 $705B DEFB $35,$0F,$C0,$07,$00,$00,$00,$00
 $7063 DEFB $2C,$01,$00,$A0,$0F,$00,$70,$17
 $706B DEFB $00,$A0,$0F,$01,$00,$00,$00,$82
 $7073 DEFB $14,$01,$00,$00,$00,$28,$23,$01
 $707B DEFB $88,$13,$01,$88,$13,$05,$00,$00
 $7083 DEFB $06,$00,$00,$00,$40,$1F

; Routine at 7089
;
; Used by the routine at #R$6FF2.
c$7089 LD A,($FC0B)  ;
 $708C BIT 5,A       ;
 $708E RET Z         ;
 $708F LD HL,$D08A   ;
 $7092 LD A,(HL)     ;
 $7093 AND A         ;
 $7094 RET Z         ;
 $7095 XOR A         ;
 $7096 LD (HL),A     ;
 $7097 INC A         ;
 $7098 LD ($9C95),A  ;
 $709B LD HL,$7128   ;
 $709E SET 0,(HL)    ;
 $70A0 LD C,$18      ;
*$70A2 CALL $70A9    ;
 $70A5 DEC C         ;
 $70A6 JR NZ,$70A2   ;
 $70A8 RET           ;

; Routine at 70A9
;
; Used by the routines at #R$6FF2 and #R$7089.
c$70A9 LD L,$28      ;
 $70AB CALL $70BA    ;
 $70AE LD L,$0F      ;

; Routine at 70B0
;
; Used by the routine at #R$6FF8.
c$70B0 LD A,($D041)  ;
 $70B3 AND A         ;
 $70B4 JR NZ,$70BA   ;
 $70B6 LD A,L        ;
 $70B7 AND $07       ;
 $70B9 LD L,A        ;
; This entry point is used by the routine at #R$70A9.
*$70BA LD A,($D081)  ;
 $70BD AND A         ;
 $70BE JR Z,$70C4    ;
 $70C0 LD A,L        ;
 $70C1 AND $3A       ;
 $70C3 LD L,A        ;
*$70C4 HALT          ;
 $70C5 LD ($70DE),SP ;
 $70C9 LD H,L        ;
 $70CA LD SP,$59FF   ;
 $70CD LD A,$10      ;
*$70CF LD B,$0F      ;
*$70D1 PUSH HL       ;
 $70D2 DJNZ $70D1    ;
 $70D4 DEC SP        ;
 $70D5 DEC SP        ;
 $70D6 DEC A         ;
 $70D7 JR NZ,$70CF   ;
 $70D9 LD SP,($70DE) ;
 $70DD RET           ;

; Unused
s$70DE DEFS $02

; Jump to 7366
;
; Used by the routine at #R$D07F.
@label=jump_to_7366
c$70E0 JP $7366      ;

; Byte at 70E3
b$70E3 DEFB $00

; Byte at 70E4
b$70E4 DEFB $00

; Byte at 70E5
b$70E5 DEFB $00

; Byte at 70E6
b$70E6 DEFB $0A

; Byte at 70E7
b$70E7 DEFB $00

; Byte at 70E8
b$70E8 DEFB $00,$00

; Data at 70EA
b$70EA DEFB $00,$00

; Data at 70EC
b$70EC DEFB $A0,$00

; Data at 70EE
b$70EE DEFB $00,$00

; Byte at 70F0
b$70F0 DEFB $00,$00

; Data at 70F2
b$70F2 DEFB $A0,$00

; Data at 70F4
b$70F4 DEFB $00,$FF

; Data at 70F6
b$70F6 DEFB $00,$00

; Data at 70F8
b$70F8 DEFB $00,$00

; Data at 70FA
b$70FA DEFB $A0,$00

; Data at 70FC
b$70FC DEFB $A0,$00

; Data at 70FE
b$70FE DEFB $00,$00

; Data at 7100
b$7100 DEFB $00,$00,$00

; Byte at 7103
b$7103 DEFB $00

; Byte at 7104
b$7104 DEFB $00

; Data at 7105
b$7105 DEFB $37,$4A

; Data at 7107
b$7107 DEFB $00,$00

; Data at 7109
b$7109 DEFB $00,$00,$80

; Data at 710C
b$710C DEFB $01,$00,$10

; Data at 710F
b$710F DEFB $09

; Data at 7110
b$7110 DEFB $00,$00

; Data at 7112
b$7112 DEFB $00,$00,$00

; Data at 7115
b$7115 DEFB $00,$00

; Data at 7117
b$7117 DEFB $80,$01

; Routine at 7119
;
; Used by the routines at #R$E6AE, #R$EB7C and #R$EC58.
c$7119 JP $8E29      ;

; Unused
s$711C DEFS $05

; Routine at 7121
;
; Used by the routines at #R$DAB4, #R$E306 and #R$EF87.
c$7121 JP $99A4      ;

; Unused
s$7124 DEFS $01

; Routine at 7125
;
; Used by the routine at #R$FF25.
@label=jump_to_sound
c$7125 JP $9579      ;

; Data block at 7128
b$7128 DEFB $00,$00,$C3,$30,$71,$C3,$74,$99
 $7130 DEFB $7E,$87,$4F,$87,$87,$81,$80,$77
 $7138 DEFB $7A,$C3,$48,$D0

; Routine at 713C
;
; Used by the routine at #R$7471.
c$713C LD HL,$FF09   ;
 $713F LD A,(HL)     ;
 $7140 LD ($70E4),A  ;
 $7143 BIT 7,A       ;
 $7145 JR NZ,$714B   ;
 $7147 ADD A,$15     ;
 $7149 JR $7151      ;
*$714B AND $7F       ;
 $714D LD C,A        ;
 $714E LD A,$15      ;
 $7150 SUB C         ;
*$7151 LD ($70FE),A  ;
 $7154 INC L         ;
 $7155 INC L         ;
 $7156 LD A,(HL)     ;
 $7157 LD ($70E5),A  ;
 $715A BIT 7,A       ;
 $715C JR NZ,$7162   ;
 $715E ADD A,$15     ;
 $7160 JR $7168      ;
*$7162 AND $7F       ;
 $7164 LD C,A        ;
 $7165 LD A,$15      ;
 $7167 SUB C         ;
*$7168 LD ($7100),A  ;
 $716B INC L         ;
 $716C INC L         ;
 $716D LD A,(HL)     ;
 $716E LD ($70E6),A  ;
 $7171 LD B,A        ;
 $7172 ADD A,A       ;
 $7173 ADD A,A       ;
 $7174 ADD A,B       ;
 $7175 ADD A,$05     ;
 $7177 LD ($70F4),A  ;
 $717A RET           ;

; Routine at 717B
;
; Used by the routine at #R$7471.
c$717B LD A,($9C9A)  ;
 $717E AND A         ;
 $717F JR Z,$7187    ;
 $7181 XOR A         ;
 $7182 LD ($9C9A),A  ;
 $7185 JR $71B3      ;
*$7187 LD A,($FC0B)  ;
 $718A LD B,A        ;
 $718B AND $80       ;
 $718D RES 7,B       ;
 $718F LD A,B        ;
 $7190 LD ($FC0B),A  ;
 $7193 RET Z         ;
 $7194 LD A,($711C)  ;
 $7197 AND A         ;
 $7198 RET Z         ;
 $7199 LD A,($D08C)  ;
 $719C AND A         ;
 $719D RET Z         ;
 $719E LD A,($7104)  ;
 $71A1 AND A         ;
 $71A2 RET Z         ;
 $71A3 LD A,($D03F)  ;
 $71A6 AND A         ;
 $71A7 RET NZ        ;
 $71A8 LD HL,$6069   ;
 $71AB BIT 2,(HL)    ;
 $71AD RET NZ        ;
 $71AE LD A,$01      ;
 $71B0 LD ($7129),A  ;
*$71B3 XOR A         ;
 $71B4 LD ($70E3),A  ;
 $71B7 CALL $8042    ;
; This entry point is used by the routine at #R$9C1C.
*$71BA CALL $71C0    ;
 $71BD JP $93ED      ;

; Routine at 71C0
;
; Used by the routine at #R$717B.
c$71C0 LD IY,$7107   ;
 $71C4 LD IX,$6048   ;
 $71C8 CALL $71CE    ;
 $71CB CALL $71CE    ;
*$71CE CALL $71E4    ;
 $71D1 ADD HL,HL     ;
 $71D2 JR NC,$71D6   ;
 $71D4 SET 7,H       ;
*$71D6 LD (IY+$02),H ;
 $71D9 LD (IY+$01),L ;
 $71DC LD DE,$0003   ;
 $71DF ADD IY,DE     ;
 $71E1 ADD IX,DE     ;
 $71E3 RET           ;

; Routine at 71E4
;
; Used by the routine at #R$71C0.
c$71E4 LD H,(IY+$02) ;
 $71E7 LD L,(IY+$01) ;
 $71EA LD D,(IX+$02) ;
 $71ED LD E,(IX+$01) ;
 $71F0 JP $9CA5      ;

; Routine at 71F3
;
; Used by the routine at #R$7471.
c$71F3 LD A,($70E3)  ;
 $71F6 CP $07        ;
 $71F8 RET C         ;
 $71F9 CP $09        ;
 $71FB RET NC        ;
 $71FC LD A,($D03F)  ;
 $71FF AND A         ;
 $7200 RET NZ        ;
 $7201 LD A,($FC09)  ;
 $7204 AND $0F       ;
 $7206 LD C,A        ;
 $7207 LD A,($FC0C)  ;
 $720A AND $70       ;
 $720C OR C          ;
 $720D RET Z         ;
 $720E LD B,$08      ;
*$7210 INC B         ;
 $7211 SRL A         ;
 $7213 JR NC,$7210   ;
 $7215 LD A,B        ;
 $7216 CALL $813E    ;
 $7219 XOR A         ;
 $721A LD ($FC0C),A  ;
 $721D LD ($FC09),A  ;
 $7220 RET           ;

; Data block at 7221
b$7221 DEFB $01

; Routine at 7222
;
; Used by the routine at #R$7471.
c$7222 LD HL,$7221   ;
 $7225 DEC (HL)      ;
 $7226 LD HL,$FC08   ;
 $7229 RES 7,(HL)    ;
 $722B RET NZ        ;
 $722C LD A,$02      ;
 $722E LD ($7221),A  ;
 $7231 HALT          ;
 $7232 BIT 7,(HL)    ;
 $7234 RET Z         ;
 $7235 LD HL,$D0B0   ;
 $7238 BIT 6,(HL)    ;
 $723A RET Z         ;
 $723B LD HL,$D041   ;
 $723E DEC (HL)      ;
 $723F JR Z,$7257    ;
 $7241 LD A,($70FA)  ;
 $7244 CP $28        ;
 $7246 RET C         ;
 $7247 LD A,$01      ;
 $7249 LD (HL),A     ;
 $724A LD HL,$6069   ;
 $724D RES 2,(HL)    ;
 $724F XOR A         ;
 $7250 LD ($9C99),A  ;
; This entry point is used by the routine at #R$7265.
*$7253 LD L,$0F      ;
 $7255 JR $7259      ;
*$7257 LD L,$07      ;
; This entry point is used by the routine at #R$725C.
*$7259 JP $6FF8      ;

; Routine at 725C
;
; Used by the routine at #R$8042.
c$725C LD A,($D081)  ;
 $725F AND A         ;
; This entry point is used by the routine at #R$726C.
*$7260 LD L,$02      ;
 $7262 JR NZ,$7259   ;
 $7264 RET           ;

; Routine at 7265
;
; Used by the routine at #R$8042.
c$7265 LD A,($D041)  ;
 $7268 AND A         ;
 $7269 JR NZ,$7253   ;
 $726B RET           ;

; Routine at 726C
;
; Used by the routine at #R$93ED.
c$726C LD A,($D081)  ;
 $726F AND A         ;
 $7270 RET Z         ;
 $7271 LD A,$01      ;
 $7273 LD ($D0BA),A  ;
 $7276 JR $7260      ;

; Routine at 7278
;
; Used by the routine at #R$93ED.
c$7278 LD A,($D0AF)  ;
 $727B DEC A         ;
 $727C JR Z,$727F    ;
 $727E DEC A         ;
*$727F JP Z,$D0DD    ;
 $7282 SUB $03       ;
 $7284 JP Z,$D0ED    ;
 $7287 DEC A         ;
 $7288 LD A,$D4      ;
 $728A JR Z,$7295    ;
 $728C RET           ;

; Routine at 728D
;
; Used by the routine at #R$93ED.
c$728D LD HL,$6065   ;
 $7290 BIT 7,(HL)    ;
 $7292 RET NZ        ;
 $7293 LD A,$0D      ;
; This entry point is used by the routine at #R$7278.
*$7295 CALL $D0D7    ;
 $7298 CALL $8042    ;
 $729B LD SP,($7578) ;
 $729F JP $7370      ;

; Unused
s$72A2 DEFS $01

; Routine at 72A3
;
; Used by the routine at #R$7471.
c$72A3 LD A,($FC0A)  ;
 $72A6 AND $80       ;
 $72A8 RET Z         ;
 $72A9 LD HL,$FC0E   ;
*$72AC HALT          ;
 $72AD LD A,($FC0D)  ;
 $72B0 INC A         ;
 $72B1 JR NZ,$72AC   ;
*$72B3 HALT          ;
 $72B4 LD A,($FC0D)  ;
 $72B7 CP $FF        ;
 $72B9 JR Z,$72B3    ;
 $72BB CP $42        ;
 $72BD CALL Z,$7304  ;
 $72C0 CP $44        ;
 $72C2 CALL Z,$730A  ;
 $72C5 CP $46        ;
 $72C7 CALL Z,$7310  ;
 $72CA CP $4B        ;
 $72CC CALL Z,$7331  ;
 $72CF CP $51        ;
 $72D1 CALL Z,$7316  ;
 $72D4 CP $52        ;
 $72D6 CALL Z,$731C  ;
 $72D9 CP $53        ;
 $72DB CALL Z,$7322  ;
 $72DE CP $59        ;
 $72E0 CALL Z,$732B  ;
 $72E3 CP $31        ;
 $72E5 JR Z,$72FF    ;
 $72E7 CP $20        ;
 $72E9 JR Z,$72F1    ;
 $72EB AND A         ;
 $72EC CALL Z,$7344  ;
 $72EF JR $72AC      ;
*$72F1 LD HL,$FC08   ;
 $72F4 XOR A         ;
 $72F5 LD (HL),A     ;
 $72F6 INC HL        ;
 $72F7 LD (HL),A     ;
 $72F8 INC HL        ;
 $72F9 LD (HL),A     ;
 $72FA INC HL        ;
 $72FB LD (HL),A     ;
 $72FC INC HL        ;
 $72FD LD (HL),A     ;
 $72FE RET           ;
*$72FF CALL $72F1    ;
 $7302 SCF           ;
 $7303 RET           ;

; Routine at 7304
;
; Used by the routine at #R$72A3.
c$7304 LD A,(HL)     ;
 $7305 XOR $10       ;
 $7307 LD (HL),A     ;
 $7308 XOR A         ;
 $7309 RET           ;

; Routine at 730A
;
; Used by the routine at #R$72A3.
c$730A LD A,(HL)     ;
 $730B XOR $08       ;
 $730D LD (HL),A     ;
 $730E XOR A         ;
 $730F RET           ;

; Routine at 7310
;
; Used by the routine at #R$72A3.
c$7310 LD A,(HL)     ;
 $7311 XOR $40       ;
 $7313 LD (HL),A     ;
 $7314 XOR A         ;
 $7315 RET           ;

; Routine at 7316
;
; Used by the routine at #R$72A3.
c$7316 LD A,(HL)     ;
 $7317 AND $7F       ;
 $7319 LD (HL),A     ;
 $731A XOR A         ;
 $731B RET           ;

; Routine at 731C
;
; Used by the routine at #R$72A3.
c$731C LD A,(HL)     ;
 $731D XOR $04       ;
 $731F LD (HL),A     ;
 $7320 XOR A         ;
 $7321 RET           ;

; Routine at 7322
;
; Used by the routine at #R$72A3.
c$7322 LD A,(HL)     ;
 $7323 OR $80        ;
 $7325 LD (HL),A     ;
 $7326 XOR A         ;
 $7327 LD ($7128),A  ;
 $732A RET           ;

; Routine at 732B
;
; Used by the routine at #R$72A3.
c$732B LD A,(HL)     ;
 $732C XOR $20       ;
 $732E LD (HL),A     ;
 $732F XOR A         ;
 $7330 RET           ;

; Routine at 7331
;
; Used by the routine at #R$72A3.
c$7331 LD A,(HL)     ;
 $7332 LD D,A        ;
 $7333 AND $03       ;
 $7335 LD A,($72A2)  ;
 $7338 JR NZ,$733D   ;
 $733A AND A         ;
 $733B JR Z,$7342    ;
*$733D LD A,($72A2)  ;
 $7340 XOR D         ;
 $7341 LD (HL),A     ;
*$7342 XOR A         ;
 $7343 RET           ;

; Routine at 7344
;
; Used by the routine at #R$72A3.
c$7344 LD B,$06      ;
 $7346 LD E,$00      ;
*$7348 PUSH BC       ;
 $7349 HALT          ;
 $734A LD C,$04      ;
*$734C LD A,E        ;
 $734D ADD A,A       ;
 $734E ADD A,$05     ;
 $7350 LD E,A        ;
 $7351 LD B,A        ;
 $7352 LD A,$30      ;
 $7354 OUT ($FE),A   ;
*$7356 DJNZ $7356    ;
 $7358 LD A,E        ;
 $7359 LD B,A        ;
 $735A XOR A         ;
 $735B OUT ($FE),A   ;
*$735D DJNZ $735D    ;
 $735F DEC C         ;
 $7360 JR NZ,$734C   ;
 $7362 POP BC        ;
 $7363 DJNZ $7348    ;
 $7365 RET           ;

; Title screen
;
; Used by the routine at #R$70E0.
@label=title_screen
c$7366 LD ($7578),SP ; Save the stack pointer
 $736A CALL $94F4    ;
 $736D CALL $804B    ; Draw the control panel
; This entry point is used by the routine at #R$728D.
*$7370 LD A,$79      ;
 $7372 CALL $9C9C    ; Create the ship
 $7375 CALL $7461    ;

; Title screen loop
@label=title_loop
c$7378 CALL $8080    ;
 $737B CALL $7426    ;
 $737E CALL $9CAF    ;
 $7381 CALL $7FBE    ;
 $7384 LD A,($FC0D)  ;
 $7387 INC A         ;
 $7388 JR Z,$7378    ;
 $738A CP $5A        ;
 $738C JR NZ,$739E   ;
 $738E CALL $817E    ;
 $7391 CALL $D04E    ;
; This entry point is used by the routine at #R$7471.
*$7394 XOR A         ;
 $7395 LD ($70E3),A  ;
 $7398 CALL $D036    ;
 $739B CALL $8042    ;
; This entry point is used by the routine at #R$7471.
*$739E LD HL,$6065   ;
 $73A1 SET 7,(HL)    ;
 $73A3 CALL $7461    ;
 $73A6 LD A,($FC0D)  ;
 $73A9 INC A         ;
 $73AA JR NZ,$739E   ;
 $73AC LD HL,$7470   ;
 $73AF INC (HL)      ;
 $73B0 LD A,(HL)     ;
 $73B1 AND $07       ;
 $73B3 INC A         ;
 $73B4 CP $06        ;
 $73B6 JR NC,$73BA   ;
 $73B8 ADD A,$0A     ;
*$73BA ADD A,A       ;
 $73BB ADD A,A       ;
 $73BC ADD A,A       ;
 $73BD ADD A,A       ;
 $73BE ADD A,$09     ;
 $73C0 CALL $9C9C    ;
*$73C3 CALL $8080    ;
 $73C6 CALL $7430    ;
 $73C9 CALL $9CAF    ;
 $73CC CALL $7FBE    ;
 $73CF LD BC,$FF1F   ;
 $73D2 LD HL,$FC0F   ;
 $73D5 HALT          ;
 $73D6 IN A,(C)      ; Read keyboard
 $73D8 BIT 5,A       ;
 $73DA JR NZ,$73E2   ;
 $73DC AND $02       ;
 $73DE LD A,$01      ;
 $73E0 JR NZ,$73F7   ;
*$73E2 LD A,$02      ;
 $73E4 BIT 1,(HL)    ;
 $73E6 JR NZ,$73F7   ;
 $73E8 INC A         ;
 $73E9 BIT 3,(HL)    ;
 $73EB JR NZ,$73F7   ;
 $73ED LD A,($FC0D)  ;
 $73F0 SUB $20       ;
 $73F2 JR NZ,$73C3   ;
 $73F4 LD B,A        ;
 $73F5 JR $73FD      ;
*$73F7 LD ($72A2),A  ;
 $73FA AND $03       ;
 $73FC LD B,A        ;
*$73FD LD HL,$FC0E   ;
 $7400 LD A,(HL)     ;
 $7401 AND $FC       ;
 $7403 OR B          ;
 $7404 LD (HL),A     ;
 $7405 CALL $D033    ;
 $7408 XOR A         ;
 $7409 LD ($7103),A  ;
 $740C LD ($7104),A  ;
 $740F LD ($D0BA),A  ;
 $7412 LD ($711E),A  ;
 $7415 LD ($D041),A  ;
 $7418 LD ($7583),A  ;
 $741B CALL $817E    ;
 $741E CALL $D015    ;
 $7421 CALL $94F4    ;
 $7424 JR $7471      ;

; Print title screen text
;
; Used by the routine at #R$7378.
@label=print_title_screen_text
c$7426 CALL $7447    ; Print ELITE line
 $7429 LD HL,$0E01   ; Coordinates for LOAD NEW COMMANDER
 $742C LD A,$06      ; Token number
 $742E JR $7438      ; To printing code

; Print PRESS SPACE, COMMANDER line
;
; Used by the routine at #R$7378.
c$7430 CALL $7447    ; Print ELITE line
 $7433 LD HL,$0E04   ; Coordinates for PRESS SPACE, COMMANDER
 $7436 LD A,$07      ; Token number
; This entry point is used by the routine at #R$7426.
*$7438 LD ($D045),HL ; Store coordinates
 $743B LD HL,($D0D5) ; {Set to print in buffer
 $743E INC HL        ;
 $743F INC HL        ;
 $7440 SET 7,(HL)    ; }
 $7442 CALL $D039    ; Print token
 $7445 JR $7459      ; Set to print on screen and return

; Print ELITE line
;
; Used by the routines at #R$7426 and #R$7430.
c$7447 LD HL,$0105   ; Coordinates for ELITE
 $744A LD ($D045),HL ; Store coordinates
 $744D LD A,$1D      ; Token number
 $744F LD HL,($D0D5) ; {Set to print in buffer
 $7452 INC HL        ;
 $7453 INC HL        ;
 $7454 SET 7,(HL)    ; }
 $7456 CALL $D048    ; Print token
; This entry point is used by the routine at #R$7430.
*$7459 LD HL,($D0D5) ; {Set to print on screen
 $745C INC HL        ;
 $745D INC HL        ;
 $745E RES 7,(HL)    ; }
 $7460 RET           ;

; Set attributes for 2/3 of the screen to white/black
;
; Used by the routines at #R$7366 and #R$7378.
@label=clear_attributes
c$7461 LD HL,$5800   ;
 $7464 CALL $7467    ;
*$7467 LD B,$00      ;
 $7469 LD A,$07      ;
*$746B LD (HL),A     ;
 $746C INC HL        ;
 $746D DJNZ $746B    ;
 $746F RET           ;

; Data block at 7470
@label=title_loop_count
b$7470 DEFB $06

; Routine at 7471
;
; Used by the routine at #R$7378.
c$7471 LD A,($7124)  ;
 $7474 AND A         ;
 $7475 JR NZ,$747A   ;
 $7477 CALL $713C    ;
*$747A CALL $80D3    ;
 $747D CALL $72A3    ;
 $7480 JR NC,$748C   ;
 $7482 XOR A         ;
 $7483 LD ($70E3),A  ;
 $7486 CALL $8042    ;
 $7489 JP $739E      ;
*$748C CALL $D042    ;
 $748F LD A,($7104)  ;
 $7492 AND A         ;
 $7493 JR NZ,$74AA   ;
 $7495 CALL $71F3    ;
 $7498 LD A,($FC09)  ;
 $749B BIT 5,A       ;
 $749D JR Z,$7471    ;
 $749F CALL $D04E    ;
 $74A2 JP NZ,$7394   ;
 $74A5 CALL $D015    ;
 $74A8 JR $7471      ;
*$74AA LD A,($7103)  ;
 $74AD AND A         ;
 $74AE JR NZ,$74BC   ;
 $74B0 CALL $717B    ;
 $74B3 CALL $7EDE    ;
 $74B6 CALL $7853    ;
 $74B9 CALL $7861    ;
*$74BC LD A,($70E3)  ;
 $74BF CP $04        ;
 $74C1 JR C,$74E4    ;
 $74C3 CALL $9C80    ;
 $74C6 LD A,($7104)  ;
 $74C9 AND A         ;
 $74CA JR Z,$74D2    ;
 $74CC CALL $988E    ;
 $74CF CALL $9A59    ;
*$74D2 CALL $75C0    ;
 $74D5 CALL $D03C    ;
 $74D8 LD B,$08      ;
*$74DA PUSH BC       ;
 $74DB CALL $71F3    ;
 $74DE HALT          ;
 $74DF POP BC        ;
 $74E0 DJNZ $74DA    ;
 $74E2 JR $750F      ;
*$74E4 CALL $8042    ;
 $74E7 CALL $8080    ;
 $74EA LD A,($7103)  ;
 $74ED AND A         ;
 $74EE CALL Z,$7584  ;
 $74F1 CALL $7898    ;
 $74F4 CALL $D03C    ;
 $74F7 CALL $9C80    ;
 $74FA CALL $9296    ;
 $74FD CALL $8F0D    ;
 $7500 CALL $7FBE    ;
 $7503 CALL $96D9    ;
 $7506 CALL $84D9    ;
 $7509 CALL $7222    ;
 $750C CALL $9A40    ;
*$750F CALL $81A9    ;
 $7512 LD A,($711F)  ;
 $7515 AND A         ;
 $7516 JP Z,$7471    ;
 $7519 XOR A         ;
 $751A LD ($70E6),A  ;
 $751D LD ($7120),A  ;
 $7520 INC A         ;
 $7521 LD ($7124),A  ;
 $7524 LD L,$07      ;
 $7526 CALL $6FF8    ;
 $7529 CALL $98CD    ;
 $752C CALL $9C9F    ;
 $752F CALL $9548    ;
 $7532 CALL $9527    ;
 $7535 CALL $8042    ;
 $7538 LD B,$1E      ;
*$753A PUSH BC       ;
 $753B CALL $8080    ;
 $753E CALL $7898    ;
 $7541 CALL $9C80    ;
 $7544 LD HL,($D0D5) ;
 $7547 INC HL        ;
 $7548 INC HL        ;
 $7549 PUSH HL       ;
 $754A SET 7,(HL)    ;
 $754C LD HL,$070A   ;
 $754F LD ($D045),HL ;
 $7552 LD A,$09      ;
 $7554 CALL $D039    ;
 $7557 POP HL        ;
 $7558 RES 7,(HL)    ;
 $755A CALL $7FBE    ;
 $755D POP BC        ;
 $755E DJNZ $753A    ;
 $7560 CALL $8080    ;
 $7563 CALL $7FBE    ;
 $7566 CALL $9509    ;
 $7569 LD B,$32      ;
*$756B HALT          ;
 $756C DJNZ $756B    ;
 $756E XOR A         ;
 $756F LD ($7124),A  ;
 $7572 LD ($711F),A  ;
 $7575 JP $739E      ;

; Unused
s$7578 DEFS $0C

; Routine at 7584
;
; Used by the routines at #R$7471 and #R$93ED.
c$7584 XOR A         ;
 $7585 LD ($7120),A  ;
 $7588 LD HL,$7107   ;
 $758B LD DE,$757A   ;
 $758E LD BC,$0009   ;
 $7591 LDIR          ;
 $7593 CALL $75E1    ;
 $7596 PUSH AF       ;
 $7597 CALL $75C0    ;
 $759A POP AF        ;
 $759B AND A         ;
 $759C JR Z,$75AD    ;
 $759E CALL $86D0    ;
 $75A1 LD A,($861D)  ;
 $75A4 CP $28        ;
 $75A6 JR C,$75AD    ;
 $75A8 LD A,$01      ;
 $75AA LD ($7120),A  ;
*$75AD LD HL,$7110   ;
 $75B0 LD DE,$757A   ;
 $75B3 LD BC,$0009   ;
 $75B6 LDIR          ;
 $75B8 CALL $75E1    ;
 $75BB AND A         ;
 $75BC RET Z         ;
 $75BD JP $86DE      ;

; Routine at 75C0
;
; Used by the routines at #R$7471 and #R$7584.
c$75C0 LD A,($D0BA)  ;
 $75C3 AND A         ;
 $75C4 RET Z         ;
 $75C5 LD A,($7583)  ;
 $75C8 AND A         ;
 $75C9 JR NZ,$75CE   ;
 $75CB LD A,($861D)  ;
*$75CE ADD A,$02     ;
 $75D0 JR Z,$75D4    ;
 $75D2 JR NC,$75DA   ;
*$75D4 LD A,$01      ;
 $75D6 LD ($711F),A  ;
 $75D9 XOR A         ;
*$75DA LD ($861D),A  ;
 $75DD LD ($7583),A  ;
 $75E0 RET           ;

; Routine at 75E1
;
; Used by the routine at #R$7584.
c$75E1 EXX           ;
 $75E2 LD BC,$0003   ;
 $75E5 EXX           ;
 $75E6 LD A,($70E3)  ;
 $75E9 AND A         ;
 $75EA JP NZ,$7695   ;
 $75ED LD A,($7582)  ;
 $75F0 BIT 7,A       ;
 $75F2 JP NZ,$782A   ;
 $75F5 AND $7F       ;
 $75F7 LD ($7582),A  ;
 $75FA LD HL,($7581) ;
 $75FD EX DE,HL      ;
 $75FE LD HL,($757B) ;
 $7601 LD A,($7580)  ;
 $7604 LD B,A        ;
 $7605 LD A,($757A)  ;
 $7608 LD C,A        ;
 $7609 LD A,H        ;
 $760A BIT 7,A       ;
 $760C JR NZ,$7612   ;
 $760E EXX           ;
 $760F SET 0,B       ;
 $7611 EXX           ;
*$7612 AND $7F       ;
 $7614 LD H,A        ;
 $7615 CALL $77A0    ;
 $7618 LD A,D        ;
 $7619 LD ($861B),A  ;
 $761C LD HL,($7581) ;
 $761F EX DE,HL      ;
 $7620 LD HL,($757E) ;
 $7623 LD A,($7580)  ;
 $7626 LD B,A        ;
 $7627 LD A,($757D)  ;
 $762A LD C,A        ;
 $762B LD A,H        ;
 $762C BIT 7,A       ;
 $762E JR NZ,$7634   ;
 $7630 EXX           ;
 $7631 SET 1,B       ;
 $7633 EXX           ;
*$7634 AND $7F       ;
 $7636 LD H,A        ;
 $7637 CALL $77A0    ;
 $763A LD A,D        ;
 $763B LD ($861A),A  ;
 $763E EXX           ;
 $763F LD A,B        ;
 $7640 EXX           ;
 $7641 LD ($861C),A  ;
 $7644 LD A,($7582)  ;
 $7647 AND A         ;
 $7648 JR NZ,$7659   ;
 $764A LD HL,$A000   ;
 $764D LD DE,($7580) ;
 $7651 SBC HL,DE     ;
 $7653 JR C,$7659    ;
 $7655 LD A,$FF      ;
 $7657 JR $7692      ;
*$7659 LD HL,$A000   ;
 $765C LD DE,($7581) ;
 $7660 AND A         ;
 $7661 SBC HL,DE     ;
 $7663 JP C,$782A    ;
 $7666 LD A,($7582)  ;
 $7669 AND A         ;
 $766A JR Z,$7688    ;
 $766C LD B,A        ;
 $766D LD A,($7581)  ;
 $7670 LD C,A        ;
 $7671 XOR A         ;
 $7672 LD E,$A0      ;
*$7674 SLA C         ;
 $7676 RL B          ;
 $7678 JR C,$767F    ;
 $767A SLA E         ;
 $767C RLA           ;
 $767D JR $7674      ;
*$767F SCF           ;
 $7680 RR B          ;
 $7682 CALL $783D    ;
 $7685 LD A,D        ;
 $7686 JR $7692      ;
*$7688 LD A,($7581)  ;
 $768B LD B,A        ;
 $768C LD A,$A0      ;
 $768E CALL $783B    ;
 $7691 LD A,D        ;
*$7692 JP $7793      ;
*$7695 DEC A         ;
 $7696 JR NZ,$76C3   ;
 $7698 LD A,($7582)  ;
 $769B BIT 7,A       ;
 $769D JP Z,$782A    ;
 $76A0 AND $7F       ;
 $76A2 LD ($7582),A  ;
 $76A5 LD HL,($7581) ;
 $76A8 EX DE,HL      ;
 $76A9 LD HL,($757B) ;
 $76AC LD A,($7580)  ;
 $76AF LD B,A        ;
 $76B0 LD A,($757A)  ;
 $76B3 LD C,A        ;
 $76B4 LD A,H        ;
 $76B5 BIT 7,A       ;
 $76B7 JR Z,$76C0    ;
 $76B9 AND $7F       ;
 $76BB LD H,A        ;
 $76BC EXX           ;
 $76BD SET 0,B       ;
 $76BF EXX           ;
*$76C0 JP $7612      ;
*$76C3 DEC A         ;
 $76C4 JP NZ,$7770   ;
 $76C7 LD A,($757C)  ;
 $76CA BIT 7,A       ;
 $76CC JP Z,$782A    ;
 $76CF AND $7F       ;
 $76D1 LD ($757C),A  ;
 $76D4 LD HL,($757B) ;
 $76D7 EX DE,HL      ;
 $76D8 LD HL,($7581) ;
 $76DB LD A,($757A)  ;
 $76DE LD B,A        ;
 $76DF LD A,($7580)  ;
 $76E2 LD C,A        ;
 $76E3 LD A,H        ;
 $76E4 BIT 7,A       ;
 $76E6 JR NZ,$76EC   ;
 $76E8 EXX           ;
 $76E9 SET 0,B       ;
 $76EB EXX           ;
*$76EC AND $7F       ;
 $76EE LD H,A        ;
 $76EF CALL $77A0    ;
 $76F2 LD A,D        ;
 $76F3 LD ($861B),A  ;
 $76F6 LD HL,($757B) ;
 $76F9 EX DE,HL      ;
 $76FA LD HL,($757E) ;
 $76FD LD A,($757A)  ;
 $7700 LD B,A        ;
 $7701 LD A,($757D)  ;
 $7704 LD C,A        ;
 $7705 LD A,H        ;
 $7706 BIT 7,A       ;
 $7708 JR NZ,$770E   ;
 $770A EXX           ;
 $770B SET 1,B       ;
 $770D EXX           ;
*$770E AND $7F       ;
 $7710 LD H,A        ;
 $7711 CALL $77A0    ;
 $7714 LD A,D        ;
 $7715 LD ($861A),A  ;
 $7718 EXX           ;
 $7719 LD A,B        ;
 $771A EXX           ;
 $771B LD ($861C),A  ;
 $771E LD A,($757C)  ;
 $7721 AND A         ;
 $7722 JR NZ,$7733   ;
 $7724 LD HL,$A000   ;
 $7727 LD DE,($757A) ;
 $772B SBC HL,DE     ;
 $772D JR C,$7733    ;
 $772F LD A,$FF      ;
 $7731 JR $776D      ;
*$7733 LD HL,$A000   ;
 $7736 LD DE,($757B) ;
 $773A AND A         ;
 $773B SBC HL,DE     ;
 $773D JP C,$782A    ;
 $7740 LD A,($757C)  ;
 $7743 AND A         ;
 $7744 JR Z,$7763    ;
 $7746 LD B,A        ;
 $7747 LD A,($757B)  ;
 $774A LD C,A        ;
 $774B XOR A         ;
 $774C LD E,$A0      ;
*$774E SLA C         ;
 $7750 RL B          ;
 $7752 JR C,$775A    ;
 $7754 SLA E         ;
 $7756 RLA           ;
 $7757 JP $774E      ;
*$775A SCF           ;
 $775B RR B          ;
 $775D CALL $783D    ;
 $7760 LD A,D        ;
 $7761 JR $776D      ;
*$7763 LD A,($757B)  ;
 $7766 LD B,A        ;
 $7767 LD A,$A0      ;
 $7769 CALL $783B    ;
 $776C LD A,D        ;
*$776D JP $7793      ;
*$7770 LD A,($757C)  ;
 $7773 BIT 7,A       ;
 $7775 JP NZ,$782A   ;
 $7778 LD HL,($757B) ;
 $777B EX DE,HL      ;
 $777C LD HL,($7581) ;
 $777F LD A,($757A)  ;
 $7782 LD B,A        ;
 $7783 LD A,($7580)  ;
 $7786 LD C,A        ;
 $7787 LD A,H        ;
 $7788 BIT 7,A       ;
 $778A JR Z,$7790    ;
 $778C EXX           ;
 $778D SET 0,B       ;
 $778F EXX           ;
*$7790 JP $76EC      ;
*$7793 LD ($861D),A  ;
 $7796 LD A,$01      ;
 $7798 RET           ;

; Routine at 7799
;
; Used by the routine at #R$77A0.
c$7799 LD H,L        ;
 $779A LD L,C        ;
 $779B LD D,E        ;
 $779C LD E,B        ;
 $779D JP $77C4      ;

; Routine at 77A0
;
; Used by the routine at #R$75E1.
c$77A0 PUSH HL       ;
 $77A1 EXX           ;
 $77A2 DEC C         ;
 $77A3 EXX           ;
 $77A4 AND A         ;
 $77A5 SBC HL,DE     ;
 $77A7 JP C,$77ED    ;
 $77AA JP Z,$77DD    ;
*$77AD POP HL        ;
 $77AE LD A,H        ;
 $77AF AND A         ;
 $77B0 JR Z,$7799    ;
 $77B2 LD A,$08      ;
*$77B4 SLA C         ;
 $77B6 ADC HL,HL     ;
 $77B8 JP C,$780A    ;
 $77BB SLA B         ;
 $77BD RL E          ;
 $77BF RL D          ;
 $77C1 DEC A         ;
 $77C2 JR NZ,$77B4   ;
; This entry point is used by the routine at #R$7799.
*$77C4 LD A,$08      ;
*$77C6 ADD HL,HL     ;
 $77C7 JP C,$780A    ;
 $77CA EX DE,HL      ;
 $77CB ADD HL,HL     ;
 $77CC EX DE,HL      ;
 $77CD DEC A         ;
 $77CE JR NZ,$77C6   ;
 $77D0 LD A,$08      ;
*$77D2 SLA H         ;
 $77D4 JP C,$780A    ;
 $77D7 SLA D         ;
 $77D9 DEC A         ;
 $77DA JR NZ,$77D2   ;
 $77DC RET           ;
*$77DD PUSH BC       ;
 $77DE LD A,C        ;
 $77DF SUB B         ;
 $77E0 POP BC        ;
 $77E1 JR C,$77ED    ;
 $77E3 JR Z,$77ED    ;
 $77E5 JP $77AD      ;

; Routine at 77E8
;
; Used by the routine at #R$77ED.
c$77E8 SET 2,B       ;
 $77EA JP $77F3      ;

; Routine at 77ED
;
; Used by the routine at #R$77A0.
c$77ED EXX           ;
 $77EE DEC C         ;
 $77EF JR NZ,$77E8   ;
 $77F1 SET 3,B       ;
; This entry point is used by the routine at #R$77E8.
*$77F3 INC C         ;
 $77F4 EXX           ;
 $77F5 POP HL        ;
 $77F6 LD A,$17      ;
*$77F8 SLA C         ;
 $77FA ADC HL,HL     ;
 $77FC PUSH AF       ;
 $77FD SLA B         ;
 $77FF RL E          ;
 $7801 RL D          ;
 $7803 JR C,$7831    ;
 $7805 POP AF        ;
 $7806 DEC A         ;
 $7807 JR NZ,$77F8   ;
 $7809 RET           ;

; Routine at 780A
;
; Used by the routine at #R$77A0.
c$780A SLA B         ;
 $780C RL E          ;
 $780E RL D          ;
 $7810 PUSH AF       ;
 $7811 SCF           ;
 $7812 RR H          ;
 $7814 RR L          ;
 $7816 POP AF        ;
 $7817 JR C,$7820    ;
 $7819 PUSH HL       ;
 $781A AND A         ;
 $781B SBC HL,DE     ;
 $781D JR NC,$7828   ;
 $781F POP HL        ;
*$7820 SCF           ;
 $7821 RR D          ;
 $7823 AND A         ;
 $7824 SBC HL,DE     ;
 $7826 JR $7839      ;
*$7828 POP HL        ;
 $7829 POP AF        ;
; This entry point is used by the routine at #R$75E1.
*$782A XOR A         ;
 $782B RET           ;

; Routine at 782C
;
; Used by the routine at #R$7831.
c$782C SCF           ;
 $782D RR H          ;
 $782F JR $7836      ;

; Routine at 7831
;
; Used by the routine at #R$77ED.
c$7831 POP AF        ;
 $7832 JR C,$782C    ;
 $7834 RR H          ;
; This entry point is used by the routine at #R$782C.
*$7836 SCF           ;
 $7837 RR D          ;
; This entry point is used by the routine at #R$780A.
*$7839 LD A,H        ;
 $783A LD B,D        ;
; This entry point is used by the routine at #R$75E1.
*$783B LD E,$00      ;
; This entry point is used by the routine at #R$75E1.
*$783D LD D,$FE      ;
*$783F SLA E         ;
 $7841 RLA           ;
 $7842 JR C,$784C    ;
 $7844 CP B          ;
 $7845 JR NC,$784C   ;
 $7847 SLA D         ;
 $7849 RET NC        ;
 $784A JR $783F      ;
*$784C SUB B         ;
 $784D SCF           ;
 $784E RL D          ;
 $7850 RET NC        ;
 $7851 JR $783F      ;

; Routine at 7853
;
; Used by the routines at #R$7471 and #R$93ED.
c$7853 LD IX,$7107   ;
 $7857 CALL $9C83    ;
 $785A LD IX,$7110   ;
 $785E JP $9C83      ;

; Routine at 7861
;
; Used by the routine at #R$7471.
c$7861 LD A,($711D)   ;
 $7864 AND A          ;
 $7865 LD IX,$6048    ;
 $7869 JR NZ,$7874    ;
 $786B LD A,(IX+$22)  ;
 $786E AND A          ;
 $786F RET NZ         ;
 $7870 DEC A          ;
 $7871 LD ($711D),A   ;
*$7874 CALL $9C83     ;
 $7877 LD A,(IX+$02)  ;
 $787A AND $7F        ;
 $787C RET NZ         ;
 $787D LD A,(IX+$05)  ;
 $7880 AND $7F        ;
 $7882 RET NZ         ;
 $7883 LD A,(IX+$08)  ;
 $7886 AND $7F        ;
 $7888 RET NZ         ;
 $7889 BIT 7,(IX+$26) ;
 $788D RET NZ         ;
 $788E XOR A          ;
 $788F LD ($711D),A   ;
 $7892 LD A,$F0       ;
 $7894 LD (IX+$22),A  ;
 $7897 RET            ;

; Routine at 7898
;
; Used by the routines at #R$7471 and #R$93ED.
c$7898 LD A,($7EDD)  ;
 $789B DEC A         ;
 $789C JR NZ,$78B1   ;
 $789E LD ($7EDD),A  ;
 $78A1 LD A,$1E      ;
 $78A3 LD ($70E6),A  ;
 $78A6 CALL $78B1    ;
 $78A9 LD A,$10      ;
 $78AB LD ($70E6),A  ;
 $78AE CALL $78B1    ;
*$78B1 XOR A         ;
 $78B2 LD ($7F80),A  ;
 $78B5 LD ($7F72),A  ;
 $78B8 LD A,($70E6)  ;
 $78BB SRL A         ;
 $78BD INC A         ;
 $78BE LD ($7F75),A  ;
 $78C1 LD HL,($70E4) ;
 $78C4 LD ($7F6F),HL ;
 $78C7 LD A,$10      ;
 $78C9 LD ($7F7C),A  ;
 $78CC LD A,($7103)  ;
 $78CF AND A         ;
 $78D0 JR Z,$78D7    ;
 $78D2 LD A,$04      ;
 $78D4 LD ($7F7C),A  ;
*$78D7 LD A,($7F7B)  ;
 $78DA LD B,A        ;
 $78DB LD A,($70E3)  ;
 $78DE CP B          ;
 $78DF LD ($7F7B),A  ;
 $78E2 CALL NZ,$7E6D ;
 $78E5 LD HL,$7F82   ;
 $78E8 LD ($7F7D),HL ;
 $78EB LD B,$00      ;
 $78ED LD DE,$7E8D   ;
 $78F0 LD ($7F73),DE ;
 $78F4 LD A,(DE)     ;
 $78F5 CP $80        ;
 $78F7 JR C,$78FD    ;
 $78F9 AND $7F       ;
 $78FB SET 7,B       ;
*$78FD LD ($7F77),A  ;
 $7900 INC DE        ;
 $7901 LD A,(DE)     ;
 $7902 CP $80        ;
 $7904 JR C,$790A    ;
 $7906 AND $7F       ;
 $7908 SET 6,B       ;
*$790A LD ($7F79),A  ;
 $790D INC DE        ;
 $790E LD A,(DE)     ;
 $790F LD ($7F7A),A  ;
 $7912 INC DE        ;
 $7913 LD A,(DE)     ;
 $7914 LD ($7F76),A  ;
 $7917 INC DE        ;
 $7918 LD A,(DE)     ;
 $7919 LD ($7F78),A  ;
 $791C LD A,($7F6F)  ;
 $791F CP $80        ;
 $7921 JR C,$792A    ;
 $7923 AND $7F       ;
 $7925 SET 4,B       ;
 $7927 LD ($7F6F),A  ;
*$792A LD A,($7F70)  ;
 $792D CP $80        ;
 $792F JR C,$7938    ;
 $7931 AND $7F       ;
 $7933 SET 3,B       ;
 $7935 LD ($7F70),A  ;
*$7938 LD A,B        ;
 $7939 LD ($7F7F),A  ;
 $793C LD A,($70E3)  ;
 $793F AND A         ;
 $7940 JP NZ,$7BFC   ;
; This entry point is used by the routine at #R$7BFC.
*$7943 LD A,($7F75)  ;
 $7946 LD C,A        ;
 $7947 LD A,($7F77)  ;
 $794A LD B,$05      ;
 $794C CALL $7CC1    ;
 $794F PUSH HL       ;
 $7950 LD A,($7F75)  ;
 $7953 LD C,A        ;
 $7954 LD A,($7F76)  ;
 $7957 LD B,$05      ;
 $7959 CALL $7CC1    ;
 $795C POP DE        ;
 $795D LD A,($7F76)  ;
 $7960 ADD A,L       ;
 $7961 LD ($7F76),A  ;
 $7964 LD A,H        ;
 $7965 JR NC,$7968   ;
 $7967 INC A         ;
*$7968 ADD A,E       ;
 $7969 LD E,A        ;
 $796A JR NC,$796D   ;
 $796C INC D         ;
*$796D LD A,($7F7A)  ;
 $7970 LD B,A        ;
 $7971 LD A,D        ;
 $7972 AND A         ;
 $7973 JR NZ,$7980   ;
 $7975 LD A,E        ;
 $7976 CP B          ;
 $7977 JR NC,$7980   ;
 $7979 CALL $7CFB    ;
 $797C LD B,$00      ;
 $797E JR $7986      ;
*$7980 LD A,D        ;
 $7981 LD L,E        ;
 $7982 CALL $7CD5    ;
 $7985 LD B,C        ;
*$7986 LD C,D        ;
 $7987 LD A,($7F7F)  ;
 $798A AND $20       ;
 $798C LD HL,($7F76) ;
 $798F JR NZ,$7999   ;
 $7991 ADD HL,BC     ;
 $7992 LD A,H        ;
 $7993 CP $78        ;
 $7995 JR NC,$79F7   ;
 $7997 JR $79A0      ;
*$7999 AND A         ;
 $799A SBC HL,BC     ;
 $799C JR C,$79F7    ;
 $799E JR Z,$79F7    ;
*$79A0 LD ($7F76),HL ;
 $79A3 LD A,($7F75)  ;
 $79A6 LD C,A        ;
 $79A7 LD A,($7F79)  ;
 $79AA LD B,$05      ;
 $79AC CALL $7CC1    ;
 $79AF PUSH HL       ;
 $79B0 LD A,($7F75)  ;
 $79B3 LD C,A        ;
 $79B4 LD A,($7F78)  ;
 $79B7 LD B,$05      ;
 $79B9 CALL $7CC1    ;
 $79BC POP DE        ;
 $79BD LD A,($7F78)  ;
 $79C0 ADD A,L       ;
 $79C1 LD ($7F78),A  ;
 $79C4 LD A,H        ;
 $79C5 INC A         ;
 $79C6 ADD A,E       ;
 $79C7 LD E,A        ;
 $79C8 JR NC,$79CB   ;
 $79CA INC D         ;
*$79CB LD A,($7F7A)  ;
 $79CE LD B,A        ;
 $79CF LD A,D        ;
 $79D0 AND A         ;
 $79D1 JR NZ,$79DE   ;
 $79D3 LD A,E        ;
 $79D4 CP B          ;
 $79D5 JR NC,$79DE   ;
 $79D7 CALL $7CFB    ;
 $79DA LD B,$00      ;
 $79DC JR $79E4      ;
*$79DE LD A,D        ;
 $79DF LD L,E        ;
 $79E0 CALL $7CD5    ;
 $79E3 LD B,C        ;
*$79E4 LD C,D        ;
 $79E5 LD A,($7F7F)  ;
 $79E8 AND $20       ;
 $79EA LD HL,($7F78) ;
 $79ED JR NZ,$79FA   ;
 $79EF ADD HL,BC     ;
 $79F0 LD A,H        ;
 $79F1 CP $78        ;
 $79F3 JR NC,$79F7   ;
 $79F5 JR $79FF      ;
*$79F7 JP $7D55      ;
*$79FA AND A         ;
 $79FB SBC HL,BC     ;
 $79FD JR C,$79F7    ;
*$79FF LD ($7F78),HL ;
 $7A02 LD A,($7F75)  ;
 $7A05 LD C,A        ;
 $7A06 LD A,($7F7F)  ;
 $7A09 AND $20       ;
 $7A0B JR NZ,$7A13   ;
 $7A0D LD A,($7F7A)  ;
 $7A10 SUB C         ;
 $7A11 JR $7A17      ;
*$7A13 LD A,($7F7A)  ;
 $7A16 ADD A,C       ;
*$7A17 JR C,$79F7    ;
 $7A19 JR Z,$79F7    ;
 $7A1B LD ($7F7A),A  ;
; This entry point is used by the routine at #R$7BFC.
*$7A1E LD A,($7F6F)  ;
 $7A21 AND A         ;
 $7A22 JP Z,$7ABC    ;
 $7A25 LD C,A        ;
 $7A26 LD A,($7F79)  ;
 $7A29 CALL $7AA5    ;
 $7A2C JR Z,$7A6A    ;
 $7A2E LD L,A        ;
 $7A2F LD A,($7F7F)  ;
 $7A32 BIT 7,A       ;
 $7A34 JR NZ,$7A46   ;
 $7A36 BIT 6,A       ;
 $7A38 JR NZ,$7A40   ;
 $7A3A BIT 4,A       ;
 $7A3C JR NZ,$7A56   ;
 $7A3E JR $7A60      ;
*$7A40 BIT 4,A       ;
 $7A42 JR NZ,$7A60   ;
 $7A44 JR $7A56      ;
*$7A46 BIT 6,A       ;
 $7A48 JR NZ,$7A50   ;
 $7A4A BIT 4,A       ;
 $7A4C JR NZ,$7A60   ;
 $7A4E JR $7A56      ;
*$7A50 BIT 4,A       ;
 $7A52 JR NZ,$7A56   ;
 $7A54 JR $7A60      ;
*$7A56 LD A,($7F77)  ;
 $7A59 ADD A,L       ;
 $7A5A CP $78        ;
 $7A5C JR NC,$79F7   ;
 $7A5E JR $7A67      ;
*$7A60 LD A,($7F77)  ;
 $7A63 SUB L         ;
 $7A64 CALL C,$7CB4  ;
*$7A67 LD ($7F77),A  ;
*$7A6A LD A,($7F6F)  ;
 $7A6D LD C,A        ;
 $7A6E LD A,($7F77)  ;
 $7A71 CALL $7AA5    ;
 $7A74 JR Z,$7ABC    ;
 $7A76 LD L,A        ;
 $7A77 LD A,($7F7F)  ;
 $7A7A BIT 7,A       ;
 $7A7C JR NZ,$7A8E   ;
 $7A7E BIT 6,A       ;
 $7A80 JR NZ,$7A88   ;
 $7A82 BIT 4,A       ;
 $7A84 JR NZ,$7A9C   ;
 $7A86 JR $7AB0      ;
*$7A88 BIT 4,A       ;
 $7A8A JR NZ,$7AB0   ;
 $7A8C JR $7A9C      ;
*$7A8E BIT 6,A       ;
 $7A90 JR NZ,$7A98   ;
 $7A92 BIT 4,A       ;
 $7A94 JR NZ,$7AB0   ;
 $7A96 JR $7A9C      ;
*$7A98 BIT 4,A       ;
 $7A9A JR Z,$7AB0    ;
*$7A9C LD A,($7F79)  ;
 $7A9F SUB L         ;
 $7AA0 CALL C,$7CA7  ;
 $7AA3 JR $7AB9      ;

; Routine at 7AA5
;
; Used by the routine at #R$7898.
c$7AA5 LD B,$04      ;
 $7AA7 CALL $7CC1    ;
 $7AAA LD A,H        ;
 $7AAB RL L          ;
 $7AAD RLA           ;
 $7AAE AND A         ;
 $7AAF RET           ;

; Routine at 7AB0
;
; Used by the routine at #R$7898.
c$7AB0 LD A,($7F79)  ;
 $7AB3 ADD A,L       ;
 $7AB4 CP $78        ;
 $7AB6 JP NC,$7D55   ;
; This entry point is used by the routine at #R$7898.
*$7AB9 LD ($7F79),A  ;
; This entry point is used by the routine at #R$7898.
*$7ABC LD A,($7F70)  ;
 $7ABF AND A         ;
 $7AC0 JP Z,$7B5D    ;
 $7AC3 LD C,A        ;
 $7AC4 LD A,($7F79)  ;
 $7AC7 LD E,A        ;
 $7AC8 LD B,$04      ;
 $7ACA CALL $7CC1    ;
 $7ACD EX DE,HL      ;
 $7ACE LD HL,$4000   ;
 $7AD1 LD A,($7F7F)  ;
 $7AD4 BIT 6,A       ;
 $7AD6 JR NZ,$7ADE   ;
 $7AD8 BIT 3,A       ;
 $7ADA JR Z,$7AE5    ;
 $7ADC JR $7AE2      ;
*$7ADE BIT 3,A       ;
 $7AE0 JR NZ,$7AE5   ;
*$7AE2 ADD HL,DE     ;
 $7AE3 JR $7AE8      ;
*$7AE5 AND A         ;
 $7AE6 SBC HL,DE     ;
*$7AE8 ADD HL,HL     ;
 $7AE9 LD A,H        ;
 $7AEA LD ($7F71),A  ;
 $7AED LD A,($7F7A)  ;
 $7AF0 LD E,A        ;
 $7AF1 LD B,$08      ;
 $7AF3 LD C,H        ;
 $7AF4 CALL $7CC1    ;
 $7AF7 AND A         ;
 $7AF8 ADC HL,HL     ;
 $7AFA JR C,$7B39    ;
 $7AFC JR Z,$7B39    ;
 $7AFE LD A,H        ;
 $7AFF LD ($7F7A),A  ;
 $7B02 LD A,($7F71)  ;
 $7B05 LD B,A        ;
 $7B06 LD A,($7F77)  ;
 $7B09 SRL A         ;
 $7B0B CALL $7CFB    ;
 $7B0E LD A,D        ;
 $7B0F AND A         ;
 $7B10 JR Z,$7B39    ;
 $7B12 BIT 7,A       ;
 $7B14 JR NZ,$7B39   ;
 $7B16 LD ($7F77),A  ;
 $7B19 LD A,($7F70)  ;
 $7B1C LD B,A        ;
 $7B1D LD A,($7F79)  ;
 $7B20 LD C,A        ;
 $7B21 LD A,($7F7F)  ;
 $7B24 BIT 6,A       ;
 $7B26 JR NZ,$7B2E   ;
 $7B28 BIT 3,A       ;
 $7B2A JR NZ,$7B32   ;
 $7B2C JR $7B3C      ;
*$7B2E BIT 3,A       ;
 $7B30 JR NZ,$7B3C   ;
*$7B32 LD A,C        ;
 $7B33 SUB B         ;
 $7B34 CALL C,$7CA7  ;
 $7B37 JR $7B3E      ;
*$7B39 JP $7D55      ;
*$7B3C LD A,C        ;
 $7B3D ADD A,B       ;
*$7B3E SRL A         ;
 $7B40 LD C,A        ;
 $7B41 LD A,($7F71)  ;
 $7B44 LD B,A        ;
 $7B45 LD A,C        ;
 $7B46 CALL $7CFB    ;
 $7B49 LD A,D        ;
 $7B4A AND A         ;
 $7B4B JR NZ,$7B55   ;
 $7B4D LD A,($7F7F)  ;
 $7B50 XOR $40       ;
 $7B52 LD ($7F7F),A  ;
*$7B55 LD A,D        ;
 $7B56 CP $40        ;
 $7B58 JR NC,$7B39   ;
 $7B5A LD ($7F79),A  ;
*$7B5D LD A,($7F6F)  ;
 $7B60 AND A         ;
 $7B61 LD A,($7F79)  ;
 $7B64 JR NZ,$7B6A   ;
 $7B66 CP $3F        ;
 $7B68 JR NC,$7B39   ;
*$7B6A CP $3F        ;
 $7B6C JR NC,$7B84   ;
 $7B6E CALL $7D0F    ;
 $7B71 LD HL,($7F7D) ;
 $7B74 LD (HL),E     ;
 $7B75 INC HL        ;
 $7B76 LD (HL),D     ;
 $7B77 INC HL        ;
 $7B78 LD (HL),C     ;
 $7B79 INC HL        ;
 $7B7A LD ($7F7D),HL ;
 $7B7D LD A,($7F80)  ;
 $7B80 INC A         ;
 $7B81 LD ($7F80),A  ;
*$7B84 LD HL,($7F73) ;
 $7B87 LD A,($7F7F)  ;
 $7B8A LD B,A        ;
 $7B8B LD A,($7F77)  ;
 $7B8E BIT 7,B       ;
 $7B90 JR Z,$7B94    ;
 $7B92 OR $80        ;
*$7B94 LD (HL),A     ;
 $7B95 INC HL        ;
 $7B96 LD A,($7F79)  ;
 $7B99 BIT 6,B       ;
 $7B9B JR Z,$7B9F    ;
 $7B9D OR $80        ;
*$7B9F LD (HL),A     ;
 $7BA0 INC HL        ;
 $7BA1 LD A,($7F7A)  ;
 $7BA4 LD (HL),A     ;
 $7BA5 INC HL        ;
 $7BA6 LD A,($7F76)  ;
 $7BA9 LD (HL),A     ;
 $7BAA INC HL        ;
 $7BAB LD A,($7F78)  ;
 $7BAE LD (HL),A     ;
 $7BAF INC HL        ;
 $7BB0 LD ($7F73),HL ;
; This entry point is used by the routine at #R$7D55.
*$7BB3 LD A,($7F7C)  ;
 $7BB6 DEC A         ;
 $7BB7 JP Z,$7C92    ;
 $7BBA LD ($7F7C),A  ;
 $7BBD LD A,($7F7F)  ;
 $7BC0 AND $3B       ;
 $7BC2 LD B,A        ;
 $7BC3 LD DE,($7F73) ;
 $7BC7 LD A,(DE)     ;
 $7BC8 CP $80        ;
 $7BCA JR C,$7BD0    ;
 $7BCC AND $7F       ;
 $7BCE SET 7,B       ;
*$7BD0 LD ($7F77),A  ;
 $7BD3 INC DE        ;
 $7BD4 LD A,(DE)     ;
 $7BD5 CP $80        ;
 $7BD7 JR C,$7BDD    ;
 $7BD9 AND $7F       ;
 $7BDB SET 6,B       ;
*$7BDD LD ($7F79),A  ;
 $7BE0 INC DE        ;
 $7BE1 LD A,(DE)     ;
 $7BE2 LD ($7F7A),A  ;
 $7BE5 INC DE        ;
 $7BE6 LD A,(DE)     ;
 $7BE7 LD ($7F76),A  ;
 $7BEA INC DE        ;
 $7BEB LD A,(DE)     ;
 $7BEC LD ($7F78),A  ;
 $7BEF LD A,B        ;
 $7BF0 LD ($7F7F),A  ;
 $7BF3 LD A,($7F72)  ;
 $7BF6 DEC A         ;
 $7BF7 JP Z,$7C55    ;
 $7BFA JR $7C07      ;

; Routine at 7BFC
;
; Used by the routine at #R$7898.
c$7BFC DEC A         ;
 $7BFD JR NZ,$7C0A   ;
 $7BFF LD A,($7F7F)  ;
 $7C02 XOR $38       ;
 $7C04 LD ($7F7F),A  ;
; This entry point is used by the routine at #R$7AB0.
*$7C07 JP $7943      ;
*$7C0A LD B,A        ;
 $7C0B LD A,$01      ;
 $7C0D LD ($7F72),A  ;
 $7C10 DEC B         ;
 $7C11 JR NZ,$7C2D   ;
 $7C13 LD A,($7F7F)  ;
 $7C16 XOR $10       ;
 $7C18 LD B,A        ;
 $7C19 AND $10       ;
 $7C1B SRL A         ;
 $7C1D LD C,A        ;
 $7C1E LD A,B        ;
 $7C1F AND $08       ;
 $7C21 ADD A,A       ;
 $7C22 OR C          ;
 $7C23 LD C,A        ;
 $7C24 LD A,B        ;
 $7C25 AND $E7       ;
 $7C27 OR C          ;
 $7C28 LD ($7F7F),A  ;
 $7C2B JR $7C47      ;
*$7C2D LD A,($7F7F)  ;
 $7C30 XOR $08       ;
 $7C32 LD B,A        ;
 $7C33 AND $10       ;
 $7C35 SRL A         ;
 $7C37 LD C,A        ;
 $7C38 LD A,B        ;
 $7C39 AND $08       ;
 $7C3B ADD A,A       ;
 $7C3C OR C          ;
 $7C3D LD C,A        ;
 $7C3E LD A,B        ;
 $7C3F AND $E7       ;
 $7C41 OR C          ;
 $7C42 XOR $20       ;
 $7C44 LD ($7F7F),A  ;
*$7C47 LD A,($7F6F)  ;
 $7C4A LD B,A        ;
 $7C4B LD A,($7F70)  ;
 $7C4E LD ($7F6F),A  ;
 $7C51 LD A,B        ;
 $7C52 LD ($7F70),A  ;
; This entry point is used by the routine at #R$7AB0.
*$7C55 LD A,($7F7A)  ;
 $7C58 LD B,A        ;
 $7C59 LD A,($7F75)  ;
 $7C5C CP B          ;
*$7C5D JP NC,$7D55   ;
 $7C60 CALL $7CFB    ;
 $7C63 SRL D         ;
 $7C65 INC D         ;
 $7C66 LD A,($7F7F)  ;
 $7C69 BIT 5,A       ;
 $7C6B JR NZ,$7C75   ;
 $7C6D BIT 7,A       ;
 $7C6F JR NZ,$7C73   ;
 $7C71 JR $7C7B      ;
*$7C73 JR $7C84      ;
*$7C75 BIT 7,A       ;
 $7C77 JR NZ,$7C7B   ;
 $7C79 JR $7C84      ;
*$7C7B LD A,($7F77)  ;
 $7C7E SUB D         ;
 $7C7F CALL C,$7CB4  ;
 $7C82 JR $7C8C      ;
*$7C84 LD A,($7F77)  ;
 $7C87 ADD A,D       ;
 $7C88 CP $77        ;
 $7C8A JR NC,$7C5D   ;
*$7C8C LD ($7F77),A  ;
 $7C8F JP $7A1E      ;

; Routine at 7C92
;
; Used by the routine at #R$7AB0.
c$7C92 LD HL,$7F82   ;
 $7C95 LD A,($7F80)  ;
 $7C98 AND A         ;
 $7C99 RET Z         ;
 $7C9A LD B,A        ;
*$7C9B LD E,(HL)     ;
 $7C9C INC HL        ;
 $7C9D LD D,(HL)     ;
 $7C9E INC HL        ;
 $7C9F LD C,(HL)     ;
 $7CA0 LD A,(DE)     ;
 $7CA1 XOR C         ;
 $7CA2 LD (DE),A     ;
 $7CA3 INC HL        ;
 $7CA4 DJNZ $7C9B    ;
 $7CA6 RET           ;

; Routine at 7CA7
;
; Used by the routines at #R$7898 and #R$7AB0.
c$7CA7 NEG           ;
 $7CA9 LD B,A        ;
 $7CAA LD A,($7F7F)  ;
 $7CAD XOR $40       ;
 $7CAF LD ($7F7F),A  ;
 $7CB2 LD A,B        ;
 $7CB3 RET           ;

; Routine at 7CB4
;
; Used by the routines at #R$7898 and #R$7BFC.
c$7CB4 NEG           ;
 $7CB6 LD B,A        ;
 $7CB7 LD A,($7F7F)  ;
 $7CBA XOR $80       ;
 $7CBC LD ($7F7F),A  ;
 $7CBF LD A,B        ;
 $7CC0 RET           ;

; Routine at 7CC1
;
; Used by the routines at #R$7898, #R$7AA5 and #R$7AB0.
c$7CC1 LD D,$00      ;
 $7CC3 LD HL,$0000   ;
 $7CC6 AND A         ;
 $7CC7 JR $7CCC      ;

; Routine at 7CC9
c$7CC9 ADD A,A       ;
 $7CCA RL D          ;
; This entry point is used by the routine at #R$7CC1.
*$7CCC RR C          ;
 $7CCE JR NC,$7CD2   ;
 $7CD0 LD E,A        ;
 $7CD1 ADD HL,DE     ;
*$7CD2 DJNZ $7CC9    ;
 $7CD4 RET           ;

; Routine at 7CD5
;
; Used by the routine at #R$7898.
c$7CD5 SLA L         ;
 $7CD7 RLA           ;
 $7CD8 SLA L         ;
 $7CDA RLA           ;
 $7CDB SLA L         ;
 $7CDD RLA           ;
 $7CDE LD C,$F8      ;
 $7CE0 CP B          ;
 $7CE1 JR NC,$7CF3   ;
 $7CE3 SLA C         ;
*$7CE5 SLA L         ;
 $7CE7 RLA           ;
 $7CE8 JR C,$7CF3    ;
 $7CEA CP B          ;
 $7CEB JR NC,$7CF3   ;
 $7CED SLA C         ;
 $7CEF JR NC,$7CF9   ;
 $7CF1 JR $7CE5      ;
*$7CF3 SUB B         ;
 $7CF4 SCF           ;
 $7CF5 RL C          ;
 $7CF7 JR C,$7CE5    ;
*$7CF9 AND A         ;
 $7CFA RET Z         ;
; This entry point is used by the routines at #R$7898, #R$7AB0 and #R$7BFC.
*$7CFB LD D,$FE      ;
*$7CFD ADD A,A       ;
 $7CFE JR C,$7D08    ;
 $7D00 CP B          ;
 $7D01 JR NC,$7D08   ;
 $7D03 SLA D         ;
 $7D05 RET NC        ;
 $7D06 JR $7CFD      ;
*$7D08 SUB B         ;
 $7D09 SCF           ;
 $7D0A RL D          ;
 $7D0C RET NC        ;
 $7D0D JR $7CFD      ;

; Routine at 7D0F
;
; Used by the routine at #R$7AB0.
c$7D0F LD D,$C0      ;
 $7D11 LD A,($7F7F)  ;
 $7D14 LD B,A        ;
 $7D15 LD A,($7F77)  ;
 $7D18 LD L,A        ;
 $7D19 LD A,($7F79)  ;
 $7D1C LD H,A        ;
 $7D1D LD A,$80      ;
 $7D1F BIT 7,B       ;
 $7D21 JR NZ,$7D26   ;
 $7D23 ADD A,L       ;
 $7D24 JR $7D27      ;
*$7D26 SUB L         ;
*$7D27 LD L,A        ;
 $7D28 LD A,$3F      ;
 $7D2A BIT 6,B       ;
 $7D2C JR NZ,$7D32   ;
 $7D2E SUB H         ;
 $7D2F JP $7D35      ;
*$7D32 ADD A,H       ;
 $7D33 SET 3,D       ;
*$7D35 LD H,A        ;
 $7D36 AND $07       ;
 $7D38 OR D          ;
 $7D39 LD D,A        ;
 $7D3A LD A,H        ;
 $7D3B AND $38       ;
 $7D3D ADD A,A       ;
 $7D3E ADD A,A       ;
 $7D3F LD E,A        ;
 $7D40 LD A,L        ;
 $7D41 RRA           ;
 $7D42 RRA           ;
 $7D43 RRA           ;
 $7D44 AND $1F       ;
 $7D46 OR E          ;
 $7D47 LD E,A        ;
 $7D48 LD A,L        ;
 $7D49 AND $07       ;
 $7D4B LD C,B        ;
 $7D4C INC A         ;
 $7D4D LD B,A        ;
 $7D4E LD A,$01      ;
*$7D50 RRCA          ;
 $7D51 DJNZ $7D50    ;
 $7D53 LD C,A        ;
 $7D54 RET           ;

; Routine at 7D55
;
; Used by the routines at #R$7898, #R$7AB0 and #R$7BFC.
c$7D55 LD HL,($7105) ;
 $7D58 LD DE,($7F73) ;
 $7D5C LD A,($70E3)  ;
 $7D5F AND A         ;
 $7D60 JR NZ,$7DAE   ;
 $7D62 LD A,($7F70)  ;
 $7D65 AND A         ;
 $7D66 JR NZ,$7D8F   ;
; This entry point is used by the routine at #R$937B.
*$7D68 LD A,$BF      ;
 $7D6A LD ($7D7A),A  ;
 $7D6D LD A,$9F      ;
 $7D6F LD ($7D81),A  ;
 $7D72 XOR A         ;
 $7D73 LD ($7D83),A  ;
*$7D76 CALL $7E86    ;
 $7D79 AND $BF       ;
 $7D7B LD (DE),A     ;
 $7D7C INC DE        ;
 $7D7D CALL $7E86    ;
 $7D80 AND $9F       ;
 $7D82 OR $80        ;
 $7D84 LD (DE),A     ;
 $7D85 INC DE        ;
 $7D86 CALL $7E86    ;
 $7D89 AND $7F       ;
 $7D8B ADD A,$80     ;
 $7D8D JR $7E03      ;
*$7D8F LD A,$3F      ;
 $7D91 LD ($7D81),A  ;
 $7D94 LD A,$F8      ;
 $7D96 LD ($7D7A),A  ;
 $7D99 LD A,($7F7F)  ;
 $7D9C AND $08       ;
 $7D9E JR NZ,$7DA7   ;
 $7DA0 LD A,$80      ;
 $7DA2 LD ($7D83),A  ;
 $7DA5 JR $7DAB      ;
*$7DA7 XOR A         ;
 $7DA8 LD ($7D83),A  ;
*$7DAB JP $7D76      ;
*$7DAE LD C,A        ;
 $7DAF DEC C         ;
 $7DB0 JP NZ,$7E23   ;
 $7DB3 LD A,($7F70)  ;
 $7DB6 AND A         ;
 $7DB7 JR Z,$7DD7    ;
 $7DB9 LD A,$80      ;
 $7DBB LD ($7E02),A  ;
 $7DBE LD A,($7F7F)  ;
 $7DC1 AND $08       ;
 $7DC3 JR Z,$7DD0    ;
 $7DC5 XOR A         ;
 $7DC6 LD ($7E1C),A  ;
 $7DC9 LD A,$3F      ;
 $7DCB LD ($7E1E),A  ;
 $7DCE JR $7DE5      ;
*$7DD0 LD A,$BF      ;
; This entry point is used by the routine at #R$D2E1.
*$7DD2 LD ($7E1E),A  ;
 $7DD5 JR $7DE5      ;
*$7DD7 LD A,$80      ;
 $7DD9 LD ($7E1C),A  ;
 $7DDC LD A,$3F      ;
 $7DDE LD ($7E1E),A  ;
 $7DE1 XOR A         ;
 $7DE2 LD ($7E02),A  ;
*$7DE5 LD A,($7F81)  ;
 $7DE8 RLCA          ;
 $7DE9 LD ($7F81),A  ;
 $7DEC JR C,$7E11    ;
 $7DEE CALL $7E86    ;
 $7DF1 OR $7F        ;
 $7DF3 AND $F7       ;
 $7DF5 LD (DE),A     ;
 $7DF6 INC DE        ;
 $7DF7 CALL $7E86    ;
 $7DFA AND $BF       ;
 $7DFC LD (DE),A     ;
 $7DFD INC DE        ;
*$7DFE CALL $7E86    ;
 $7E01 OR $80        ;
*$7E03 LD (DE),A     ;
 $7E04 INC DE        ;
 $7E05 INC DE        ;
 $7E06 INC DE        ;
 $7E07 LD ($7F73),DE ;
 $7E0B LD ($7105),HL ;
 $7E0E JP $7BB3      ;
*$7E11 CALL $7E86    ;
 $7E14 AND $F7       ;
 $7E16 LD (DE),A     ;
 $7E17 INC DE        ;
 $7E18 CALL $7E86    ;
 $7E1B AND $80       ;
 $7E1D OR $3F        ;
 $7E1F LD (DE),A     ;
 $7E20 INC DE        ;
 $7E21 JR $7DFE      ;
*$7E23 LD A,($7F70)  ;
 $7E26 AND A         ;
 $7E27 JR NZ,$7E49   ;
 $7E29 XOR A         ;
 $7E2A LD ($7E46),A  ;
*$7E2D DEC C         ;
 $7E2E JR NZ,$7E35   ;
 $7E30 LD A,$78      ;
 $7E32 LD (DE),A     ;
 $7E33 JR $7E38      ;
*$7E35 LD A,$F8      ;
 $7E37 LD (DE),A     ;
*$7E38 INC DE        ;
 $7E39 CALL $7E86    ;
 $7E3C AND $BF       ;
*$7E3E LD (DE),A     ;
 $7E3F INC DE        ;
 $7E40 CALL $7E86    ;
 $7E43 AND $7F       ;
 $7E45 OR $80        ;
 $7E47 JR $7E03      ;
*$7E49 LD A,$80      ;
 $7E4B LD ($7E46),A  ;
 $7E4E LD A,($7F81)  ;
 $7E51 RLCA          ;
 $7E52 LD ($7F81),A  ;
 $7E55 JR NC,$7E2D   ;
 $7E57 CALL $7E86    ;
 $7E5A AND $F7       ;
 $7E5C LD (DE),A     ;
 $7E5D INC DE        ;
 $7E5E LD A,($7F7F)  ;
 $7E61 AND $08       ;
 $7E63 JR Z,$7E69    ;
 $7E65 LD A,$3F      ;
 $7E67 JR $7E3E      ;
*$7E69 LD A,$BF      ;
 $7E6B JR $7E3E      ;

; Routine at 7E6D
;
; Used by the routine at #R$7898.
c$7E6D LD A,($7F7C)  ;
 $7E70 LD B,A        ;
 $7E71 LD HL,$7E8D   ;
*$7E74 LD D,H        ;
 $7E75 LD E,L        ;
 $7E76 INC DE        ;
 $7E77 LD A,(DE)     ;
 $7E78 LD C,A        ;
 $7E79 LD A,(HL)     ;
 $7E7A LD (DE),A     ;
 $7E7B LD (HL),C     ;
 $7E7C LD A,L        ;
 $7E7D ADD A,$05     ;
 $7E7F JR NC,$7E82   ;
 $7E81 INC H         ;
*$7E82 LD L,A        ;
 $7E83 DJNZ $7E74    ;
 $7E85 RET           ;

; Routine at 7E86
;
; Used by the routine at #R$7D55.
c$7E86 LD A,H        ;
 $7E87 ADC A,A       ;
 $7E88 LD B,A        ;
 $7E89 ADC A,L       ;
 $7E8A LD H,A        ;
 $7E8B LD L,B        ;
 $7E8C RET           ;

; Data block at 7E8D
b$7E8D DEFB $00,$10,$FF,$38,$4B,$90,$10,$C8
 $7E95 DEFB $01,$41,$90,$00,$B4,$17,$01,$90
 $7E9D DEFB $90,$A0,$02,$03,$00,$90,$D2,$04
 $7EA5 DEFB $39,$10,$90,$DC,$59,$06,$10,$00

; Message at 7EAD
t$7EAD DEFM "(\"x"

; Data block at 7EB0
b$7EB0 DEFB $10,$10,$32,$64,$15,$02,$12,$23
 $7EB8 DEFB $63,$79,$82,$06,$8C,$03,$79,$80
 $7EC0 DEFB $03,$14,$7B,$15

; Message at 7EC4
t$7EC4 DEFM "nx<"

; Data block at 7EC7
b$7EC7 DEFB $02,$22,$04,$96,$4C,$64,$0C,$05
 $7ECF DEFB $20,$EA

; Message at 7ED1
t$7ED1 DEFM "+fd8"

; Data block at 7ED5
b$7ED5 DEFB $05,$69,$17,$04,$43,$38,$F3,$E7
 $7EDD DEFB $00

; Routine at 7EDE
;
; Used by the routine at #R$7471.
c$7EDE LD A,($FC0A)  ;
 $7EE1 BIT 6,A       ;
 $7EE3 PUSH AF       ;
 $7EE4 AND $BF       ;
 $7EE6 LD ($FC0A),A  ;
 $7EE9 POP AF        ;
 $7EEA RET Z         ;
 $7EEB LD A,($81A4)  ;
 $7EEE DEC A         ;
 $7EEF RET Z         ;
 $7EF0 LD A,($81A5)  ;
 $7EF3 DEC A         ;
 $7EF4 RET Z         ;
 $7EF5 LD A,($9C94)  ;
 $7EF8 AND A         ;
 $7EF9 RET NZ        ;
 $7EFA LD A,($711D)  ;
 $7EFD AND A         ;
 $7EFE RET Z         ;
 $7EFF XOR A         ;
 $7F00 LD ($9CB2),A  ;
 $7F03 LD IX,$6048   ;
 $7F07 CALL $9509    ;
 $7F0A LD A,($7F81)  ;
 $7F0D RRCA          ;
 $7F0E LD ($7F81),A  ;
 $7F11 LD A,$01      ;
 $7F13 JR C,$7F18    ;
 $7F15 LD ($9C93),A  ;
*$7F18 LD ($7EDD),A  ;
 $7F1B LD IX,$7107   ;
 $7F1F CALL $7F2D    ;
 $7F22 LD IX,$7110   ;
 $7F26 CALL $7F2D    ;
 $7F29 LD IX,$6048   ;
*$7F2D LD BC,$0020   ;
 $7F30 LD H,(IX+$08) ;
 $7F33 LD L,(IX+$07) ;
 $7F36 LD D,L        ;
 $7F37 BIT 7,H       ;
 $7F39 JR NZ,$7F42   ;
 $7F3B AND A         ;
 $7F3C SBC HL,BC     ;
 $7F3E JR C,$7F4C    ;
 $7F40 JR $7F45      ;
*$7F42 ADD HL,BC     ;
 $7F43 JR C,$7F61    ;
*$7F45 LD (IX+$08),H ;
 $7F48 LD (IX+$07),L ;
 $7F4B RET           ;
*$7F4C LD HL,$2000   ;
 $7F4F LD E,(IX+$06) ;
 $7F52 AND A         ;
 $7F53 SBC HL,DE     ;
 $7F55 LD A,$80      ;
 $7F57 LD (IX+$08),A ;
 $7F5A LD (IX+$07),H ;
 $7F5D LD (IX+$06),L ;
 $7F60 RET           ;
*$7F61 LD A,$7F      ;
 $7F63 LD (IX+$08),A ;
 $7F66 LD A,$FF      ;
 $7F68 LD (IX+$07),A ;
 $7F6B LD (IX+$06),A ;
 $7F6E RET           ;

; Data block at 7F6F
b$7F6F DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7F77 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7F7F DEFB $00,$00,$55,$00,$00,$00,$00,$00
 $7F87 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7F8F DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7F97 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7F9F DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7FA7 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7FAF DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $7FB7 DEFB $00,$00,$00,$00,$00,$00,$00

; Copy screen buffer to screen
;
; Used by the routines at #R$7378, #R$7471, #R$9296, #R$9341 and #R$93ED.
; .
; Looks like this is just making an exact copy.
@label=draw_screen_buffer
c$7FBE LD DE,$4000   ; Top of screen
 $7FC1 LD HL,$C000   ; Screen buffer addr at top of screen
 $7FC4 CALL $7FE3    ; Copy even lines
 $7FC7 LD DE,$4800   ; 2nd third of screen
 $7FCA LD HL,$C800   ; Screen buffer addr at 2nd third of screen
 $7FCD CALL $7FE3    ; Copy even lines
 $7FD0 LD DE,$4100   ; 2nd line
 $7FD3 LD HL,$C100   ; Screen buffer addr at 2nd line
 $7FD6 CALL $7FE3    ; Copy odd lines
 $7FD9 LD DE,$4900   ; 2nd line of 2nd third
 $7FDC LD HL,$C900   ; Screen buffer addr at 2nd line of 2nd third
 $7FDF CALL $7FE3    ; Copy odd lines
 $7FE2 RET           ;

; Routine at 7FE3
;
; Copy every 2nd line of an area from buffer to screen.
;
; HL Source (screen buffer) address (110sslllrrrccccc)
; DE Destination (screen) address (010sslllrrrccccc)
@label=copy_screen_area
c$7FE3 LD B,$08      ; Number of rows?
*$7FE5 PUSH DE       ; Save screen address
 $7FE6 LD C,$FF      ;
 $7FE8 LD A,$04      ; Number of lines?
*$7FEA PUSH DE       ; Save screen address
 $7FEB LDI           ; Copy 32 bytes in unrolled loop
 $7FED LDI           ;
 $7FEF LDI           ;
 $7FF1 LDI           ;
 $7FF3 LDI           ;
 $7FF5 LDI           ;
 $7FF7 LDI           ;
 $7FF9 LDI           ;
 $7FFB LDI           ;
 $7FFD LDI           ;
 $7FFF LDI           ;
 $8001 LDI           ;
 $8003 LDI           ;
 $8005 LDI           ;
 $8007 LDI           ;
 $8009 LDI           ;
 $800B LDI           ;
 $800D LDI           ;
 $800F LDI           ;
 $8011 LDI           ;
 $8013 LDI           ;
 $8015 LDI           ;
 $8017 LDI           ;
 $8019 LDI           ;
 $801B LDI           ;
 $801D LDI           ;
 $801F LDI           ;
 $8021 LDI           ;
 $8023 LDI           ;
 $8025 LDI           ;
 $8027 LDI           ;
 $8029 LDI           ;
 $802B POP DE        ; Restore screen address at beginning of line
 $802C INC D         ; One line down
 $802D INC D         ; One line down
 $802E LD H,D        ; Source MSB = dest MSB
 $802F SET 7,H       ; Set msb to make source $cxxx
 $8031 LD L,E        ; Source follows destination
 $8032 DEC A         ; Line counter
 $8033 JP NZ,$7FEA   ; Loop for 4 lines
 $8036 POP DE        ; Restore screen address at top of section
 $8037 LD A,E        ; A=rrrccccc
 $8038 ADD A,$20     ; Next row
 $803A LD E,A        ; Update destination
 $803B LD L,A        ; Update source
 $803C LD H,D        ; Source MSB = dest MSB
 $803D SET 7,H       ; Set msb to make source $cxxx
 $803F DJNZ $7FE5    ; Loop for 8 rows
 $8041 RET           ;

; Routine at 8042
;
; Used by the routines at #R$717B, #R$728D, #R$7378, #R$7471 and #R$93ED.
@label=draw_ctrl_panel
c$8042 LD DE,$4000   ; {Check byte at 0,0 and return is it's not $ff
 $8045 LD A,(DE)     ;
 $8046 INC A         ;
 $8047 RET NZ        ; }
 $8048 CALL $94FE    ; CLear 5 bytes at $FC08
; This entry point is used by the routine at #R$7366.
*$804B CALL $D036    ; Clear screen
 $804E LD DE,$001F   ; One row - 1
 $8051 LD B,$17      ; 23 rows
 $8053 LD A,$00      ;
 $8055 LD HL,$5800   ; Attributes
 $8058 LD (HL),A     ; Write 0
*$8059 ADD HL,DE     ; End of row
 $805A LD (HL),A     ; Write 0
 $805B INC HL        ; Next row
 $805C LD (HL),A     ; Write 0
 $805D DJNZ $8059    ; Repeat 23 times
 $805F ADD HL,DE     ; End of last row
 $8060 LD (HL),A     ; Write 0
 $8061 LD DE,$5000   ; Copy control panel gfx from buffer to screen
 $8064 LD HL,$C000   ;
 $8067 LD BC,$0800   ;
 $806A LDIR          ;
 $806C LD DE,$5A00   ; Copy control panel attrs from buffer to screen
 $806F LD HL,$5B00   ;
 $8072 LD BC,$0100   ;
 $8075 LDIR          ;
 $8077 CALL $725C    ;
 $807A CALL $7265    ;
 $807D JP $98A2      ;

; Clear 3D area and draw a border
;
; Used by the routines at #R$7378, #R$7471, #R$9296, #R$9341 and #R$93ED.
@label=clear_3d_area
c$8080 DI            ; Disable interrupts
 $8081 LD ($80D1),SP ; Save stack pointer
 $8085 LD SP,$D000   ; Set SP just above screen buffer
 $8088 LD HL,$0000   ; For drawing empty bytes
 $808B LD DE,$00FF   ; For bottom right corner
 $808E LD IX,$FF00   ; For bottom left corner
 $8092 LD BC,$FFFF   ; For middle border
 $8095 PUSH DE       ; Draw bottom right corner
 $8096 LD A,$0E      ; {Draw 28 middle bytes of bottom border
*$8098 PUSH BC       ;
 $8099 DEC A         ;
 $809A JR NZ,$8098   ; }
 $809C PUSH IX       ; Draw bottom left corner
 $809E LD E,$01      ; For right side
 $80A0 LD IX,$8000   ; For left side
 $80A4 LD B,$7E      ; 126 lines
*$80A6 PUSH DE       ; Draw right side
 $80A7 PUSH HL       ; {Draw 28 empty bytes
 $80A8 PUSH HL       ;
 $80A9 PUSH HL       ;
 $80AA PUSH HL       ;
 $80AB PUSH HL       ;
 $80AC PUSH HL       ;
 $80AD PUSH HL       ;
 $80AE PUSH HL       ;
 $80AF PUSH HL       ;
 $80B0 PUSH HL       ;
 $80B1 PUSH HL       ;
 $80B2 PUSH HL       ;
 $80B3 PUSH HL       ;
 $80B4 PUSH HL       ; }
 $80B5 PUSH IX       ; Draw left side
 $80B7 DJNZ $80A6    ; Repeat 126 times
 $80B9 LD BC,$FFFF   ; For middle border
 $80BC LD E,$FF      ; For top right corner
 $80BE LD IX,$FF00   ; For top left corner
 $80C2 PUSH DE       ; Draw top right corner
 $80C3 LD A,$0E      ; {Draw 28 middle bytes of top border
*$80C5 PUSH BC       ;
 $80C6 DEC A         ;
 $80C7 JR NZ,$80C5   ; }
 $80C9 PUSH IX       ; Draw top left corner
 $80CB LD SP,($80D1) ; Restore stack pointer
 $80CF EI            ; Enable interrupts
 $80D0 RET           ;

; For saving SP
@label=save_sp
s$80D1 DEFS $02

; Routine at 80D3
;
; Used by the routine at #R$7471.
c$80D3 LD A,($D040)  ;
 $80D6 AND A         ;
 $80D7 RET NZ        ;
 $80D8 LD A,($FC0A)  ;
 $80DB AND $0F       ;
 $80DD JR Z,$8119    ;
 $80DF LD C,$00      ;
 $80E1 SRL A         ;
 $80E3 JR C,$8109    ;
 $80E5 INC C         ;
 $80E6 SRL A         ;
 $80E8 JR C,$80F0    ;
 $80EA INC C         ;
 $80EB SRL A         ;
 $80ED JR C,$80F0    ;
 $80EF INC C         ;
*$80F0 LD A,($7104)  ;
 $80F3 AND A         ;
 $80F4 JR NZ,$8104   ;
 $80F6 LD A,$03      ;
 $80F8 ADD A,C       ;
 $80F9 LD C,A        ;
 $80FA CALL $815D    ;
 $80FD SUB $04       ;
 $80FF CALL $813E    ;
 $8102 JR $8136      ;
*$8104 CALL $815D    ;
 $8107 JR $8136      ;
*$8109 LD A,($7104)  ;
 $810C AND A         ;
 $810D JR NZ,$8114   ;
 $810F CALL $93ED    ;
 $8112 JR $8136      ;
*$8114 CALL $815D    ;
 $8117 JR $8136      ;
*$8119 LD A,($FC08)  ;
 $811C AND $3F       ;
 $811E ADD A,A       ;
 $811F RET Z         ;
 $8120 ADD A,A       ;
 $8121 LD BC,$0607   ;
*$8124 ADD A,A       ;
 $8125 JR C,$812A    ;
 $8127 INC C         ;
 $8128 DJNZ $8124    ;
*$812A CALL $815D    ;
 $812D CP $07        ;
 $812F JR C,$8136    ;
 $8131 SUB $04       ;
 $8133 CALL $813E    ;
; This entry point is used by the routine at #R$815D.
*$8136 XOR A         ;
 $8137 LD ($FC0A),A  ;
 $813A LD ($FC08),A  ;
 $813D RET           ;

; Jump to entry in jump table at $D000
;
; Used by the routines at #R$71F3, #R$80D3 and #R$93ED.
;
; A Index of jump to take
c$813E LD ($80D1),SP ; Save stack pointer
 $8142 LD SP,$D000   ; Set SP just above screen buffer
 $8145 LD B,A        ;
 $8146 ADD A,A       ; * 2
 $8147 ADD A,B       ; * 3
 $8148 LD HL,$D000   ; Jump table base address
 $814B ADD A,L       ; {Add offset to base address
 $814C LD L,A        ;
 $814D JR NC,$8150   ;
 $814F INC H         ; }
*$8150 LD ($8154),HL ; Modify next instruction
*$8153 CALL $8153    ; Self-modified. Return address saved to screen buffer?
 $8156 LD SP,($80D1) ; Restore stack pointer
 $815A JP $94FE      ;

; Routine at 815D
;
; Used by the routine at #R$80D3.
c$815D LD A,($70E3)  ;
 $8160 LD B,A        ;
 $8161 CP C          ;
 $8162 JR NZ,$816C   ;
 $8164 LD A,C        ;
 $8165 CP $07        ;
 $8167 JR C,$816C    ;
 $8169 POP HL        ;
 $816A JR $8136      ;
*$816C LD A,($D03F)  ;
 $816F AND A         ;
 $8170 LD A,C        ;
 $8171 JR NZ,$819A   ;
*$8173 LD ($70E3),A  ;
 $8176 LD A,B        ;
 $8177 CP $04        ;
 $8179 LD A,C        ;
 $817A RET NC        ;
 $817B CP $04        ;
 $817D RET C         ;
; This entry point is used by the routines at #R$7378 and #R$93ED.
*$817E PUSH AF       ;
 $817F CALL $98CD    ;
 $8182 POP AF        ;
 $8183 LD DE,$C000   ; Copy control panel gfx from screen to buffer
 $8186 LD HL,$5000   ;
 $8189 LD BC,$0800   ;
 $818C LDIR          ;
 $818E LD DE,$5B00   ; Copy control panel attrs from screen to buffer
 $8191 LD HL,$5A00   ;
 $8194 LD BC,$0100   ;
 $8197 LDIR          ;
 $8199 RET           ;
*$819A CP $04        ;
 $819C JR NC,$8173   ;
 $819E XOR A         ;
 $819F LD ($70E3),A  ;
 $81A2 RET           ;

; Unused
s$81A3 DEFS $06

; Routine at 81A9
;
; Used by the routine at #R$7471.
c$81A9 XOR A         ;
 $81AA LD ($81A4),A  ;
 $81AD LD IX,$7107   ;
 $81B1 LD A,(IX+$02) ;
 $81B4 AND $7F       ;
 $81B6 JR NZ,$81F7   ;
 $81B8 LD A,(IX+$05) ;
 $81BB AND $7F       ;
 $81BD JR NZ,$81F7   ;
 $81BF LD A,(IX+$08) ;
 $81C2 AND $7F       ;
 $81C4 JR NZ,$81F7   ;
 $81C6 CALL $8322    ;
 $81C9 LD A,H        ;
 $81CA OR L          ;
 $81CB JR Z,$81F7    ;
 $81CD LD A,$01      ;
 $81CF LD ($81A4),A  ;
 $81D2 EX DE,HL      ;
 $81D3 LD HL,$0000   ;
 $81D6 SBC HL,DE     ;
 $81D8 EX DE,HL      ;
 $81D9 LD HL,$4000   ;
 $81DC AND A         ;
 $81DD SBC HL,DE     ;
 $81DF JP C,$82D1    ;
 $81E2 LD HL,$2000   ;
 $81E5 XOR A         ;
 $81E6 SBC HL,DE     ;
 $81E8 JR NC,$81EC   ;
 $81EA LD A,$01      ;
*$81EC LD ($711E),A  ;
 $81EF EX DE,HL      ;
 $81F0 CALL $82D7    ;
 $81F3 LD A,H        ;
 $81F4 LD ($70EE),A  ;
*$81F7 XOR A         ;
 $81F8 LD ($81A5),A  ;
 $81FB LD IX,$7110   ;
 $81FF LD A,(IX+$02) ;
 $8202 AND $7F       ;
 $8204 CP $02        ;
 $8206 JR NC,$827A   ;
 $8208 LD B,A        ;
 $8209 LD A,(IX+$05) ;
 $820C AND $7F       ;
 $820E CP $02        ;
 $8210 JR NC,$827A   ;
 $8212 OR B          ;
 $8213 LD B,A        ;
 $8214 LD A,(IX+$08) ;
 $8217 AND $7F       ;
 $8219 CP $02        ;
 $821B JR NC,$827A   ;
 $821D OR B          ;
 $821E LD A,$01      ;
 $8220 LD ($81A5),A  ;
 $8223 JR NZ,$8246   ;
 $8225 CALL $8322    ;
 $8228 LD A,H        ;
 $8229 OR L          ;
 $822A JR Z,$8246    ;
 $822C EX DE,HL      ;
 $822D LD HL,$0000   ;
 $8230 SBC HL,DE     ;
 $8232 EX DE,HL      ;
 $8233 LD HL,$4000   ;
 $8236 AND A         ;
 $8237 SBC HL,DE     ;
 $8239 JP C,$82D1    ;
 $823C EX DE,HL      ;
 $823D CALL $82D7    ;
 $8240 LD A,$A0      ;
 $8242 SUB H         ;
 $8243 LD ($70F2),A  ;
*$8246 LD A,$01      ;
 $8248 LD ($711C),A  ;
 $824B LD A,($711D)  ;
 $824E INC A         ;
 $824F LD IX,$6048   ;
 $8253 JR Z,$827E    ;
 $8255 CALL $8322    ;
 $8258 LD A,H        ;
 $8259 OR L          ;
 $825A JR NZ,$825D   ;
 $825C DEC HL        ;
*$825D EX DE,HL      ;
 $825E PUSH DE       ;
 $825F CALL $8271    ;
 $8262 LD ($81A6),A  ;
 $8265 INC IX        ;
 $8267 INC IX        ;
 $8269 INC IX        ;
 $826B POP DE        ;
 $826C CALL $8271    ;
 $826F JR $829C      ;

; Routine at 8271
;
; Used by the routine at #R$81A9.
c$8271 XOR A         ;
 $8272 LD L,(IX+$00) ;
 $8275 LD H,(IX+$01) ;
 $8278 JR $82BB      ;

; Routine at 827A
;
; Used by the routine at #R$81A9.
c$827A XOR A         ;
 $827B LD ($711C),A  ;
; This entry point is used by the routine at #R$81A9.
*$827E INC IX        ;
 $8280 CALL $8315    ;
 $8283 LD A,H        ;
 $8284 OR L          ;
 $8285 JR NZ,$8288   ;
 $8287 DEC HL        ;
*$8288 EX DE,HL      ;
 $8289 DEC IX        ;
 $828B PUSH DE       ;
 $828C CALL $82B0    ;
 $828F LD ($81A6),A  ;
 $8292 INC IX        ;
 $8294 INC IX        ;
 $8296 INC IX        ;
 $8298 POP DE        ;
 $8299 CALL $82B0    ;

; Routine at 829C
;
; Used by the routine at #R$81A9.
c$829C LD ($81A7),A  ;
 $829F LD A,(IX+$05) ;
 $82A2 AND $80       ;
 $82A4 LD A,$00      ;
 $82A6 JR Z,$82AA    ;
 $82A8 LD A,$01      ;
*$82AA LD ($81A8),A  ;
 $82AD JP $8390      ;

; Routine at 82B0
;
; Used by the routine at #R$827A.
c$82B0 LD A,(IX+$00) ;
 $82B3 LD L,(IX+$01) ;
 $82B6 LD H,(IX+$02) ;
 $82B9 RES 7,H       ;

; Routine at 82BB
;
; Used by the routine at #R$8271.
c$82BB CALL $9C89    ;
 $82BE RL B          ;
 $82C0 RLA           ;
 $82C1 RL B          ;
 $82C3 RLA           ;
 $82C4 RL B          ;
 $82C6 RLA           ;
 $82C7 LD H,(IX+$02) ;
 $82CA BIT 7,H       ;
 $82CC JR Z,$82D0    ;
 $82CE OR $80        ;
*$82D0 RET           ;

; Routine at 82D1
;
; Used by the routine at #R$81A9.
c$82D1 LD A,$01      ;
 $82D3 LD ($711F),A  ;
 $82D6 RET           ;

; Routine at 82D7
;
; Used by the routine at #R$81A9.
c$82D7 PUSH HL       ;
 $82D8 ADD HL,HL     ;
 $82D9 POP DE        ;
 $82DA SRL D         ;
 $82DC RR E          ;
 $82DE ADD HL,DE     ;
 $82DF LD A,($7104)  ;
 $82E2 LD B,A        ;
 $82E3 LD A,H        ;
 $82E4 CP $50        ;
 $82E6 JR C,$82F8    ;
 $82E8 CP $78        ;
 $82EA JR NC,$82F4   ;
 $82EC LD A,B        ;
 $82ED CP $63        ;
 $82EF RET Z         ;
 $82F0 LD A,$02      ;
 $82F2 JR $82FE      ;
*$82F4 LD A,$63      ;
 $82F6 JR $82FE      ;
*$82F8 LD A,B        ;
 $82F9 CP $04        ;
 $82FB RET NZ        ;
 $82FC LD A,$06      ;
*$82FE LD ($7104),A  ;
 $8301 RET           ;

; Routine at 8302
;
; Used by the routines at #R$8315 and #R$8322.
c$8302 LD E,(IX+$00) ;
 $8305 LD D,(IX+$01) ;
 $8308 LD C,(IX+$03) ;
 $830B LD B,(IX+$04) ;
 $830E LD L,(IX+$06) ;
 $8311 LD H,(IX+$07) ;
 $8314 RET           ;

; Routine at 8315
;
; Used by the routine at #R$827A.
c$8315 CALL $8302    ;
 $8318 RES 7,H       ;
 $831A RES 7,D       ;
 $831C RES 7,B       ;
 $831E LD A,$01      ;
 $8320 JR $8327      ;

; Routine at 8322
;
; Used by the routine at #R$81A9.
c$8322 CALL $8302    ;
 $8325 LD A,$01      ;
; This entry point is used by the routine at #R$8315.
*$8327 EX DE,HL      ;
 $8328 ADD HL,HL     ;
 $8329 EX DE,HL      ;
 $832A JR C,$8338    ;
 $832C SLA C         ;
 $832E RL B          ;
 $8330 JR C,$833C    ;
 $8332 ADD HL,HL     ;
 $8333 JR C,$8342    ;
 $8335 ADD A,A       ;
 $8336 JR $8327      ;
*$8338 RR D          ;
 $833A JR $8348      ;
*$833C RR B          ;
 $833E SRL D         ;
 $8340 JR $8348      ;
*$8342 RR H          ;
 $8344 SRL B         ;
 $8346 SRL D         ;
*$8348 LD C,D        ;
 $8349 PUSH AF       ;
 $834A LD A,H        ;
 $834B CALL $87BF    ;
 $834E EX DE,HL      ;
 $834F LD A,B        ;
 $8350 LD B,$00      ;
 $8352 CALL $87BF    ;
 $8355 ADD HL,DE     ;
 $8356 JR NC,$8359   ;
 $8358 INC B         ;
*$8359 LD A,C        ;
 $835A CALL $87BF    ;
 $835D ADD HL,DE     ;
 $835E JR NC,$8361   ;
 $8360 INC B         ;
*$8361 LD A,B        ;
 $8362 AND A         ;
 $8363 JR Z,$8377    ;
 $8365 SRL B         ;
 $8367 RR H          ;
 $8369 RR L          ;
 $836B SRL B         ;
 $836D RR H          ;
 $836F RR L          ;
 $8371 POP AF        ;
 $8372 SRL A         ;
 $8374 JR Z,$8386    ;
 $8376 PUSH AF       ;
*$8377 CALL $9C86    ;
 $837A POP AF        ;
*$837B SRL A         ;
 $837D JR Z,$838F    ;
 $837F SRL H         ;
 $8381 RR L          ;
 $8383 JP $837B      ;
*$8386 CALL $9C86    ;
 $8389 ADD HL,HL     ;
 $838A JR NC,$838F   ;
 $838C LD HL,$0000   ;
*$838F RET           ;

; Routine at 8390
;
; Used by the routine at #R$829C.
c$8390 LD A,($70E3)  ;
 $8393 CP $04        ;
 $8395 RET NC        ;
 $8396 LD HL,$8489   ;
 $8399 LD A,($81A8)  ;
 $839C AND A         ;
 $839D JR Z,$83A2    ;
 $839F LD HL,$8481   ;
*$83A2 LD DE,$8479   ;
 $83A5 LD BC,$0008   ;
 $83A8 LDIR          ;
 $83AA LD HL,$5156   ;
 $83AD LD A,($81A7)  ;
 $83B0 LD B,A        ;
 $83B1 AND $7F       ;
 $83B3 JR Z,$83D0    ;
 $83B5 LD A,B        ;
 $83B6 AND $80       ;
 $83B8 JR NZ,$83C5   ;
*$83BA LD A,H        ;
 $83BB DEC H         ;
 $83BC AND $07       ;
 $83BE CALL Z,$844F  ;
 $83C1 DJNZ $83BA    ;
 $83C3 JR $83D0      ;
*$83C5 RES 7,B       ;
*$83C7 INC H         ;
 $83C8 LD A,H        ;
 $83C9 AND $07       ;
 $83CB CALL Z,$8445  ;
 $83CE DJNZ $83C7    ;
*$83D0 LD ($8477),HL ;
 $83D3 CALL $8459    ;
 $83D6 LD A,($81A6)  ;
 $83D9 LD B,A        ;
 $83DA AND $7F       ;
 $83DC LD C,A        ;
 $83DD JR Z,$83F5    ;
 $83DF LD A,B        ;
 $83E0 AND $80       ;
 $83E2 LD B,C        ;
 $83E3 JR NZ,$8415   ;
*$83E5 LD HL,$8479   ;
 $83E8 LD A,$04      ;
*$83EA SRL (HL)      ;
 $83EC INC HL        ;
 $83ED RR (HL)       ;
 $83EF INC HL        ;
 $83F0 DEC A         ;
 $83F1 JR NZ,$83EA   ;
 $83F3 DJNZ $83E5    ;
*$83F5 LD DE,($8477) ;
 $83F9 LD HL,$8479   ;
 $83FC LD BC,$04FF   ;
*$83FF LD A,(DE)     ;
 $8400 OR (HL)       ;
 $8401 LD (DE),A     ;
 $8402 INC E         ;
 $8403 INC HL        ;
 $8404 LD A,(DE)     ;
 $8405 OR (HL)       ;
 $8406 LD (DE),A     ;
 $8407 EX DE,HL      ;
 $8408 INC H         ;
 $8409 LD A,H        ;
 $840A AND $07       ;
 $840C CALL Z,$8445  ;
 $840F EX DE,HL      ;
 $8410 DEC E         ;
 $8411 INC HL        ;
 $8412 DJNZ $83FF    ;
 $8414 RET           ;
*$8415 LD HL,$8479   ;
 $8418 LD A,$04      ;
*$841A SLA (HL)      ;
 $841C INC HL        ;
 $841D RL (HL)       ;
 $841F INC HL        ;
 $8420 DEC A         ;
 $8421 JR NZ,$841A   ;
 $8423 DJNZ $8415    ;
 $8425 LD DE,($8477) ;
 $8429 LD HL,$8479   ;
 $842C LD BC,$04FF   ;
*$842F LD A,(DE)     ;
 $8430 OR (HL)       ;
 $8431 LD (DE),A     ;
 $8432 INC HL        ;
 $8433 DEC E         ;
 $8434 LD A,(DE)     ;
 $8435 OR (HL)       ;
 $8436 LD (DE),A     ;
 $8437 EX DE,HL      ;
 $8438 INC H         ;
 $8439 LD A,H        ;
 $843A AND $07       ;
 $843C CALL Z,$8445  ;
 $843F EX DE,HL      ;
 $8440 INC E         ;
 $8441 INC HL        ;
 $8442 DJNZ $842F    ;
 $8444 RET           ;

; Routine at 8445
;
; Used by the routines at #R$8390, #R$8459 and #R$96D9.
c$8445 LD A,L        ;
 $8446 ADD A,$20     ;
 $8448 LD L,A        ;
 $8449 RET C         ;
 $844A LD A,H        ;
 $844B SUB $08       ;
 $844D LD H,A        ;
 $844E RET           ;

; Routine at 844F
;
; Used by the routines at #R$8390 and #R$96D9.
c$844F LD A,L        ;
 $8450 SUB $20       ;
 $8452 LD L,A        ;
 $8453 RET C         ;
 $8454 LD A,H        ;
 $8455 ADD A,$08     ;
 $8457 LD H,A        ;
 $8458 RET           ;

; Routine at 8459
;
; Used by the routine at #R$8390.
c$8459 LD DE,$5035   ;
 $845C LD HL,$8491   ;
 $845F LD BC,$18FF   ;
*$8462 LDI           ;
 $8464 LDI           ;
 $8466 LDI           ;
 $8468 DEC E         ;
 $8469 DEC E         ;
 $846A DEC E         ;
 $846B EX DE,HL      ;
 $846C INC H         ;
 $846D LD A,H        ;
 $846E AND $07       ;
 $8470 CALL Z,$8445  ;
 $8473 EX DE,HL      ;
 $8474 DJNZ $8462    ;
 $8476 RET           ;

; Data block at 8477
b$8477 DEFB $00,$00,$3C,$00,$24,$00,$24,$00
 $847F DEFB $3C,$00,$3C,$00,$24,$00,$24,$00
 $8487 DEFB $3C,$00,$18,$00,$3C,$00,$3C,$00
 $848F DEFB $18,$00,$00,$00,$01,$00,$7E,$01
 $8497 DEFB $01,$81,$81,$02,$00,$41,$04,$00
 $849F DEFB $21,$08,$00,$11,$10,$00,$09,$10
 $84A7 DEFB $00,$09,$20,$00,$05,$20,$00,$05
 $84AF DEFB $20,$00,$05,$20,$00,$05,$20,$00
 $84B7 DEFB $05,$20,$00,$05,$10,$00,$09,$10
 $84BF DEFB $00,$09,$08,$00,$11,$04,$00,$21
 $84C7 DEFB $02,$00,$41,$41,$81,$81,$10,$7E
 $84CF DEFB $01,$00,$00,$01,$04,$00,$01,$00
 $84D7 DEFB $00,$01

; Routine at 84D9
;
; Used by the routines at #R$7471 and #R$93ED.
c$84D9 LD DE,$8524   ;
 $84DC EXX           ;
 $84DD LD C,$0B      ;
 $84DF EXX           ;
 $84E0 LD HL,$70E8   ;
*$84E3 LD A,(HL)     ;
 $84E4 DEC HL        ;
 $84E5 CP (HL)       ;
 $84E6 JR Z,$84F4    ;
 $84E8 LD (HL),A     ;
 $84E9 SRL A         ;
 $84EB SRL A         ;
 $84ED PUSH HL       ;
 $84EE PUSH DE       ;
 $84EF CALL $854F    ;
 $84F2 POP DE        ;
 $84F3 POP HL        ;
*$84F4 INC DE        ;
 $84F5 INC DE        ;
 $84F6 INC HL        ;
 $84F7 INC HL        ;
 $84F8 INC HL        ;
 $84F9 EXX           ;
 $84FA DEC C         ;
 $84FB EXX           ;
 $84FC JR NZ,$84E3   ;
 $84FE LD A,$01      ;
 $8500 LD ($8523),A  ;
 $8503 EXX           ;
 $8504 LD C,$02      ;
 $8506 EXX           ;
*$8507 LD A,(HL)     ;
 $8508 DEC HL        ;
 $8509 CP (HL)       ;
 $850A JR Z,$8514    ;
 $850C LD (HL),A     ;
 $850D PUSH HL       ;
 $850E PUSH DE       ;
 $850F CALL $8540    ;
 $8512 POP DE        ;
 $8513 POP HL        ;
*$8514 INC DE        ;
 $8515 INC DE        ;
 $8516 INC HL        ;
 $8517 INC HL        ;
 $8518 INC HL        ;
 $8519 EXX           ;
 $851A DEC C         ;
 $851B EXX           ;
 $851C JR NZ,$8507   ;
 $851E XOR A         ;
 $851F LD ($8523),A  ;
 $8522 RET           ;

; Data block at 8523
b$8523 DEFB $00,$23

; Message at 8525
t$8525 DEFM "QCQcQ"

; Data block at 852A
b$852A DEFB $83,$51,$A3,$51,$C3

; Message at 852F
t$852F DEFM "Q8Q"

; Data block at 8532
b$8532 DEFB $98,$51,$B8,$51,$D8,$51,$F8

; Message at 8539
t$8539 DEFM "QXQxQ"

; Data block at 853E
b$853E DEFB $E3,$51

; Routine at 8540
;
; Used by the routine at #R$84D9.
c$8540 LD B,A        ;
 $8541 XOR A         ;
 $8542 LD ($8597),A  ;
 $8545 LD ($85B9),A  ;
 $8548 LD A,$03      ;
 $854A LD ($856D),A  ;
 $854D JR $855B      ;

; Routine at 854F
;
; Used by the routine at #R$84D9.
c$854F LD B,A        ;
 $8550 LD A,$FF      ;
 $8552 LD ($856D),A  ;
 $8555 LD ($8597),A  ;
 $8558 LD ($85B9),A  ;
; This entry point is used by the routine at #R$8540.
*$855B LD A,(DE)     ;
 $855C LD L,A        ;
 $855D INC DE        ;
 $855E LD A,(DE)     ;
 $855F LD H,A        ;
 $8560 EXX           ;
 $8561 LD B,$05      ;
 $8563 EXX           ;
 $8564 LD A,B        ;
 $8565 AND A         ;
 $8566 JP Z,$85E1    ;
 $8569 LD D,A        ;
 $856A AND $07       ;
 $856C LD C,$FF      ;
 $856E LD B,A        ;
 $856F LD A,D        ;
 $8570 JR Z,$8582    ;
 $8572 LD A,($8523)  ;
 $8575 DEC A         ;
 $8576 JP Z,$85F5    ;
 $8579 XOR A         ;
*$857A SCF           ;
 $857B RRA           ;
 $857C DJNZ $857A    ;
*$857E LD C,A        ;
 $857F LD A,D        ;
 $8580 ADD A,$08     ;
*$8582 AND $F8       ;
 $8584 SRL A         ;
 $8586 SRL A         ;
 $8588 SRL A         ;
 $858A LD B,A        ;
 $858B LD A,$05      ;
 $858D SUB B         ;
 $858E LD D,A        ;
 $858F JR Z,$85B5    ;
 $8591 DEC B         ;
 $8592 JR Z,$85CC    ;
 $8594 LD E,B        ;
*$8595 PUSH HL       ;
 $8596 LD A,$FF      ;
*$8598 LD (HL),A     ;
 $8599 INC L         ;
 $859A DJNZ $8598    ;
 $859C CALL $8606    ;
 $859F INC L         ;
 $85A0 LD B,D        ;
 $85A1 DEC B         ;
 $85A2 JR Z,$85A9    ;
 $85A4 XOR A         ;
*$85A5 LD (HL),A     ;
 $85A6 INC L         ;
 $85A7 DJNZ $85A5    ;
*$85A9 LD (HL),$01   ;
 $85AB INC L         ;
 $85AC POP HL        ;
 $85AD EXX           ;
 $85AE DEC B         ;
 $85AF EXX           ;
 $85B0 RET Z         ;
 $85B1 INC H         ;
 $85B2 LD B,E        ;
 $85B3 JR $8595      ;
*$85B5 DEC B         ;
 $85B6 LD E,B        ;
*$85B7 PUSH HL       ;
 $85B8 LD A,$FF      ;
*$85BA LD (HL),A     ;
 $85BB INC L         ;
 $85BC DJNZ $85BA    ;
 $85BE SET 0,C       ;
 $85C0 CALL $8606    ;
 $85C3 POP HL        ;
 $85C4 EXX           ;
 $85C5 DEC B         ;
 $85C6 EXX           ;
 $85C7 RET Z         ;
 $85C8 INC H         ;
 $85C9 LD B,E        ;
 $85CA JR $85B7      ;
*$85CC LD B,$05      ;
*$85CE LD A,C        ;
 $85CF PUSH HL       ;
 $85D0 LD (HL),A     ;
 $85D1 INC L         ;
 $85D2 XOR A         ;
 $85D3 LD (HL),A     ;
 $85D4 INC L         ;
 $85D5 LD (HL),A     ;
 $85D6 INC L         ;
 $85D7 LD (HL),A     ;
 $85D8 INC L         ;
 $85D9 OR $01        ;
 $85DB LD (HL),A     ;
 $85DC POP HL        ;
 $85DD INC H         ;
 $85DE DJNZ $85CE    ;
 $85E0 RET           ;
*$85E1 LD B,$05      ;
*$85E3 XOR A         ;
 $85E4 PUSH HL       ;
 $85E5 LD (HL),A     ;
 $85E6 INC L         ;
 $85E7 LD (HL),A     ;
 $85E8 INC L         ;
 $85E9 LD (HL),A     ;
 $85EA INC L         ;
 $85EB LD (HL),A     ;
 $85EC INC L         ;
 $85ED OR $01        ;
 $85EF LD (HL),A     ;
 $85F0 POP HL        ;
 $85F1 INC H         ;
 $85F2 DJNZ $85E3    ;
 $85F4 RET           ;
*$85F5 LD A,$80      ;
 $85F7 DEC B         ;
 $85F8 JR Z,$8603    ;
 $85FA SCF           ;
 $85FB RRA           ;
 $85FC DEC B         ;
 $85FD JR Z,$8603    ;
*$85FF SRL A         ;
 $8601 DJNZ $85FF    ;
*$8603 JP $857E      ;

; Routine at 8606
;
; Used by the routine at #R$854F.
c$8606 LD (HL),C     ;
 $8607 LD A,($8523)  ;
 $860A DEC A         ;
 $860B RET NZ        ;
 $860C LD A,C        ;
 $860D AND $FE       ;
 $860F CP $80        ;
 $8611 JR Z,$8614    ;
 $8613 RET           ;
*$8614 DEC L         ;
 $8615 LD (HL),$01   ;
 $8617 INC L         ;
 $8618 RET           ;

; Data block at 8619
b$8619 DEFB $00,$00,$00,$0F,$64,$00,$00,$00
 $8621 DEFB $00,$00

; For saving SP
@label=save_sp_2
w$8623 DEFW $0000

; Data block at 8625
b$8625 DEFB $00,$00,$00,$00,$00,$20

; Routine at 862B
;
; Used by the routines at #R$87FE, #R$884A, #R$8898, #R$88C2 and #R$8FB8.
c$862B PUSH AF       ;
 $862C EXX           ;
 $862D LD HL,$0000   ;
 $8630 LD D,H        ;
 $8631 LD B,$FF      ;
 $8633 EXX           ;
 $8634 LD A,$01      ;
 $8636 LD ($8628),A  ;
 $8639 LD A,($8629)  ;
 $863C AND A         ;
 $863D JP NZ,$9060   ;
 $8640 JP $8CF8      ;

; Routine at 8643
;
; Used by the routines at #R$87FE, #R$884A, #R$8898, #R$88C2 and #R$8FB8.
c$8643 PUSH AF       ;
 $8644 EXX           ;
 $8645 LD HL,$0000   ;
 $8648 LD D,H        ;
 $8649 LD B,$FF      ;
 $864B EXX           ;
 $864C XOR A         ;
 $864D LD ($8628),A  ;
 $8650 LD A,($8629)  ;
 $8653 AND A         ;
 $8654 JP NZ,$9060   ;
 $8657 JP $8CF8      ;

; Routine at 865A
;
; Used by the routines at #R$87FE, #R$884A, #R$8898, #R$88C2 and #R$8FCC.
c$865A PUSH AF       ;
 $865B EXX           ;
 $865C LD HL,$0000   ;
 $865F LD D,H        ;
 $8660 LD B,$FF      ;
 $8662 EXX           ;
 $8663 LD A,$01      ;
 $8665 LD ($8628),A  ;
 $8668 LD A,($8629)  ;
 $866B AND A         ;
 $866C JP NZ,$91F4   ;
 $866F JP $8BF8      ;

; Routine at 8672
;
; Used by the routines at #R$87FE, #R$884A, #R$8898, #R$88C2 and #R$8FCC.
c$8672 PUSH AF       ;
 $8673 EXX           ;
 $8674 LD HL,$0000   ;
 $8677 LD D,H        ;
 $8678 LD B,$FF      ;
 $867A EXX           ;
 $867B XOR A         ;
 $867C LD ($8628),A  ;
 $867F LD A,($8629)  ;
 $8682 AND A         ;
 $8683 JP NZ,$91F4   ;
 $8686 JP $8BF8      ;

; Routine at 8689
;
; Used by the routines at #R$87C8 and #R$893F.
c$8689 PUSH AF       ;
 $868A EXX           ;
 $868B LD HL,$0000   ;
 $868E LD D,H        ;
 $868F LD B,$FF      ;
 $8691 EXX           ;
 $8692 LD A,$01      ;
 $8694 LD ($8628),A  ;
 $8697 LD A,($8629)  ;
 $869A AND A         ;
 $869B JP NZ,$90FB   ;
 $869E JP $8AF7      ;

; Routine at 86A1
;
; Used by the routines at #R$87C8 and #R$893F.
c$86A1 PUSH AF       ;
 $86A2 EXX           ;
 $86A3 LD HL,$0000   ;
 $86A6 LD D,H        ;
 $86A7 LD B,$FF      ;
 $86A9 EXX           ;
 $86AA XOR A         ;
 $86AB LD ($8628),A  ;
 $86AE LD A,($8629)  ;
 $86B1 AND A         ;
 $86B2 JP NZ,$90FB   ;
 $86B5 JP $8AF7      ;

; Routine at 86B8
;
; Used by the routines at #R$87FE and #R$884A.
c$86B8 LD C,A        ;
 $86B9 LD A,($8629)  ;
 $86BC AND A         ;
 $86BD LD A,C        ;
 $86BE JP NZ,$9004   ;
 $86C1 JP $8A37      ;

; Routine at 86C4
;
; Used by the routines at #R$87FE and #R$884A.
c$86C4 LD C,A        ;
 $86C5 LD A,($8629)  ;
 $86C8 AND A         ;
 $86C9 LD A,C        ;
 $86CA JP NZ,$9032   ;
 $86CD JP $8A82      ;

; Routine at 86D0
;
; Used by the routines at #R$7584 and #R$8F0D.
c$86D0 LD A,($861D)  ;
 $86D3 CP $09        ;
 $86D5 RET C         ;
 $86D6 DI            ;
 $86D7 XOR A         ;
 $86D8 LD ($8629),A  ;
 $86DB JP $86E9      ;

; Routine at 86DE
;
; Used by the routines at #R$7584 and #R$8E29.
c$86DE LD A,($861D)  ;
 $86E1 CP $09        ;
 $86E3 RET C         ;
; This entry point is used by the routine at #R$9296.
*$86E4 LD A,$01      ;
 $86E6 LD ($8629),A  ;
; This entry point is used by the routine at #R$86D0.
*$86E9 CALL $86EE    ;
 $86EC EI            ;
 $86ED RET           ;

; Routine at 86EE
;
; Used by the routine at #R$86DE.
c$86EE LD BC,($861A) ;
 $86F2 LD ($861E),BC ;
 $86F6 LD DE,($861C) ;
 $86FA LD A,$40      ;
 $86FC BIT 1,E       ;
 $86FE JR NZ,$8702   ;
 $8700 ADD A,C       ;
 $8701 ADD A,C       ;
*$8702 SUB C         ;
 $8703 LD ($8620),A  ;
 $8706 LD A,$80      ;
 $8708 BIT 0,E       ;
 $870A JR Z,$870E    ;
 $870C ADD A,B       ;
 $870D ADD A,B       ;
*$870E SUB B         ;
 $870F LD ($8621),A  ;
 $8712 LD A,C        ;
 $8713 CP $40        ;
 $8715 BIT 3,E       ;
 $8717 EX AF,AF'     ;
 $8718 LD A,B        ;
 $8719 CP $78        ;
 $871B BIT 2,E       ;
 $871D JR Z,$872B    ;
 $871F JR NC,$872C   ;
 $8721 EX AF,AF'     ;
 $8722 JR Z,$8728    ;
 $8724 JR NC,$875E   ;
 $8726 JR $8736      ;
*$8728 RET NC        ;
 $8729 JR $875E      ;
*$872B RET NC        ;
*$872C EX AF,AF'     ;
 $872D JR Z,$8733    ;
 $872F JR NC,$878E   ;
 $8731 JR $874B      ;
*$8733 RET NC        ;
 $8734 JR $878E      ;
*$8736 LD A,B        ;
 $8737 ADD A,D       ;
 $8738 JR C,$873F    ;
 $873A CP $78        ;
 $873C JP C,$87C8    ;
*$873F LD A,D        ;
 $8740 SUB B         ;
 $8741 JR C,$8745    ;
 $8743 CP $78        ;
*$8745 JP C,$8898    ;
 $8748 JP $87FE      ;
*$874B LD A,B        ;
 $874C SUB $78       ;
 $874E LD B,A        ;
 $874F LD ($861F),A  ;
 $8752 LD A,D        ;
 $8753 SUB B         ;
 $8754 RET C         ;
 $8755 RET Z         ;
 $8756 SUB $F0       ;
 $8758 JP NC,$87F4   ;
 $875B JP $888E      ;
*$875E LD A,C        ;
 $875F SUB $40       ;
 $8761 LD C,A        ;
 $8762 LD ($861E),A  ;
 $8765 LD A,D        ;
 $8766 SUB C         ;
 $8767 RET C         ;
 $8768 LD A,D        ;
 $8769 CALL $87BF    ;
 $876C LD H,D        ;
 $876D LD L,E        ;
 $876E LD A,C        ;
 $876F CALL $87BF    ;
 $8772 SBC HL,DE     ;
 $8774 LD A,$78      ;
 $8776 SUB B         ;
 $8777 CALL $87BF    ;
 $877A SBC HL,DE     ;
 $877C JP C,$893F    ;
 $877F ADD HL,DE     ;
 $8780 LD A,$78      ;
 $8782 ADD A,B       ;
 $8783 CALL $87BF    ;
 $8786 SBC HL,DE     ;
 $8788 JP NC,$884A   ;
 $878B JP $88C2      ;
*$878E LD A,B        ;
 $878F SUB $78       ;
 $8791 LD B,A        ;
 $8792 LD A,C        ;
 $8793 SUB $40       ;
 $8795 LD C,A        ;
 $8796 LD ($861E),BC ;
 $879A LD A,D        ;
 $879B CALL $87BF    ;
 $879E LD H,D        ;
 $879F LD L,E        ;
 $87A0 LD A,C        ;
 $87A1 CALL $87BF    ;
 $87A4 SBC HL,DE     ;
 $87A6 RET C         ;
 $87A7 LD A,B        ;
 $87A8 CALL $87BF    ;
 $87AB SBC HL,DE     ;
 $87AD RET C         ;
 $87AE ADD HL,DE     ;
 $87AF LD A,B        ;
 $87B0 ADD A,$F8     ;
 $87B2 JR C,$87BC    ;
 $87B4 CALL $87BF    ;
 $87B7 SBC HL,DE     ;
 $87B9 JP NC,$8840   ;
*$87BC JP $88B8      ;

; Routine at 87BF
;
; Used by the routines at #R$8322, #R$86EE, #R$8ACD and #R$96D9.
c$87BF PUSH HL       ;
 $87C0 LD H,$BE      ;
 $87C2 LD L,A        ;
 $87C3 LD E,(HL)     ;
 $87C4 INC H         ;
 $87C5 LD D,(HL)     ;
 $87C6 POP HL        ;
 $87C7 RET           ;

; Routine at 87C8
;
; Used by the routine at #R$86EE.
c$87C8 CALL $87D4    ;
 $87CB CALL $86A1    ;
 $87CE CALL $87D4    ;
 $87D1 JP $8689      ;

; Routine at 87D4
;
; Used by the routine at #R$87C8.
c$87D4 LD BC,($8620) ;
 $87D8 LD DE,($861C) ;
 $87DC LD A,D        ;
 $87DD NEG           ;
 $87DF EXX           ;
 $87E0 LD C,A        ;
 $87E1 LD E,$00      ;
 $87E3 EXX           ;
 $87E4 LD A,B        ;
 $87E5 SUB D         ;
 $87E6 CALL $89D4    ;
 $87E9 LD A,($8620)  ;
 $87EC LD C,A        ;
 $87ED LD A,($8621)  ;
 $87F0 ADD A,D       ;
 $87F1 JP $89EF      ;

; Routine at 87F4
;
; Used by the routine at #R$86EE.
c$87F4 LD A,B        ;
 $87F5 ADD A,$78     ;
 $87F7 LD B,A        ;
 $87F8 LD ($861F),A  ;
 $87FB XOR A         ;
 $87FC JR $8802      ;

; Routine at 87FE
;
; Used by the routine at #R$86EE.
c$87FE LD A,$88      ;
 $8800 ADD A,B       ;
 $8801 INC A         ;
; This entry point is used by the routine at #R$87F4.
*$8802 EX AF,AF'     ;
 $8803 LD A,$78      ;
 $8805 ADD A,B       ;
 $8806 CALL $8ACD    ;
 $8809 LD ($8622),A  ;
 $880C LD B,A        ;
 $880D LD A,($8620)  ;
 $8810 CALL $86B8    ;
 $8813 CALL $8A16    ;
 $8816 CALL $8A25    ;
 $8819 LD A,($861C)  ;
 $881C BIT 0,A       ;
 $881E CALL Z,$8672  ;
 $8821 CALL NZ,$8643 ;
 $8824 LD A,($8622)  ;
 $8827 LD B,A        ;
 $8828 LD A,($8620)  ;
 $882B CALL $86C4    ;
 $882E CALL $8A16    ;
 $8831 CALL $8A25    ;
 $8834 LD A,($861C)  ;
 $8837 BIT 0,A       ;
 $8839 CALL Z,$865A  ;
 $883C CALL NZ,$862B ;
 $883F RET           ;

; Routine at 8840
;
; Used by the routine at #R$86EE.
c$8840 LD A,B        ;
 $8841 ADD A,$78     ;
 $8843 LD B,A        ;
 $8844 LD ($861F),A  ;
 $8847 XOR A         ;
 $8848 JR $884D      ;

; Routine at 884A
;
; Used by the routine at #R$86EE.
c$884A LD A,B        ;
 $884B SUB $77       ;
; This entry point is used by the routine at #R$8840.
*$884D EX AF,AF'     ;
 $884E LD DE,($861C) ;
 $8852 LD A,$78      ;
 $8854 ADD A,B       ;
 $8855 CALL $8ACD    ;
 $8858 LD ($8622),A  ;
 $885B SUB C         ;
 $885C LD B,A        ;
 $885D BIT 1,E       ;
 $885F JR Z,$8877    ;
 $8861 XOR A         ;
 $8862 CALL $86C4    ;
 $8865 CALL $8A16    ;
 $8868 CALL $8A25    ;
 $886B LD A,($861C)  ;
 $886E BIT 0,A       ;
 $8870 CALL Z,$865A  ;
 $8873 CALL NZ,$862B ;
 $8876 RET           ;
*$8877 LD A,$7F      ;
 $8879 CALL $86B8    ;
 $887C CALL $8A16    ;
 $887F CALL $8A25    ;
 $8882 LD A,($861C)  ;
 $8885 BIT 0,A       ;
 $8887 CALL Z,$8672  ;
 $888A CALL NZ,$8643 ;
 $888D RET           ;

; Routine at 888E
;
; Used by the routine at #R$86EE.
c$888E LD A,B        ;
 $888F ADD A,$78     ;
 $8891 LD ($861F),A  ;
 $8894 LD B,A        ;
 $8895 XOR A         ;
 $8896 JR $889B      ;

; Routine at 8898
;
; Used by the routine at #R$86EE.
c$8898 LD A,B        ;
 $8899 SUB $77       ;
; This entry point is used by the routine at #R$888E.
*$889B EX AF,AF'     ;
 $889C BIT 0,E       ;
 $889E JR Z,$88AC    ;
 $88A0 CALL $8985    ;
 $88A3 CALL $862B    ;
 $88A6 CALL $8985    ;
 $88A9 JP $8643      ;
*$88AC CALL $89A1    ;
 $88AF CALL $865A    ;
 $88B2 CALL $89A1    ;
 $88B5 JP $8672      ;

; Routine at 88B8
;
; Used by the routine at #R$86EE.
c$88B8 LD A,B        ;
 $88B9 ADD A,$78     ;
 $88BB LD ($861F),A  ;
 $88BE LD B,A        ;
 $88BF XOR A         ;
 $88C0 JR $88C5      ;

; Routine at 88C2
;
; Used by the routine at #R$86EE.
c$88C2 LD A,B        ;
 $88C3 SUB $77       ;
; This entry point is used by the routine at #R$88B8.
*$88C5 EX AF,AF'     ;
 $88C6 LD DE,($861C) ;
 $88CA LD A,C        ;
 $88CB CALL $8ACD    ;
 $88CE LD ($8622),A  ;
 $88D1 LD A,C        ;
 $88D2 EXX           ;
 $88D3 LD E,A        ;
 $88D4 LD A,($8622)  ;
 $88D7 NEG           ;
 $88D9 LD C,A        ;
 $88DA EXX           ;
 $88DB BIT 0,E       ;
 $88DD JR Z,$8910    ;
 $88DF LD A,($8622)  ;
 $88E2 CPL           ;
 $88E3 ADD A,$81     ;
 $88E5 ADD A,B       ;
 $88E6 LD C,$00      ;
 $88E8 BIT 1,E       ;
 $88EA JR NZ,$88EE   ;
 $88EC LD C,$7F      ;
*$88EE CALL $89D4    ;
 $88F1 LD A,($8629)  ;
 $88F4 AND A         ;
 $88F5 JP NZ,$8FB8   ;
 $88F8 LD A,E        ;
 $88F9 AND $1F       ;
 $88FB CP $1F        ;
 $88FD RET Z         ;
 $88FE LD A,E        ;
 $88FF OR $1F        ;
 $8901 LD L,A        ;
 $8902 LD C,$00      ;
 $8904 LD A,($861C)  ;
 $8907 BIT 1,A       ;
 $8909 CALL NZ,$862B ;
 $890C CALL Z,$8643  ;
 $890F RET           ;
*$8910 LD A,($8622)  ;
 $8913 ADD A,$80     ;
 $8915 SUB B         ;
 $8916 CP $08        ;
 $8918 RET C         ;
 $8919 LD C,$00      ;
 $891B BIT 1,E       ;
 $891D JR NZ,$8921   ;
 $891F LD C,$7F      ;
*$8921 CALL $89EF    ;
 $8924 LD A,L        ;
 $8925 AND $E0       ;
 $8927 OR $01        ;
 $8929 LD E,A        ;
 $892A LD A,($8629)  ;
 $892D AND A         ;
 $892E JP NZ,$8FCC   ;
 $8931 LD B,$FF      ;
 $8933 LD A,($861C)  ;
 $8936 BIT 1,A       ;
 $8938 CALL NZ,$865A ;
 $893B CALL Z,$8672  ;
 $893E RET           ;

; Routine at 893F
;
; Used by the routine at #R$86EE.
c$893F LD DE,($861C) ;
 $8943 LD A,C        ;
 $8944 CALL $8ACD    ;
 $8947 LD ($8622),A  ;
 $894A LD A,C        ;
 $894B EXX           ;
 $894C LD E,A        ;
 $894D LD A,($8622)  ;
 $8950 NEG           ;
 $8952 LD C,A        ;
 $8953 EXX           ;
 $8954 XOR A         ;
 $8955 BIT 1,E       ;
 $8957 JR NZ,$895B   ;
 $8959 LD A,$7F      ;
*$895B LD ($8620),A  ;
 $895E LD C,A        ;
 $895F LD A,($8622)  ;
 $8962 LD L,A        ;
 $8963 LD A,($8621)  ;
 $8966 SUB L         ;
 $8967 CALL $89D4    ;
 $896A LD A,($8620)  ;
 $896D LD C,A        ;
 $896E LD A,($8622)  ;
 $8971 LD L,A        ;
 $8972 LD A,($8621)  ;
 $8975 ADD A,L       ;
 $8976 CALL $89EF    ;
 $8979 LD A,($861C)  ;
 $897C BIT 1,A       ;
 $897E CALL NZ,$8689 ;
 $8981 CALL Z,$86A1  ;
 $8984 RET           ;

; Routine at 8985
;
; Used by the routine at #R$8898.
c$8985 CALL $89C3    ;
 $8988 LD A,($8620)  ;
 $898B LD C,A        ;
 $898C LD A,$80      ;
 $898E ADD A,B       ;
 $898F SUB D         ;
 $8990 CALL $89D4    ;
 $8993 LD A,($8629)  ;
 $8996 AND A         ;
 $8997 JP NZ,$8FDA   ;
 $899A LD A,E        ;
 $899B OR $1F        ;
 $899D LD L,A        ;
 $899E LD C,$00      ;
 $89A0 RET           ;

; Routine at 89A1
;
; Used by the routine at #R$8898.
c$89A1 CALL $89C3    ;
 $89A4 LD A,($8620)  ;
 $89A7 LD C,A        ;
 $89A8 LD A,$80      ;
 $89AA ADD A,D       ;
 $89AB SUB B         ;
 $89AC CALL $89EF    ;
 $89AF LD A,L        ;
 $89B0 AND $E0       ;
 $89B2 OR $01        ;
 $89B4 LD E,A        ;
 $89B5 LD B,A        ;
 $89B6 LD A,($8629)  ;
 $89B9 AND A         ;
 $89BA LD A,B        ;
 $89BB JR NZ,$89C0   ;
 $89BD LD B,$FF      ;
 $89BF RET           ;
*$89C0 LD B,$80      ;
 $89C2 RET           ;

; Routine at 89C3
;
; Used by the routines at #R$8985 and #R$89A1.
c$89C3 LD BC,($861E) ;
 $89C7 LD DE,($861C) ;
 $89CB LD A,D        ;
 $89CC NEG           ;
 $89CE EXX           ;
 $89CF LD C,A        ;
 $89D0 LD E,$00      ;
 $89D2 EXX           ;
 $89D3 RET           ;

; Routine at 89D4
;
; Used by the routines at #R$87D4, #R$88C2, #R$893F and #R$8985.
c$89D4 LD B,C        ;
 $89D5 LD C,A        ;
 $89D6 LD A,B        ;
 $89D7 CALL $22B0    ;
 $89DA SET 7,H       ;
 $89DC LD B,A        ;
 $89DD LD A,($8629)  ;
 $89E0 AND A         ;
 $89E1 LD A,B        ;
 $89E2 JP NZ,$8FE3   ;
 $89E5 LD B,$FF      ;
 $89E7 INC A         ;
*$89E8 SRL B         ;
 $89EA DEC A         ;
 $89EB JR NZ,$89E8   ;
 $89ED LD E,L        ;
 $89EE RET           ;

; Routine at 89EF
;
; Used by the routines at #R$87D4, #R$88C2, #R$893F and #R$89A1.
c$89EF PUSH AF       ;
 $89F0 LD A,B        ;
 $89F1 LD ($8627),A  ;
 $89F4 POP AF        ;
 $89F5 LD B,C        ;
 $89F6 LD C,A        ;
 $89F7 LD A,B        ;
 $89F8 CALL $22B0    ;
 $89FB SET 7,H       ;
 $89FD SUB $08       ;
 $89FF NEG           ;
 $8A01 LD C,A        ;
 $8A02 LD A,($8629)  ;
 $8A05 AND A         ;
 $8A06 LD A,C        ;
 $8A07 JP NZ,$8FED   ;
 $8A0A LD C,$FF      ;
*$8A0C SLA C         ;
 $8A0E DEC A         ;
 $8A0F JR NZ,$8A0C   ;
 $8A11 LD A,($8627)  ;
 $8A14 LD B,A        ;
 $8A15 RET           ;

; Routine at 8A16
;
; Used by the routines at #R$87FE and #R$884A.
c$8A16 LD BC,($861E) ;
 $8A1A LD A,$88      ;
 $8A1C SUB B         ;
 $8A1D EXX           ;
 $8A1E LD C,A        ;
 $8A1F LD A,($8622)  ;
 $8A22 LD E,A        ;
 $8A23 EXX           ;
 $8A24 RET           ;

; Routine at 8A25
;
; Used by the routines at #R$87FE and #R$884A.
c$8A25 LD A,($8629)  ;
 $8A28 AND A         ;
 $8A29 JP NZ,$8FF9   ;
 $8A2C LD A,L        ;
 $8A2D AND $E0       ;
 $8A2F OR $01        ;
 $8A31 LD E,A        ;
 $8A32 LD C,$00      ;
 $8A34 LD B,$FF      ;
 $8A36 RET           ;

; Routine at 8A37
;
; Used by the routine at #R$86B8.
c$8A37 PUSH DE       ;
 $8A38 PUSH AF       ;
 $8A39 PUSH BC       ;
 $8A3A LD B,A        ;
 $8A3B LD C,$F8      ;
 $8A3D CALL $22B0    ;
 $8A40 SET 7,H       ;
 $8A42 POP BC        ;
 $8A43 PUSH BC       ;
 $8A44 LD DE,$FFFF   ;
 $8A47 LD ($8623),SP ;
 $8A4B DEC B         ;
 $8A4C INC B         ;
 $8A4D JR Z,$8A67    ;
*$8A4F LD SP,HL      ;
 $8A50 PUSH DE       ;
 $8A51 PUSH DE       ;
 $8A52 PUSH DE       ;
 $8A53 PUSH DE       ;
 $8A54 PUSH DE       ;
 $8A55 PUSH DE       ;
 $8A56 PUSH DE       ;
 $8A57 PUSH DE       ;
 $8A58 PUSH DE       ;
 $8A59 PUSH DE       ;
 $8A5A PUSH DE       ;
 $8A5B PUSH DE       ;
 $8A5C PUSH DE       ;
 $8A5D PUSH DE       ;
 $8A5E PUSH DE       ;
 $8A5F LD A,H        ;
 $8A60 DEC H         ;
 $8A61 AND $07       ;
 $8A63 JR Z,$8A6F    ;
*$8A65 DJNZ $8A4F    ;
*$8A67 LD SP,($8623) ;
 $8A6B POP BC        ;
 $8A6C POP AF        ;
 $8A6D POP DE        ;
 $8A6E RET           ;
*$8A6F LD A,L        ;
 $8A70 SUB $20       ;
 $8A72 LD L,A        ;
 $8A73 JR C,$8A7B    ;
 $8A75 LD A,H        ;
 $8A76 ADD A,$08     ;
 $8A78 LD H,A        ;
 $8A79 JR $8A65      ;
*$8A7B LD A,H        ;
 $8A7C CP $C0        ;
 $8A7E JR NC,$8A65   ;
 $8A80 JR $8A67      ;

; Routine at 8A82
;
; Used by the routine at #R$86C4.
c$8A82 PUSH DE       ;
 $8A83 PUSH AF       ;
 $8A84 PUSH BC       ;
 $8A85 LD B,A        ;
 $8A86 LD C,$F8      ;
 $8A88 CALL $22B0    ;
 $8A8B SET 7,H       ;
 $8A8D POP BC        ;
 $8A8E PUSH BC       ;
 $8A8F LD DE,$FFFF   ;
 $8A92 LD ($8623),SP ;
 $8A96 DEC B         ;
 $8A97 INC B         ;
 $8A98 JR Z,$8AB2    ;
*$8A9A LD SP,HL      ;
 $8A9B PUSH DE       ;
 $8A9C PUSH DE       ;
 $8A9D PUSH DE       ;
 $8A9E PUSH DE       ;
 $8A9F PUSH DE       ;
 $8AA0 PUSH DE       ;
 $8AA1 PUSH DE       ;
 $8AA2 PUSH DE       ;
 $8AA3 PUSH DE       ;
 $8AA4 PUSH DE       ;
 $8AA5 PUSH DE       ;
 $8AA6 PUSH DE       ;
 $8AA7 PUSH DE       ;
 $8AA8 PUSH DE       ;
 $8AA9 PUSH DE       ;
 $8AAA INC H         ;
 $8AAB LD A,H        ;
 $8AAC AND $07       ;
 $8AAE JR Z,$8ABA    ;
*$8AB0 DJNZ $8A9A    ;
*$8AB2 LD SP,($8623) ;
 $8AB6 POP BC        ;
 $8AB7 POP AF        ;
 $8AB8 POP DE        ;
 $8AB9 RET           ;
*$8ABA LD A,L        ;
 $8ABB ADD A,$20     ;
 $8ABD LD L,A        ;
 $8ABE JR C,$8AC6    ;
 $8AC0 LD A,H        ;
 $8AC1 SUB $08       ;
 $8AC3 LD H,A        ;
 $8AC4 JR $8AB0      ;
*$8AC6 LD A,H        ;
 $8AC7 CP $D0        ;
 $8AC9 JR C,$8AB0    ;
 $8ACB JR $8AB2      ;

; Routine at 8ACD
;
; Used by the routines at #R$87FE, #R$884A, #R$88C2 and #R$893F.
c$8ACD PUSH BC       ;
 $8ACE PUSH DE       ;
 $8ACF PUSH HL       ;
 $8AD0 PUSH AF       ;
 $8AD1 LD A,D        ;
 $8AD2 CALL $87BF    ;
 $8AD5 LD H,D        ;
 $8AD6 LD L,E        ;
 $8AD7 POP AF        ;
 $8AD8 CALL $87BF    ;
 $8ADB SBC HL,DE     ;
 $8ADD LD B,$80      ;
 $8ADF XOR A         ;
 $8AE0 LD ($8625),HL ;
*$8AE3 LD HL,($8625) ;
 $8AE6 ADD A,B       ;
 $8AE7 CALL $87BF    ;
 $8AEA SBC HL,DE     ;
 $8AEC JR NC,$8AEF   ;
 $8AEE SUB B         ;
*$8AEF SRL B         ;
 $8AF1 JR NC,$8AE3   ;
 $8AF3 POP HL        ;
 $8AF4 POP DE        ;
 $8AF5 POP BC        ;
 $8AF6 RET           ;

; Routine at 8AF7
;
; Used by the routines at #R$8689 and #R$86A1.
c$8AF7 LD A,E        ;
 $8AF8 SUB L         ;
 $8AF9 JR NC,$8B0D   ;
 $8AFB LD A,($8628)  ;
 $8AFE AND A         ;
 $8AFF JR NZ,$8B08   ;
 $8B01 LD A,$BF      ;
 $8B03 CP H          ;
 $8B04 JR C,$8B0F    ;
 $8B06 JR $8B0D      ;
*$8B08 LD A,$CF      ;
 $8B0A CP H          ;
 $8B0B JR NC,$8B0F   ;
*$8B0D POP AF        ;
 $8B0E RET           ;

; Routine at 8B0F
;
; Used by the routine at #R$8AF7.
c$8B0F LD ($8623),SP ; Save stack pointer
*$8B13 LD A,(HL)     ;
 $8B14 OR C          ;
 $8B15 LD (HL),A     ;
 $8B16 LD D,L        ;
 $8B17 LD L,E        ;
 $8B18 LD A,(HL)     ;
 $8B19 OR B          ;
 $8B1A LD (HL),A     ;
 $8B1B LD A,D        ;
 $8B1C SUB E         ;
 $8B1D DEC A         ;
 $8B1E SRL A         ;
 $8B20 JR NC,$8B25   ;
 $8B22 INC L         ;
 $8B23 LD (HL),$FF   ;
*$8B25 LD L,D        ;
 $8B26 SUB $11       ;
 $8B28 CPL           ;
 $8B29 LD ($8B32),A  ;
 $8B2C LD SP,$8FB6   ;
 $8B2F POP AF        ;
 $8B30 LD SP,HL      ;
@label=self_mod_1
*$8B31 JR $8B31      ; Self-modified
 $8B33 PUSH AF       ; {Write 32 bytes
 $8B34 PUSH AF       ;
 $8B35 PUSH AF       ;
 $8B36 PUSH AF       ;
 $8B37 PUSH AF       ;
 $8B38 PUSH AF       ;
 $8B39 PUSH AF       ;
 $8B3A PUSH AF       ;
 $8B3B PUSH AF       ;
 $8B3C PUSH AF       ;
 $8B3D PUSH AF       ;
 $8B3E PUSH AF       ;
 $8B3F PUSH AF       ;
 $8B40 PUSH AF       ;
 $8B41 PUSH AF       ;
 $8B42 PUSH AF       ; }
 $8B43 LD A,($8628)  ;
 $8B46 AND A         ;
 $8B47 LD SP,($8623) ; Restore stack pointer
 $8B4B JR NZ,$8B52   ;
 $8B4D CALL $8DEE    ;
 $8B50 JR $8B55      ;
*$8B52 CALL $8E08    ;
*$8B55 EXX           ;
 $8B56 ADD HL,DE     ;
 $8B57 INC E         ;
 $8B58 ADD HL,DE     ;
 $8B59 BIT 7,H       ;
 $8B5B EXX           ;
 $8B5C JR NZ,$8B6D   ;
 $8B5E SRL B         ;
 $8B60 JR NC,$8B72   ;
*$8B62 SLA C         ;
 $8B64 JR NC,$8B7B   ;
*$8B66 EXX           ;
 $8B67 ADD HL,BC     ;
 $8B68 INC C         ;
; This entry point is used by the routines at #R$8C13 and #R$8D13.
*$8B69 ADD HL,BC     ;
 $8B6A BIT 7,H       ;
 $8B6C EXX           ;
*$8B6D JP NZ,$8B13   ;
 $8B70 JR $8B9C      ;
*$8B72 INC E         ;
 $8B73 LD A,L        ;
 $8B74 SUB E         ;
 $8B75 JR Z,$8B84    ;
 $8B77 LD B,$7F      ;
 $8B79 JR $8B62      ;
*$8B7B DEC L         ;
 $8B7C LD A,L        ;
 $8B7D SUB E         ;
 $8B7E JR Z,$8B84    ;
 $8B80 LD C,$FE      ;
 $8B82 JR $8B66      ;
; This entry point is used by the routine at #R$8B8A.
*$8B84 LD SP,($8623) ; Restore stack pointer
 $8B88 POP AF        ;
 $8B89 RET           ;

; Routine at 8B8A
c$8B8A INC E         ;
 $8B8B LD A,L        ;
 $8B8C SUB E         ;
 $8B8D JR Z,$8B84    ;
 $8B8F LD B,$7F      ;
 $8B91 JR $8BA0      ;
*$8B93 DEC L         ;
 $8B94 LD A,L        ;
 $8B95 SUB E         ;
 $8B96 JR Z,$8B84    ;
 $8B98 LD C,$FE      ;
 $8B9A JR $8BA4      ;
; This entry point is used by the routine at #R$8B0F.
*$8B9C SRL B         ;
 $8B9E JR NC,$8B8A   ;
*$8BA0 SLA C         ;
 $8BA2 JR NC,$8B93   ;
*$8BA4 EXX           ;
 $8BA5 ADD HL,BC     ;
 $8BA6 INC C         ;
 $8BA7 JR Z,$8B84    ;
; This entry point is used by the routines at #R$8C13 and #R$8D13.
*$8BA9 ADD HL,BC     ;
 $8BAA BIT 7,H       ;
 $8BAC EXX           ;
 $8BAD JR Z,$8B9C    ;
 $8BAF EXX           ;
 $8BB0 ADD HL,DE     ;
 $8BB1 INC E         ;
 $8BB2 ADD HL,DE     ;
 $8BB3 EXX           ;
 $8BB4 LD A,(HL)     ;
 $8BB5 OR C          ;
 $8BB6 LD (HL),A     ;
 $8BB7 LD D,L        ;
 $8BB8 LD L,E        ;
 $8BB9 LD A,(HL)     ;
 $8BBA OR B          ;
 $8BBB LD (HL),A     ;
 $8BBC LD A,D        ;
 $8BBD SUB E         ;
 $8BBE DEC A         ;
 $8BBF SRL A         ;
 $8BC1 JR NC,$8BC6   ;
 $8BC3 INC L         ;
 $8BC4 LD (HL),$FF   ;
*$8BC6 LD L,D        ;
 $8BC7 SUB $11       ;
 $8BC9 CPL           ;
 $8BCA LD ($8BD3),A  ;
 $8BCD LD SP,$8FB6   ;
 $8BD0 POP AF        ;
 $8BD1 LD SP,HL      ;
@label=self_mod_2
*$8BD2 JR $8BD2      ; Self-modified
 $8BD4 PUSH AF       ;
 $8BD5 PUSH AF       ;
 $8BD6 PUSH AF       ;
 $8BD7 PUSH AF       ;
 $8BD8 PUSH AF       ;
 $8BD9 PUSH AF       ;
 $8BDA PUSH AF       ;
 $8BDB PUSH AF       ;
 $8BDC PUSH AF       ;
 $8BDD PUSH AF       ;
 $8BDE PUSH AF       ;
 $8BDF PUSH AF       ;
 $8BE0 PUSH AF       ;
 $8BE1 PUSH AF       ;
 $8BE2 PUSH AF       ;
 $8BE3 PUSH AF       ;
 $8BE4 LD A,($8628)  ;
 $8BE7 AND A         ;
 $8BE8 LD SP,($8623) ;
 $8BEC JR NZ,$8BF3   ;
 $8BEE CALL $8DEE    ;
 $8BF1 JR $8B9C      ;
*$8BF3 CALL $8E08    ;
 $8BF6 JR $8B9C      ;
; This entry point is used by the routines at #R$865A and #R$8672.
*$8BF8 LD A,L        ;
 $8BF9 AND $1F       ;
 $8BFB CP $20        ;
 $8BFD JR NC,$8C11   ;
 $8BFF LD A,($8628)  ;
 $8C02 AND A         ;
 $8C03 JR NZ,$8C0C   ;
 $8C05 LD A,$BF      ;
 $8C07 CP H          ;
 $8C08 JR C,$8C13    ;
 $8C0A JR $8C11      ;
*$8C0C LD A,$CF      ;
 $8C0E CP H          ;
 $8C0F JR NC,$8C13   ;
*$8C11 POP AF        ;
 $8C12 RET           ;

; Routine at 8C13
;
; Used by the routine at #R$8B8A.
c$8C13 LD ($8623),SP ;
*$8C17 LD A,(HL)     ;
 $8C18 OR C          ;
 $8C19 LD (HL),A     ;
 $8C1A LD D,L        ;
 $8C1B LD L,E        ;
 $8C1C LD A,D        ;
 $8C1D SUB E         ;
 $8C1E SRL A         ;
 $8C20 JR NC,$8C24   ;
 $8C22 LD (HL),$FF   ;
*$8C24 LD L,D        ;
 $8C25 SUB $11       ;
 $8C27 CPL           ;
 $8C28 LD ($8C31),A  ;
 $8C2B LD SP,$8FB6   ;
 $8C2E POP AF        ;
 $8C2F LD SP,HL      ;
@label=self_mod_3
*$8C30 JR $8C30      ; Self-modified
 $8C32 PUSH AF       ;
 $8C33 PUSH AF       ;
 $8C34 PUSH AF       ;
 $8C35 PUSH AF       ;
 $8C36 PUSH AF       ;
 $8C37 PUSH AF       ;
 $8C38 PUSH AF       ;
 $8C39 PUSH AF       ;
 $8C3A PUSH AF       ;
 $8C3B PUSH AF       ;
 $8C3C PUSH AF       ;
 $8C3D PUSH AF       ;
 $8C3E PUSH AF       ;
 $8C3F PUSH AF       ;
 $8C40 PUSH AF       ;
 $8C41 PUSH AF       ;
 $8C42 LD A,($8628)  ;
 $8C45 AND A         ;
 $8C46 LD SP,($8623) ;
 $8C4A JR NZ,$8C51   ;
 $8C4C CALL $8DEE    ;
 $8C4F JR $8C54      ;
*$8C51 CALL $8E08    ;
*$8C54 EXX           ;
 $8C55 ADD HL,DE     ;
 $8C56 INC E         ;
 $8C57 ADD HL,DE     ;
 $8C58 BIT 7,H       ;
 $8C5A EXX           ;
 $8C5B JR NZ,$8C6D   ;
 $8C5D SLA C         ;
 $8C5F JR NC,$8C72   ;
*$8C61 EXX           ;
 $8C62 ADD HL,BC     ;
 $8C63 INC C         ;
 $8C64 EX AF,AF'     ;
 $8C65 CP C          ;
 $8C66 JR Z,$8C7C    ;
 $8C68 EX AF,AF'     ;
 $8C69 ADD HL,BC     ;
 $8C6A BIT 7,H       ;
 $8C6C EXX           ;
*$8C6D JP NZ,$8C17   ;
 $8C70 JR $8CA0      ;
*$8C72 DEC L         ;
 $8C73 LD A,L        ;
 $8C74 SUB E         ;
 $8C75 INC A         ;
 $8C76 JR Z,$8C90    ;
 $8C78 LD C,$FE      ;
 $8C7A JR $8C61      ;
*$8C7C EX AF,AF'     ;
 $8C7D EXX           ;
 $8C7E LD A,L        ;
 $8C7F SUB E         ;
 $8C80 EXX           ;
 $8C81 JR Z,$8C90    ;
 $8C83 JP $8B69      ;
; This entry point is used by the routine at #R$8C96.
*$8C86 EX AF,AF'     ;
 $8C87 EXX           ;
 $8C88 LD A,L        ;
 $8C89 SUB E         ;
 $8C8A EXX           ;
 $8C8B JR Z,$8C90    ;
 $8C8D JP $8BA9      ;
; This entry point is used by the routine at #R$8C96.
*$8C90 LD SP,($8623) ;
 $8C94 POP AF        ;
 $8C95 RET           ;

; Routine at 8C96
c$8C96 DEC L         ;
 $8C97 LD A,L        ;
 $8C98 SUB E         ;
 $8C99 INC A         ;
 $8C9A JR Z,$8C90    ;
 $8C9C LD C,$FE      ;
 $8C9E JR $8CA4      ;
; This entry point is used by the routine at #R$8C13.
*$8CA0 SLA C         ;
 $8CA2 JR NC,$8C96   ;
*$8CA4 EXX           ;
 $8CA5 ADD HL,BC     ;
 $8CA6 INC C         ;
 $8CA7 JR Z,$8C90    ;
 $8CA9 EX AF,AF'     ;
 $8CAA CP C          ;
 $8CAB JR Z,$8C86    ;
 $8CAD EX AF,AF'     ;
 $8CAE ADD HL,BC     ;
 $8CAF BIT 7,H       ;
 $8CB1 EXX           ;
 $8CB2 JR Z,$8CA0    ;
 $8CB4 EXX           ;
 $8CB5 ADD HL,DE     ;
 $8CB6 INC E         ;
 $8CB7 ADD HL,DE     ;
 $8CB8 EXX           ;
 $8CB9 LD A,(HL)     ;
 $8CBA OR C          ;
 $8CBB LD (HL),A     ;
 $8CBC LD D,L        ;
 $8CBD LD L,E        ;
 $8CBE LD A,D        ;
 $8CBF SUB E         ;
 $8CC0 SRL A         ;
 $8CC2 JR NC,$8CC6   ;
 $8CC4 LD (HL),$FF   ;
*$8CC6 LD L,D        ;
 $8CC7 SUB $11       ;
 $8CC9 CPL           ;
 $8CCA LD ($8CD3),A  ;
 $8CCD LD SP,$8FB6   ;
 $8CD0 POP AF        ;
 $8CD1 LD SP,HL      ;
@label=self_mod_4
*$8CD2 JR $8CD2      ; Self-modified
 $8CD4 PUSH AF       ;
 $8CD5 PUSH AF       ;
 $8CD6 PUSH AF       ;
 $8CD7 PUSH AF       ;
 $8CD8 PUSH AF       ;
 $8CD9 PUSH AF       ;
 $8CDA PUSH AF       ;
 $8CDB PUSH AF       ;
 $8CDC PUSH AF       ;
 $8CDD PUSH AF       ;
 $8CDE PUSH AF       ;
 $8CDF PUSH AF       ;
 $8CE0 PUSH AF       ;
 $8CE1 PUSH AF       ;
 $8CE2 PUSH AF       ;
 $8CE3 PUSH AF       ;
 $8CE4 LD A,($8628)  ;
 $8CE7 AND A         ;
 $8CE8 LD SP,($8623) ;
 $8CEC JR NZ,$8CF3   ;
 $8CEE CALL $8DEE    ;
 $8CF1 JR $8CA0      ;
*$8CF3 CALL $8E08    ;
 $8CF6 JR $8CA0      ;
; This entry point is used by the routines at #R$862B and #R$8643.
*$8CF8 LD A,E        ;
 $8CF9 AND $1F       ;
 $8CFB CP $20        ;
 $8CFD JR NC,$8D11   ;
 $8CFF LD A,($8628)  ;
 $8D02 AND A         ;
 $8D03 JR NZ,$8D0C   ;
 $8D05 LD A,$BF      ;
 $8D07 CP H          ;
 $8D08 JR C,$8D13    ;
 $8D0A JR $8D11      ;
*$8D0C LD A,$CF      ;
 $8D0E CP H          ;
 $8D0F JR NC,$8D13   ;
*$8D11 POP AF        ;
 $8D12 RET           ;

; Routine at 8D13
;
; Used by the routine at #R$8C96.
c$8D13 LD ($8623),SP ;
*$8D17 LD D,L        ;
 $8D18 LD L,E        ;
 $8D19 LD A,(HL)     ;
 $8D1A OR B          ;
 $8D1B LD (HL),A     ;
 $8D1C LD A,D        ;
 $8D1D SUB E         ;
 $8D1E DEC A         ;
 $8D1F SRL A         ;
 $8D21 JR NC,$8D26   ;
 $8D23 INC L         ;
 $8D24 LD (HL),$FF   ;
*$8D26 LD L,D        ;
 $8D27 SUB $11       ;
 $8D29 CPL           ;
 $8D2A LD ($8D33),A  ;
 $8D2D LD SP,$8FB6   ;
 $8D30 POP AF        ;
 $8D31 LD SP,HL      ;
@label=self_mod_5
*$8D32 JR $8D32      ; Self-modified
 $8D34 PUSH AF       ;
 $8D35 PUSH AF       ;
 $8D36 PUSH AF       ;
 $8D37 PUSH AF       ;
 $8D38 PUSH AF       ;
 $8D39 PUSH AF       ;
 $8D3A PUSH AF       ;
 $8D3B PUSH AF       ;
 $8D3C PUSH AF       ;
 $8D3D PUSH AF       ;
 $8D3E PUSH AF       ;
 $8D3F PUSH AF       ;
 $8D40 PUSH AF       ;
 $8D41 PUSH AF       ;
 $8D42 PUSH AF       ;
 $8D43 PUSH AF       ;
 $8D44 LD A,($8628)  ;
 $8D47 AND A         ;
 $8D48 LD SP,($8623) ;
 $8D4C JR NZ,$8D53   ;
 $8D4E CALL $8DEE    ;
 $8D51 JR $8D56      ;
*$8D53 CALL $8E08    ;
*$8D56 EXX           ;
 $8D57 ADD HL,DE     ;
 $8D58 INC E         ;
 $8D59 ADD HL,DE     ;
 $8D5A BIT 7,H       ;
 $8D5C EXX           ;
 $8D5D JR NZ,$8D6F   ;
 $8D5F SRL B         ;
 $8D61 JR NC,$8D74   ;
*$8D63 EXX           ;
 $8D64 ADD HL,BC     ;
 $8D65 INC C         ;
 $8D66 EX AF,AF'     ;
 $8D67 CP C          ;
 $8D68 JR Z,$8D7D    ;
 $8D6A EX AF,AF'     ;
 $8D6B ADD HL,BC     ;
 $8D6C BIT 7,H       ;
 $8D6E EXX           ;
*$8D6F JP NZ,$8D17   ;
 $8D72 JR $8D94      ;
*$8D74 INC E         ;
 $8D75 LD A,L        ;
 $8D76 SUB E         ;
 $8D77 JR Z,$8D85    ;
 $8D79 LD B,$7F      ;
 $8D7B JR $8D63      ;
*$8D7D EX AF,AF'     ;
 $8D7E JP $8B69      ;
; This entry point is used by the routine at #R$8D8B.
*$8D81 EX AF,AF'     ;
 $8D82 JP $8BA9      ;
; This entry point is used by the routine at #R$8D8B.
*$8D85 LD SP,($8623) ;
 $8D89 POP AF        ;
 $8D8A RET           ;

; Routine at 8D8B
c$8D8B INC E         ;
 $8D8C LD A,L        ;
 $8D8D SUB E         ;
 $8D8E JR Z,$8D85    ;
 $8D90 LD B,$7F      ;
 $8D92 JR $8D98      ;
; This entry point is used by the routine at #R$8D13.
*$8D94 SRL B         ;
 $8D96 JR NC,$8D8B   ;
*$8D98 EXX           ;
 $8D99 ADD HL,BC     ;
 $8D9A INC C         ;
 $8D9B JR Z,$8D85    ;
 $8D9D EX AF,AF'     ;
 $8D9E CP C          ;
 $8D9F JR Z,$8D81    ;
 $8DA1 EX AF,AF'     ;
 $8DA2 ADD HL,BC     ;
 $8DA3 BIT 7,H       ;
 $8DA5 EXX           ;
 $8DA6 JR Z,$8D94    ;
 $8DA8 EXX           ;
 $8DA9 ADD HL,DE     ;
 $8DAA INC E         ;
 $8DAB ADD HL,DE     ;
 $8DAC EXX           ;
 $8DAD LD D,L        ;
 $8DAE LD L,E        ;
 $8DAF LD A,(HL)     ;
 $8DB0 OR B          ;
 $8DB1 LD (HL),A     ;
 $8DB2 LD A,D        ;
 $8DB3 SUB E         ;
 $8DB4 DEC A         ;
 $8DB5 SRL A         ;
 $8DB7 JR NC,$8DBC   ;
 $8DB9 INC L         ;
 $8DBA LD (HL),$FF   ;
*$8DBC LD L,D        ;
 $8DBD SUB $11       ;
 $8DBF CPL           ;
 $8DC0 LD ($8DC9),A  ;
 $8DC3 LD SP,$8FB6   ;
 $8DC6 POP AF        ;
 $8DC7 LD SP,HL      ;
*$8DC8 JR $8DC8      ; Self-modified
 $8DCA PUSH AF       ;
 $8DCB PUSH AF       ;
 $8DCC PUSH AF       ;
 $8DCD PUSH AF       ;
 $8DCE PUSH AF       ;
 $8DCF PUSH AF       ;
 $8DD0 PUSH AF       ;
 $8DD1 PUSH AF       ;
 $8DD2 PUSH AF       ;
 $8DD3 PUSH AF       ;
 $8DD4 PUSH AF       ;
 $8DD5 PUSH AF       ;
 $8DD6 PUSH AF       ;
 $8DD7 PUSH AF       ;
 $8DD8 PUSH AF       ;
 $8DD9 PUSH AF       ;
 $8DDA LD A,($8628)  ;
 $8DDD AND A         ;
 $8DDE LD SP,($8623) ;
 $8DE2 JR NZ,$8DE9   ;
 $8DE4 CALL $8DEE    ;
 $8DE7 JR $8D94      ;
*$8DE9 CALL $8E08    ;
 $8DEC JR $8D94      ;

; Routine at 8DEE
;
; Used by the routines at #R$8B0F, #R$8B8A, #R$8C13, #R$8C96, #R$8D13, #R$8D8B,
; #R$9060, #R$90CC, #R$917B, #R$91F4 and #R$925F.
c$8DEE LD A,H        ;
 $8DEF DEC H         ;
 $8DF0 AND $07       ;
 $8DF2 RET NZ        ;
; This entry point is used by the routine at #R$90FB.
*$8DF3 LD A,E        ;
 $8DF4 SUB $20       ;
 $8DF6 LD E,A        ;
 $8DF7 LD A,L        ;
 $8DF8 SUB $20       ;
 $8DFA LD L,A        ;
 $8DFB JR NC,$8E03   ;
 $8DFD LD A,$BF      ;
 $8DFF CP H          ;
 $8E00 JR Z,$8E22    ;
 $8E02 RET           ;
*$8E03 LD A,H        ;
 $8E04 ADD A,$08     ;
 $8E06 LD H,A        ;
 $8E07 RET           ;

; Routine at 8E08
;
; Used by the routines at #R$8B0F, #R$8B8A, #R$8C13, #R$8C96, #R$8D13, #R$8D8B,
; #R$9060, #R$90CC, #R$917B, #R$91F4 and #R$925F.
c$8E08 INC H         ;
 $8E09 LD A,H        ;
 $8E0A AND $07       ;
 $8E0C RET NZ        ;
; This entry point is used by the routine at #R$90FB.
*$8E0D LD A,E        ;
 $8E0E ADD A,$20     ;
 $8E10 LD E,A        ;
 $8E11 LD A,L        ;
 $8E12 ADD A,$20     ;
 $8E14 LD L,A        ;
 $8E15 JR NC,$8E1D   ;
 $8E17 LD A,$D0      ;
 $8E19 CP H          ;
 $8E1A JR Z,$8E22    ;
 $8E1C RET           ;
*$8E1D LD A,H        ;
 $8E1E SUB $08       ;
 $8E20 LD H,A        ;
 $8E21 RET           ;
; This entry point is used by the routine at #R$8DEE.
*$8E22 POP AF        ;
 $8E23 LD SP,($8623) ;
 $8E27 POP AF        ;
 $8E28 RET           ;

; Routine at 8E29
;
; Used by the routine at #R$7119.
c$8E29 LD B,$0C      ;
 $8E2B LD A,($D051)  ;
 $8E2E LD C,A        ;
 $8E2F SUB $80       ;
 $8E31 JR C,$8E37    ;
 $8E33 SET 0,B       ;
 $8E35 JR $8E3A      ;
*$8E37 LD A,$80      ;
 $8E39 SUB C         ;
*$8E3A LD ($861B),A  ;
 $8E3D LD A,($D052)  ;
 $8E40 LD C,A        ;
 $8E41 SUB $60       ;
 $8E43 JR NC,$8E4A   ;
 $8E45 SET 1,B       ;
 $8E47 LD A,$60      ;
 $8E49 SUB C         ;
*$8E4A LD ($861A),A  ;
 $8E4D LD A,B        ;
 $8E4E LD ($861C),A  ;
 $8E51 LD A,($D053)  ;
 $8E54 LD ($861D),A  ;
 $8E57 DI            ;
 $8E58 LD ($8623),SP ;
 $8E5C LD A,($862A)  ;
 $8E5F LD HL,$8E8D   ;
 $8E62 LD SP,$8ECD   ;
*$8E65 POP DE        ;
 $8E66 LDI           ;
 $8E68 DEC A         ;
 $8E69 JR NZ,$8E65   ;
 $8E6B LD SP,($8623) ;
 $8E6F EI            ;
 $8E70 CALL $86DE    ;
 $8E73 DI            ;
 $8E74 LD ($8623),SP ;
 $8E78 LD A,($862A)  ;
 $8E7B LD HL,$8EAD   ;
 $8E7E LD SP,$8ECD   ;
*$8E81 POP DE        ;
 $8E82 LDI           ;
 $8E84 DEC A         ;
 $8E85 JR NZ,$8E81   ;
 $8E87 LD SP,($8623) ;
 $8E8B EI            ;
 $8E8C RET           ;

; Data block at 8E8D
@label=data_at_8E8D
b$8E8D DEFB $60,$60,$80,$80,$80,$80,$80,$7F
 $8E95 DEFB $1F,$00,$00,$00,$00,$00,$80,$00
 $8E9D DEFB $FF,$00,$00,$28,$FF,$00,$00,$58
 $8EA5 DEFB $57,$3F,$3F,$57,$57,$3F,$58,$3F
 $8EAD DEFB $40,$40,$78,$78,$78,$88,$78,$77
 $8EB5 DEFB $1E,$01,$CB,$FC,$CB,$FC,$88,$01
 $8EBD DEFB $F7,$CB,$FC,$C0,$F7,$CB,$FC,$D0
 $8EC5 DEFB $CF,$BF,$BF,$CF,$CF,$BF,$D0,$BF
 $8ECD DEFB $FB,$86,$14,$87,$1A,$87,$3B,$87
 $8ED5 DEFB $44,$87,$FF,$87,$04,$88,$9A,$88
 $8EDD DEFB $DE,$8F,$B3,$89,$DA,$89,$DB,$89
 $8EE5 DEFB $FB,$89,$FC,$89,$1B,$8A,$FD,$8F
 $8EED DEFB $08,$90,$0C,$90,$0D,$90,$2D,$90
 $8EF5 DEFB $36,$90,$3A,$90,$3B,$90,$5B,$90
 $8EFD DEFB $75,$90,$6E,$90,$06,$91,$0D,$91
 $8F05 DEFB $09,$92,$02,$92,$18,$8E,$FE,$8D

; Routine at 8F0D
;
; Used by the routine at #R$7471.
c$8F0D LD A,($9C96)   ;
 $8F10 AND A          ;
 $8F11 RET Z          ;
 $8F12 LD A,$40       ;
 $8F14 LD ($8A7D),A   ;
 $8F17 LD A,$4F       ;
 $8F19 LD ($8F9B),A   ;
 $8F1C LD A,$3F       ;
 $8F1E LD ($8FA6),A   ;
 $8F21 LD HL,$0000    ;
 $8F24 LD A,$50       ;
 $8F26 CALL $8F88     ;
 $8F29 LD IX,$6048    ;
 $8F2D LD B,$08       ;
*$8F2F PUSH BC        ;
 $8F30 LD A,(IX+$20)  ;
 $8F33 LD C,A         ;
 $8F34 AND $30        ;
 $8F36 CP $30         ;
 $8F38 JR NZ,$8F6C    ;
 $8F3A LD L,$0A       ;
 $8F3C CALL $6FF8     ;
 $8F3F LD H,(IX+$1C)  ;
 $8F42 LD L,(IX+$1D)  ;
 $8F45 LD ($861A),HL  ;
 $8F48 LD L,(IX+$1E)  ;
 $8F4B LD H,(IX+$1F)  ;
 $8F4E LD ($861C),HL  ;
 $8F51 LD C,$0F       ;
*$8F53 PUSH BC        ;
 $8F54 CALL $86D0     ;
 $8F57 POP BC         ;
 $8F58 LD A,($861D)   ;
 $8F5B ADD A,$02      ;
 $8F5D LD ($861D),A   ;
 $8F60 DEC C          ;
 $8F61 JR NZ,$8F53    ;
 $8F63 LD L,$0F       ;
 $8F65 CALL $6FF8     ;
 $8F68 RES 4,(IX+$20) ;
*$8F6C LD DE,$0027    ;
 $8F6F ADD IX,DE      ;
 $8F71 POP BC         ;
 $8F72 DJNZ $8F2F     ;
 $8F74 LD A,$C0       ;
 $8F76 LD ($8A7D),A   ;
 $8F79 LD A,$CF       ;
 $8F7B LD ($8F9B),A   ;
 $8F7E LD A,$BF       ;
 $8F80 LD ($8FA6),A   ;
 $8F83 LD HL,$FCCB    ;
 $8F86 LD A,$D0       ;
*$8F88 LD ($89DA),HL  ;
 $8F8B LD ($89FB),HL  ;
 $8F8E LD ($8A40),HL  ;
 $8F91 LD ($8A8B),HL  ;
 $8F94 LD ($8AC8),A   ;
 $8F97 LD ($8E18),A   ;
 $8F9A LD A,$4F       ;
 $8F9C LD ($8D0D),A   ;
 $8F9F LD ($8B09),A   ;
 $8FA2 LD ($8C0D),A   ;
 $8FA5 LD A,$3F       ;
 $8FA7 LD ($8D06),A   ;
 $8FAA LD ($8B02),A   ;
 $8FAD LD ($8C06),A   ;
 $8FB0 LD ($8DFE),A   ;
 $8FB3 RET            ;

; Data block at 8FB4
b$8FB4 DEFB $00,$00

; Data block at 8FB6
b$8FB6 DEFB $FF,$FF

; Routine at 8FB8
;
; Used by the routine at #R$88C2.
c$8FB8 LD A,E        ;
 $8FB9 AND $E0       ;
 $8FBB OR $1E        ;
 $8FBD LD L,A        ;
 $8FBE LD C,$01      ;
 $8FC0 LD A,($861C)  ;
 $8FC3 BIT 1,A       ;
 $8FC5 CALL NZ,$862B ;
 $8FC8 CALL Z,$8643  ;
 $8FCB RET           ;

; Routine at 8FCC
;
; Used by the routine at #R$88C2.
c$8FCC LD B,$80      ;
 $8FCE LD A,($861C)  ;
 $8FD1 BIT 1,A       ;
 $8FD3 CALL NZ,$865A ;
 $8FD6 CALL Z,$8672  ;
 $8FD9 RET           ;

; Routine at 8FDA
;
; Used by the routine at #R$8985.
c$8FDA LD A,E        ;
 $8FDB AND $E0       ;
 $8FDD OR $1E        ;
 $8FDF LD L,A        ;
 $8FE0 LD C,$01      ;
 $8FE2 RET           ;

; Routine at 8FE3
;
; Used by the routine at #R$89D4.
c$8FE3 LD B,$01      ;
 $8FE5 INC A         ;
*$8FE6 RRC B         ;
 $8FE8 DEC A         ;
 $8FE9 JR NZ,$8FE6   ;
 $8FEB LD E,L        ;
 $8FEC RET           ;

; Routine at 8FED
;
; Used by the routine at #R$89EF.
c$8FED LD C,$80      ;
*$8FEF RLC C         ;
 $8FF1 DEC A         ;
 $8FF2 JR NZ,$8FEF   ;
 $8FF4 LD A,($8627)  ;
 $8FF7 LD B,A        ;
 $8FF8 RET           ;

; Routine at 8FF9
;
; Used by the routine at #R$8A25.
c$8FF9 LD A,L        ;
 $8FFA AND $E0       ;
 $8FFC OR $01        ;
 $8FFE LD E,A        ;
 $8FFF LD C,$01      ;
 $9001 LD B,$80      ;
 $9003 RET           ;

; Routine at 9004
;
; Used by the routine at #R$86B8.
c$9004 PUSH AF       ;
 $9005 PUSH BC       ;
 $9006 LD B,A        ;
 $9007 LD C,$F7      ;
 $9009 CALL $22B0    ;
 $900C SET 7,H       ;
 $900E POP BC        ;
 $900F PUSH BC       ;
 $9010 DEC B         ;
 $9011 INC B         ;
 $9012 JR Z,$901C    ;
*$9014 LD A,H        ;
 $9015 DEC H         ;
 $9016 AND $07       ;
 $9018 JR Z,$901F    ;
*$901A DJNZ $9014    ;
*$901C POP BC        ;
 $901D POP AF        ;
 $901E RET           ;
*$901F LD A,L        ;
 $9020 SUB $20       ;
 $9022 LD L,A        ;
 $9023 JR C,$902B    ;
 $9025 LD A,H        ;
 $9026 ADD A,$08     ;
 $9028 LD H,A        ;
 $9029 JR $901A      ;
*$902B LD A,H        ;
 $902C CP $C0        ;
 $902E JR NC,$901A   ;
 $9030 JR $901C      ;

; Routine at 9032
;
; Used by the routine at #R$86C4.
c$9032 PUSH AF       ;
 $9033 PUSH BC       ;
 $9034 LD B,A        ;
 $9035 LD C,$F7      ;
 $9037 CALL $22B0    ;
 $903A SET 7,H       ;
 $903C POP BC        ;
 $903D PUSH BC       ;
 $903E DEC B         ;
 $903F INC B         ;
 $9040 JR Z,$904A    ;
*$9042 INC H         ;
 $9043 LD A,H        ;
 $9044 AND $07       ;
 $9046 JR Z,$904D    ;
*$9048 DJNZ $9042    ;
*$904A POP BC        ;
 $904B POP AF        ;
 $904C RET           ;
*$904D LD A,L        ;
 $904E ADD A,$20     ;
 $9050 LD L,A        ;
 $9051 JR C,$9059    ;
 $9053 LD A,H        ;
 $9054 SUB $08       ;
 $9056 LD H,A        ;
 $9057 JR $9048      ;
*$9059 LD A,H        ;
 $905A CP $D0        ;
 $905C JR C,$9048    ;
 $905E JR $904A      ;

; Routine at 9060
;
; Used by the routines at #R$862B and #R$8643.
c$9060 LD A,E        ;
 $9061 AND $1F       ;
 $9063 CP $20        ;
 $9065 JR NC,$9079   ;
 $9067 LD A,($8628)  ;
 $906A AND A         ;
 $906B JR NZ,$9074   ;
 $906D LD A,$BF      ;
 $906F CP H          ;
 $9070 JR C,$907B    ;
 $9072 JR $9079      ;
*$9074 LD A,$CF      ;
 $9076 CP H          ;
 $9077 JR NC,$907B   ;
*$9079 POP AF        ;
 $907A RET           ;
*$907B LD ($8623),SP ;
*$907F LD D,L        ;
 $9080 LD L,E        ;
 $9081 LD A,(HL)     ;
 $9082 OR B          ;
 $9083 LD (HL),A     ;
 $9084 LD L,D        ;
 $9085 LD A,($8628)  ;
 $9088 AND A         ;
 $9089 JR NZ,$9090   ;
 $908B CALL $8DEE    ;
 $908E JR $9093      ;
*$9090 CALL $8E08    ;
*$9093 EXX           ;
 $9094 ADD HL,DE     ;
 $9095 INC E         ;
 $9096 ADD HL,DE     ;
 $9097 BIT 7,H       ;
 $9099 EXX           ;
 $909A JR NZ,$907F   ;
 $909C RRC B         ;
 $909E JR C,$90B0    ;
*$90A0 EXX           ;
 $90A1 ADD HL,BC     ;
 $90A2 INC C         ;
 $90A3 EX AF,AF'     ;
 $90A4 CP C          ;
 $90A5 JR Z,$90B7    ;
 $90A7 EX AF,AF'     ;
 $90A8 ADD HL,BC     ;
 $90A9 BIT 7,H       ;
 $90AB EXX           ;
 $90AC JR NZ,$907F   ;
 $90AE JR $90CC      ;
*$90B0 INC E         ;
 $90B1 LD A,L        ;
 $90B2 SUB E         ;
 $90B3 JR C,$90BF    ;
 $90B5 JR $90A0      ;
*$90B7 EX AF,AF'     ;
 $90B8 JP $914B      ;

; Routine at 90BB
;
; Used by the routine at #R$90CC.
c$90BB EX AF,AF'     ;
 $90BC JP $9191      ;

; Routine at 90BF
;
; Used by the routines at #R$9060, #R$90C5 and #R$90CC.
c$90BF LD SP,($8623) ;
 $90C3 POP AF        ;
 $90C4 RET           ;

; Routine at 90C5
;
; Used by the routine at #R$90CC.
c$90C5 INC E         ;
 $90C6 LD A,L        ;
 $90C7 SUB E         ;
 $90C8 JR C,$90BF    ;
 $90CA JR $90D6      ;

; Routine at 90CC
;
; Used by the routine at #R$9060.
c$90CC LD D,L        ;
 $90CD LD L,E        ;
 $90CE LD A,(HL)     ;
 $90CF OR B          ;
 $90D0 LD (HL),A     ;
 $90D1 LD L,D        ;
 $90D2 RRC B         ;
 $90D4 JR C,$90C5    ;
; This entry point is used by the routine at #R$90C5.
*$90D6 EXX           ;
 $90D7 ADD HL,BC     ;
 $90D8 INC C         ;
 $90D9 JR Z,$90BF    ;
 $90DB EX AF,AF'     ;
 $90DC CP C          ;
 $90DD JR Z,$90BB    ;
 $90DF EX AF,AF'     ;
 $90E0 ADD HL,BC     ;
 $90E1 BIT 7,H       ;
 $90E3 EXX           ;
 $90E4 JR Z,$90CC    ;
 $90E6 EXX           ;
 $90E7 ADD HL,DE     ;
 $90E8 INC E         ;
 $90E9 ADD HL,DE     ;
 $90EA EXX           ;
 $90EB LD A,($8628)  ;
 $90EE AND A         ;
 $90EF JR NZ,$90F6   ;
 $90F1 CALL $8DEE    ;
 $90F4 JR $90CC      ;
*$90F6 CALL $8E08    ;
 $90F9 JR $90CC      ;

; Routine at 90FB
;
; Used by the routines at #R$8689 and #R$86A1.
c$90FB LD A,E        ;
 $90FC SUB L         ;
 $90FD JR NC,$9111   ;
 $90FF LD A,($8628)  ;
 $9102 AND A         ;
 $9103 JR NZ,$910C   ;
 $9105 LD A,$BF      ;
 $9107 CP H          ;
 $9108 JR C,$9113    ;
 $910A JR $9111      ;
*$910C LD A,$CF      ;
 $910E CP H          ;
 $910F JR NC,$9113   ;
*$9111 POP AF        ;
 $9112 RET           ;
*$9113 LD ($8623),SP ;
*$9117 LD A,(HL)     ;
 $9118 OR C          ;
 $9119 LD (HL),A     ;
 $911A LD D,L        ;
 $911B LD L,E        ;
 $911C LD A,(HL)     ;
 $911D OR B          ;
 $911E LD (HL),A     ;
 $911F LD L,D        ;
 $9120 LD A,($8628)  ;
 $9123 AND A         ;
 $9124 JR NZ,$912F   ;
 $9126 LD A,H        ;
 $9127 DEC H         ;
 $9128 AND $07       ;
 $912A CALL Z,$8DF3  ;
 $912D JR $9136      ;
*$912F INC H         ;
 $9130 LD A,H        ;
 $9131 AND $07       ;
 $9133 CALL Z,$8E0D  ;
*$9136 EXX           ;
 $9137 ADD HL,DE     ;
 $9138 INC E         ;
 $9139 ADD HL,DE     ;
 $913A BIT 7,H       ;
 $913C EXX           ;
 $913D JP NZ,$9117   ;
 $9140 RRC B         ;
 $9142 JR C,$9155    ;
*$9144 RLC C         ;
 $9146 JR C,$915D    ;
*$9148 EXX           ;
 $9149 ADD HL,BC     ;
 $914A INC C         ;
; This entry point is used by the routines at #R$9060 and #R$91F4.
*$914B ADD HL,BC     ;
 $914C BIT 7,H       ;
 $914E EXX           ;
 $914F JP NZ,$9117   ;
 $9152 JP $917B      ;
*$9155 INC E         ;
 $9156 LD A,L        ;
 $9157 SUB E         ;
 $9158 JR Z,$9165    ;
 $915A JP $9144      ;
*$915D DEC L         ;
 $915E LD A,L        ;
 $915F SUB E         ;
 $9160 JR Z,$9165    ;
 $9162 JP $9148      ;
; This entry point is used by the routine at #R$91C0.
*$9165 LD SP,($8623) ;
 $9169 POP AF        ;
 $916A RET           ;

; Routine at 916B
;
; Used by the routine at #R$917B.
c$916B INC E         ;
 $916C LD A,L        ;
 $916D SUB E         ;
 $916E JR Z,$91AC    ;
 $9170 JP $9188      ;

; Routine at 9173
;
; Used by the routine at #R$917B.
c$9173 DEC L         ;
 $9174 LD A,L        ;
 $9175 SUB E         ;
 $9176 JR Z,$91C0    ;
 $9178 JP $918C      ;

; Routine at 917B
;
; Used by the routine at #R$90FB.
c$917B LD A,(HL)     ;
 $917C OR C          ;
 $917D LD (HL),A     ;
 $917E LD D,L        ;
 $917F LD L,E        ;
 $9180 LD A,(HL)     ;
 $9181 OR B          ;
 $9182 LD (HL),A     ;
 $9183 LD L,D        ;
 $9184 RRC B         ;
 $9186 JR C,$916B    ;
; This entry point is used by the routine at #R$916B.
*$9188 RLC C         ;
 $918A JR C,$9173    ;
; This entry point is used by the routine at #R$9173.
*$918C EXX           ;
 $918D ADD HL,BC     ;
 $918E INC C         ;
 $918F JR Z,$91D1    ;
; This entry point is used by the routines at #R$90BB and #R$924D.
*$9191 ADD HL,BC     ;
 $9192 BIT 7,H       ;
 $9194 EXX           ;
 $9195 JR Z,$917B    ;
 $9197 EXX           ;
 $9198 ADD HL,DE     ;
 $9199 INC E         ;
 $919A ADD HL,DE     ;
 $919B EXX           ;
 $919C LD A,($8628)  ;
 $919F AND A         ;
 $91A0 JR NZ,$91A7   ;
 $91A2 CALL $8DEE    ;
 $91A5 JR $917B      ;
*$91A7 CALL $8E08    ;
 $91AA JR $917B      ;

; Routine at 91AC
;
; Used by the routine at #R$916B.
c$91AC LD L,E        ;
 $91AD LD A,(HL)     ;
 $91AE LD B,$FF      ;
 $91B0 AND A         ;
 $91B1 JR Z,$91CD    ;
 $91B3 LD B,A        ;
 $91B4 LD A,$FF      ;
*$91B6 SRL B         ;
 $91B8 JR C,$91BD    ;
 $91BA ADD A,A       ;
 $91BB JR $91B6      ;
*$91BD LD (HL),A     ;
 $91BE JR $91CE      ;

; Routine at 91C0
;
; Used by the routine at #R$9173.
c$91C0 LD A,(HL)     ;
 $91C1 LD B,$FF      ;
 $91C3 AND A         ;
 $91C4 JR Z,$91CD    ;
*$91C6 ADD A,A       ;
 $91C7 JR C,$91CD    ;
 $91C9 SRL B         ;
 $91CB JR $91C6      ;
; This entry point is used by the routine at #R$91AC.
*$91CD LD (HL),B     ;
; This entry point is used by the routines at #R$91AC and #R$91D1.
*$91CE JP $9165      ;

; Routine at 91D1
;
; Used by the routine at #R$917B.
c$91D1 EXX           ;
 $91D2 LD A,(HL)     ;
 $91D3 AND A         ;
 $91D4 JR Z,$91E0    ;
 $91D6 LD B,A        ;
 $91D7 LD A,$FF      ;
*$91D9 SRL B         ;
 $91DB JR C,$91E2    ;
 $91DD ADD A,A       ;
 $91DE JR $91D9      ;
*$91E0 LD A,$FF      ;
*$91E2 LD (HL),A     ;
 $91E3 LD L,E        ;
 $91E4 LD A,(HL)     ;
 $91E5 LD B,$FF      ;
 $91E7 AND A         ;
 $91E8 JR Z,$91F1    ;
*$91EA ADD A,A       ;
 $91EB JR C,$91F1    ;
 $91ED SRL B         ;
 $91EF JR $91EA      ;
*$91F1 LD (HL),B     ;
 $91F2 JR $91CE      ;

; Routine at 91F4
;
; Used by the routines at #R$865A and #R$8672.
c$91F4 LD A,L        ;
 $91F5 AND $1F       ;
 $91F7 CP $20        ;
 $91F9 JR NC,$920D   ;
 $91FB LD A,($8628)  ;
 $91FE AND A         ;
 $91FF JR NZ,$9208   ;
 $9201 LD A,$BF      ;
 $9203 CP H          ;
 $9204 JR C,$920F    ;
 $9206 JR $920D      ;
*$9208 LD A,$CF      ;
 $920A CP H          ;
 $920B JR NC,$920F   ;
*$920D POP AF        ;
 $920E RET           ;
*$920F LD ($8623),SP ;
*$9213 LD A,(HL)     ;
 $9214 OR C          ;
 $9215 LD (HL),A     ;
 $9216 LD A,($8628)  ;
 $9219 AND A         ;
 $921A JR NZ,$9221   ;
 $921C CALL $8DEE    ;
 $921F JR $9224      ;
*$9221 CALL $8E08    ;
*$9224 EXX           ;
 $9225 ADD HL,DE     ;
 $9226 INC E         ;
 $9227 ADD HL,DE     ;
 $9228 BIT 7,H       ;
 $922A EXX           ;
 $922B JR NZ,$9213   ;
 $922D RLC C         ;
 $922F JR C,$9241    ;
*$9231 EXX           ;
 $9232 ADD HL,BC     ;
 $9233 INC C         ;
 $9234 EX AF,AF'     ;
 $9235 CP C          ;
 $9236 JR Z,$9249    ;
 $9238 EX AF,AF'     ;
 $9239 ADD HL,BC     ;
 $923A BIT 7,H       ;
 $923C EXX           ;
 $923D JR NZ,$9213   ;
 $923F JR $925F      ;
*$9241 DEC L         ;
 $9242 LD A,L        ;
 $9243 SUB E         ;
 $9244 INC A         ;
 $9245 JR Z,$9251    ;
 $9247 JR $9231      ;
*$9249 EX AF,AF'     ;
 $924A JP $914B      ;

; Routine at 924D
;
; Used by the routine at #R$925F.
c$924D EX AF,AF'     ;
 $924E JP $9191      ;

; Routine at 9251
;
; Used by the routines at #R$91F4, #R$9257 and #R$925F.
c$9251 LD SP,($8623) ;
 $9255 POP AF        ;
 $9256 RET           ;

; Routine at 9257
;
; Used by the routine at #R$925F.
c$9257 DEC L         ;
 $9258 LD A,L        ;
 $9259 SUB E         ;
 $925A INC A         ;
 $925B JR Z,$9251    ;
 $925D JR $9266      ;

; Routine at 925F
;
; Used by the routine at #R$91F4.
c$925F LD A,(HL)     ;
 $9260 OR C          ;
 $9261 LD (HL),A     ;
 $9262 RLC C         ;
 $9264 JR C,$9257    ;
; This entry point is used by the routine at #R$9257.
*$9266 EXX           ;
 $9267 ADD HL,BC     ;
 $9268 INC C         ;
 $9269 JR Z,$9251    ;
 $926B EX AF,AF'     ;
 $926C CP C          ;
 $926D JR Z,$924D    ;
 $926F EX AF,AF'     ;
 $9270 ADD HL,BC     ;
 $9271 BIT 7,H       ;
 $9273 EXX           ;
 $9274 JR Z,$925F    ;
 $9276 EXX           ;
 $9277 ADD HL,DE     ;
 $9278 INC E         ;
 $9279 ADD HL,DE     ;
 $927A EXX           ;
 $927B LD A,($8628)  ;
 $927E AND A         ;
 $927F JR NZ,$9286   ;
 $9281 CALL $8DEE    ;
 $9284 JR $925F      ;
*$9286 CALL $8E08    ;
 $9289 JR $925F      ;

; Unused
s$928B DEFS $01

; Routine at 928C
;
; Used by the routine at #R$93ED.
c$928C CALL $D03C    ;
 $928F LD A,($D03F)  ;
 $9292 AND A         ;
 $9293 RET Z         ;
 $9294 JR $92D6      ;

; Routine at 9296
;
; Used by the routine at #R$7471.
c$9296 LD A,($D040)  ;
 $9299 AND A         ;
 $929A RET Z         ;
 $929B CALL $94F4    ;
 $929E CALL $9509    ;
 $92A1 LD A,($7103)  ;
 $92A4 AND A         ;
 $92A5 JR Z,$92B3    ;
 $92A7 LD IX,$6048   ;
 $92AB XOR A         ;
 $92AC LD (IX+$22),A ;
 $92AF INC A         ;
 $92B0 CALL $9C9C    ;
*$92B3 CALL $8080    ;
 $92B6 CALL $7FBE    ;
 $92B9 LD A,$42      ;
 $92BB LD ($93D2),A  ;
 $92BE CALL $953D    ;
 $92C1 LD HL,$93D3   ;
 $92C4 LD ($92FA),HL ;
 $92C7 LD A,$10      ;
 $92C9 LD ($93D0),A  ;
 $92CC LD A,$01      ;
 $92CE LD ($9326),A  ;
 $92D1 LD A,$15      ;
 $92D3 LD ($932B),A  ;
; This entry point is used by the routine at #R$928C.
*$92D6 LD A,($D040)  ;
 $92D9 AND A         ;
 $92DA JR NZ,$92E3   ;
 $92DC LD A,$1E      ;
 $92DE LD ($9318),A  ;
 $92E1 JR $92E8      ;
*$92E3 LD A,$05      ;
 $92E5 LD ($9318),A  ;
*$92E8 LD A,$0F      ;
 $92EA LD ($861C),A  ;
 $92ED LD HL,$0000   ;
 $92F0 LD ($861A),HL ;
 $92F3 LD A,($93D0)  ;
 $92F6 LD ($93D1),A  ;
*$92F9 LD HL,$93D3   ;
*$92FC LD A,(HL)     ;
 $92FD DEC A         ;
 $92FE LD (HL),A     ;
 $92FF INC HL        ;
 $9300 LD B,A        ;
 $9301 LD A,$01      ;
 $9303 CALL $93AC    ;
 $9306 LD A,C        ;
 $9307 CP $04        ;
 $9309 JR C,$9313    ;
 $930B LD ($861D),A  ;
 $930E PUSH HL       ;
 $930F CALL $86E4    ;
 $9312 POP HL        ;
*$9313 LD A,($93D1)  ;
 $9316 DEC A         ;
 $9317 JR Z,$931E    ;
 $9319 LD ($93D1),A  ;
 $931C JR $92FC      ;
*$931E CALL $7FBE    ;
 $9321 LD A,($93D2)  ;
 $9324 DEC A         ;
 $9325 CP $30        ;
 $9327 LD ($93D2),A  ;
 $932A JR C,$935E    ;
 $932C LD A,($93D0)  ;
 $932F LD ($93D1),A  ;
 $9332 CALL $8080    ;
 $9335 JR $92F9      ;

; Routine at 9337
@label=unused_9337
c$9337 LD A,($93D2)  ;
 $933A DEC A         ;
 $933B LD ($93D2),A  ;
 $933E JR Z,$9369    ;
 $9340 RET           ;

; Routine at 9341
c$9341 XOR A         ;
 $9342 LD ($D040),A  ;
 $9345 LD ($D03F),A  ;
 $9348 LD A,$10      ;
 $934A LD B,A        ;
 $934B LD HL,$93D3   ;
*$934E LD A,(HL)     ;
 $934F SUB $BE       ;
 $9351 LD (HL),A     ;
 $9352 INC HL        ;
 $9353 DJNZ $934E    ;
 $9355 CALL $8080    ;
 $9358 CALL $7FBE    ;
 $935B JP $93C0      ;

; Routine at 935E
;
; Used by the routine at #R$9296.
c$935E XOR A         ;
 $935F LD ($D040),A  ;
 $9362 JR $937B      ;

; Data block at 9364
b$9364 DEFB $AF,$32,$40,$D0,$C9

; Routine at 9369
;
; Used by the routine at #R$9337.
@label=unused_9369
c$9369 XOR A         ;
 $936A LD ($D03F),A  ;
 $936D LD A,$08      ;
 $936F LD B,A        ;
 $9370 LD HL,$93E3   ;
*$9373 LD A,(HL)     ;
 $9374 SUB $C0       ;
 $9376 LD (HL),A     ;
 $9377 INC HL        ;
 $9378 DJNZ $9373    ;
 $937A RET           ;

; Routine at 937B
;
; Used by the routine at #R$935E.
c$937B LD A,$83      ;
 $937D LD ($7D69),A  ;
 $9380 LD ($7D6E),A  ;
 $9383 LD A,$C9      ;
 $9385 LD ($7E0E),A  ;
 $9388 LD A,$07      ;
 $938A LD ($70E6),A  ;
 $938D LD HL,($7105) ;
 $9390 LD DE,$7E8D   ;
 $9393 LD B,$10      ;
*$9395 PUSH BC       ;
 $9396 CALL $7D68    ;
 $9399 POP BC        ;
 $939A DJNZ $9395    ;
 $939C LD A,$BF      ;
 $939E LD ($7D69),A  ;
 $93A1 LD A,$9F      ;
 $93A3 LD ($7D6E),A  ;
 $93A6 LD A,$C3      ;
 $93A8 LD ($7E0E),A  ;
 $93AB RET           ;

; Routine at 93AC
;
; Used by the routine at #R$9296.
c$93AC LD C,$FE      ;
*$93AE ADD A,A       ;
 $93AF JR C,$93B9    ;
 $93B1 CP B          ;
 $93B2 JR NC,$93B9   ;
 $93B4 SLA C         ;
 $93B6 RET NC        ;
 $93B7 JR $93AE      ;
*$93B9 SUB B         ;
 $93BA SCF           ;
 $93BB RL C          ;
 $93BD RET NC        ;
 $93BE JR $93AE      ;

; Routine at 93C0
;
; Used by the routine at #R$9341.
c$93C0 LD A,($D081)  ;
 $93C3 AND A         ;
 $93C4 LD L,$07      ;
 $93C6 CALL Z,$6FF8  ;
 $93C9 XOR A         ;
 $93CA LD ($7583),A  ;
 $93CD JP $9532      ;

; Data block at 93D0
@label=data_at_93d0
b$93D0 DEFB $08,$00,$00,$1E,$21,$23,$26,$28
 $93D8 DEFB $2B,$2D,$30,$32,$35,$37,$3A,$3C
 $93E0 DEFB $3F,$41,$44,$10,$10,$10,$18,$20
 $93E8 DEFB $28,$30,$38,$00,$00

; Routine at 93ED
;
; Used by the routines at #R$717B and #R$80D3.
c$93ED LD A,($7103)  ;
 $93F0 AND A         ;
 $93F1 RET NZ        ;
 $93F2 LD HL,$93E3   ;
 $93F5 LD ($92FA),HL ;
 $93F8 LD A,$08      ;
 $93FA LD ($93D0),A  ;
 $93FD LD A,$30      ;
 $93FF LD ($9326),A  ;
 $9402 LD A,$40      ;
 $9404 LD ($93D2),A  ;
 $9407 LD HL,$0101   ;
 $940A LD ($D03F),HL ;
 $940D LD A,($7104)  ;
 $9410 AND A         ;
 $9411 JR Z,$945D    ;
 $9413 LD A,$38      ;
 $9415 LD ($932B),A  ;
 $9418 LD A,$0C      ;
 $941A LD ($70E6),A  ;
 $941D XOR A         ;
 $941E LD ($70E5),A  ;
 $9421 LD ($70E4),A  ;
 $9424 LD ($9C9B),A  ;
 $9427 INC A         ;
 $9428 LD ($7124),A  ;
 $942B LD HL,$D085   ;
 $942E RES 7,(HL)    ;
 $9430 CALL $8080    ;
 $9433 CALL $928C    ;
 $9436 LD B,$2F      ;
*$9438 PUSH BC       ;
 $9439 CALL $8080    ;
 $943C CALL $928C    ;
 $943F CALL $7FBE    ;
 $9442 POP BC        ;
 $9443 DJNZ $9438    ;
 $9445 CALL $9527    ;
 $9448 XOR A         ;
 $9449 LD ($7104),A  ;
 $944C CALL $817E    ;
 $944F CALL $94F4    ;
 $9452 CALL $7278    ;
 $9455 CALL $728D    ;
 $9458 LD A,$07      ;
 $945A JP $813E      ;
*$945D LD A,$04      ;
 $945F LD ($7104),A  ;
 $9462 CALL $9527    ;
 $9465 XOR A         ;
 $9466 LD ($9C9A),A  ;
 $9469 LD ($70E3),A  ;
 $946C LD ($711D),A  ;
 $946F LD ($D041),A  ;
 $9472 LD A,$32      ;
 $9474 LD ($932B),A  ;
 $9477 CALL $8042    ;
 $947A CALL $9946    ;
 $947D CALL $726C    ;
 $9480 LD HL,$7110   ;
 $9483 LD B,$07      ;
 $9485 CALL $9503    ;
 $9488 LD (HL),$80   ;
 $948A INC HL        ;
 $948B LD (HL),$01   ;
 $948D LD A,($710F)  ;
 $9490 XOR $80       ;
 $9492 LD ($710F),A  ;
 $9495 LD HL,$6048   ;
 $9498 LD B,$1B      ;
 $949A CALL $9503    ;
 $949D LD IX,$6048   ;
 $94A1 LD A,$F0      ;
 $94A3 LD (IX+$06),A ;
 $94A6 LD A,$80      ;
 $94A8 LD (IX+$08),A ;
 $94AB DEC A         ;
 $94AC LD (IX+$0E),A ;
 $94AF LD (IX+$12),A ;
 $94B2 LD (IX+$16),A ;
 $94B5 LD A,$F0      ;
 $94B7 LD (IX+$22),A ;
 $94BA CALL $9509    ;
 $94BD CALL $84D9    ;
 $94C0 CALL $8080    ;
 $94C3 CALL $928C    ;
 $94C6 LD B,$24      ;
*$94C8 PUSH BC       ;
 $94C9 CALL $8080    ;
 $94CC CALL $7898    ;
 $94CF CALL $928C    ;
 $94D2 CALL $7FBE    ;
 $94D5 POP BC        ;
 $94D6 DJNZ $94C8    ;
 $94D8 LD B,$0B      ;
*$94DA PUSH BC       ;
 $94DB CALL $8080    ;
 $94DE CALL $7853    ;
 $94E1 CALL $7898    ;
 $94E4 CALL $928C    ;
 $94E7 CALL $7584    ;
 $94EA CALL $7FBE    ;
 $94ED POP BC        ;
 $94EE DJNZ $94DA    ;
 $94F0 XOR A         ;
 $94F1 LD ($7124),A  ;
; This entry point is used by the routines at #R$7366, #R$7378 and #R$9296.
@label=clear_some_bytes
*$94F4 LD B,$05      ;
 $94F6 LD HL,$FF08   ; Clear 5 bytes of the 3 words at FF08
 $94F9 CALL $9503    ;
 $94FC LD (HL),$0C   ; Set the 6th byte
; This entry point is used by the routines at #R$8042 and #R$813E.
@label=clear_5_bytes_at_FC08
*$94FE LD B,$05      ;
 $9500 LD HL,$FC08   ; Clear 5 bytes at FC08
@label=clear_b_bytes_at_hl
*$9503 XOR A         ;
*$9504 LD (HL),A     ;
 $9505 INC HL        ;
 $9506 DJNZ $9504    ;
 $9508 RET           ;

; Routine at 9509
;
; Used by the routines at #R$7471, #R$7EDE, #R$9296 and #R$93ED.
c$9509 LD IX,$6048    ;
 $950D RES 2,(IX+$21) ;
 $9511 XOR A          ;
 $9512 LD ($9C99),A   ;
 $9515 LD DE,$0027    ;
 $9518 LD B,$07       ;
*$951A ADD IX,DE      ;
 $951C LD (IX+$22),A  ;
 $951F DJNZ $951A     ;
 $9521 RET            ;

; Data block at 9522
@label=data_at_9522
b$9522 DEFS $05

; Routine at 9527
;
; Used by the routines at #R$7471 and #R$93ED.
c$9527 LD A,($FC0E)  ;
 $952A BIT 7,A       ;
 $952C RET Z         ;
 $952D CALL $969B    ;
 $9530 JR $9551      ;

; Routine at 9532
;
; Used by the routine at #R$93C0.
c$9532 LD A,($FC0E)  ;
 $9535 BIT 7,A       ;
 $9537 RET Z         ;
 $9538 CALL $96A9    ;
 $953B JR $9551      ;
; This entry point is used by the routine at #R$9296.
*$953D LD A,($FC0E)  ;
 $9540 BIT 7,A       ;
 $9542 RET Z         ;
 $9543 CALL $96B7    ;
 $9546 JR $9551      ;
; This entry point is used by the routine at #R$7471.
*$9548 LD A,($FC0E)  ;
 $954B BIT 7,A       ;
 $954D RET Z         ;
 $954E CALL $95CF    ;

; Routine at 9551
;
; Used by the routines at #R$9527 and #R$9532.
c$9551 LD A,($9522)  ;
 $9554 AND A         ;
 $9555 JR Z,$955C    ;
 $9557 CALL $95A6    ;
 $955A JR $9551      ;
*$955C LD ($7128),A  ;
 $955F EI            ;
 $9560 RET           ;

; Routine at 9561
@label=jump_table
c$9561 JP $9678      ;
 $9564 JP $9674      ;
 $9567 JP $9692      ;
 $956A JP $965E      ;
 $956D JP $9641      ;
 $9570 JP $9648      ;
 $9573 JP $9657      ;
 $9576 JP $9657      ;

; Routine at 9579
;
; Used by the routine at #R$7125.
@label=sound
c$9579 LD A,($FC0E)  ;
 $957C BIT 7,A       ;
 $957E RET Z         ;
 $957F LD A,($9522)  ;
 $9582 AND A         ;
 $9583 JR NZ,$959F   ;
 $9585 LD A,($7128)  ;
 $9588 AND A         ;
 $9589 RET Z         ;
 $958A LD B,$FF      ;
*$958C INC B         ;
 $958D RRA           ;
 $958E JR NC,$958C   ;
 $9590 LD A,B        ;
 $9591 LD ($96BF),A  ;
 $9594 ADD A,A       ;
 $9595 ADD A,B       ;
 $9596 LD HL,$9561   ;
 $9599 ADD A,L       ;
 $959A LD L,A        ;
 $959B JR NC,$959E   ;
 $959D INC H         ;
*$959E JP (HL)       ;
*$959F DEC A         ;
 $95A0 JP Z,$9624    ;
 $95A3 DEC A         ;
 $95A4 JR Z,$95E7    ;
; This entry point is used by the routine at #R$9551.
*$95A6 LD HL,($9525) ;
 $95A9 LD DE,($9523) ;
; This entry point is used by the routine at #R$9684.
*$95AD LD C,$40      ;
*$95AF LD A,(HL)     ;
 $95B0 AND $18       ;
 $95B2 OUT ($FE),A   ;
 $95B4 LD B,D        ;
*$95B5 DJNZ $95B5    ;
 $95B7 INC HL        ;
 $95B8 DEC C         ;
 $95B9 JR NZ,$95AF   ;
 $95BB LD A,D        ;
 $95BC ADD A,$00     ;
 $95BE LD D,A        ;
 $95BF DEC E         ;
 $95C0 LD ($9523),DE ;
 $95C4 LD ($9525),HL ;
 $95C7 RET NZ        ;
 $95C8 LD A,($9522)  ;
 $95CB BIT 7,A       ;
 $95CD JR Z,$9610    ;
; This entry point is used by the routine at #R$9532.
*$95CF LD A,$03      ;
 $95D1 LD ($9522),A  ;
 $95D4 LD A,$A0      ;
 $95D6 LD ($95AE),A  ;
 $95D9 LD HL,$0127   ;
 $95DC LD DE,$4002   ;
 $95DF LD ($9523),DE ;
 $95E3 LD ($9525),HL ;
 $95E6 RET           ;
*$95E7 LD HL,($9525) ;
 $95EA LD DE,($9523) ;
; This entry point is used by the routine at #R$9657.
*$95EE LD C,$64      ;
*$95F0 LD A,(HL)     ;
 $95F1 INC L         ;
 $95F2 SRL A         ;
 $95F4 SRL A         ;
 $95F6 LD E,A        ;
 $95F7 LD B,A        ;
 $95F8 LD A,$30      ;
 $95FA OUT ($FE),A   ;
*$95FC DJNZ $95FC    ;
 $95FE LD B,E        ;
 $95FF XOR A         ;
 $9600 OUT ($FE),A   ;
*$9602 DJNZ $9602    ;
 $9604 DEC C         ;
 $9605 JR NZ,$95F0   ;

; Routine at 9607
;
; Used by the routine at #R$9624.
c$9607 DEC D         ;
 $9608 LD ($9523),DE ;
 $960C LD ($9525),HL ;
 $960F RET NZ        ;
; This entry point is used by the routine at #R$9579.
*$9610 XOR A         ;
 $9611 LD ($9522),A  ;
 $9614 LD A,($96BF)  ;
 $9617 INC A         ;
 $9618 LD B,A        ;
 $9619 LD A,$80      ;
*$961B RLCA          ;
 $961C DJNZ $961B    ;
 $961E LD HL,$7128   ;
 $9621 XOR (HL)      ;
 $9622 LD (HL),A     ;
 $9623 RET           ;

; Routine at 9624
;
; Used by the routine at #R$9579.
c$9624 LD DE,($9523) ;
; This entry point is used by the routine at #R$964D.
*$9628 LD A,E        ;
 $9629 ADD A,A       ;
 $962A ADD A,$05     ;
 $962C LD E,A        ;
 $962D LD C,$0F      ;
*$962F LD A,$30      ;
 $9631 LD B,E        ;
 $9632 OUT ($FE),A   ;
*$9634 DJNZ $9634    ;
 $9636 XOR A         ;
 $9637 LD B,E        ;
 $9638 OUT ($FE),A   ;
*$963A DJNZ $963A    ;
 $963C DEC C         ;
 $963D JR NZ,$962F   ;
 $963F JR $9607      ;

; Routine at 9641
;
; Used by the routine at #R$9561.
c$9641 LD A,$FD      ;
 $9643 LD DE,$0200   ;
 $9646 JR $964D      ;

; Data block at 9648
;
; Used by the routine at #R$9561.
b$9648 DEFB $3E,$D3,$11,$00,$08

; Routine at 964D
;
; Used by the routine at #R$9641.
c$964D LD ($962B),A  ;
 $9650 LD A,$01      ;
 $9652 LD ($9522),A  ;
 $9655 JR $9628      ;

; Routine at 9657
;
; Used by the routine at #R$9561.
c$9657 LD A,$1A      ;
 $9659 LD HL,$10C6   ;
 $965C JR $9663      ;
; This entry point is used by the routine at #R$9561.
*$965E LD A,$03      ;
 $9660 LD HL,$3FCB   ;
*$9663 LD DE,$0100   ;
 $9666 LD ($95F2),HL ;
 $9669 LD H,A        ;
 $966A LD L,$1A      ;
 $966C LD A,$02      ;
 $966E LD ($9522),A  ;
 $9671 JP $95EE      ;
; This entry point is used by the routine at #R$9561.
*$9674 LD C,$E4      ;
 $9676 JR $967A      ;
; This entry point is used by the routine at #R$9561.
*$9678 LD C,$FE      ;
*$967A LD A,$03      ;
 $967C LD ($9522),A  ;
; This entry point is used by the routine at #R$9692.
*$967F LD B,$40      ;
 $9681 LD DE,$4008   ;

; Routine at 9684
;
; Used by the routines at #R$969B and #R$96A9.
c$9684 LD HL,$0127   ;
 $9687 LD A,C        ;
 $9688 LD ($95BD),A  ;
 $968B LD A,B        ;
 $968C LD ($95AE),A  ;
 $968F JP $95AD      ;

; Routine at 9692
;
; Used by the routine at #R$9561.
c$9692 LD A,$83      ;
 $9694 LD ($9522),A  ;
 $9697 LD C,$02      ;
 $9699 JR $967F      ;

; Routine at 969B
;
; Used by the routine at #R$9527.
c$969B LD A,$03      ;
 $969D LD ($9522),A  ;
 $96A0 DI            ;
 $96A1 LD BC,$5002   ;
 $96A4 LD DE,$4020   ;
 $96A7 JR $9684      ;

; Routine at 96A9
;
; Used by the routine at #R$9532.
c$96A9 LD BC,$C0F0   ;
 $96AC LD DE,$C00C   ;
*$96AF DI            ;
 $96B0 LD A,$03      ;
 $96B2 LD ($9522),A  ;
 $96B5 JR $9684      ;
; This entry point is used by the routine at #R$9532.
*$96B7 LD BC,$C010   ;
 $96BA LD DE,$100A   ;
 $96BD JR $96AF      ;

; Data block at 96BF
@label=data at 96BF
b$96BF DEFB $00,$00,$00,$00,$00,$00

; Routine at 96C5
;
; Used by the routine at #R$96D9.
c$96C5 SRL B         ;
 $96C7 RR C          ;
; This entry point is used by the routine at #R$96D9.
*$96C9 SRL B         ;
 $96CB RR C          ;
; This entry point is used by the routine at #R$96D9.
*$96CD SRL B         ;
 $96CF RR C          ;
; This entry point is used by the routine at #R$96D9.
*$96D1 SRL B         ;
 $96D3 RR C          ;
 $96D5 RET           ;

; Routine at 96D6
;
; Used by the routine at #R$96D9.
c$96D6 JP $982E      ;

; Routine at 96D9
;
; Used by the routine at #R$7471.
c$96D9 CALL $98CD    ;
 $96DC LD A,($9C96)  ;
 $96DF AND A         ;
 $96E0 RET Z         ;
 $96E1 CALL $988E    ;
 $96E4 LD A,$08      ;
 $96E6 LD ($96C3),A  ;
 $96E9 LD IX,$6048   ;
*$96ED LD A,(IX+$22) ;
 $96F0 AND A         ;
 $96F1 JR Z,$96D6    ;
 $96F3 LD A,(IX+$01) ;
 $96F6 CP $40        ;
 $96F8 JR NC,$96D6   ;
 $96FA LD A,(IX+$04) ;
 $96FD CP $40        ;
 $96FF JR NC,$96D6   ;
 $9701 LD A,(IX+$07) ;
 $9704 CP $40        ;
 $9706 JR NC,$96D6   ;
 $9708 LD A,(IX+$01) ;
 $970B CALL $87BF    ;
 $970E EX DE,HL      ;
 $970F LD A,(IX+$07) ;
 $9712 CALL $87BF    ;
 $9715 ADD HL,DE     ;
 $9716 JR C,$96D6    ;
 $9718 LD DE,$1600   ;
 $971B AND A         ;
 $971C SBC HL,DE     ;
 $971E JR NC,$96D6   ;
 $9720 LD A,$01      ;
 $9722 LD ($96C4),A  ;
 $9725 LD DE,$4000   ;
 $9728 XOR A         ;
 $9729 LD L,(IX+$00) ;
 $972C LD H,(IX+$01) ;
 $972F CALL $9C89    ;
 $9732 CALL $96C9    ;
 $9735 LD H,B        ;
 $9736 LD L,C        ;
 $9737 CALL $96D1    ;
 $973A ADD HL,BC     ;
 $973B LD A,(IX+$02) ;
 $973E AND $80       ;
 $9740 LD A,H        ;
 $9741 JR Z,$9745    ;
 $9743 OR $80        ;
*$9745 LD ($96C0),A  ;
 $9748 XOR A         ;
 $9749 LD L,(IX+$03) ;
 $974C LD H,(IX+$04) ;
 $974F CALL $9C89    ;
 $9752 CALL $96C5    ;
 $9755 LD H,B        ;
 $9756 LD L,C        ;
 $9757 CALL $96CD    ;
 $975A ADD HL,BC     ;
 $975B LD A,(IX+$05) ;
 $975E AND $80       ;
 $9760 LD A,H        ;
 $9761 JR Z,$9765    ;
 $9763 OR $80        ;
*$9765 LD ($96C1),A  ;
 $9768 XOR A         ;
 $9769 LD L,(IX+$06) ;
 $976C LD H,(IX+$07) ;
 $976F CALL $9C89    ;
 $9772 CALL $96C5    ;
 $9775 LD H,B        ;
 $9776 LD L,C        ;
 $9777 CALL $96CD    ;
 $977A ADD HL,BC     ;
 $977B LD A,(IX+$08) ;
 $977E AND $80       ;
 $9780 LD A,H        ;
 $9781 JR Z,$9785    ;
 $9783 OR $80        ;
*$9785 LD ($96C2),A  ;
 $9788 LD HL,$558F   ;
 $978B LD A,($96C0)  ;
 $978E AND $7F       ;
 $9790 SUB $04       ;
 $9792 LD C,A        ;
 $9793 JP C,$97BB    ;
 $9796 RRA           ;
 $9797 RRA           ;
 $9798 RRA           ;
 $9799 AND $1F       ;
 $979B LD B,A        ;
 $979C LD A,C        ;
 $979D AND $07       ;
 $979F LD C,A        ;
 $97A0 JR Z,$97A3    ;
 $97A2 INC B         ;
*$97A3 LD A,($96C0)  ;
 $97A6 AND $80       ;
 $97A8 JR NZ,$97C7   ;
*$97AA INC HL        ;
 $97AB DJNZ $97AA    ;
*$97AD LD A,C        ;
 $97AE AND A         ;
 $97AF LD B,A        ;
 $97B0 LD A,$01      ;
 $97B2 JR Z,$97D6    ;
 $97B4 XOR A         ;
 $97B5 SCF           ;
*$97B6 RRA           ;
 $97B7 DJNZ $97B6    ;
 $97B9 JR $97D6      ;
*$97BB ADD A,$08     ;
 $97BD LD C,A        ;
 $97BE LD A,($96C0)  ;
 $97C1 AND $80       ;
 $97C3 JR NZ,$97CA   ;
 $97C5 JR $97AD      ;
*$97C7 DEC HL        ;
 $97C8 DJNZ $97C7    ;
*$97CA LD A,C        ;
 $97CB AND A         ;
 $97CC LD B,A        ;
 $97CD LD A,$80      ;
 $97CF JR Z,$97D6    ;
 $97D1 XOR A         ;
 $97D2 SCF           ;
*$97D3 RLA           ;
 $97D4 DJNZ $97D3    ;
*$97D6 LD C,A        ;
 $97D7 LD A,($96C2)  ;
 $97DA LD D,A        ;
 $97DB AND $7F       ;
 $97DD LD B,A        ;
 $97DE JR Z,$97F9    ;
 $97E0 LD A,D        ;
 $97E1 AND $80       ;
 $97E3 JR NZ,$97F0   ;
*$97E5 LD A,H        ;
 $97E6 DEC H         ;
 $97E7 AND $07       ;
 $97E9 CALL Z,$844F  ;
 $97EC DJNZ $97E5    ;
 $97EE JR $97F9      ;
*$97F0 INC H         ;
 $97F1 LD A,H        ;
 $97F2 AND $07       ;
 $97F4 CALL Z,$8445  ;
 $97F7 DJNZ $97F0    ;
*$97F9 LD A,($96C1)  ;
 $97FC LD D,A        ;
 $97FD AND $7F       ;
 $97FF LD B,A        ;
 $9800 JR Z,$9821    ;
 $9802 LD A,D        ;
 $9803 AND $80       ;
 $9805 JR NZ,$9815   ;
*$9807 LD A,(HL)     ;
 $9808 OR C          ;
 $9809 LD (HL),A     ;
 $980A LD A,H        ;
 $980B DEC H         ;
 $980C AND $07       ;
 $980E CALL Z,$987C  ;
 $9811 DJNZ $9807    ;
 $9813 JR $9821      ;
*$9815 LD A,(HL)     ;
 $9816 OR C          ;
 $9817 LD (HL),A     ;
 $9818 INC H         ;
 $9819 LD A,H        ;
 $981A AND $07       ;
 $981C CALL Z,$986A  ;
 $981F DJNZ $9815    ;
*$9821 LD A,C        ;
 $9822 ADD A,A       ;
 $9823 JR C,$9852    ;
 $9825 OR C          ;
 $9826 ADD A,A       ;
 $9827 JR C,$985E    ;
 $9829 OR C          ;
 $982A LD E,A        ;
 $982B LD A,(HL)     ;
 $982C OR E          ;
 $982D LD (HL),A     ;
; This entry point is used by the routines at #R$96D6, #R$986A and #R$987C.
*$982E LD A,($96C3)  ;
 $9831 DEC A         ;
 $9832 JR Z,$983F    ;
 $9834 LD ($96C3),A  ;
 $9837 LD DE,$0027   ;
 $983A ADD IX,DE     ;
 $983C JP $96ED      ;
*$983F XOR A         ;
 $9840 LD C,$07      ;
 $9842 LD HL,$5009   ;
*$9845 LD B,$0D      ;
 $9847 PUSH HL       ;
*$9848 LD (HL),A     ;
 $9849 INC L         ;
 $984A DJNZ $9848    ;
 $984C POP HL        ;
 $984D INC H         ;
 $984E DEC C         ;
 $984F JR NZ,$9845   ;
 $9851 RET           ;
*$9852 DEC L         ;
 $9853 LD A,(HL)     ;
 $9854 OR $03        ;
 $9856 LD (HL),A     ;
 $9857 INC L         ;
 $9858 LD A,(HL)     ;
 $9859 OR $80        ;
 $985B LD (HL),A     ;
 $985C JR $982E      ;
*$985E DEC L         ;
 $985F LD A,(HL)     ;
 $9860 OR $01        ;
 $9862 LD (HL),A     ;
 $9863 INC L         ;
 $9864 LD A,(HL)     ;
 $9865 OR $C0        ;
 $9867 LD (HL),A     ;
 $9868 JR $982E      ;

; Routine at 986A
;
; Used by the routine at #R$96D9.
c$986A LD A,L        ;
 $986B ADD A,$20     ;
 $986D LD L,A        ;
 $986E JR NC,$9877   ;
 $9870 LD A,$58      ;
 $9872 CP H          ;
 $9873 RET NZ        ;
 $9874 POP AF        ;
 $9875 JR $982E      ;
*$9877 LD A,H        ;
 $9878 SUB $08       ;
 $987A LD H,A        ;
 $987B RET           ;

; Routine at 987C
;
; Used by the routine at #R$96D9.
c$987C LD A,L        ;
 $987D CP $0F        ;
 $987F JR NZ,$9885   ;
 $9881 POP AF        ;
 $9882 JP $982E      ;
*$9885 SUB $20       ;
 $9887 LD L,A        ;
 $9888 RET C         ;
 $9889 LD A,H        ;
 $988A ADD A,$08     ;
 $988C LD H,A        ;
 $988D RET           ;

; Routine at 988E
;
; Used by the routines at #R$7471 and #R$96D9.
c$988E LD A,($9CAE)  ;
 $9891 AND A         ;
 $9892 RET Z         ;
 $9893 LD A,($7104)  ;
 $9896 CP $63        ;
 $9898 RET Z         ;
 $9899 CP $02        ;
 $989B RET Z         ;
 $989C LD A,$06      ;
 $989E LD ($7104),A  ;
 $98A1 RET           ;

; Routine at 98A2
;
; Used by the routine at #R$8042.
c$98A2 CALL $98CD    ;
 $98A5 LD BC,$0005   ;
 $98A8 LD A,$EB      ;
 $98AA LD HL,$9912   ;
 $98AD LD (HL),A     ; Modify instruction at $9912 to EX DE,HL
 $98AE LD A,$E5      ;
 $98B0 LD HL,$9915   ;
 $98B3 LD (HL),A     ; Modify instruction at $9915 to PUSH HL
 $98B4 ADD HL,BC     ;
 $98B5 LD (HL),A     ; Modify instruction at $991A to PUSH HL
 $98B6 LD A,$E1      ;
 $98B8 LD HL,$9935   ;
 $98BB LD (HL),A     ; Modify instruction at $9935 to POP HL
 $98BC INC HL        ;
 $98BD LD A,$24      ;
 $98BF LD (HL),A     ; Modify instruction at $9936 to INC H
 $98C0 XOR A         ;
 $98C1 LD HL,$9940   ;
 $98C4 LD (HL),A     ; Modify instruction at $9936 to NOP
 $98C5 LD A,$EB      ;
 $98C7 LD HL,$9939   ;
 $98CA LD (HL),A     ; Modify instruction at $9939 to EX DE,HL
 $98CB JR $990C      ;

; Routine at 98CD
;
; Used by the routines at #R$7471, #R$815D, #R$96D9 and #R$98A2.
c$98CD LD A,($96C4)  ;
 $98D0 DEC A         ;
 $98D1 RET NZ        ;
 $98D2 LD ($96C4),A  ;
 $98D5 XOR A         ;
 $98D6 LD C,$08      ; 8 lines to clear
 $98D8 LD HL,$502A   ; Screen address (80, 72)
*$98DB LD B,$0B      ; {Clear 8 bytes
 $98DD PUSH HL       ;
*$98DE LD (HL),A     ;
 $98DF INC L         ;
 $98E0 DJNZ $98DE    ;
 $98E2 POP HL        ; }
 $98E3 INC H         ; Next line
 $98E4 DEC C         ;
 $98E5 JR NZ,$98DB   ; Clear line loop
 $98E7 LD BC,$0005   ;
 $98EA XOR A         ;
 $98EB LD HL,$9912   ;
 $98EE LD (HL),A     ; Modify instruction at $9912 to NOP
 $98EF LD A,$D5      ;
 $98F1 LD HL,$9915   ;
 $98F4 LD (HL),A     ; Modify instruction at $9915 to PUSH DE
 $98F5 ADD HL,BC     ; HL = $991A
 $98F6 LD (HL),A     ; Modify instruction at $991A to PUSH DE
 $98F7 LD A,$D1      ;
 $98F9 LD HL,$9935   ;
 $98FC LD (HL),A     ; Modify instruction at $9935 to POP DE
 $98FD INC HL        ;
 $98FE LD A,$14      ;
 $9900 LD (HL),A     ; Modify instruction at $9936 to INC D
 $9901 LD A,$EB      ;
 $9903 LD HL,$9940   ;
 $9906 LD (HL),A     ; Modify instruction at $9940 to EX DE,HL
 $9907 XOR A         ;
 $9908 LD HL,$9939   ;
 $990B LD (HL),A     ; Modify instruction at $9939 to NOP
; This entry point is used by the routine at #R$98A2.
*$990C LD DE,$5049   ; Screen address (72, 80)
 $990F LD HL,$5B00   ; Attributes for control panel?
 $9912 NOP           ; Self-modified to EX DE,HL
 $9913 LD A,$06      ;
*$9915 PUSH DE       ; Self-modified to PUSH HL
 $9916 LD B,$08      ; 8 rows
 $9918 LD C,$FF      ;
*$991A PUSH DE       ; Self-modified to PUSH HL
 $991B LDI           ; {Copy 13 bytes
 $991D LDI           ;
 $991F LDI           ;
 $9921 LDI           ;
 $9923 LDI           ;
 $9925 LDI           ;
 $9927 LDI           ;
 $9929 LDI           ;
 $992B LDI           ;
 $992D LDI           ;
 $992F LDI           ;
 $9931 LDI           ;
 $9933 LDI           ; }
 $9935 POP DE        ; Self-modified to POP HL
 $9936 INC D         ; Next line. Self-modified to INC H
 $9937 DJNZ $991A    ; Repeat 8 times
 $9939 NOP           ; Self-modified to EX DE,HL
 $993A POP DE        ;
 $993B EX DE,HL      ;
 $993C LD BC,$0020   ; Next row
 $993F ADD HL,BC     ;
 $9940 EX DE,HL      ; Self-modified to NOP
 $9941 DEC A         ;
 $9942 JR NZ,$9915   ; Repeat 6 times
 $9944 RET           ;

; Unused
s$9945 DEFS $01

; Routine at 9946
;
; Used by the routine at #R$93ED.
c$9946 CALL $9B74    ;
 $9949 CALL $D0DA    ;
 $994C XOR A         ;
 $994D LD ($D047),A  ;
 $9950 LD ($70F0),A  ;
 $9953 LD ($70EE),A  ;
 $9956 LD ($7129),A  ;
 $9959 LD ($9C9B),A  ;
 $995C LD ($9C1B),A  ;
 $995F LD A,$A0      ;
 $9961 LD ($70E8),A  ;
 $9964 LD ($70EA),A  ;
 $9967 LD ($70F2),A  ;
 $996A LD HL,$70F6   ;
 $996D LD B,$04      ;
*$996F LD (HL),A     ;
 $9970 INC HL        ;
 $9971 INC HL        ;
 $9972 DJNZ $996F    ;
 $9974 LD HL,$5A23   ;
 $9977 LD A,($70E3)  ;
 $997A CP $04        ;
 $997C JR C,$997F    ;
 $997E INC H         ;
*$997F LD C,$17      ;
 $9981 LD A,($D089)  ;
 $9984 AND A         ;
 $9985 JR Z,$9989    ;
 $9987 LD C,$1F      ;
*$9989 LD DE,$001B   ;
 $998C PUSH HL       ;
 $998D CALL $9995    ;
 $9990 POP HL        ;
 $9991 LD A,L        ;
 $9992 ADD A,$15     ;
 $9994 LD L,A        ;
*$9995 LD B,$07      ;
*$9997 PUSH BC       ;
 $9998 LD B,$05      ;
*$999A LD (HL),C     ;
 $999B INC HL        ;
 $999C DJNZ $999A    ;
 $999E POP BC        ;
 $999F ADD HL,DE     ;
 $99A0 DJNZ $9997    ;
 $99A2 RET           ;

; Data block at 99A3
@data_at_99a3
b$99A3 DEFB $00

; Routine at 99A4
;
; Used by the routine at #R$7121.
c$99A4 LD HL,$7104   ;
 $99A7 LD A,(HL)     ;
 $99A8 AND A         ;
 $99A9 RET Z         ;
 $99AA LD A,($70E8)  ;
 $99AD AND A         ;
 $99AE JR Z,$99B6    ;
 $99B0 LD A,($70EA)  ;
 $99B3 AND A         ;
 $99B4 JR NZ,$99BD   ;
*$99B6 LD A,(HL)     ;
 $99B7 CP $63        ;
 $99B9 JR Z,$99BD    ;
 $99BB LD (HL),$02   ;
*$99BD LD A,(HL)     ;
 $99BE CP $63        ;
 $99C0 JR NZ,$99CF   ;
 $99C2 LD HL,$99A3   ;
 $99C5 INC (HL)      ;
 $99C6 BIT 1,(HL)    ;
 $99C8 JR NZ,$99CD   ;
 $99CA XOR A         ;
 $99CB JR $99CF      ;
*$99CD LD A,$02      ;
*$99CF LD D,A        ;
 $99D0 LD A,($70E3)  ;
 $99D3 CP $04        ;
 $99D5 JR NC,$99F8   ;
 $99D7 LD HL,$5A28   ;
 $99DA LD (HL),D     ;
 $99DB INC HL        ;
 $99DC LD (HL),D     ;
 $99DD LD HL,$5A48   ;
 $99E0 LD (HL),D     ;
 $99E1 INC HL        ;
 $99E2 LD (HL),D     ;
 $99E3 CALL $9A3A    ;
 $99E6 LD A,($D047)  ;
 $99E9 CP $01        ;
 $99EB JR NZ,$99EF   ;
 $99ED LD A,$04      ;
*$99EF ADD A,A       ;
 $99F0 ADD A,A       ;
 $99F1 ADD A,A       ;
 $99F2 ADD A,$07     ;
 $99F4 LD ($5AE7),A  ;
 $99F7 RET           ;
*$99F8 LD HL,($D04B) ;
 $99FB LD (HL),$00   ;
 $99FD LD HL,$011B   ;
 $9A00 LD ($D045),HL ;
 $9A03 CP $09        ;
 $9A05 JR NC,$9A23   ;
 $9A07 LD A,D        ;
 $9A08 AND A         ;
 $9A09 JR Z,$9A1D    ;
 $9A0B CP $02        ;
 $9A0D JR NZ,$9A1F   ;
 $9A0F LD A,$21      ;
 $9A11 CALL $D048    ;
 $9A14 LD A,$22      ;
 $9A16 CALL $D048    ;
 $9A19 LD D,$17      ;
 $9A1B JR $9A2F      ;
*$9A1D LD D,$02      ;
*$9A1F LD A,$10      ;
 $9A21 ADD A,D       ;
 $9A22 LD D,A        ;
*$9A23 PUSH DE       ;
 $9A24 LD A,$23      ;
 $9A26 CALL $D048    ;
 $9A29 LD A,$24      ;
 $9A2B CALL $D048    ;
 $9A2E POP DE        ;
*$9A2F LD HL,$583C   ;
 $9A32 LD (HL),D     ;
 $9A33 INC HL        ;
 $9A34 LD (HL),D     ;
 $9A35 LD HL,($D04B) ;
 $9A38 LD (HL),$A9   ;
*$9A3A LD A,$04      ;
 $9A3C LD ($7104),A  ;
 $9A3F RET           ;

; Routine at 9A40
;
; Used by the routine at #R$7471.
c$9A40 LD A,($70E3)  ;
 $9A43 CP $04        ;
 $9A45 RET NC        ;
 $9A46 CALL $9B01    ;
 $9A49 CALL $9BA7    ;
 $9A4C CALL $9C1C    ;
 $9A4F CALL $6FF2    ;
 $9A52 LD HL,$FC0B   ;
 $9A55 LD A,(HL)     ;
 $9A56 AND $91       ;
 $9A58 LD (HL),A     ;
; This entry point is used by the routine at #R$7471.
*$9A59 LD HL,$7104   ;
 $9A5C XOR A         ;
 $9A5D CP (HL)       ;
 $9A5E RET Z         ;
 $9A5F LD A,($70FC)  ;
 $9A62 CP $A0        ;
 $9A64 JR Z,$9A6B    ;
 $9A66 LD A,$63      ;
 $9A68 LD ($7104),A  ;
*$9A6B CALL $9ADB    ;
 $9A6E LD HL,$70E8   ;
 $9A71 LD A,($9CA3)  ;
 $9A74 CALL $9AA7    ;
 $9A77 LD HL,$70EA   ;
 $9A7A LD A,($9CA4)  ;
 $9A7D CALL $9AA7    ;
 $9A80 LD A,($D041)  ;
 $9A83 AND A         ;
 $9A84 LD A,($9CA2)  ;
 $9A87 JR Z,$9A8A    ;
 $9A89 INC A         ;
*$9A8A LD C,A        ;
 $9A8B LD B,$04      ;
; This entry point is used by the routine at #R$9AA7.
*$9A8D LD HL,$70F6   ;
 $9A90 LD D,$04      ;
*$9A92 LD A,(HL)     ;
 $9A93 SUB C         ;
 $9A94 JR NC,$9AA3   ;
 $9A96 LD (HL),$00   ;
 $9A98 INC HL        ;
 $9A99 INC HL        ;
 $9A9A DEC D         ;
 $9A9B JR NZ,$9A92   ;
 $9A9D LD A,$01      ;
 $9A9F LD ($711F),A  ;
 $9AA2 RET           ;
*$9AA3 LD (HL),A     ;
 $9AA4 DJNZ $9A92    ;
 $9AA6 RET           ;

; Routine at 9AA7
;
; Used by the routine at #R$9A40.
c$9AA7 LD C,A        ;
 $9AA8 AND A         ;
 $9AA9 JR NZ,$9AB3   ;
 $9AAB LD HL,$9ADA   ;
 $9AAE LD A,(HL)     ;
 $9AAF AND A         ;
 $9AB0 RET Z         ;
 $9AB1 DEC (HL)      ;
 $9AB2 RET           ;
*$9AB3 PUSH BC       ;
 $9AB4 PUSH HL       ;
 $9AB5 CP $46        ;
 $9AB7 CALL NC,$D0F3 ;
 $9ABA POP HL        ;
 $9ABB POP BC        ;
 $9ABC LD B,$04      ;
*$9ABE LD A,(HL)     ;
 $9ABF SUB C         ;
 $9AC0 JR C,$9AC6    ;
 $9AC2 LD (HL),A     ;
 $9AC3 DJNZ $9ABE    ;
 $9AC5 RET           ;
*$9AC6 LD (HL),$00   ;
 $9AC8 DEC B         ;
 $9AC9 RET Z         ;
 $9ACA CALL $9A8D    ;
 $9ACD LD HL,$9ADA   ;
 $9AD0 LD A,(HL)     ;
 $9AD1 ADD A,$05     ;
 $9AD3 LD (HL),A     ;
 $9AD4 CP $0D        ;
 $9AD6 RET C         ;
 $9AD7 JP $D0F3      ;

; Data block at 9ADA
@label=data_at_9ADA
b$9ADA DEFB $00

; Routine at 9ADB
;
; Used by the routine at #R$9A40.
c$9ADB LD A,($D08B)  ;
 $9ADE AND A         ;
 $9ADF CALL NZ,$9AE2 ;
*$9AE2 LD HL,$70FC   ;
 $9AE5 LD B,$04      ;
*$9AE7 LD A,(HL)     ;
 $9AE8 CP $A0        ;
 $9AEA JR Z,$9AEE    ;
 $9AEC INC (HL)      ;
 $9AED RET           ;
*$9AEE DEC HL        ;
 $9AEF DEC HL        ;
 $9AF0 DJNZ $9AE7    ;
 $9AF2 LD HL,$70E8   ;
 $9AF5 CALL $9AFB    ;
 $9AF8 LD HL,$70EA   ;
*$9AFB LD A,(HL)     ;
 $9AFC CP $A0        ;
 $9AFE RET Z         ;
 $9AFF INC (HL)      ;
 $9B00 RET           ;

; Routine at 9B01
;
; Used by the routine at #R$9A40.
c$9B01 LD HL,($D04B) ;
 $9B04 LD (HL),$00   ;
 $9B06 LD HL,$1108   ;
 $9B09 LD ($D045),HL ;
 $9B0C LD A,$26      ;
 $9B0E CALL $D048    ;
 $9B11 LD HL,$1208   ;
 $9B14 LD ($D045),HL ;
 $9B17 LD A,$24      ;
 $9B19 CALL $D048    ;
 $9B1C LD HL,$1607   ;
 $9B1F LD A,($9C9B)  ;
 $9B22 AND A         ;
 $9B23 JR Z,$9B2A    ;
 $9B25 LD DE,$9B64   ;
 $9B28 JR $9B2D      ;
*$9B2A LD DE,$9B68   ;
*$9B2D CALL $9B4A    ;
 $9B30 LD HL,$1615   ;
 $9B33 LD A,($711C)  ;
 $9B36 AND A         ;
 $9B37 JR Z,$9B3E    ;
 $9B39 LD DE,$9B6C   ;
 $9B3C JR $9B41      ;
*$9B3E LD DE,$9B70   ;
*$9B41 CALL $9B4A    ;
 $9B44 LD HL,($D04B) ;
 $9B47 LD (HL),$A9   ;
 $9B49 RET           ;

; Routine at 9B4A
;
; Used by the routine at #R$9B01.
c$9B4A CALL $9B4D    ;
*$9B4D LD ($D045),HL ;
 $9B50 PUSH HL       ;
 $9B51 CALL $9B57    ;
 $9B54 POP HL        ;
 $9B55 INC H         ;
 $9B56 RET           ;

; Routine at 9B57
;
; Used by the routine at #R$9B4A.
c$9B57 CALL $9B5A    ;
*$9B5A LD A,(DE)     ;
 $9B5B PUSH DE       ;
 $9B5C CALL $D048    ;
 $9B5F POP DE        ;
 $9B60 INC DE        ;
 $9B61 RET           ;

; Data block at 9B62
b$9B62 DEFB $26,$24,$3B,$3C,$3D,$3E,$20,$20
 $9B6A DEFB $40,$40,$5B,$5C,$5D,$5E,$20,$5F
 $9B72 DEFB $40,$2B

; Routine at 9B74
;
; Used by the routines at #R$9946 and #R$9BA7.
c$9B74 LD HL,$1702   ;
 $9B77 LD ($D045),HL ;
 $9B7A LD HL,($D04B) ;
 $9B7D LD (HL),$00   ;
 $9B7F LD A,($D083)  ;
 $9B82 AND A         ;
 $9B83 JR Z,$9B8F    ;
 $9B85 LD B,A        ;
*$9B86 PUSH BC       ;
 $9B87 LD A,$25      ;
 $9B89 CALL $D048    ;
 $9B8C POP BC        ;
 $9B8D DJNZ $9B86    ;
*$9B8F LD A,($D083)  ;
 $9B92 NEG           ;
 $9B94 ADD A,$04     ;
 $9B96 RET Z         ;
 $9B97 LD B,A        ;
*$9B98 PUSH BC       ;
 $9B99 LD A,$40      ;
 $9B9B CALL $D048    ;
 $9B9E POP BC        ;
 $9B9F DJNZ $9B98    ;
 $9BA1 LD HL,($D04B) ;
 $9BA4 LD (HL),$A9   ;
 $9BA6 RET           ;

; Routine at 9BA7
;
; Used by the routine at #R$9A40.
c$9BA7 LD A,($D083)  ;
 $9BAA AND A         ;
 $9BAB RET Z         ;
 $9BAC LD A,($D047)  ;
 $9BAF CP $01        ;
 $9BB1 JR NZ,$9BCF   ;
 $9BB3 LD HL,$D0E3   ;
 $9BB6 LD A,(HL)     ;
 $9BB7 AND A         ;
 $9BB8 JR NZ,$9BCF   ;
 $9BBA LD A,($9C97)  ;
 $9BBD AND A         ;
 $9BBE JR Z,$9BCF    ;
 $9BC0 LD (HL),A     ;
 $9BC1 LD HL,$D047   ;
 $9BC4 LD (HL),$02   ;
 $9BC6 LD HL,$0070   ;
 $9BC9 LD DE,$0060   ;
 $9BCC CALL $03B5    ;
*$9BCF LD HL,$FC0B   ;
 $9BD2 LD A,(HL)     ;
 $9BD3 LD HL,$D047   ;
 $9BD6 SRL A         ;
 $9BD8 SRL A         ;
 $9BDA JR C,$9BE5    ;
 $9BDC SRL A         ;
 $9BDE JR C,$9BF3    ;
 $9BE0 SRL A         ;
 $9BE2 JR C,$9BF0    ;
 $9BE4 RET           ;
*$9BE5 LD A,(HL)     ;
 $9BE6 CP $02        ;
 $9BE8 RET Z         ;
 $9BE9 LD (HL),$01   ;
 $9BEB XOR A         ;
 $9BEC LD ($D0E3),A  ;
 $9BEF RET           ;
*$9BF0 LD (HL),$00   ;
 $9BF2 RET           ;
*$9BF3 LD A,(HL)     ;
 $9BF4 CP $02        ;
 $9BF6 RET NZ        ;
 $9BF7 LD A,($D0E3)  ;
 $9BFA ADD A,A       ;
 $9BFB ADD A,A       ;
 $9BFC ADD A,A       ;
 $9BFD ADD A,A       ;
 $9BFE OR $02        ;
 $9C00 PUSH HL       ;
 $9C01 CALL $9C9C    ;
 $9C04 POP HL        ;
 $9C05 JR Z,$9C0D    ;
 $9C07 LD HL,$D0BD   ;
 $9C0A SET 7,(HL)    ;
 $9C0C RET           ;
*$9C0D LD (HL),$00   ;
 $9C0F LD HL,$7128   ;
 $9C12 SET 1,(HL)    ;
 $9C14 LD HL,$D083   ;
 $9C17 DEC (HL)      ;
 $9C18 JP $9B74      ;

; Data block at 9C1B
@label=data_at_9C1B
b$9C1B DEFB $00

; Routine at 9C1C
;
; Used by the routine at #R$9A40.
c$9C1C LD HL,$9C1B   ;
 $9C1F LD A,(HL)     ;
 $9C20 AND A         ;
 $9C21 JR Z,$9C29    ;
 $9C23 DEC A         ;
 $9C24 LD (HL),A     ;
 $9C25 JP Z,$71BA    ;
 $9C28 RET           ;
*$9C29 LD A,($FC0B)  ;
 $9C2C BIT 6,A       ;
 $9C2E RET Z         ;
 $9C2F LD A,($D089)  ;
 $9C32 AND A         ;
 $9C33 RET Z         ;
 $9C34 LD A,($7103)  ;
 $9C37 AND A         ;
 $9C38 RET NZ        ;
 $9C39 LD A,$18      ;
 $9C3B LD ($9C1B),A  ;
 $9C3E LD HL,$0010   ;
 $9C41 LD ($FF0C),HL ;
 $9C44 XOR A         ;
 $9C45 LD ($D05F),A  ;
 $9C48 LD ($D089),A  ;
 $9C4B LD HL,$D06B   ;
 $9C4E LD B,$11      ;
*$9C50 LD (HL),A     ;
 $9C51 INC HL        ;
 $9C52 DJNZ $9C50    ;
 $9C54 LD HL,$D0B0   ;
 $9C57 LD A,(HL)     ;
 $9C58 AND $DF       ;
 $9C5A LD (HL),A     ;
 $9C5B LD HL,$D07C   ;
 $9C5E LD A,($D084)  ;
 $9C61 AND A         ;
 $9C62 LD A,$14      ;
 $9C64 JR Z,$9C68    ;
 $9C66 LD A,$23      ;
*$9C68 LD (HL),A     ;
 $9C69 LD A,$17      ;
 $9C6B CALL $9C9C    ;
 $9C6E LD A,($D099)  ;
 $9C71 LD ($D0B2),A  ;
 $9C74 LD A,($D097)  ;
 $9C77 LD ($D0B3),A  ;
 $9C7A RET           ;

; Unused
s$9C7B DEFS $05

; Routine at 9C80
;
; Used by the routine at #R$7471.
c$9C80 JP $9CB5      ;

; Routine at 9C83
;
; Used by the routines at #R$7853 and #R$7861.
c$9C83 JP $A173      ;

; Routine at 9C86
;
; Used by the routines at #R$8322 and #R$DFF2.
c$9C86 JP $9EF1      ;

; Routine at 9C89
;
; Used by the routines at #R$82BB and #R$96D9.
c$9C89 JP $AFA8      ;

; Routine at 9C8C
c$9C8C JP $B044      ;
 $9C8F JP $B7B4      ;

; Data block at 9C92
b$9C92 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $9C9A DEFB $00,$00

; Routine at 9C9C
;
; Used by the routines at #R$7366, #R$7378, #R$9296, #R$9BA7 and #R$9C1C.
@label=jump_to_ship_action
c$9C9C JP $B867      ;

; Routine at 9C9F
;
; Used by the routine at #R$7471.
c$9C9F JP $B618      ;

; Data block at 9CA2
b$9CA2 DEFB $00,$00,$00

; Routine at 9CA5
;
; Used by the routine at #R$71E4.
c$9CA5 JP $AFC9      ;
 $9CA8 JP $9F82      ;
 $9CAB JP $A28D      ;
 $9CAE NOP           ;

; Routine at 9CAF
;
; Used by the routine at #R$7378.
@label=jump_to_draw_title_ship
c$9CAF JP $A28D      ;

; Unused
s$9CB2 DEFS $03

; Routine at 9CB5
;
; Used by the routine at #R$9C80.
c$9CB5 CALL $9CBB    ;
 $9CB8 JP $B7B4      ;

; Routine at 9CBB
;
; Used by the routine at #R$9CB5.
c$9CBB LD A,($D0AF)   ;
 $9CBE CP $04         ;
 $9CC0 JR NZ,$9CC7    ;
 $9CC2 LD HL,$6069    ;
 $9CC5 SET 2,(HL)     ;
*$9CC7 LD A,($7120)   ;
 $9CCA AND A          ;
 $9CCB LD A,$B1       ;
 $9CCD JR Z,$9CD1     ;
 $9CCF LD A,$A9       ;
*$9CD1 LD ($B435),A   ;
 $9CD4 LD ($B465),A   ;
 $9CD7 LD ($B4B2),A   ;
 $9CDA LD ($B486),A   ;
 $9CDD LD A,($9C93)   ;
 $9CE0 DEC A          ;
 $9CE1 LD ($9C93),A   ;
 $9CE4 LD B,A         ;
 $9CE5 LD A,($711C)   ;
 $9CE8 AND A          ;
 $9CE9 JR NZ,$9CFD    ;
 $9CEB LD A,($7103)   ;
 $9CEE AND A          ;
 $9CEF JR NZ,$9CFD    ;
 $9CF1 LD A,($9CB3)   ;
 $9CF4 CP $04         ;
 $9CF6 JR NC,$9CFD    ;
 $9CF8 LD A,B         ;
 $9CF9 AND A          ;
 $9CFA CALL Z,$B867   ;
*$9CFD XOR A          ;
 $9CFE LD ($9CA2),A   ;
 $9D01 LD ($9CA4),A   ;
 $9D04 LD ($9CA3),A   ;
 $9D07 LD ($9C97),A   ;
 $9D0A LD ($9CAE),A   ;
 $9D0D LD ($9C96),A   ;
 $9D10 LD ($9C94),A   ;
 $9D13 LD C,A         ;
 $9D14 LD IX,$6048    ;
 $9D18 LD DE,$0027    ;
 $9D1B LD B,$06       ;
*$9D1D ADD IX,DE      ;
 $9D1F LD A,(IX+$22)  ;
 $9D22 AND A          ;
 $9D23 JR Z,$9D2C     ;
 $9D25 BIT 6,(IX+$20) ;
 $9D29 JR Z,$9D2C     ;
 $9D2B INC C          ;
*$9D2C DJNZ $9D1D     ;
 $9D2E LD A,C         ;
 $9D2F LD ($9CB3),A   ;
 $9D32 LD IX,$6048    ;
 $9D36 LD A,$08       ;
*$9D38 PUSH AF        ;
 $9D39 LD B,A         ;
 $9D3A LD ($9CB4),A   ;
 $9D3D LD A,(IX+$22)  ;
 $9D40 AND A          ;
 $9D41 JP Z,$9E5C     ;
 $9D44 LD ($9C96),A   ;
 $9D47 BIT 2,(IX+$26) ;
 $9D4B JR NZ,$9D50    ;
 $9D4D LD ($9CAE),A   ;
*$9D50 LD A,($9C93)   ;
 $9D53 LD C,A         ;
 $9D54 BIT 3,(IX+$26) ;
 $9D58 JR NZ,$9D5F    ;
 $9D5A LD A,$01       ;
 $9D5C LD ($9C94),A   ;
*$9D5F LD A,($9C95)   ;
 $9D62 AND A          ;
 $9D63 JR Z,$9D76     ;
 $9D65 BIT 2,(IX+$26) ;
 $9D69 JR NZ,$9D76    ;
 $9D6B LD A,(IY+$06)  ;
 $9D6E CP $27         ;
 $9D70 JR Z,$9D76     ;
 $9D72 SET 4,(IX+$20) ;
*$9D76 BIT 2,(IX+$21) ;
 $9D7A JR Z,$9D88     ;
 $9D7C LD A,(IX+$21)  ;
 $9D7F AND $60        ;
 $9D81 JR Z,$9D88     ;
 $9D83 LD A,$01       ;
 $9D85 LD ($9C99),A   ;
*$9D88 LD A,($617B)   ;
 $9D8B AND A          ;
 $9D8C JR NZ,$9D94    ;
 $9D8E LD A,($9C99)   ;
 $9D91 AND A          ;
 $9D92 JR Z,$9D98     ;
*$9D94 SET 2,(IX+$21) ;
*$9D98 LD H,(IX+$24)  ;
 $9D9B LD L,(IX+$23)  ;
 $9D9E PUSH HL        ;
 $9D9F POP IY         ;
 $9DA1 LD A,(IX+$20)  ;
 $9DA4 AND $30        ;
 $9DA6 JR Z,$9E0F     ;
 $9DA8 SUB $20        ;
 $9DAA JP NZ,$9E41    ;
 $9DAD RES 5,(IX+$20) ;
 $9DB1 LD (IX+$1E),A  ;
 $9DB4 LD A,$C0       ;
 $9DB6 LD (IX+$1D),A  ;
 $9DB9 BIT 0,(IX+$26) ;
 $9DBD JR NZ,$9DE1    ;
 $9DBF LD HL,$7128    ;
 $9DC2 SET 2,(HL)     ;
 $9DC4 LD A,($9CB2)   ;
 $9DC7 AND A          ;
 $9DC8 JR Z,$9DE1     ;
 $9DCA CP $03         ;
 $9DCC JR Z,$9DD6     ;
 $9DCE BIT 6,(IX+$26) ;
 $9DD2 JR Z,$9DE1     ;
 $9DD4 JR $9DDD       ;
*$9DD6 LD A,(IY+$01)  ;
 $9DD9 CP $1E         ;
 $9DDB JR NZ,$9DE1    ;
*$9DDD XOR A          ;
 $9DDE LD ($9CB2),A   ;
*$9DE1 XOR A          ;
 $9DE2 LD (IX+$22),A  ;
 $9DE5 CALL $B5DF     ;
 $9DE8 LD D,(IY+$09)  ;
 $9DEB LD E,(IY+$08)  ;
 $9DEE CALL $D0E7     ;
 $9DF1 LD D,(IY+$16)  ;
 $9DF4 LD E,(IY+$15)  ;
 $9DF7 SRL D          ;
 $9DF9 RR E           ;
 $9DFB CALL $D0EA     ;
 $9DFE LD A,(IX+$21)  ;
 $9E01 AND $60        ;
 $9E03 JR Z,$9E5C     ;
 $9E05 LD A,($D05F)   ;
 $9E08 OR $40         ;
 $9E0A LD ($D05F),A   ;
 $9E0D JR $9E5C       ;
*$9E0F LD A,B         ;
 $9E10 XOR C          ;
 $9E11 AND $0F        ;
 $9E13 BIT 6,(IX+$20) ;
 $9E17 JR Z,$9E29     ;
 $9E19 BIT 0,(IX+$26) ;
 $9E1D JR Z,$9E24     ;
 $9E1F CALL $A4B5     ;
 $9E22 JR $9E29       ;
*$9E24 AND $03        ;
 $9E26 CALL Z,$A2C0   ;
*$9E29 CALL $9F82     ;
 $9E2C CALL $AE69     ;
 $9E2F PUSH IX        ;
 $9E31 LD DE,$0009    ;
 $9E34 ADD IX,DE      ;
 $9E36 CALL $9F41     ;
 $9E39 CALL $9F41     ;
 $9E3C CALL $9F41     ;
 $9E3F POP IX         ;
*$9E41 CALL $B4D8     ;
 $9E44 CALL $A6DF     ;
 $9E47 RES 3,(IX+$20) ;
 $9E4B LD A,(IX+$20)  ;
 $9E4E AND $30        ;
 $9E50 CP $10         ;
 $9E52 JR NZ,$9E5C    ;
 $9E54 SET 5,(IX+$20) ;
 $9E58 RES 4,(IX+$20) ;
*$9E5C POP AF         ;
 $9E5D LD DE,$0027    ;
 $9E60 ADD IX,DE      ;
 $9E62 DEC A          ;
 $9E63 JP NZ,$9D38    ;
 $9E66 XOR A          ;
 $9E67 LD ($9C95),A   ;
 $9E6A LD A,($9C94)   ;
 $9E6D AND A          ;
 $9E6E RET NZ         ;
 $9E6F LD ($9C99),A   ;
 $9E72 RET            ;

; Routine at 9E73
;
; Used by the routine at #R$A587.
c$9E73 PUSH IX       ;
 $9E75 CALL $9E98    ;
 $9E78 PUSH HL       ;
 $9E79 CALL $9E98    ;
 $9E7C PUSH HL       ;
 $9E7D CALL $9E98    ;
 $9E80 POP DE        ;
 $9E81 ADD HL,DE     ;
 $9E82 POP DE        ;
 $9E83 ADD HL,DE     ;
 $9E84 POP IX        ;
 $9E86 CALL $9EF1    ;
 $9E89 EX DE,HL      ;
 $9E8A PUSH IX       ;
 $9E8C CALL $9ECF    ;
 $9E8F CALL $9ECF    ;
 $9E92 CALL $9ECF    ;
 $9E95 POP IX        ;
 $9E97 RET           ;

; Routine at 9E98
;
; Used by the routine at #R$9E73.
c$9E98 LD B,(IX+$01) ;
 $9E9B LD C,(IX+$00) ;
 $9E9E RES 7,B       ;
 $9EA0 PUSH IX       ;
 $9EA2 LD IX,$0000   ;
 $9EA6 CALL $AB34    ;
 $9EA9 XOR A         ;
 $9EAA LD D,A        ;
 $9EAB ADD HL,HL     ;
 $9EAC RL D          ;
 $9EAE LD E,H        ;
 $9EAF ADD IX,DE     ;
 $9EB1 LD H,L        ;
 $9EB2 LD L,A        ;
 $9EB3 PUSH HL       ;
 $9EB4 LD H,$BE      ;
 $9EB6 LD L,B        ;
 $9EB7 LD E,(HL)     ;
 $9EB8 INC H         ;
 $9EB9 LD D,(HL)     ;
 $9EBA DEC H         ;
 $9EBB ADD IX,DE     ;
 $9EBD LD L,C        ;
 $9EBE LD E,(HL)     ;
 $9EBF INC H         ;
 $9EC0 LD D,(HL)     ;
 $9EC1 POP HL        ;
 $9EC2 ADD HL,DE     ;
 $9EC3 JR NC,$9EC7   ;
 $9EC5 INC IX        ;
*$9EC7 EX (SP),IX    ;
 $9EC9 POP HL        ;
 $9ECA INC IX        ;
 $9ECC INC IX        ;
 $9ECE RET           ;

; Routine at 9ECF
;
; Used by the routine at #R$9E73.
c$9ECF LD H,(IX+$01) ;
 $9ED2 LD L,(IX+$00) ;
 $9ED5 PUSH HL       ;
 $9ED6 RES 7,H       ;
 $9ED8 CALL $AFA8    ;
 $9EDB SRL B         ;
 $9EDD RR C          ;
 $9EDF POP HL        ;
 $9EE0 BIT 7,H       ;
 $9EE2 JR Z,$9EE6    ;
 $9EE4 SET 7,B       ;
*$9EE6 LD (IX+$00),C ;
 $9EE9 LD (IX+$01),B ;
 $9EEC INC IX        ;
 $9EEE INC IX        ;
 $9EF0 RET           ;

; Routine at 9EF1
;
; Used by the routines at #R$9C86 and #R$9E73.
c$9EF1 LD A,H        ;
 $9EF2 CP $10        ;
 $9EF4 JR NC,$9F18   ;
 $9EF6 AND A         ;
 $9EF7 JR Z,$9F0A    ;
 $9EF9 LD B,$04      ;
*$9EFB ADD HL,HL     ;
 $9EFC DJNZ $9EFB    ;
 $9EFE CALL $9F18    ;
 $9F01 SRL H         ;
 $9F03 RR L          ;
 $9F05 SRL H         ;
 $9F07 RR L          ;
 $9F09 RET           ;

; Routine at 9F0A
;
; Used by the routine at #R$9EF1.
c$9F0A LD H,L        ;
 $9F0B LD L,A        ;
 $9F0C CALL $9F18    ;
 $9F0F LD B,$04      ;
*$9F11 SRL H         ;
 $9F13 RR L          ;
 $9F15 DJNZ $9F11    ;
 $9F17 RET           ;

; Routine at 9F18
;
; Used by the routines at #R$9EF1 and #R$9F0A.
c$9F18 XOR A         ;
 $9F19 PUSH HL       ;
 $9F1A PUSH HL       ;
 $9F1B SRL H         ;
 $9F1D RR L          ;
 $9F1F RRA           ;
 $9F20 LD DE,$8000   ;
 $9F23 CALL $9F35    ;
 $9F26 POP DE        ;
 $9F27 CALL $9F2B    ;
 $9F2A POP DE        ;
*$9F2B RR H          ;
 $9F2D RR L          ;
 $9F2F EX DE,HL      ;
 $9F30 SRL H         ;
 $9F32 RR L          ;
 $9F34 RRA           ;
*$9F35 PUSH DE       ;
 $9F36 CALL $AFA8    ;
 $9F39 SRL B         ;
 $9F3B RR C          ;
 $9F3D XOR A         ;
 $9F3E POP HL        ;
 $9F3F ADD HL,BC     ;
 $9F40 RET           ;

; Routine at 9F41
;
; Used by the routines at #R$9CBB and #R$A28D.
c$9F41 LD H,$BF      ;
 $9F43 LD L,(IX+$01) ;
 $9F46 SLA L         ;
 $9F48 LD A,(HL)     ;
 $9F49 LD L,(IX+$03) ;
 $9F4C SLA L         ;
 $9F4E ADD A,(HL)    ;
 $9F4F LD L,(IX+$05) ;
 $9F52 SLA L         ;
 $9F54 ADD A,(HL)    ;
 $9F55 SRA A         ;
 $9F57 SRA A         ;
 $9F59 NEG           ;
 $9F5B XOR $80       ;
 $9F5D LD B,A        ;
 $9F5E CALL $9F68    ;
 $9F61 CALL $9F68    ;
 $9F64 CALL $9F68    ;
 $9F67 RET           ;

; Routine at 9F68
;
; Used by the routine at #R$9F41.
c$9F68 LD C,(IX+$01) ;
 $9F6B SLA C         ;
 $9F6D CALL $AB34    ;
 $9F70 SLA H         ;
 $9F72 SLA (IX+$01)  ;
 $9F76 RR H          ;
 $9F78 LD (IX+$01),H ;
 $9F7B INC IX        ;
 $9F7D INC IX        ;
 $9F7F RET           ;

; Data block at 9F80
@label=word at 9F80
w$9F80 DEFW $0000

; Routine at 9F82
;
; Used by the routines at #R$9CA5 and #R$9CBB.
c$9F82 CALL $A173     ;
 $9F85 BIT 2,(IX+$26) ;
 $9F89 JR NZ,$9F90    ;
 $9F8B LD A,L         ;
 $9F8C CP $60         ;
 $9F8E JR NC,$9F95    ;
*$9F90 LD A,H         ;
 $9F91 AND $7F        ;
 $9F93 JR Z,$9F9C     ;
*$9F95 XOR A          ;
 $9F96 LD (IX+$22),A  ;
 $9F99 JP $B5DF       ;
*$9F9C LD A,(IX+$02)  ;
 $9F9F ADD A,A        ;
 $9FA0 JR NZ,$9F95    ;
 $9FA2 LD A,(IX+$05)  ;
 $9FA5 ADD A,A        ;
 $9FA6 JR NZ,$9F95    ;
 $9FA8 LD HL,($70E4)  ;
 $9FAB LD ($9F80),HL  ;
 $9FAE PUSH IX        ;
 $9FB0 LD DE,$0009    ;
 $9FB3 ADD IX,DE      ;
 $9FB5 CALL $A0AB     ;
 $9FB8 CALL $A0AB     ;
 $9FBB CALL $A0AB     ;
 $9FBE POP IX         ;
 $9FC0 LD A,(IX+$1D)  ;
 $9FC3 LD B,A         ;
 $9FC4 BIT 7,A        ;
 $9FC6 JR NZ,$9FD3    ;
 $9FC8 AND $0F        ;
 $9FCA LD A,$00       ;
 $9FCC JR Z,$9FDD     ;
 $9FCE LD A,B         ;
 $9FCF DEC A          ;
 $9FD0 LD (IX+$1D),A  ;
*$9FD3 LD A,$0C       ;
 $9FD5 BIT 6,(IX+$1D) ;
 $9FD9 JR Z,$9FDD     ;
 $9FDB ADD A,$80      ;
*$9FDD LD ($9F80),A   ;
 $9FE0 LD A,(IX+$1E)  ;
 $9FE3 LD B,A         ;
 $9FE4 BIT 7,A        ;
 $9FE6 JR NZ,$9FF3    ;
 $9FE8 AND $0F        ;
 $9FEA LD A,$00       ;
 $9FEC JR Z,$9FFD     ;
 $9FEE LD A,B         ;
 $9FEF DEC A          ;
 $9FF0 LD (IX+$1E),A  ;
*$9FF3 LD A,$08       ;
 $9FF5 BIT 6,(IX+$1E) ;
 $9FF9 JR Z,$9FFD     ;
 $9FFB ADD A,$80      ;
; This entry point is used by the routine at #R$A28D.
*$9FFD LD ($9F81),A   ;
 $A000 PUSH IX        ;
 $A002 CALL $A127     ;
 $A005 CALL $A127     ;
 $A008 CALL $A127     ;
 $A00B POP IX         ;
 $A00D LD A,(IX+$1C)  ;
 $A010 AND A          ;
 $A011 JR Z,$A032     ;
 $A013 LD B,(IX+$1B)  ;
 $A016 ADD A,B        ;
 $A017 BIT 7,A        ;
 $A019 JR Z,$A01E     ;
 $A01B XOR A          ;
 $A01C JR $A02F       ;
*$A01E LD C,(IY+$06)  ;
 $A021 BIT 0,(IX+$21) ;
 $A025 JR Z,$A02B     ;
 $A027 SLA C          ;
 $A029 SLA C          ;
*$A02B CP C           ;
 $A02C JR C,$A02F     ;
 $A02E LD A,C         ;
*$A02F LD (IX+$1B),A  ;
*$A032 PUSH IX        ;
 $A034 PUSH IY        ;
 $A036 LD C,(IX+$1B)  ;
 $A039 PUSH IX        ;
 $A03B POP IY         ;
 $A03D CALL $A04B     ;
 $A040 CALL $A04B     ;
 $A043 CALL $A04B     ;
 $A046 POP IY         ;
 $A048 POP IX         ;
 $A04A RET            ;

; Routine at A04B
;
; Used by the routine at #R$9F82.
c$A04B PUSH BC       ;
 $A04C LD D,(IX+$0A) ;
 $A04F LD E,(IX+$09) ;
 $A052 CALL $A076    ;
 $A055 LD A,(IY+$02) ;
 $A058 LD H,(IY+$01) ;
 $A05B LD L,(IY+$00) ;
 $A05E CALL $A098    ;
 $A061 LD (IY+$02),B ;
 $A064 LD (IY+$01),H ;
 $A067 LD (IY+$00),L ;
 $A06A INC IY        ;
 $A06C INC IY        ;
 $A06E INC IY        ;
 $A070 INC IX        ;
 $A072 INC IX        ;
 $A074 POP BC        ;
 $A075 RET           ;

; Routine at A076
;
; Used by the routine at #R$A04B.
c$A076 SLA D         ;
 $A078 RL C          ;
 $A07A RL C          ;
 $A07C SRL D         ;
 $A07E LD HL,$0000   ;
 $A081 LD B,$06      ;
*$A083 SRL D         ;
 $A085 RR E          ;
 $A087 SLA C         ;
 $A089 JR NC,$A08C   ;
 $A08B ADD HL,DE     ;
*$A08C DJNZ $A083    ;
 $A08E LD DE,$00FF   ;
 $A091 ADD HL,DE     ;
 $A092 LD E,H        ;
 $A093 SLA C         ;
 $A095 RR D          ;
 $A097 RET           ;

; Routine at A098
;
; Used by the routine at #R$A04B.
c$A098 LD B,A        ;
 $A099 LD C,D        ;
 $A09A XOR C         ;
 $A09B RES 7,D       ;
 $A09D JR NZ,$A0A1   ;
 $A09F ADD HL,DE     ;
 $A0A0 RET           ;
*$A0A1 SBC HL,DE     ;
 $A0A3 RET NC        ;
 $A0A4 ADD HL,DE     ;
 $A0A5 EX DE,HL      ;
 $A0A6 AND A         ;
 $A0A7 SBC HL,DE     ;
 $A0A9 LD B,C        ;
 $A0AA RET           ;

; Routine at A0AB
;
; Used by the routine at #R$9F82.
c$A0AB LD A,($9F81)  ;
 $A0AE XOR $80       ;
 $A0B0 SRA A         ;
 $A0B2 RES 6,A       ;
 $A0B4 LD C,A        ;
 $A0B5 LD B,(IX+$03) ;
 $A0B8 LD D,(IX+$05) ;
 $A0BB CALL $A0FD    ;
 $A0BE LD (IX+$05),A ;
 $A0C1 LD A,($9F80)  ;
 $A0C4 XOR $80       ;
 $A0C6 LD C,A        ;
 $A0C7 LD B,(IX+$03) ;
 $A0CA LD D,(IX+$01) ;
 $A0CD CALL $A0FD    ;
 $A0D0 LD (IX+$01),A ;
 $A0D3 LD A,($9F80)  ;
 $A0D6 LD C,A        ;
 $A0D7 LD B,(IX+$01) ;
 $A0DA LD D,(IX+$03) ;
 $A0DD CALL $A0FD    ;
 $A0E0 LD (IX+$03),A ;
 $A0E3 LD A,($9F81)  ;
 $A0E6 SRA A         ;
 $A0E8 RES 6,A       ;
 $A0EA LD C,A        ;
 $A0EB LD B,(IX+$05) ;
 $A0EE LD D,(IX+$03) ;
 $A0F1 CALL $A0FD    ;
 $A0F4 LD (IX+$03),A ;
 $A0F7 LD DE,$0006   ;
 $A0FA ADD IX,DE     ;
 $A0FC RET           ;

; Routine at A0FD
;
; Used by the routines at #R$A0AB and #R$A127.
c$A0FD PUSH DE       ;
 $A0FE XOR B         ;
 $A0FF SLA B         ;
 $A101 RES 7,C       ;
 $A103 LD E,A        ;
 $A104 CALL $AB0B    ;
 $A107 POP BC        ;
 $A108 LD C,A        ;
 $A109 LD A,E        ;
 $A10A XOR B         ;
 $A10B SLA B         ;
 $A10D RR E          ;
 $A10F SLA C         ;
 $A111 RLA           ;
 $A112 LD A,B        ;
 $A113 JR C,$A11C    ;
 $A115 ADD A,C       ;
 $A116 JR NC,$A123   ;
 $A118 LD A,$FF      ;
 $A11A JR $A123      ;
*$A11C SUB C         ;
 $A11D JR NC,$A123   ;
 $A11F NEG           ;
 $A121 RL E          ;
*$A123 RL E          ;
 $A125 RRA           ;
 $A126 RET           ;

; Routine at A127
;
; Used by the routine at #R$9F82.
c$A127 LD A,($9F81)  ;
 $A12A XOR $80       ;
 $A12C LD C,A        ;
 $A12D LD A,C        ;
 $A12E LD B,(IX+$10) ;
 $A131 LD D,(IX+$0A) ;
 $A134 CALL $A0FD    ;
 $A137 LD (IX+$0A),A ;
 $A13A LD A,($9F80)  ;
 $A13D XOR $80       ;
 $A13F LD C,A        ;
 $A140 LD A,C        ;
 $A141 LD B,(IX+$10) ;
 $A144 LD D,(IX+$16) ;
 $A147 CALL $A0FD    ;
 $A14A LD (IX+$16),A ;
 $A14D LD A,($9F80)  ;
 $A150 LD C,A        ;
 $A151 LD B,(IX+$16) ;
 $A154 LD D,(IX+$10) ;
 $A157 CALL $A0FD    ;
 $A15A LD (IX+$10),A ;
 $A15D LD A,($9F81)  ;
 $A160 LD C,A        ;
 $A161 LD A,C        ;
 $A162 LD B,(IX+$0A) ;
 $A165 LD D,(IX+$10) ;
 $A168 CALL $A0FD    ;
 $A16B LD (IX+$10),A ;
 $A16E INC IX        ;
 $A170 INC IX        ;
 $A172 RET           ;

; Routine at A173
;
; Used by the routines at #R$9C83 and #R$9F82.
c$A173 LD A,($70E5)  ;
 $A176 XOR $80       ;
 $A178 LD C,A        ;
 $A179 LD DE,$0003   ;
 $A17C LD HL,$0006   ;
 $A17F CALL $A1EA    ;
 $A182 LD A,($70E4)  ;
 $A185 XOR $80       ;
 $A187 CALL $A281    ;
 $A18A LD DE,$0003   ;
 $A18D LD H,D        ;
 $A18E LD L,D        ;
 $A18F CALL $A1EA    ;
 $A192 LD A,($70E4)  ;
 $A195 CALL $A281    ;
 $A198 LD HL,$0003   ;
 $A19B LD D,H        ;
 $A19C LD E,H        ;
 $A19D CALL $A1EA    ;
 $A1A0 LD A,($70E5)  ;
 $A1A3 LD C,A        ;
 $A1A4 LD HL,$0003   ;
 $A1A7 LD DE,$0006   ;
 $A1AA CALL $A1EA    ;
 $A1AD LD A,($70E6)  ;
 $A1B0 INC A         ;
 $A1B1 ADD A,A       ;
 $A1B2 LD B,A        ;
 $A1B3 LD H,(IX+$08) ;
 $A1B6 LD L,(IX+$07) ;
 $A1B9 LD A,(IX+$06) ;
 $A1BC BIT 7,H       ;
 $A1BE JR Z,$A1D0    ;
 $A1C0 ADD A,B       ;
 $A1C1 LD (IX+$06),A ;
 $A1C4 JR NC,$A1E9   ;
 $A1C6 INC HL        ;
 $A1C7 BIT 7,H       ;
 $A1C9 JR NZ,$A1E3   ;
 $A1CB LD HL,$7FFF   ;
 $A1CE JR $A1DE      ;
*$A1D0 SUB B         ;
 $A1D1 LD (IX+$06),A ;
 $A1D4 JR NC,$A1E9   ;
 $A1D6 DEC HL        ;
 $A1D7 BIT 7,H       ;
 $A1D9 JR Z,$A1E3    ;
 $A1DB LD HL,$8000   ;
*$A1DE NEG           ;
 $A1E0 LD (IX+$06),A ;
*$A1E3 LD (IX+$08),H ;
 $A1E6 LD (IX+$07),L ;
*$A1E9 RET           ;

; Routine at A1EA
;
; Used by the routine at #R$A173.
c$A1EA PUSH IX       ;
 $A1EC PUSH IX       ;
 $A1EE EX (SP),IY    ;
 $A1F0 ADD IX,DE     ;
 $A1F2 EX DE,HL      ;
 $A1F3 ADD IY,DE     ;
 $A1F5 LD A,(IX+$02) ;
 $A1F8 LD D,(IX+$01) ;
 $A1FB LD E,(IX+$00) ;
 $A1FE LD B,A        ;
 $A1FF XOR C         ;
 $A200 AND $80       ;
 $A202 PUSH AF       ;
 $A203 RES 7,C       ;
 $A205 RES 7,B       ;
 $A207 PUSH DE       ;
 $A208 CALL $AB34    ;
 $A20B POP DE        ;
 $A20C PUSH HL       ;
 $A20D LD B,D        ;
 $A20E PUSH DE       ;
 $A20F CALL $AB34    ;
 $A212 POP DE        ;
 $A213 LD B,E        ;
 $A214 LD A,L        ;
 $A215 LD L,H        ;
 $A216 LD H,$00      ;
 $A218 POP DE        ;
 $A219 ADD HL,DE     ;
 $A21A LD E,A        ;
 $A21B PUSH HL       ;
 $A21C CALL $AB0B    ;
 $A21F ADD A,E       ;
 $A220 POP HL        ;
 $A221 JR NC,$A224   ;
 $A223 INC HL        ;
*$A224 LD B,A        ;
 $A225 LD A,H        ;
 $A226 LD H,L        ;
 $A227 LD L,B        ;
 $A228 POP BC        ;
 $A229 LD C,B        ;
 $A22A LD B,(IY+$02) ;
 $A22D LD D,(IY+$01) ;
 $A230 LD E,(IY+$00) ;
 $A233 PUSH AF       ;
 $A234 LD A,B        ;
 $A235 XOR C         ;
 $A236 RLC C         ;
 $A238 RLC C         ;
 $A23A RLA           ;
 $A23B RR C          ;
 $A23D RRC C         ;
 $A23F SRL A         ;
 $A241 LD B,A        ;
 $A242 POP AF        ;
 $A243 BIT 6,C       ;
 $A245 JR NZ,$A252   ;
 $A247 ADD A,A       ;
 $A248 SLA C         ;
 $A24A RRA           ;
 $A24B ADD A,B       ;
 $A24C ADD HL,DE     ;
 $A24D JR NC,$A273   ;
 $A24F INC A         ;
 $A250 JR $A273      ;
*$A252 AND A         ;
 $A253 EX DE,HL      ;
 $A254 SBC HL,DE     ;
 $A256 JR NC,$A259   ;
 $A258 INC A         ;
*$A259 LD D,A        ;
 $A25A LD A,B        ;
 $A25B SUB D         ;
 $A25C LD B,A        ;
 $A25D JR NC,$A26C   ;
 $A25F CPL           ;
 $A260 LD B,A        ;
 $A261 LD A,C        ;
 $A262 XOR $80       ;
 $A264 LD C,A        ;
 $A265 EX DE,HL      ;
 $A266 AND A         ;
 $A267 LD HL,$0000   ;
 $A26A SBC HL,DE     ;
*$A26C LD A,B        ;
 $A26D RLA           ;
 $A26E SLA C         ;
 $A270 RRA           ;
 $A271 XOR $80       ;
*$A273 LD (IY+$02),A ;
 $A276 LD (IY+$01),H ;
 $A279 LD (IY+$00),L ;
 $A27C POP IY        ;
 $A27E POP IX        ;
 $A280 RET           ;

; Routine at A281
;
; Used by the routine at #R$A173.
c$A281 LD C,A        ;
 $A282 RL C          ;
 $A284 RRA           ;
 $A285 RL C          ;
 $A287 RLA           ;
 $A288 RR C          ;
 $A28A RET           ;

; Unused
s$A28B DEFS $02

; Draw title ship
;
; Used by the routines at #R$9CA5 and #R$9CAF.
@label=draw_title_ship
c$A28D LD IX,$6159   ; Ship data structure
 $A291 LD H,(IX+$24) ; Get blueprint MSB
 $A294 LD L,(IX+$23) ; Get blueprint LSB
 $A297 PUSH HL       ; {Copy blueprint addr to IY
 $A298 POP IY        ; }
 $A29A LD A,$94      ;
 $A29C LD ($9F80),A  ;
 $A29F LD A,$8C      ;
 $A2A1 CALL $9FFD    ;
 $A2A4 CALL $AE69    ;
@ssub=LD IX,$6159+$09
 $A2A7 LD IX,$6162   ; Orientation vectors
 $A2AB CALL $9F41    ;
 $A2AE CALL $9F41    ;
 $A2B1 LD IX,$6159   ;
 $A2B5 JP $A6DF      ;

; Data block at A2B8
b$A2B8 DEFB $00,$00,$00,$00,$00,$00,$00,$00

; Routine at A2C0
;
; Used by the routine at #R$9CBB.
c$A2C0 LD A,(IY+$07)  ;
 $A2C3 LD C,(IX+$22)  ;
 $A2C6 INC C          ;
 $A2C7 CP $F0         ;
 $A2C9 JR C,$A2CE     ;
 $A2CB INC C          ;
 $A2CC INC C          ;
 $A2CD INC C          ;
*$A2CE CP C           ;
 $A2CF JR C,$A2D2     ;
 $A2D1 LD A,C         ;
*$A2D2 LD B,A         ;
 $A2D3 LD A,($D041)   ;
 $A2D6 AND A          ;
 $A2D7 RET NZ         ;
 $A2D8 LD HL,$9CB2    ;
 $A2DB LD A,B         ;
 $A2DC CP $50         ;
 $A2DE LD A,(HL)      ;
 $A2DF JR C,$A2E6     ;
 $A2E1 CP $02         ;
 $A2E3 JR NZ,$A2E6    ;
 $A2E5 DEC (HL)       ;
*$A2E6 CP $01         ;
 $A2E8 JR NZ,$A2F7    ;
 $A2EA LD A,B         ;
 $A2EB CP $34         ;
 $A2ED JR NC,$A2F4    ;
 $A2EF LD A,$02       ;
 $A2F1 LD (HL),A      ;
 $A2F2 JR $A2F7       ;
*$A2F4 SUB $02        ;
 $A2F6 LD B,A         ;
*$A2F7 LD A,B         ;
 $A2F8 LD (IX+$22),A  ;
 $A2FB LD B,(IY+$07)  ;
 $A2FE ADD A,A        ;
 $A2FF JR C,$A36C     ;
 $A301 CP B           ;
 $A302 JR NC,$A36C    ;
 $A304 ADD A,A        ;
 $A305 JR C,$A30D     ;
 $A307 ADD A,A        ;
 $A308 JR C,$A30D     ;
 $A30A CP B           ;
 $A30B JR C,$A343     ;
*$A30D LD A,(IX+$20)  ;
 $A310 AND $07        ;
 $A312 JR Z,$A36C     ;
 $A314 CALL $B799     ;
 $A317 CP $80         ;
 $A319 JR NC,$A36C    ;
 $A31B LD A,($9C9B)   ;
 $A31E AND A          ;
 $A31F JR NZ,$A36C    ;
 $A321 LD A,(IY+$0A)  ;
 $A324 AND $F0        ;
 $A326 JR NZ,$A32A    ;
 $A328 OR $06         ;
*$A32A XOR $04        ;
 $A32C LD B,A         ;
 $A32D PUSH BC        ;
 $A32E CALL $A403     ;
 $A331 POP BC         ;
 $A332 JR NZ,$A36C    ;
 $A334 DEC (IX+$20)   ;
 $A337 LD A,B         ;
 $A338 CP $02         ;
 $A33A JR NZ,$A36C    ;
 $A33C LD HL,$D0BF    ;
 $A33F SET 7,(HL)     ;
 $A341 JR $A36C       ;
*$A343 CALL $B799     ;
 $A346 CP (IX+$25)    ;
 $A349 JR C,$A3A2     ;
 $A34B BIT 7,(IX+$20) ;
 $A34F JR Z,$A361     ;
 $A351 LD A,$07       ;
 $A353 CALL $A403     ;
 $A356 JR NZ,$A36C    ;
 $A358 RES 7,(IX+$20) ;
 $A35C RES 6,(IX+$20) ;
 $A360 RET            ;

; Routine at A361
;
; Used by the routine at #R$A2C0.
c$A361 LD A,(IY+$00)  ;
 $A364 AND A          ;
 $A365 JR Z,$A36C     ;
 $A367 LD A,$06       ;
 $A369 CALL $A403     ;
; This entry point is used by the routine at #R$A2C0.
*$A36C LD A,(IY+$12)  ;
 $A36F CP $04         ;
 $A371 JR NZ,$A3A2    ;
 $A373 PUSH IX        ;
 $A375 LD IX,$6048    ;
 $A379 LD DE,$0027    ;
 $A37C LD B,$06       ;
*$A37E ADD IX,DE      ;
 $A380 LD A,(IX+$22)  ;
 $A383 AND A          ;
 $A384 JR Z,$A38D     ;
 $A386 LD A,(IX+$21)  ;
 $A389 SUB $0C        ;
 $A38B JR Z,$A390     ;
*$A38D DJNZ $A37E     ;
 $A38F INC A          ;
*$A390 POP IX         ;
 $A392 JP Z,$A42F     ;
 $A395 RES 6,(IX+$20) ;
 $A399 SET 1,(IX+$26) ;
 $A39D SRL (IX+$1B)   ;
 $A3A1 RET            ;

; Routine at A3A2
;
; Used by the routines at #R$A2C0 and #R$A361.
c$A3A2 BIT 0,(IX+$25) ;
 $A3A6 JR Z,$A3D3     ;
 $A3A8 LD A,($D0AF)   ;
 $A3AB CP $04         ;
 $A3AD JR NZ,$A3B6    ;
 $A3AF LD A,($D0B0)   ;
 $A3B2 BIT 7,A        ;
 $A3B4 JR NZ,$A3D3    ;
*$A3B6 LD A,($9C9B)   ;
 $A3B9 AND A          ;
 $A3BA JR NZ,$A3D3    ;
 $A3BC LD HL,$617B    ;
 $A3BF LD A,(HL)      ;
 $A3C0 AND A          ;
 $A3C1 JR Z,$A3D3     ;
 $A3C3 BIT 2,(IX+$26) ;
 $A3C7 JR NZ,$A3CE    ;
 $A3C9 CALL $B799     ;
 $A3CC CP $A0         ;
*$A3CE LD A,$0A       ;
 $A3D0 LD ($9C9B),A   ;
*$A3D3 BIT 2,(IX+$26) ;
 $A3D7 JR Z,$A42F     ;
 $A3D9 LD A,($9CB3)   ;
 $A3DC CP $04         ;
 $A3DE RET NC         ;
 $A3DF CALL $B799     ;
 $A3E2 BIT 2,(IX+$21) ;
 $A3E6 JR Z,$A3FE     ;
 $A3E8 CP $24         ;
 $A3EA RET NC         ;
 $A3EB LD A,($D0AF)   ;
 $A3EE CP $04         ;
 $A3F0 LD A,$14       ;
 $A3F2 JR NZ,$A403    ;
 $A3F4 CALL $B799     ;
 $A3F7 CP $88         ;
 $A3F9 RET NC         ;
 $A3FA LD A,$44       ;
 $A3FC JR $A403       ;
*$A3FE CP $02         ;
 $A400 RET NC         ;
 $A401 LD A,$24       ;
; This entry point is used by the routines at #R$A2C0 and #R$A361.
*$A403 PUSH IY        ;
 $A405 PUSH IX        ;
 $A407 CALL $B867     ;
 $A40A POP IX         ;
 $A40C POP IY         ;
 $A40E RET            ;

; Routine at A40F
;
; Used by the routine at #R$A42F.
c$A40F LD H,(IX+$01) ;
 $A412 LD L,(IX+$00) ;
 $A415 AND A         ;
 $A416 SBC HL,DE     ;
 $A418 RET NC        ;
 $A419 LD H,(IX+$04) ;
 $A41C LD L,(IX+$03) ;
 $A41F AND A         ;
 $A420 SBC HL,DE     ;
 $A422 RET NC        ;
 $A423 LD H,(IX+$07) ;
 $A426 LD L,(IX+$06) ;
 $A429 INC D         ;
 $A42A INC D         ;
 $A42B AND A         ;
 $A42C SBC HL,DE     ;
 $A42E RET           ;

; Routine at A42F
;
; Used by the routines at #R$A361 and #R$A3A2.
c$A42F BIT 1,(IX+$21) ;
 $A433 JR Z,$A440     ;
 $A435 LD A,($D060)   ;
 $A438 CP $28         ;
 $A43A JR C,$A440     ;
 $A43C SET 2,(IX+$21) ;
*$A440 LD DE,$0200    ;
 $A443 CALL $A40F     ;
 $A446 JR C,$A47C     ;
 $A448 BIT 5,(IX+$26) ;
 $A44C JR Z,$A455     ;
 $A44E LD D,$0A       ;
 $A450 CALL $A40F     ;
 $A453 JR C,$A47C     ;
*$A455 BIT 2,(IX+$21) ;
 $A459 RET Z          ;
 $A45A LD A,($D0AF)   ;
 $A45D CP $04         ;
 $A45F JR Z,$A46F     ;
 $A461 LD A,($606A)   ;
 $A464 AND A          ;
 $A465 JR Z,$A46F     ;
 $A467 BIT 3,(IX+$21) ;
 $A46B JR Z,$A498     ;
 $A46D JR $A47C       ;
*$A46F LD A,(IX+$25)  ;
 $A472 AND $7F        ;
 $A474 CP $08         ;
 $A476 JR NC,$A498    ;
 $A478 SET 7,(IX+$25) ;
*$A47C PUSH IX        ;
 $A47E CALL $A56F     ;
 $A481 LD ($A2B8),HL  ;
 $A484 CALL $A56F     ;
 $A487 LD ($A2BA),HL  ;
 $A48A CALL $A56F     ;
 $A48D LD ($A2BC),HL  ;
 $A490 POP IX         ;
 $A492 SET 5,(IX+$26) ;
 $A496 JR $A4B2       ;
; This entry point is used by the routine at #R$A4C4.
*$A498 PUSH IX        ;
 $A49A CALL $A568     ;
 $A49D LD ($A2B8),HL  ;
 $A4A0 CALL $A568     ;
 $A4A3 LD ($A2BA),HL  ;
 $A4A6 CALL $A568     ;
 $A4A9 LD ($A2BC),HL  ;
 $A4AC POP IX         ;
 $A4AE RES 5,(IX+$26) ;
; This entry point is used by the routine at #R$A532.
*$A4B2 JP $A587       ;

; Routine at A4B5
;
; Used by the routine at #R$9CBB.
c$A4B5 LD A,($9C9B)   ;
 $A4B8 AND A          ;
 $A4B9 JR Z,$A4C4     ;
 $A4BB RES 6,(IX+$20) ;
 $A4BF SET 4,(IX+$20) ;
 $A4C3 RET            ;

; Routine at A4C4
;
; Used by the routine at #R$A4B5.
c$A4C4 LD A,(IX+$25)  ;
 $A4C7 AND A          ;
 $A4C8 JR Z,$A498     ;
 $A4CA PUSH IY        ;
 $A4CC LD IY,$6021    ;
 $A4D0 LD DE,$0027    ;
 $A4D3 SUB $0A        ;
 $A4D5 CPL            ;
 $A4D6 LD B,A         ;
*$A4D7 ADD IY,DE      ;
 $A4D9 DJNZ $A4D7     ;
 $A4DB PUSH IX        ;
 $A4DD PUSH IY        ;
 $A4DF CALL $A53F     ;
 $A4E2 LD ($A2B8),HL  ;
 $A4E5 CALL $A53F     ;
 $A4E8 LD ($A2BA),HL  ;
 $A4EB CALL $A53F     ;
 $A4EE LD ($A2BC),HL  ;
 $A4F1 POP IY         ;
 $A4F3 POP IX         ;
 $A4F5 CALL $A537     ;
 $A4F8 JR NZ,$A532    ;
 $A4FA LD HL,($A2BA)  ;
 $A4FD CALL $A537     ;
 $A500 JR NZ,$A532    ;
 $A502 LD HL,($A2B8)  ;
 $A505 CALL $A537     ;
 $A508 JR NZ,$A532    ;
 $A50A BIT 2,(IY+$26) ;
 $A50E JR Z,$A527     ;
 $A510 LD HL,$D0AF    ;
 $A513 LD A,(HL)      ;
 $A514 CP $04         ;
 $A516 JR NZ,$A52B    ;
 $A518 SET 3,(HL)     ;
 $A51A DEC L          ;
 $A51B XOR A          ;
 $A51C LD (HL),A      ;
 $A51D LD DE,$FFFF    ;
 $A520 CALL $D0EA     ;
 $A523 SET 7,(IY+$26) ;
*$A527 SET 4,(IY+$20) ;
*$A52B POP IY         ;
 $A52D SET 4,(IX+$20) ;
 $A531 RET            ;

; Routine at A532
;
; Used by the routine at #R$A4C4.
c$A532 POP IY        ;
 $A534 JP $A4B2      ;
; This entry point is used by the routine at #R$A4C4.
*$A537 ADD HL,HL     ;
 $A538 LD A,H        ;
 $A539 AND A         ;
 $A53A RET NZ        ;
 $A53B LD A,L        ;
 $A53C AND $C0       ;
 $A53E RET           ;

; Routine at A53F
;
; Used by the routine at #R$A4C4.
c$A53F LD L,(IY+$00) ;
 $A542 LD H,(IY+$01) ;
 $A545 LD C,(IY+$02) ;
 $A548 LD E,(IX+$00) ;
 $A54B LD D,(IX+$01) ;
 $A54E LD B,(IX+$02) ;
 $A551 SLA C         ;
 $A553 RR H          ;
 $A555 RR L          ;
 $A557 SLA B         ;
 $A559 RR D          ;
 $A55B RR E          ;
 $A55D CALL $AFC9    ;
 $A560 LD DE,$0003   ;
 $A563 ADD IX,DE     ;
 $A565 ADD IY,DE     ;
 $A567 RET           ;

; Routine at A568
;
; Used by the routine at #R$A42F.
c$A568 LD A,(IX+$02) ;
 $A56B XOR $80       ;
 $A56D JR $A572      ;
; This entry point is used by the routine at #R$A42F.
*$A56F LD A,(IX+$02) ;
*$A572 LD L,(IX+$00) ;
 $A575 LD H,(IX+$01) ;
 $A578 SRL H         ;
 $A57A RR L          ;
 $A57C RLA           ;
 $A57D RR H          ;
 $A57F RR L          ;
 $A581 LD DE,$0003   ;
 $A584 ADD IX,DE     ;
 $A586 RET           ;

; Routine at A587
;
; Used by the routine at #R$A42F.
c$A587 PUSH IY        ;
 $A589 LD IY,$A2B8    ;
 $A58D PUSH IX        ;
 $A58F LD IX,$A2B8    ;
 $A593 CALL $9E73     ;
 $A596 POP IX         ;
 $A598 LD ($A2BE),DE  ;
 $A59C PUSH IX        ;
 $A59E LD DE,$0009    ;
 $A5A1 ADD IX,DE      ;
 $A5A3 CALL $A6AC     ;
 $A5A6 LD DE,$0006    ;
 $A5A9 ADD IX,DE      ;
 $A5AB LD H,A         ;
 $A5AC PUSH HL        ;
 $A5AD CALL $A6AC     ;
 $A5B0 POP HL         ;
 $A5B1 LD L,A         ;
 $A5B2 PUSH HL        ;
 $A5B3 LD DE,$0006    ;
 $A5B6 ADD IX,DE      ;
 $A5B8 CALL $A6AC     ;
 $A5BB POP HL         ;
 $A5BC POP IX         ;
 $A5BE POP IY         ;
 $A5C0 LD D,A         ;
 $A5C1 AND $7F        ;
 $A5C3 JR Z,$A5E7     ;
 $A5C5 LD C,A         ;
 $A5C6 SRL C          ;
 $A5C8 SRL C          ;
 $A5CA SRL C          ;
 $A5CC ADC A,C        ;
 $A5CD SRL A          ;
 $A5CF SRL A          ;
 $A5D1 CP $0F         ;
 $A5D3 JR C,$A5D7     ;
 $A5D5 LD A,$0F       ;
*$A5D7 LD B,A         ;
 $A5D8 LD A,D         ;
 $A5D9 XOR L          ;
 $A5DA AND $80        ;
 $A5DC RRA            ;
 $A5DD OR B           ;
 $A5DE LD (IX+$1D),A  ;
 $A5E1 AND $3F        ;
 $A5E3 CP $04         ;
 $A5E5 JR NC,$A605    ;
*$A5E7 LD A,H         ;
 $A5E8 BIT 7,A        ;
 $A5EA JR Z,$A5FB     ;
 $A5EC AND $7F        ;
 $A5EE ADD A,$50      ;
 $A5F0 SRL A          ;
 $A5F2 CPL            ;
 $A5F3 ADD A,$68      ;
 $A5F5 SRL A          ;
 $A5F7 CP $40         ;
 $A5F9 JR C,$A5FD     ;
*$A5FB LD A,$3F       ;
*$A5FD SLA L          ;
 $A5FF RRA            ;
 $A600 SRL A          ;
 $A602 LD (IX+$1E),A  ;
*$A605 XOR A          ;
 $A606 BIT 7,(IX+$25) ;
 $A60A JR Z,$A60E     ;
 $A60C LD A,$02       ;
*$A60E LD (IX+$1C),A  ;
 $A611 RET NZ         ;
 $A612 LD DE,($A2BE)  ;
 $A616 LD A,D         ;
 $A617 SLA H          ;
 $A619 JR NC,$A686    ;
 $A61B LD B,$0A       ;
 $A61D BIT 0,(IX+$26) ;
 $A621 JR Z,$A625     ;
 $A623 LD B,$02       ;
*$A625 CP B           ;
 $A626 JR C,$A632     ;
 $A628 LD B,$01       ;
 $A62A CP $10         ;
 $A62C JR NC,$A62F    ;
 $A62E INC B          ;
*$A62F LD (IX+$1C),B  ;
*$A632 BIT 2,(IX+$21) ;
 $A636 RET Z          ;
 $A637 LD A,(IX+$08)  ;
 $A63A XOR (IX+$0E)   ;
 $A63D AND $80        ;
 $A63F RET Z          ;
 $A640 LD B,(IY+$02)  ;
 $A643 LD A,($D062)   ;
 $A646 AND A          ;
 $A647 JR NZ,$A64B    ;
 $A649 SRL B          ;
*$A64B CALL $B799     ;
 $A64E CP B           ;
 $A64F RET NC         ;
 $A650 LD A,(IX+$26)  ;
 $A653 AND $0F        ;
 $A655 RET NZ         ;
 $A656 LD A,D         ;
 $A657 CP $0C         ;
 $A659 RET NC         ;
 $A65A SLA H          ;
 $A65C RET NC         ;
 $A65D SET 3,(IX+$20) ;
 $A661 LD A,D         ;
 $A662 CP $04         ;
 $A664 JR C,$A669     ;
 $A666 SLA H          ;
 $A668 RET NC         ;
*$A669 LD HL,$7128    ;
 $A66C SET 6,(HL)     ;
 $A66E BIT 7,(IX+$08) ;
 $A672 JR Z,$A67D     ;
 $A674 LD A,($9CA4)   ;
 $A677 ADD A,$07      ;
 $A679 LD ($9CA4),A   ;
 $A67C RET            ;

; Routine at A67D
;
; Used by the routine at #R$A587.
c$A67D LD A,($9CA3)  ;
 $A680 ADD A,$07     ;
 $A682 LD ($9CA3),A  ;
 $A685 RET           ;

; Routine at A686
;
; Used by the routine at #R$A587.
c$A686 LD B,$0B       ;
 $A688 BIT 0,(IX+$26) ;
 $A68C JR Z,$A690     ;
 $A68E LD B,$03       ;
*$A690 CP B           ;
 $A691 RET C          ;
 $A692 LD B,$FF       ;
 $A694 CP $12         ;
 $A696 JR C,$A699     ;
 $A698 DEC B          ;
*$A699 LD (IX+$1C),B  ;
 $A69C RET            ;

; Calculate -4 * A * B / 256
;
; Used by the routine at #R$A6AC.
;
; I:A First number (packed sign-magnitude byte)
; I:B Second number (packed sign-magnitude byte)
; O:H Sign
; O:L -4 * A * B / 256
;
@label=minus_4_a_b
c$A69D LD C,A        ; {Combine signs in A
 $A69E XOR B         ; }
 $A69F XOR $80       ; Flip sign
 $A6A1 SLA B         ; B *= 2
 $A6A3 SLA C         ; C *= 2
 $A6A5 PUSH AF       ; Save signs
 $A6A6 CALL $AB0B    ; A = B * C / 256
 $A6A9 POP HL        ; Restore sign in H
 $A6AA LD L,A        ; Place product in L
 $A6AB RET           ;

; Routine at A6AC
;
; Used by the routines at #R$A587 and #R$AE69.
c$A6AC LD B,(IX+$01) ;
 $A6AF LD A,(IY+$01) ;
 $A6B2 CALL $A69D    ;
 $A6B5 PUSH HL       ;
 $A6B6 LD B,(IX+$03) ;
 $A6B9 LD A,(IY+$03) ;
 $A6BC CALL $A69D    ;
 $A6BF PUSH HL       ;
 $A6C0 LD B,(IX+$05) ;
 $A6C3 LD A,(IY+$05) ;
 $A6C6 CALL $A69D    ;
 $A6C9 POP DE        ;
 $A6CA CALL $AAFB    ;
 $A6CD JR NC,$A6D1   ;
 $A6CF LD A,$FF      ;
*$A6D1 POP DE        ;
 $A6D2 LD L,A        ;
 $A6D3 CALL $AAFB    ;
 $A6D6 JR NC,$A6DA   ;
 $A6D8 LD A,$FF      ;
*$A6DA RL H          ;
 $A6DC RRA           ;
 $A6DD RET           ;

; Data block at A6DE
@label=byte_at_A6DE
b$A6DE DEFB $00

; Draw ship
;
; Used by the routines at #R$9CBB and #R$A28D.
;
; IX Address of ship structure
; IY Address of blueprint
@label=draw_ship
c$A6DF LD A,($70E3)   ;
 $A6E2 LD B,A         ;
 $A6E3 CP $04         ;
 $A6E5 RET NC         ;
 $A6E6 PUSH IX        ;
 $A6E8 POP HL         ;
 $A6E9 BIT 1,A        ;
 $A6EB JR NZ,$A6F1    ;
 $A6ED LD DE,$0006    ;
 $A6F0 ADD HL,DE      ;
*$A6F1 LD E,(HL)      ;
 $A6F2 INC HL         ;
 $A6F3 LD D,(HL)      ;
 $A6F4 INC HL         ;
 $A6F5 LD C,(HL)      ;
 $A6F6 SRL A          ;
 $A6F8 XOR B          ;
 $A6F9 RRCA           ;
 $A6FA XOR C          ;
 $A6FB AND $80        ;
 $A6FD RET NZ         ;
 $A6FE LD ($A9B8),DE  ;
 $A702 LD H,$00       ;
 $A704 LD L,(IY+$01)  ;
 $A707 PUSH HL        ;
 $A708 AND A          ;
 $A709 SBC HL,DE      ;
 $A70B JR C,$A70F     ;
 $A70D POP HL         ;
 $A70E RET            ;
*$A70F PUSH DE        ;
 $A710 PUSH DE        ;
 $A711 BIT 1,B        ;
 $A713 JR NZ,$A73B    ;
 $A715 EX DE,HL       ;
 $A716 LD D,(IX+$01)  ;
 $A719 LD E,(IX+$00)  ;
 $A71C XOR A          ;
 $A71D LD C,A         ;
 $A71E CALL $AC69     ;
 $A721 LD A,C         ;
 $A722 LD ($A9C1),A   ;
 $A725 POP HL         ;
 $A726 LD D,(IX+$04)  ;
 $A729 LD E,(IX+$03)  ;
 $A72C XOR A          ;
 $A72D LD C,A         ;
 $A72E CALL $AC69     ;
 $A731 LD A,C         ;
 $A732 LD ($A9C2),A   ;
 $A735 LD B,(IX+$02)  ;
 $A738 JP $A75E       ;
*$A73B EX DE,HL       ;
 $A73C LD D,(IX+$07)  ;
 $A73F LD E,(IX+$06)  ;
 $A742 XOR A          ;
 $A743 LD C,A         ;
 $A744 CALL $AC69     ;
 $A747 LD A,C         ;
 $A748 LD ($A9C1),A   ;
 $A74B POP HL         ;
 $A74C LD D,(IX+$04)  ;
 $A74F LD E,(IX+$03)  ;
 $A752 XOR A          ;
 $A753 LD C,A         ;
 $A754 CALL $AC69     ;
 $A757 LD A,C         ;
 $A758 LD ($A9C2),A   ;
 $A75B LD B,(IX+$08)  ;
*$A75E LD A,(IX+$05)  ;
 $A761 SLA B          ;
 $A763 RLA            ;
 $A764 RLA            ;
 $A765 LD ($A9C3),A   ;
 $A768 POP HL         ;
 $A769 POP DE         ;
 $A76A XOR A          ;
 $A76B LD C,A         ;
 $A76C CALL $AC69     ;
 $A76F LD H,C         ;
 $A770 LD A,C         ;
 $A771 LD ($A6DE),A   ;
 $A774 LD E,C         ;
 $A775 LD A,($A9C2)   ;
 $A778 LD C,A         ;
 $A779 SUB H          ;
 $A77A JR C,$A781     ;
 $A77C SUB $40        ;
 $A77E JP NC,$A8DE    ;
*$A781 LD A,($A9C1)   ;
 $A784 LD B,A         ;
 $A785 SUB H          ;
 $A786 JR C,$A78D     ;
 $A788 SUB $80        ;
 $A78A JP NC,$A8DE    ;
*$A78D LD A,B         ;
 $A78E ADD A,C        ;
 $A78F LD D,A         ;
 $A790 JR C,$A7D2     ;
 $A792 SUB E          ;
 $A793 JR NC,$A7A3    ;
 $A795 LD A,(IX+$07)  ;
 $A798 CP $2C         ;
 $A79A JR NC,$A7A3    ;
 $A79C POP HL         ;
 $A79D POP AF         ;
 $A79E PUSH AF        ;
 $A79F PUSH HL        ;
 $A7A0 LD ($9C97),A   ;
*$A7A3 BIT 6,(IX+$20) ;
 $A7A7 JR Z,$A7D2     ;
 $A7A9 BIT 2,(IX+$21) ;
 $A7AD JR Z,$A7D2     ;
 $A7AF LD A,($70E3)   ;
 $A7B2 BIT 1,A        ;
 $A7B4 LD A,(IX+$0E)  ;
 $A7B7 LD E,(IX+$07)  ;
 $A7BA JR Z,$A7C2     ;
 $A7BC LD A,(IX+$0A)  ;
 $A7BF LD E,(IX+$01)  ;
*$A7C2 LD B,A         ;
 $A7C3 AND $7F        ;
 $A7C5 CP $40         ;
 $A7C7 JR C,$A7D2     ;
 $A7C9 LD A,D         ;
 $A7CA CP $20         ;
 $A7CC JR NC,$A7D2    ;
 $A7CE RES 5,(IX+$26) ;
*$A7D2 BIT 4,(IX+$20) ;
 $A7D6 JP NZ,$A8AC    ;
 $A7D9 LD A,($9CB2)   ;
 $A7DC DEC A          ;
 $A7DD JR NZ,$A7E6    ;
 $A7DF BIT 6,(IX+$26) ;
 $A7E3 JP NZ,$A8DE    ;
*$A7E6 LD HL,($A9B8)  ;
 $A7E9 LD A,H         ;
 $A7EA CP (IY+$0B)    ;
 $A7ED JR C,$A84D     ;
 $A7EF LD A,($A9C1)   ;
 $A7F2 CP $7F         ;
 $A7F4 JP NC,$A8DE    ;
 $A7F7 LD C,A         ;
 $A7F8 LD A,($A9C2)   ;
 $A7FB CP $3F         ;
 $A7FD JP NC,$A8DE    ;
 $A800 LD B,A         ;
 $A801 LD A,($70E3)   ;
 $A804 BIT 0,A        ;
 $A806 LD A,($A9C3)   ;
 $A809 JR Z,$A80D     ;
 $A80B XOR $02        ;
*$A80D LD D,A         ;
 $A80E BIT 1,D        ;
 $A810 JR NZ,$A818    ;
 $A812 LD A,C         ;
 $A813 ADD A,$7F      ;
 $A815 LD C,A         ;
 $A816 JR $A81C       ;
*$A818 LD A,$7F       ;
 $A81A SUB C          ;
 $A81B LD C,A         ;
*$A81C BIT 0,D        ;
 $A81E JR Z,$A826     ;
 $A820 LD A,B         ;
 $A821 ADD A,$3F      ;
 $A823 LD B,A         ;
 $A824 JR $A82A       ;
*$A826 LD A,$3F       ;
 $A828 SUB B          ;
 $A829 LD B,A         ;
*$A82A CALL $A83C     ;
 $A82D INC B          ;
 $A82E CALL $A83C     ;
 $A831 INC C          ;
 $A832 CALL $A83C     ;
 $A835 DEC B          ;
 $A836 CALL $A83C     ;
 $A839 JP $A8DE       ;

; Routine at A83C
;
; Used by the routine at #R$A6DF.
c$A83C LD A,B        ;
 $A83D CALL $22B1    ;
 $A840 LD D,A        ;
 $A841 INC D         ;
 $A842 LD A,$01      ;
*$A844 RRCA          ;
 $A845 DEC D         ;
 $A846 JR NZ,$A844   ;
 $A848 SET 7,H       ;
 $A84A XOR (HL)      ;
 $A84B LD (HL),A     ;
 $A84C RET           ;

; Draw ship part 2
;
; Used by the routine at #R$A6DF.
;
; IX Address of ship structure
; IY Address of blueprint
@label=draw_ship_and_laser
c$A84D PUSH IY        ;
 $A84F CALL $AECC     ;
 $A852 POP IY         ;
 $A854 LD HL,($A9B8)  ;
 $A857 ADD HL,HL      ;
 $A858 LD B,$1F       ;
 $A85A JR C,$A861     ;
 $A85C LD A,H         ;
 $A85D CP B           ;
 $A85E JR NC,$A861    ;
 $A860 LD B,H         ;
*$A861 LD A,B         ;
 $A862 SUB $02        ;
 $A864 JR NC,$A867    ;
 $A866 XOR A          ;
*$A867 LD ($A9B8),A   ;
 $A86A LD A,$FD       ;
 $A86C LD ($A9BA),A   ;
 $A86F CALL $BCD4     ;
 $A872 CALL $A9C9     ;
 $A875 CALL $AE01     ;
 $A878 BIT 3,(IX+$20) ; Test a bit on the ship, should it fire?
 $A87C RET Z          ; Return if not set
 $A87D LD A,(IY+$14)  ; Gun vertex
 $A880 CALL $AE50     ; Get coordinates
 $A883 LD C,A         ;
; This entry point is used by the routine at #R$A8DE.
*$A884 CALL $B799     ; Random number
 $A887 LD L,A         ; {Calculate coordinates of other end of line
 $A888 SUB $FF        ;
 $A88A NEG            ;
 $A88C LD H,A         ;
 $A88D LD A,C         ;
 $A88E CPL            ;
 $A88F AND $03        ;
 $A891 SLA C          ;
 $A893 SLA C          ;
 $A895 OR C           ;
 $A896 LD C,A         ; }
 $A897 LD A,($B348)   ; {Set some temporary flag
 $A89A PUSH AF        ;
 $A89B SET 7,A        ;
 $A89D LD ($B348),A   ; }
 $A8A0 CALL $B044     ; Draw laser?
 $A8A3 POP AF         ; {Revert flag
 $A8A4 LD ($B348),A   ; }
 $A8A7 RES 3,(IX+$20) ; Reset bit on the ship
 $A8AB RET            ;

; Routine at A8AC
;
; Used by the routine at #R$A6DF.
c$A8AC LD A,($A9C1)   ;
 $A8AF LD (IX+$1C),A  ;
 $A8B2 LD A,($A9C2)   ;
 $A8B5 LD (IX+$1D),A  ;
 $A8B8 LD A,($A6DE)   ;
 $A8BB LD (IX+$1F),A  ;
 $A8BE LD A,($70E3)   ;
 $A8C1 BIT 0,A        ;
 $A8C3 LD A,($A9C3)   ;
 $A8C6 JR Z,$A8CA     ;
 $A8C8 XOR $02        ;
*$A8CA LD C,A         ;
 $A8CB XOR A          ;
 $A8CC RR C           ;
 $A8CE RLA            ;
 $A8CF RR C           ;
 $A8D1 RLA            ;
 $A8D2 XOR $03        ;
 $A8D4 ADD A,$0C      ;
 $A8D6 LD (IX+$1E),A  ;
 $A8D9 SET 5,(IX+$20) ;
 $A8DD RET            ;

; Routine at A8DE
;
; Used by the routine at #R$A6DF.
c$A8DE BIT 3,(IX+$20) ;
 $A8E2 RET Z          ;
 $A8E3 LD A,($A9C1)   ;
 $A8E6 LD D,A         ;
 $A8E7 LD A,($A9C2)   ;
 $A8EA LD E,A         ;
 $A8EB LD A,($70E3)   ;
 $A8EE BIT 0,A        ;
 $A8F0 LD A,($A9C3)   ;
 $A8F3 JR Z,$A8F7     ;
 $A8F5 XOR $02        ;
*$A8F7 LD C,A         ;
 $A8F8 JR $A884       ;

; Data block at A8FA
@label=data_at_A8FA
b$A8FA DEFB $00,$00,$00
 $A8FD DEFB $00,$00,$00
 $A900 DEFB $00,$00,$00
 $A903 DEFB $00,$00,$00
 $A906 DEFB $00,$00,$00
 $A909 DEFB $00,$00,$00
 $A90C DEFB $00,$00,$00
 $A90F DEFB $00,$00,$00
 $A912 DEFB $00,$00,$00
 $A915 DEFB $00,$00,$00
 $A918 DEFB $00,$00,$00
 $A91B DEFB $00,$00,$00
 $A91E DEFB $00,$00,$00
 $A921 DEFB $00,$00,$00
 $A924 DEFB $00,$00,$00
 $A927 DEFB $00,$00,$00
 $A92A DEFB $00,$00,$00
 $A92D DEFB $00,$00,$00
 $A930 DEFB $00,$00,$00
 $A933 DEFB $00,$00,$00
 $A936 DEFB $00,$00,$00
 $A939 DEFB $00,$00,$00
 $A93C DEFB $00,$00,$00
 $A93F DEFB $00,$00,$00
 $A942 DEFB $00,$00,$00
 $A945 DEFB $00,$00,$00
 $A948 DEFB $00,$00,$00
 $A94B DEFB $00,$00,$00
 $A94E DEFB $00,$00,$00
 $A951 DEFB $00,$00,$00
 $A954 DEFB $00,$00,$00
 $A957 DEFB $00,$00,$00
 $A95A DEFB $00,$00,$00
 $A95D DEFB $00,$00,$00
 $A960 DEFB $00,$00,$00
 $A963 DEFB $00,$00,$00
 $A966 DEFB $00,$00,$00
 $A969 DEFB $00,$00,$00
 $A96C DEFB $00,$00,$00
 $A96F DEFB $00,$00,$00
 $A972 DEFB $00,$00,$00
 $A975 DEFB $00,$00,$00
 $A978 DEFB $00,$00,$00
 $A97B DEFB $00,$00,$00
 $A97E DEFB $00,$00,$00
 $A981 DEFB $00,$00,$00

; Face visibility table
@label=face_visibility_table
b$A984 DEFB $01,$01,$01,$01,$01,$01,$01,$01
 $A98C DEFB $01,$01,$01,$01,$01,$01,$01,$01

; Calculated values for ship
;
; #TABLE
; { =h Offset | =h Value }
; { $00 | ? }
; { $01 | nosev_yz ⋅ roofv_zy }
; { $02 | ? }
; { $03 | roofv_x_hi }
; { $04 | ? }
; { $05 | nosev_x_hi }
; { $06 | ? }
; { $07 | nosev_zx ⋅ roofv_xz }
; { $08 | ? }
; { $09 | roofv_y_hi }
; { $0A | ? }
; { $0B | nosev_y_hi }
; { $0C | ? }
; { $0D | nosev_xy ⋅ roofv_yx }
; { $0E | ? }
; { $0F | roofv_z_hi }
; { $10 | ? }
; { $11 | nosev_z_hi }
; { $12 | Magn face normal_x * nosev_yz ⋅ roofv_zy }
; { $13 | Sign face normal_x * nosev_yz ⋅ roofv_zy }
; { $14 | Magn face normal_y * roofv_x_hi }
; { $15 | Sign face normal_y * roofv_x_hi }
; { $16 | Magn face normal_z * nosev_x_hi }
; { $17 | Sign face normal_z * nosev_x_hi }
; { $18 | Magn face normal_x * nosev_zx ⋅ roofv_xz }
; { $19 | Sign face normal_x * nosev_zx ⋅ roofv_xz }
; { $1A | Magn face normal_y * roofv_y_hi }
; { $1B | Sign face normal_y * roofv_y_hi }
; { $1C | Magn face normal_z * nosev_y_hi }
; { $1D | Sign face normal_z * nosev_y_hi }
; { $1E | Magn face normal_x * nosev_xy ⋅ roofv_yx }
; { $1D | Sign face normal_x * nosev_xy ⋅ roofv_yx }
; { $20 | Magn face normal_y * roofv_z_hi }
; { $21 | Sign face normal_y * roofv_z_hi }
; { $22 | Magn face normal_z * nosev_z_hi }
; { $23 | Sign face normal_z * nosev_z_hi }
; TABLE#
;
@label=ship_calculations
b$A994 DEFB $7E,$32,$81,$8D,$F3,$24
 $A99A DEFB $81,$8D,$7E,$32,$F3,$24
 $A9A0 DEFB $F2,$A4,$F2,$A4,$F3,$24
 $A9A6 DEFB $00,$00,$00,$00,$00,$00
 $A9AC DEFB $00,$00,$00,$00,$00,$00
 $A9B2 DEFB $00,$00,$00,$00,$00,$00

; Word at A9B8
@label=ship_distance
w$A9B8 DEFW $0000

; Byte at A9BA
@label=byte_at_A9BA
b$A9BA DEFB $01

; Word at A9BB
@label=word_at_A9BB
w$A9BB DEFW $0000

; Word at A9BD
@label=word_at_A9BD
w$A9BD DEFW $0000

; Word at A9BF
@label=word_at_A9BF
w$A9BF DEFW $0000

; Byte at A9C1
@label=byte_at_A9C1
b$A9C1 DEFB $00

; Byte at A9C2
@label=byte_at_A9C2
b$A9C2 DEFB $00

; Byte at A9C3
;
; Used by the routine at #R$E107.
@label=byte_at_A9C3
b$A9C3 DEFB $00

; Byte at A9C4
@label=byte_at_A9C4
b$A9C4 DEFB $00

; Byte at A9C5
@label=byte_at_A9C5
b$A9C5 DEFB $00

; Byte at A9C6
@label=byte_at_A9C6
b$A9C6 DEFB $00

; Byte at A9C7
@label=byte_at_A9C7
b$A9C7 DEFB $00

; Byte at A9C8
@label=byte_at_A9C8
b$A9C8 DEFB $00

; Routine at A9C9
;
; Used by the routine at #R$A84D.
@label=project_vertices
c$A9C9 PUSH IY       ;
 $A9CB PUSH IY       ;
 $A9CD LD A,(IY+$03) ;
 $A9D0 EX (SP),IX    ;
 $A9D2 LD D,(IY+$0D) ;
 $A9D5 LD E,(IY+$0C) ;
 $A9D8 ADD IX,DE     ;
 $A9DA LD IY,$A994   ;
; This entry point is used by the routine at #R$ACA2.
*$A9DE PUSH AF       ;
 $A9DF LD A,($A9BA)  ;
 $A9E2 ADD A,$03     ;
 $A9E4 LD ($A9BA),A  ;
 $A9E7 LD A,(IX+$03) ;
 $A9EA AND $1F       ;
 $A9EC CP $1F        ;
 $A9EE JR Z,$A9F7    ;
 $A9F0 LD B,A        ;
 $A9F1 LD A,($A9B8)  ;
 $A9F4 CP B          ;
 $A9F5 JR NC,$AA08   ;
*$A9F7 LD A,(IX+$04) ;
 $A9FA CALL $AA10    ;
 $A9FD JR NZ,$AA05   ;
 $A9FF LD A,(IX+$05) ;
 $AA02 CALL $AA10    ;
*$AA05 JP NZ,$ACA2   ;
*$AA08 INC A         ;
 $AA09 LD ($A9C8),A  ;
 $AA0C POP AF        ;
 $AA0D JP $ADF2      ;

; Routine at AA10
;
; Used by the routines at #R$A9C9 and #R$AE01.
;
; A Contains the numbers of the two faces for an edge
@label=check_face_visible
c$AA10 LD B,A        ; {Isolate face 1 number in B
 $AA11 SRL B         ;
 $AA13 SRL B         ;
 $AA15 SRL B         ;
 $AA17 SRL B         ; }
 $AA19 AND $0F       ; Isolate face 2 number in A
 $AA1B CALL $AA20    ;
 $AA1E RET NZ        ; Return if ?
 $AA1F LD A,B        ; Do the same for face 1
*$AA20 LD HL,$A984   ; Face visibility table
 $AA23 ADD A,L       ; {HL += A
 $AA24 LD L,A        ;
 $AA25 JR NC,$AA28   ;
 $AA27 INC H         ; }
*$AA28 LD A,(HL)     ; Get byte from table
 $AA29 AND A         ; Check if zero
 $AA2A RET           ;

; Routine at AA2B
;
; Used by the routine at #R$ACA2.
c$AA2B LD A,($A9C8)  ;
 $AA2E AND A         ;
 $AA2F JR NZ,$AA8B   ;
 $AA31 LD A,(IX+$00) ;
 $AA34 CP (IX-$06)   ;
 $AA37 JR NZ,$AA8B   ;
 $AA39 LD A,(IX+$01) ;
 $AA3C CP (IX-$05)   ;
 $AA3F JR NZ,$AA8B   ;
 $AA41 LD A,(IX+$02) ;
 $AA44 CP (IX-$04)   ;
 $AA47 JR NZ,$AA8B   ;
 $AA49 LD A,(IX+$03) ;
 $AA4C XOR (IX-$03)  ;
 $AA4F LD B,A        ;
 $AA50 LD L,(IY+$12) ;
 $AA53 LD H,(IY+$13) ;
 $AA56 LD E,(IY+$14) ;
 $AA59 LD D,(IY+$15) ;
 $AA5C XOR H         ;
 $AA5D AND $80       ;
 $AA5F LD H,A        ;
 $AA60 LD (IY+$13),H ;
 $AA63 RL B          ;
 $AA65 LD A,B        ;
 $AA66 XOR D         ;
 $AA67 AND $80       ;
 $AA69 LD D,A        ;
 $AA6A LD (IY+$15),D ;
 $AA6D CALL $AAFB    ;
 $AA70 LD L,A        ;
 $AA71 LD E,(IY+$16) ;
 $AA74 LD D,(IY+$17) ;
 $AA77 LD A,B        ;
 $AA78 RLA           ;
 $AA79 XOR D         ;
 $AA7A AND $80       ;
 $AA7C LD D,A        ;
 $AA7D LD (IY+$17),D ;
 $AA80 CALL $AAFB    ;
 $AA83 LD L,A        ;
 $AA84 LD DE,$0006   ;
 $AA87 ADD IY,DE     ;
 $AA89 JR $AAE3      ;
*$AA8B LD B,(IX+$00) ;
 $AA8E CALL $AB1E    ;
 $AA91 LD A,(IX+$03) ;
 $AA94 XOR (IY+$01)  ;
 $AA97 RLA           ;
 $AA98 RR H          ;
 $AA9A LD (IY+$12),L ;
 $AA9D LD (IY+$13),H ;
 $AAA0 EX DE,HL      ;
 $AAA1 INC IY        ;
 $AAA3 INC IY        ;
 $AAA5 LD B,(IX+$01) ;
 $AAA8 CALL $AB1E    ;
 $AAAB LD A,(IX+$03) ;
 $AAAE RLA           ;
 $AAAF XOR (IY+$01)  ;
 $AAB2 RLA           ;
 $AAB3 RR H          ;
 $AAB5 LD (IY+$12),L ;
 $AAB8 LD (IY+$13),H ;
 $AABB CALL $AAFB    ;
 $AABE LD L,A        ;
 $AABF EX DE,HL      ;
 $AAC0 INC IY        ;
 $AAC2 INC IY        ;
 $AAC4 LD B,(IX+$02) ;
 $AAC7 CALL $AB1E    ;
 $AACA LD A,(IX+$03) ;
 $AACD RLA           ;
 $AACE RLA           ;
 $AACF XOR (IY+$01)  ;
 $AAD2 RLA           ;
 $AAD3 RR H          ;
 $AAD5 LD (IY+$12),L ;
 $AAD8 LD (IY+$13),H ;
 $AADB CALL $AAFB    ;
 $AADE LD L,A        ;
 $AADF INC IY        ;
 $AAE1 INC IY        ;
*$AAE3 LD A,($A9C7)  ;
 $AAE6 LD B,A        ;
 $AAE7 XOR A         ;
 $AAE8 LD C,H        ;
 $AAE9 RES 7,H       ;
*$AAEB SRL H         ;
 $AAED RR L          ;
 $AAEF RRA           ;
 $AAF0 DJNZ $AAEB    ;
 $AAF2 JR NC,$AAF5   ;
 $AAF4 INC HL        ;
*$AAF5 BIT 7,C       ;
 $AAF7 RET Z         ;
 $AAF8 SET 7,H       ;
 $AAFA RET           ;

; Routine at AAFB
;
; Used by the routines at #R$A6AC, #R$AA2B, #R$ABC0 and #R$AC01.
;
; I:H Sign 1
; I:L Magnitude 1
; I:D Sign 2
; I:E Magnitude 2
; O:H Sign of result
; O:A Added magnitude
@label=add_sign_mag_bytes
c$AAFB LD A,H        ; Sign 1
 $AAFC XOR D         ; XOR sign 2
 $AAFD RLA           ;
 $AAFE JR C,$AB03    ; Jump if signs are different
 $AB00 LD A,L        ; A = L
 $AB01 ADD A,E       ; A = L + E
 $AB02 RET           ;
*$AB03 LD A,L        ; A = L
 $AB04 SUB E         ; A = L - E
 $AB05 RET NC        ; Return if L >= E
 $AB06 NEG           ; A = E - L
 $AB08 AND A         ; Clear carry
 $AB09 LD H,D        ; Sign 1 = Sign 2
 $AB0A RET           ;

; Multiply MSB
;
; Used by the routines at #R$A0FD, #R$A1EA, #R$A69D, #R$AB1E, #R$AC01, #R$AE8A
; and #R$BD95.
; .
; Calculate A = B * C / 256 using square lookup table.
;
; I:B First number
; I:C Second number
; O:A B * C / 256
@label=mult_b_c_msb
c$AB0B LD A,B        ; A = B
 $AB0C SUB C         ; A = B - C
 $AB0D JR NC,$AB11   ;
 $AB0F NEG           ; A = ABS(B - C)
*$AB11 SRL A         ; A = ABS(B - C) / 2
 $AB13 LD H,$BF      ; H = MSB of square table at #R$BF00
 $AB15 LD L,A        ; L = ABS(B - C) / 2
 $AB16 LD D,(HL)     ; D = ((B - C) / 2)^2 / 256
 $AB17 LD A,B        ; A = B
 $AB18 ADD A,C       ; A = B + C
 $AB19 RRA           ; A = (B + C) / 2
 $AB1A LD L,A        ; L = (B + C) / 2
 $AB1B LD A,(HL)     ; A = ((B + C) / 2)^2 / 256
 $AB1C SUB D         ; A = (((B + C) / 2)^2 - ((B - C) / 2)^2) / 256 = B * C /
                     ; 256
 $AB1D RET           ;

; Routine at AB1E
;
; Used by the routine at #R$AA2B.
c$AB1E LD A,($A9C7)  ;
*$AB21 SLA B         ;
 $AB23 DEC A         ;
 $AB24 JR NZ,$AB21   ;
 $AB26 LD C,(IY+$01) ;
 $AB29 RES 7,C       ;
 $AB2B PUSH DE       ;
 $AB2C CALL $AB0B    ;
 $AB2F LD L,A        ;
 $AB30 LD H,$00      ;
 $AB32 POP DE        ;
 $AB33 RET           ;

; Multiply
;
; Used by the routines at #R$9E98, #R$9F68, #R$A1EA, #R$AF22, #R$AF64, #R$B2F0
; and #R$BD95.
; .
; Calculate HL = B * C using square lookup table.
;
; I:B First number
; I:C Second number
; O:HL B * C
@label=mult_b_c
c$AB34 LD A,B        ; A = B
 $AB35 SUB C         ; A = B - C
 $AB36 JR NC,$AB3A   ;
 $AB38 NEG           ; A = ABS(B - C)
*$AB3A SRL A         ; A = ABS(B - C) / 2
 $AB3C LD H,$BE      ; H = MSB of square table at #R$BE00
 $AB3E LD L,A        ; L = ABS(B - C) / 2
 $AB3F LD E,(HL)     ; {DE = ((B - C) / 2)^2
 $AB40 INC H         ;
 $AB41 LD D,(HL)     ; }
 $AB42 DEC H         ;
 $AB43 LD A,B        ; A = B
 $AB44 ADD A,C       ; A = B + C
 $AB45 RRA           ; A = (B + C) / 2
 $AB46 LD L,A        ; L = (B + C) / 2
 $AB47 LD A,(HL)     ; {HL = ((B + C) / 2)^2
 $AB48 INC H         ;
 $AB49 LD H,(HL)     ;
 $AB4A LD L,A        ; }
 $AB4B AND A         ; Clear carry flag
 $AB4C SBC HL,DE     ; HL = ((B + C) / 2)^2 - ((B - C) / 2)^2 = B^2/4 + C^2/4 +
                     ; 2B * C/4 - (B^2/4 + C^2/4 - 2B * C/4) = 4B * C/4 = B * C
 $AB4E RET           ;

; Routine at AB4F
;
; Used by the routine at #R$ACA2.
c$AB4F LD C,D        ;
 $AB50 RL E          ;
 $AB52 RL D          ;
 $AB54 LD A,B        ;
 $AB55 XOR C         ;
 $AB56 JR NZ,$AB5B   ;
 $AB58 ADD HL,DE     ;
 $AB59 LD A,B        ;
 $AB5A RET           ;
*$AB5B SBC HL,DE     ;
 $AB5D JR NC,$AB66   ;
 $AB5F ADD HL,DE     ;
 $AB60 EX DE,HL      ;
 $AB61 AND A         ;
 $AB62 SBC HL,DE     ;
 $AB64 LD A,C        ;
 $AB65 RET           ;
*$AB66 LD A,H        ;
 $AB67 OR L          ;
 $AB68 LD A,C        ;
 $AB69 RET Z         ;
 $AB6A POP DE        ;
 $AB6B POP AF        ;
 $AB6C NEG           ;
 $AB6E PUSH AF       ;
 $AB6F PUSH DE       ;
 $AB70 DEC HL        ;
 $AB71 LD A,B        ;
 $AB72 RET           ;

; Routine at AB73
;
; Used by the routine at #R$ACA2.
c$AB73 LD A,($A9C8)  ;
 $AB76 AND A         ;
 $AB77 PUSH IX       ;
 $AB79 JR NZ,$AB9F   ;
 $AB7B LD B,$03      ;
*$AB7D LD A,(IX+$00) ;
 $AB80 CP (IX-$06)   ;
 $AB83 JR NZ,$AB9F   ;
 $AB85 INC IX        ;
 $AB87 DJNZ $AB7D    ;
 $AB89 POP IX        ;
 $AB8B CALL $ABC0    ;
 $AB8E LD ($A9BB),HL ;
 $AB91 CALL $ABC0    ;
 $AB94 LD ($A9BD),HL ;
 $AB97 CALL $ABC0    ;
 $AB9A LD ($A9BF),HL ;
 $AB9D JR $ABB3      ;
*$AB9F POP IX        ;
 $ABA1 CALL $AC01    ;
 $ABA4 LD ($A9BB),HL ;
 $ABA7 CALL $AC01    ;
 $ABAA LD ($A9BD),HL ;
 $ABAD CALL $AC01    ;
 $ABB0 LD ($A9BF),HL ;
*$ABB3 XOR A         ;
 $ABB4 LD ($AC9F),A  ;
 $ABB7 LD ($ACA0),A  ;
 $ABBA LD ($ACA1),A  ;
 $ABBD JP $ACDF      ;

; Routine at ABC0
;
; Used by the routine at #R$AB73.
c$ABC0 LD A,(IX+$03) ;
 $ABC3 XOR (IX-$03)  ;
 $ABC6 LD B,A        ;
 $ABC7 LD L,(IY+$12) ;
 $ABCA LD H,(IY+$13) ;
 $ABCD LD E,(IY+$14) ;
 $ABD0 LD D,(IY+$15) ;
 $ABD3 XOR H         ;
 $ABD4 AND $80       ;
 $ABD6 LD H,A        ;
 $ABD7 LD (IY+$13),H ;
 $ABDA RL B          ;
 $ABDC LD A,B        ;
 $ABDD XOR D         ;
 $ABDE AND $80       ;
 $ABE0 LD D,A        ;
 $ABE1 LD (IY+$15),D ;
 $ABE4 CALL $AAFB    ;
 $ABE7 LD L,A        ;
 $ABE8 LD E,(IY+$16) ;
 $ABEB LD D,(IY+$17) ;
 $ABEE LD A,B        ;
 $ABEF RLA           ;
 $ABF0 XOR D         ;
 $ABF1 AND $80       ;
 $ABF3 LD D,A        ;
 $ABF4 LD (IY+$17),D ;
 $ABF7 CALL $AAFB    ;
 $ABFA LD L,A        ;
 $ABFB LD DE,$0006   ;
 $ABFE ADD IY,DE     ;
 $AC00 RET           ;

; Routine at AC01
;
; Used by the routines at #R$AB73 and #R$BDB4.
; Comments are for call with offset 0
;
; IX Address of face structure
; IY Table of ship calculations, offset 0, 6, 12
; O:HL sign-magn normal_x * nosev_yz ⋅ roofv_zy + normal_y * roofv_x_hi + normal_z * nosev_x_hi
; O:IY IY + 6
@label=calculate_normals
c$AC01 LD B,(IX+$00) ; Face normal_x
 $AC04 LD C,(IY+$01) ; nosev_yz ⋅ roofv_zy
 $AC07 RES 7,C       ; Reset sign
 $AC09 CALL $AB0B    ; A = B * C / 256 = normal_x * nosev_yz ⋅ roofv_zy
 $AC0C LD L,A        ; L = normal_x * nosev_yz ⋅ roofv_zy
 $AC0D LD A,(IX+$03) ; Face sign bits
 $AC10 XOR (IY+$01)  ; Combine with sign of nosev_yz ⋅ roofv_zy
 $AC13 AND $80       ; Isolate sign
 $AC15 LD H,A        ; H = sign
 $AC16 LD (IY+$12),L ; Store magnitude
 $AC19 LD (IY+$13),H ; Store sign
 $AC1C EX DE,HL      ; DE = sign-magn normal_x * nosev_yz ⋅ roofv_zy
 $AC1D LD B,(IX+$01) ; Face normal_y
 $AC20 LD C,(IY+$03) ; roofv_x_hi
 $AC23 RES 7,C       ; Reset sign
 $AC25 PUSH DE       ;
 $AC26 CALL $AB0B    ; A = B * C / 256 = normal_y * roofv_x_hi
 $AC29 POP DE        ;
 $AC2A LD L,A        ; L = normal_y * roofv_x_hi
 $AC2B LD A,(IX+$03) ; Face sign bits
 $AC2E RLA           ; Shift sign bit for y into bit 7
 $AC2F XOR (IY+$03)  ; Combine with sign of roofv_x_hi
 $AC32 AND $80       ; Isolate sign
 $AC34 LD H,A        ; H = sign
 $AC35 LD (IY+$14),L ; Store magnitude
 $AC38 LD (IY+$15),H ; Store sign
 $AC3B CALL $AAFB    ; add_sign_mag_bytes HA = HL + DE
 $AC3E LD L,A        ; HL = sign-magn normal_x * nosev_yz ⋅ roofv_zy + normal_y * roofv_x_hi
 $AC3F EX DE,HL      ; DE = ...
 $AC40 LD B,(IX+$02) ; Face normal_z
 $AC43 LD C,(IY+$05) ; nosev_x_hi
 $AC46 RES 7,C       ; Reset sign
 $AC48 PUSH DE       ;
 $AC49 CALL $AB0B    ; A = B * C / 256 = normal_z * nosev_x_hi
 $AC4C POP DE        ;
 $AC4D LD L,A        ; L = normal_z * nosev_x_hi
 $AC4E LD A,(IX+$03) ; Face sign bits
 $AC51 RLA           ; {Shift sign bit for z into bit 7
 $AC52 RLA           ; }
 $AC53 XOR (IY+$05)  ; Combine with sign bit for nosev_x_hi
 $AC56 AND $80       ; Isolate sign
 $AC58 LD H,A        ; H = sign
 $AC59 LD (IY+$16),L ; Store magnitude
 $AC5C LD (IY+$17),H ; Store sign
 $AC5F CALL $AAFB    ; add_sign_mag_bytes HA = HL + DE
 $AC62 LD L,A        ; HL = sign-magn normal_x * nosev_yz ⋅ roofv_zy + normal_y * roofv_x_hi + normal_z * nosev_x_hi
 $AC63 LD DE,$0006   ; {Change offset of calculations
 $AC66 ADD IY,DE     ; }
 $AC68 RET           ;

; Routine at AC69
;
; Used by the routines at #R$A6DF and #R$ACA2.
c$AC69 LD B,$09      ;
*$AC6B DEC B         ;
 $AC6C JR Z,$AC84    ;
 $AC6E RLA           ;
 $AC6F ADC HL,HL     ;
 $AC71 JR C,$AC80    ;
 $AC73 RL C          ;
 $AC75 RL E          ;
 $AC77 RL D          ;
 $AC79 JR NC,$AC6B   ;
 $AC7B RR D          ;
 $AC7D RR E          ;
 $AC7F SCF           ;
*$AC80 RR H          ;
 $AC82 RR L          ;
*$AC84 LD A,D        ;
 $AC85 LD C,$FF      ;
 $AC87 CP H          ;
 $AC88 RET NC        ;
 $AC89 LD B,H        ;
 $AC8A DEC C         ;
; This entry point is used by the routine at #R$B2FE.
*$AC8B SLA E         ;
 $AC8D RLA           ;
 $AC8E JR C,$AC98    ;
 $AC90 CP B          ;
 $AC91 JR NC,$AC98   ;
 $AC93 SLA C         ;
 $AC95 RET NC        ;
 $AC96 JR $AC8B      ;
*$AC98 SUB B         ;
 $AC99 SCF           ;
 $AC9A RL C          ;
 $AC9C RET NC        ;
 $AC9D JR $AC8B      ;

; Data block at AC9F
@label=byte_at_AC9F
b$AC9F DEFB $00

; Data block at ACA0
@label=byte_at_ACA0
b$ACA0 DEFB $00

; Data block at ACA1
@label=byte_at_ACA1
b$ACA1 DEFB $00

; Routine at ACA2
;
; Used by the routine at #R$A9C9.
c$ACA2 PUSH IY       ;
 $ACA4 LD A,($A9B8)  ;
 $ACA7 CP $04        ;
 $ACA9 JP NC,$AB73   ;
 $ACAC LD A,(IX+$00) ;
 $ACAF OR (IX+$01)   ;
 $ACB2 OR (IX+$02)   ;
 $ACB5 LD B,$FF      ;
*$ACB7 INC B         ;
 $ACB8 SLA A         ;
 $ACBA JR NC,$ACB7   ;
 $ACBC LD A,B        ;
 $ACBD LD ($A9C7),A  ;
 $ACC0 AND A         ;
 $ACC1 JP Z,$AB73    ;
 $ACC4 CALL $AA2B    ;
 $ACC7 LD ($AC9F),A  ;
 $ACCA LD ($A9BB),HL ;
 $ACCD CALL $AA2B    ;
 $ACD0 LD ($ACA0),A  ;
 $ACD3 LD ($A9BD),HL ;
 $ACD6 CALL $AA2B    ;
 $ACD9 LD ($ACA1),A  ;
 $ACDC LD ($A9BF),HL ;
; This entry point is used by the routine at #R$AB73.
*$ACDF XOR A         ;
 $ACE0 LD ($A9C8),A  ;
 $ACE3 POP IY        ;
 $ACE5 POP HL        ;
 $ACE6 EX (SP),IX    ;
 $ACE8 PUSH HL       ;
 $ACE9 LD L,(IX+$00) ;
 $ACEC LD H,(IX+$01) ;
 $ACEF LD B,(IX+$02) ;
 $ACF2 LD DE,($A9BB) ;
 $ACF6 LD A,($AC9F)  ;
 $ACF9 RLA           ;
 $ACFA PUSH AF       ;
 $ACFB CALL $AB4F    ;
 $ACFE LD ($A9BB),HL ;
 $AD01 LD ($A9C4),A  ;
 $AD04 POP AF        ;
 $AD05 LD ($AC9F),A  ;
 $AD08 LD L,(IX+$03) ;
 $AD0B LD H,(IX+$04) ;
 $AD0E LD B,(IX+$05) ;
 $AD11 LD DE,($A9BD) ;
 $AD15 LD A,($ACA0)  ;
 $AD18 RLA           ;
 $AD19 PUSH AF       ;
 $AD1A CALL $AB4F    ;
 $AD1D LD ($A9BD),HL ;
 $AD20 LD ($A9C5),A  ;
 $AD23 POP AF        ;
 $AD24 LD ($ACA0),A  ;
 $AD27 LD L,(IX+$06) ;
 $AD2A LD H,(IX+$07) ;
 $AD2D LD B,(IX+$08) ;
 $AD30 LD DE,($A9BF) ;
 $AD34 LD A,($ACA1)  ;
 $AD37 RLA           ;
 $AD38 PUSH AF       ;
 $AD39 CALL $AB4F    ;
 $AD3C LD ($A9BF),HL ;
 $AD3F LD ($A9C6),A  ;
 $AD42 POP AF        ;
 $AD43 LD ($ACA1),A  ;
 $AD46 LD A,($70E3)  ;
 $AD49 BIT 1,A       ;
 $AD4B JR NZ,$AD82   ;
 $AD4D LD DE,($A9BB) ;
 $AD51 LD A,($AC9F)  ;
 $AD54 LD C,A        ;
 $AD55 LD A,($ACA1)  ;
 $AD58 CALL $AC69    ;
 $AD5B LD A,C        ;
 $AD5C LD ($A9C1),A  ;
 $AD5F LD DE,($A9BD) ;
 $AD63 LD HL,($A9BF) ;
 $AD66 LD A,($ACA0)  ;
 $AD69 LD C,A        ;
 $AD6A LD A,($ACA1)  ;
 $AD6D CALL $AC69    ;
 $AD70 LD A,C        ;
 $AD71 LD ($A9C2),A  ;
 $AD74 LD A,($A9C4)  ;
 $AD77 RLA           ;
 $AD78 RL C          ;
 $AD7A LD A,($A9C6)  ;
 $AD7D RLA           ;
 $AD7E RL B          ;
 $AD80 JR $ADB5      ;
*$AD82 EX DE,HL      ;
 $AD83 LD HL,($A9BB) ;
 $AD86 LD A,($ACA1)  ;
 $AD89 LD C,A        ;
 $AD8A LD A,($AC9F)  ;
 $AD8D CALL $AC69    ;
 $AD90 LD A,C        ;
 $AD91 LD ($A9C1),A  ;
 $AD94 LD DE,($A9BD) ;
 $AD98 LD HL,($A9BB) ;
 $AD9B LD A,($ACA0)  ;
 $AD9E LD C,A        ;
 $AD9F LD A,($AC9F)  ;
 $ADA2 CALL $AC69    ;
 $ADA5 LD A,C        ;
 $ADA6 LD ($A9C2),A  ;
 $ADA9 LD A,($A9C4)  ;
 $ADAC RLA           ;
 $ADAD RL B          ;
 $ADAF LD A,($A9C6)  ;
 $ADB2 RLA           ;
 $ADB3 RL C          ;
*$ADB5 LD A,($A9C5)  ;
 $ADB8 RLA           ;
 $ADB9 RL C          ;
 $ADBB LD A,($70E3)  ;
 $ADBE BIT 0,A       ;
 $ADC0 LD A,C        ;
 $ADC1 JR Z,$ADC5    ;
 $ADC3 XOR $02       ;
*$ADC5 AND $03       ;
 $ADC7 LD ($A9C3),A  ;
 $ADCA LD A,($A9BA)  ;
 $ADCD LD HL,$A8FA   ;
 $ADD0 ADD A,L       ;
 $ADD1 JR NC,$ADD4   ;
 $ADD3 INC H         ;
*$ADD4 LD L,A        ;
 $ADD5 LD A,($A9C1)  ;
 $ADD8 LD (HL),A     ;
 $ADD9 INC HL        ;
 $ADDA LD A,($A9C2)  ;
 $ADDD LD (HL),A     ;
 $ADDE INC HL        ;
 $ADDF LD A,($70E3)  ;
 $ADE2 LD C,A        ;
 $ADE3 RRA           ;
 $ADE4 XOR C         ;
 $ADE5 XOR B         ;
 $ADE6 RRA           ;
 $ADE7 LD A,($A9C3)  ;
 $ADEA JR NC,$ADEE   ;
 $ADEC LD A,$FF      ;
*$ADEE LD (HL),A     ;
 $ADEF POP AF        ;
 $ADF0 EX (SP),IX    ;
; This entry point is used by the routine at #R$A9C9.
*$ADF2 LD BC,$0006   ;
 $ADF5 ADD IX,BC     ;
 $ADF7 INC DE        ;
 $ADF8 DEC A         ;
 $ADF9 JP NZ,$A9DE   ;
 $ADFC POP IX        ;
 $ADFE POP IY        ;
 $AE00 RET           ;

; Draw edges
;
; Used by the routine at #R$A84D.
;
; IX Address ship data structure
; IY Address of blueprint
@label=draw_edges
c$AE01 LD E,(IY+$0E) ; Offset to edges LSB
 $AE04 LD D,(IY+$0F) ; Offset to edges MSB
 $AE07 LD B,(IY+$04) ; Number of edges
 $AE0A PUSH IY       ; Save address of blueprint
 $AE0C EX (SP),IX    ; IX = Address of blueprint, stack has ship address
 $AE0E ADD IX,DE     ; IX = Address of edges
*$AE10 PUSH BC       ; Save counter
 $AE11 LD A,(IX+$00) ; Get visibility distance
 $AE14 CP $1F        ; Is it max?
 $AE16 JR Z,$AE1F    ; Skip next comparison if so
 $AE18 LD C,A        ; C = visibility distance
 $AE19 LD A,($A9B8)  ; Get distance to compare with
 $AE1C CP C          ; Do comparison
 $AE1D JR NC,$AE45   ; Skip edge if too far away (A > C)
*$AE1F LD A,(IX+$03) ; Get numbers of face 1 and 2
 $AE22 CALL $AA10    ; Is one of the faces visible?
 $AE25 JR Z,$AE45    ; Skip edge if not
 $AE27 LD A,(IX+$01) ; Get number of the vertex at the start of the edge
 $AE2A CALL $AE50    ; Returns values in DE and A
 $AE2D JR NZ,$AE45   ; Skip edge if vertex not visible?
 $AE2F LD C,A        ;
 $AE30 PUSH DE       ;
 $AE31 LD A,(IX+$02) ; Get number of the vertex at the end of the edge
 $AE34 CALL $AE50    ; Returns values in DE and A
 $AE37 EX DE,HL      ; Put second value in HL
 $AE38 POP DE        ; Now HL, DE, A, and C have calculated values
 $AE39 JR NZ,$AE45   ; Skip edge if vertex not visible?
 $AE3B RRCA          ; {A7 A6 A5 A4 A3 A2 A1 A0 | CY | C7 C6 C5 C4 C3 C2 C1 C0
 $AE3C RRA           ; -> A0 A7 A6 A5 A4 A3 A2 C7 | C6 | C5 C4 C3 C2 C1 C0 A1
 $AE3D RL C          ; A0
 $AE3F RLA           ;
 $AE40 RL C          ; }
 $AE42 CALL $B044    ; Draw the edge
*$AE45 POP BC        ; Restore edge counter
 $AE46 LD DE,$0004   ; {Update IX to point to next edge
 $AE49 ADD IX,DE     ; }
 $AE4B DJNZ $AE10    ; Next edge
 $AE4D POP IX        ; Restore ship address
 $AE4F RET           ;

; Lookup vertex coordinates
;
; Used by the routines at #R$A84D and #R$AE01.
;
; A Vertex number
@label=lookup_vertex_coords
c$AE50 LD B,A        ;
 $AE51 ADD A,A       ; A *= 2
 $AE52 LD HL,$A8FA   ; Table of vertex coordinates?
 $AE55 JR NC,$AE58   ;
 $AE57 INC H         ;
*$AE58 ADD A,B       ; A *= 3 (3 bytes per entry)
 $AE59 JR NC,$AE5C   ;
 $AE5B INC H         ;
*$AE5C ADD A,L       ; {HL += A
 $AE5D LD L,A        ;
 $AE5E JR NC,$AE61   ;
 $AE60 INC H         ; }
*$AE61 LD D,(HL)     ; Get byte 0
 $AE62 INC HL        ;
 $AE63 LD E,(HL)     ; Get byte 1
 $AE64 INC HL        ;
 $AE65 LD A,(HL)     ; Get byte 2
 $AE66 BIT 7,A       ; Test bit 7 of byte 2
 $AE68 RET           ;

; Routine at AE69
;
; Used by the routines at #R$9CBB and #R$A28D.
c$AE69 PUSH IX       ;
 $AE6B PUSH IX       ;
 $AE6D EX (SP),IY    ;
 $AE6F LD DE,$0009   ;
 $AE72 ADD IX,DE     ;
 $AE74 LD E,$0F      ;
 $AE76 ADD IY,DE     ;
 $AE78 CALL $A6AC    ;
 $AE7B LD E,A        ;
 $AE7C CALL $AE8A    ;
 $AE7F CALL $AE8A    ;
 $AE82 CALL $AE8A    ;
 $AE85 POP IY        ;
 $AE87 POP IX        ;
 $AE89 RET           ;

; Routine at AE8A
;
; Used by the routine at #R$AE69.
c$AE8A LD C,(IX+$01) ;
 $AE8D LD B,E        ;
 $AE8E SLA B         ;
 $AE90 SLA C         ;
 $AE92 CALL $AB0B    ;
 $AE95 LD C,A        ;
 $AE96 LD A,E        ;
 $AE97 XOR (IX+$01)  ;
 $AE9A RLA           ;
 $AE9B RR C          ;
 $AE9D LD B,(IY+$01) ;
 $AEA0 LD A,B        ;
 $AEA1 XOR C         ;
 $AEA2 SLA C         ;
 $AEA4 RL H          ;
 $AEA6 SLA B         ;
 $AEA8 RL H          ;
 $AEAA RLA           ;
 $AEAB LD A,B        ;
 $AEAC JR C,$AEB6    ;
 $AEAE ADD A,C       ;
 $AEAF JR NC,$AEBD   ;
 $AEB1 LD A,$FF      ;
 $AEB3 JP $AEBD      ;
*$AEB6 SUB C         ;
 $AEB7 JR NC,$AEBD   ;
 $AEB9 NEG           ;
 $AEBB RR H          ;
*$AEBD RR H          ;
 $AEBF RRA           ;
 $AEC0 LD (IY+$01),A ;
 $AEC3 INC IX        ;
 $AEC5 INC IX        ;
 $AEC7 INC IY        ;
 $AEC9 INC IY        ;
 $AECB RET           ;

; Routine at AECC
;
; Setup the table at #R$A994
;
; Used by the routine at #R$A84D.
@label=calculate_dot_products
c$AECC LD IY,$A994   ; Normals table
 $AED0 LD B,(IX+$0C) ; nosev_y_hi
 $AED3 LD C,(IX+$14) ; roofv_z_hi
 $AED6 LD D,(IX+$0E) ; nosev_z_hi
 $AED9 LD E,(IX+$12) ; roofv_y_hi
 $AEDC CALL $AF22    ; HL = nosev_yz ⋅ roofv_zy
 $AEDF LD (IX+$16),H ; sidev_x_hi = nosev_yz ⋅ roofv_zy
 $AEE2 LD (IY+$01),H ; $01 = nosev_yz ⋅ roofv_zy
 $AEE5 LD B,(IX+$0E) ; nosev_z_hi
 $AEE8 LD (IY+$11),B ; $11 = nosev_z_hi
 $AEEB LD C,(IX+$10) ; roofv_x_hi
 $AEEE LD (IY+$03),C ; $03 = roofv_x_hi
 $AEF1 LD D,(IX+$0A) ; nosev_x_hi
 $AEF4 LD E,(IX+$14) ; roofv_z_hi
 $AEF7 LD (IY+$0F),E ; $0F = roofv_z_hi
 $AEFA CALL $AF22    ; HL = nosev_zx ⋅ roofv_xz
 $AEFD LD (IX+$18),H ; sidev_y_hi = nosev_zx ⋅ roofv_xz
 $AF00 LD (IY+$07),H ; $07 = nosev_zx ⋅ roofv_xz
 $AF03 LD B,(IX+$0A) ; nosev_x_hi
 $AF06 LD (IY+$05),B ; $05 = nosev_x_hi
 $AF09 LD C,(IX+$12) ; roofv_y_hi
 $AF0C LD (IY+$09),C ; $09 = roofv_y_hi
 $AF0F LD D,(IX+$0C) ; nosev_y_hi
 $AF12 LD (IY+$0B),D ; $08 = nosev_y_hi
 $AF15 LD E,(IX+$10) ; roofv_x_hi
 $AF18 CALL $AF22    ; HL = nosev_xy ⋅ roofv_yx
 $AF1B LD (IX+$1A),H ; sidev_z_hi = nosev_xy ⋅ roofv_yx
 $AF1E LD (IY+$0D),H ; $0D = nosev_xy ⋅ roofv_yx
 $AF21 RET           ;

; Dot product of B,C and D,E
;
; Used by the routine at #R$AECC.
;
; B x1 packed sign-magnitude byte
; C y1 packed sign-magnitude byte
; D x2 packed sign-magnitude byte
; E y2 packed sign-magnitude byte
; O:HL dot product 2 * (x1 * y1 + x2 * y2) as packed sign-magnitude word
@label=dot_product
c$AF22 SLA B         ; Move sign of x1 into carry and multiply by 2
 $AF24 RRA           ; Move sign of x1 into A
 $AF25 XOR C         ; A = sign x1 XOR y1
 $AF26 SLA C         ; y1 *= 2
 $AF28 AND $80       ; Isolate sign bit
 $AF2A LD H,A        ; H = sign x1 XOR sign y1
 $AF2B SLA D         ; Move sign of x2 into carry and multiply by 2
 $AF2D RRA           ; Move sign of x2 into A
 $AF2E XOR E         ; A = sign x2 XOR y2
 $AF2F SLA E         ; y2 *= 2
 $AF31 AND $80       ; Isolate sign bit
 $AF33 XOR H         ; A = (sign x1 XOR sign y1) XOR (sign x2 XOR sign y2)
 $AF34 SLA H         ; Move sign x1 XOR sign y1 into carry
 $AF36 RRA           ; And into A, moving (sign x1 XOR sign y1) XOR (sign x2 XOR sign y2) into bit 6
 $AF37 XOR $80       ; Flip bit 7, which is now ^(sign x1 XOR sign y1)
 $AF39 PUSH AF       ; Save sign
 $AF3A PUSH DE       ; Save 2 * x2, 2 * y2
 $AF3B CALL $AB34    ; HL = 4 * x1 * y1
 $AF3E POP BC        ; BC = 2 * x2, 2 * y2
 $AF3F PUSH HL       ; Save 2 * x1 * 2 * y1
 $AF40 CALL $AB34    ; HL = 4 * x2 * y2
 $AF43 POP DE        ; DE = 4 * x1 * y1
 $AF44 POP AF        ; Restore sign
 $AF45 BIT 6,A       ; Check (sign x1 XOR sign y1) XOR (sign x2 XOR sign y2)
 $AF47 JR Z,$AF51    ; Jump if reset
 $AF49 ADD HL,DE     ; HL = 4 * (x1 * y1 + x2 * y2)
 $AF4A JR NC,$AF5E   ; Jump to return if not overflowing
 $AF4C LD HL,$FFFF   ; Max number
 $AF4F JR $AF5E      ; Jump return
*$AF51 EX DE,HL      ; HL = 4 * x1 * y1, DE = 4 * x2 * y2
 $AF52 AND A         ; Clear carry
 $AF53 SBC HL,DE     ; HL = 4 * (x1 * y1 - x2 * y2)
 $AF55 JR NC,$AF5E   ; Jump to return if not overflowing
 $AF57 ADD HL,DE     ; HL = 4 * x1 * y1
 $AF58 EX DE,HL      ; HL = 4 * x2 * y2, DE = 4 * x1 * y1
 $AF59 AND A         ; Clear carry
 $AF5A SBC HL,DE     ; HL = 4 * (x2 * y2 - x1 * y1)
 $AF5C XOR $80       ; Flip sign
*$AF5E RLA           ; Move sign x1 XOR sign y1 into carry
 $AF5F RR H          ; And into H, also dividing by 2
 $AF61 RR L          ; Divide L by 2
 $AF63 RET           ;

; Routine at AF64
c$AF64 PUSH IX       ;
 $AF66 LD IX,$0000   ;
 $AF6A LD B,A        ;
 $AF6B PUSH BC       ;
 $AF6C PUSH DE       ;
 $AF6D PUSH BC       ;
 $AF6E PUSH DE       ;
 $AF6F PUSH BC       ;
 $AF70 PUSH DE       ;
 $AF71 LD B,E        ;
 $AF72 CALL $AB34    ;
 $AF75 EX DE,HL      ;
 $AF76 ADD IX,DE     ;
 $AF78 POP DE        ;
 $AF79 POP BC        ;
 $AF7A LD B,D        ;
 $AF7B CALL $AB34    ;
 $AF7E LD E,$00      ;
 $AF80 LD D,L        ;
 $AF81 ADD IX,DE     ;
 $AF83 LD L,H        ;
 $AF84 LD H,E        ;
 $AF85 JR NC,$AF88   ;
 $AF87 INC HL        ;
*$AF88 POP BC        ;
 $AF89 POP DE        ;
 $AF8A PUSH HL       ;
 $AF8B LD B,D        ;
 $AF8C CALL $AB34    ;
 $AF8F LD E,$00      ;
 $AF91 LD D,L        ;
 $AF92 ADD IX,DE     ;
 $AF94 POP DE        ;
 $AF95 LD L,H        ;
 $AF96 LD H,$00      ;
 $AF98 JR NC,$AF9B   ;
 $AF9A INC HL        ;
*$AF9B ADD HL,DE     ;
 $AF9C POP BC        ;
 $AF9D POP DE        ;
 $AF9E LD C,D        ;
 $AF9F PUSH HL       ;
 $AFA0 CALL $AB34    ;
 $AFA3 POP DE        ;
 $AFA4 ADD HL,DE     ;
 $AFA5 POP IX        ;
 $AFA7 RET           ;

; Routine at AFA8
;
; Used by the routines at #R$9C89, #R$9ECF and #R$9F18.
c$AFA8 LD BC,$FFFE   ;
*$AFAB ADD A,A       ;
 $AFAC RL L          ;
 $AFAE RL H          ;
 $AFB0 JR C,$AFBE    ;
 $AFB2 SBC HL,DE     ;
 $AFB4 JR NC,$AFC1   ;
 $AFB6 ADD HL,DE     ;
 $AFB7 SLA C         ;
 $AFB9 RL B          ;
 $AFBB RET NC        ;
 $AFBC JR $AFAB      ;
*$AFBE AND A         ;
 $AFBF SBC HL,DE     ;
*$AFC1 SCF           ;
 $AFC2 RL C          ;
 $AFC4 RL B          ;
 $AFC6 RET NC        ;
 $AFC7 JR $AFAB      ;

; Routine at AFC9
;
; Used by the routines at #R$9CA5 and #R$A53F.
c$AFC9 LD A,D        ;
 $AFCA XOR $80       ;
 $AFCC LD D,A        ;

; Routine at AFCD
;
; Used by the routine at #R$BD5F.
c$AFCD LD A,H        ;
 $AFCE XOR D         ;
 $AFCF LD B,H        ;
 $AFD0 LD C,D        ;
 $AFD1 RES 7,H       ;
 $AFD3 RES 7,D       ;
 $AFD5 AND $80       ;
 $AFD7 JR NZ,$AFDC   ;
 $AFD9 ADD HL,DE     ;
 $AFDA JR $AFE6      ;
*$AFDC SBC HL,DE     ;
 $AFDE JR NC,$AFE6   ;
 $AFE0 ADD HL,DE     ;
 $AFE1 EX DE,HL      ;
 $AFE2 AND A         ;
 $AFE3 SBC HL,DE     ;
 $AFE5 LD B,C        ;
*$AFE6 SRL H         ;
 $AFE8 RR L          ;
 $AFEA BIT 7,B       ;
 $AFEC RET Z         ;
 $AFED SET 7,H       ;
 $AFEF RET           ;

; Data block at AFF0
@label=data_at_AFF0
b$AFF0 DEFB $00,$04,$02,$03,$00,$04,$06,$05
 $AFF8 DEFB $00,$08,$02,$01,$00,$08,$06,$07
 $B000 DEFB $00,$00,$00,$02,$01,$02,$00,$00
 $B008 DEFB $00,$00,$00,$02,$02,$01,$02,$02
 $B010 DEFB $00,$00,$00,$00,$00,$02,$01,$02
 $B018 DEFB $02,$02,$00,$00,$00,$02,$02,$01
 $B020 DEFB $01,$02,$00,$00,$00,$00,$00,$02
 $B028 DEFB $02,$01,$02,$02,$00,$00,$00,$02
 $B030 DEFB $00,$02,$01,$02,$00,$00,$00,$00
 $B038 DEFB $00,$02,$02,$01,$02,$02,$00,$00
 $B040 DEFB $00,$00,$00,$00

; Draw clipped line
;
; Used by the routines at #R$9C8C, #R$A84D, #R$AE01, #R$B63C and #R$B7B4.
;
; HL Coordinates of point 1
; DE Coordinates of point 2
; C Extra bits for coordinates (bits 2,3 for point 1, bits 1,0 for point 2)?
@label=draw_clipped_line
c$B044 LD A,H        ;
 $B045 AND E         ;
 $B046 INC A         ;
 $B047 RET Z         ;
 $B048 LD A,L        ;
 $B049 AND D         ;
 $B04A INC A         ;
 $B04B RET Z         ;
 $B04C PUSH DE       ;
 $B04D PUSH HL       ;
 $B04E PUSH BC       ;
 $B04F LD A,C        ;
 $B050 AND $0C       ;
 $B052 LD B,A        ;
 $B053 LD A,D        ;
 $B054 CP $80        ;
 $B056 JR C,$B05A    ;
 $B058 SET 0,B       ;
*$B05A LD A,E        ;
 $B05B CP $40        ;
 $B05D JR C,$B061    ;
 $B05F SET 1,B       ;
*$B061 LD A,C        ;
 $B062 AND $03       ;
 $B064 ADD A,A       ;
 $B065 ADD A,A       ;
 $B066 LD C,A        ;
 $B067 LD A,H        ;
 $B068 CP $80        ;
 $B06A JR C,$B06E    ;
 $B06C SET 0,C       ;
*$B06E LD A,L        ;
 $B06F CP $40        ;
 $B071 JR C,$B075    ;
 $B073 SET 1,C       ;
*$B075 LD HL,$AFF0   ;
 $B078 LD A,B        ;
 $B079 AND $03       ;
 $B07B JR Z,$B0BB    ;
 $B07D LD A,B        ;
 $B07E ADD A,L       ;
 $B07F LD L,A        ;
 $B080 JR NC,$B083   ;
 $B082 INC H         ;
*$B083 LD B,(HL)     ;
 $B084 LD HL,$AFF0   ;
 $B087 LD A,C        ;
 $B088 AND $03       ;
 $B08A JR Z,$B0AB    ;
 $B08C LD A,C        ;
 $B08D ADD A,L       ;
 $B08E LD L,A        ;
 $B08F JR NC,$B092   ;
 $B091 INC H         ;
*$B092 LD C,(HL)     ;
 $B093 LD A,B        ;
 $B094 ADD A,A       ;
 $B095 ADD A,A       ;
 $B096 ADD A,A       ;
 $B097 ADD A,C       ;
 $B098 LD HL,$AFF0   ;
 $B09B ADD A,$07     ;
 $B09D ADD A,L       ;
 $B09E JR NC,$B0A1   ;
 $B0A0 INC H         ;
*$B0A1 LD L,A        ;
 $B0A2 LD A,(HL)     ;
 $B0A3 AND A         ;
 $B0A4 JP NZ,$B18A   ;
 $B0A7 POP HL        ;
 $B0A8 POP HL        ;
 $B0A9 POP HL        ;
 $B0AA RET           ;
*$B0AB POP BC        ;
 $B0AC POP DE        ;
 $B0AD POP HL        ;
 $B0AE LD A,C        ;
 $B0AF ADD A,A       ;
 $B0B0 ADD A,A       ;
 $B0B1 SRL C         ;
 $B0B3 SRL C         ;
 $B0B5 OR C          ;
 $B0B6 AND $0F       ;
 $B0B8 LD C,A        ;
 $B0B9 JR $B0C3      ;
*$B0BB LD A,C        ;
 $B0BC AND $03       ;
 $B0BE JR Z,$B0CD    ;
 $B0C0 POP BC        ;
 $B0C1 POP HL        ;
 $B0C2 POP DE        ;
*$B0C3 LD B,C        ;
 $B0C4 CALL $B3A7    ;
 $B0C7 CALL $B308    ;
 $B0CA JP $B362      ;
*$B0CD POP BC        ;
 $B0CE POP HL        ;
 $B0CF POP DE        ;
 $B0D0 LD B,C        ;
 $B0D1 CALL $B3A7    ;
 $B0D4 CALL $B308    ;
 $B0D7 INC H         ;
 $B0D8 INC L         ;
 $B0D9 LD D,B        ;
 $B0DA BIT 4,B       ;
 $B0DC LD A,L        ;
 $B0DD JR Z,$B0E0    ;
 $B0DF LD A,H        ;
; This entry point is used by the routine at #R$B362.
*$B0E0 EXX           ;
 $B0E1 CP $02        ;
 $B0E3 JR NC,$B0E7   ;
 $B0E5 LD A,$02      ;
*$B0E7 DEC A         ;
 $B0E8 LD D,A        ;
 $B0E9 LD A,E        ;
 $B0EA LD E,$80      ;
 $B0EC EXX           ;
 $B0ED LD B,A        ;
 $B0EE LD A,D        ;
 $B0EF EXX           ;
 $B0F0 AND $1C       ;
 $B0F2 CP $0E        ;
 $B0F4 JR NC,$B12D   ;
 $B0F6 CP $06        ;
 $B0F8 JR NC,$B116   ;
 $B0FA CP $02        ;
 $B0FC JR NC,$B10A   ;
 $B0FE LD A,$01      ;
 $B100 LD ($B491),A  ;
 $B103 LD A,$2D      ;
 $B105 LD ($B4A9),A  ;
 $B108 JR $B124      ;
*$B10A LD A,$01      ;
 $B10C LD ($B440),A  ;
 $B10F LD A,$2D      ;
 $B111 LD ($B458),A  ;
 $B114 JR $B16E      ;
*$B116 CP $0A        ;
 $B118 JR NC,$B164   ;
 $B11A LD A,$09      ;
 $B11C LD ($B491),A  ;
 $B11F LD A,$2C      ;
 $B121 LD ($B4A9),A  ;
*$B124 EXX           ;
 $B125 LD A,B        ;
 $B126 EXX           ;
 $B127 LD ($B48C),A  ;
 $B12A JP $B485      ;
*$B12D CP $16        ;
 $B12F JR NC,$B14D   ;
 $B131 CP $12        ;
 $B133 JR NC,$B141   ;
 $B135 LD A,$01      ;
 $B137 LD ($B4AE),A  ;
 $B13A LD A,$2D      ;
 $B13C LD ($B4D1),A  ;
 $B13F JR $B15B      ;
*$B141 LD A,$01      ;
 $B143 LD ($B461),A  ;
 $B146 LD A,$2D      ;
 $B148 LD ($B45C),A  ;
 $B14B JR $B181      ;
*$B14D CP $1A        ;
 $B14F JR NC,$B177   ;
 $B151 LD A,$09      ;
 $B153 LD ($B4AE),A  ;
 $B156 LD A,$2C      ;
 $B158 LD ($B4D1),A  ;
*$B15B EXX           ;
 $B15C LD A,B        ;
 $B15D EXX           ;
 $B15E LD ($B4B8),A  ;
 $B161 JP $B4B1      ;
*$B164 LD A,$09      ;
 $B166 LD ($B440),A  ;
 $B169 LD A,$2C      ;
 $B16B LD ($B458),A  ;
*$B16E EXX           ;
 $B16F LD A,B        ;
 $B170 EXX           ;
 $B171 LD ($B43B),A  ;
 $B174 JP $B434      ;
*$B177 LD A,$09      ;
 $B179 LD ($B461),A  ;
 $B17C LD A,$2C      ;
 $B17E LD ($B45C),A  ;
*$B181 EXX           ;
 $B182 LD A,B        ;
 $B183 EXX           ;
 $B184 LD ($B46B),A  ;
 $B187 JP $B464      ;
*$B18A POP HL        ;
 $B18B PUSH HL       ;
 $B18C DEC A         ;
 $B18D JR NZ,$B1D7   ;
 $B18F BIT 0,B       ;
 $B191 JR Z,$B1C8    ;
 $B193 LD A,L        ;
 $B194 AND $0C       ;
 $B196 SRL L         ;
 $B198 SRL L         ;
 $B19A OR L          ;
 $B19B LD B,A        ;
 $B19C LD HL,$8040   ;
 $B19F CALL $B3A7    ;
 $B1A2 LD ($B042),BC ;
 $B1A6 POP BC        ;
 $B1A7 POP HL        ;
 $B1A8 LD B,C        ;
 $B1A9 CALL $B3A7    ;
 $B1AC LD DE,($B042) ;
 $B1B0 LD A,B        ;
 $B1B1 XOR D         ;
 $B1B2 AND $10       ;
 $B1B4 JR Z,$B1B8    ;
 $B1B6 LD E,$FF      ;
*$B1B8 BIT 4,B       ;
 $B1BA JR Z,$B1C0    ;
 $B1BC LD A,C        ;
 $B1BD SUB E         ;
 $B1BE JR $B1C2      ;
*$B1C0 LD A,E        ;
 $B1C1 SUB C         ;
*$B1C2 JP C,$B274    ;
 $B1C5 JP $B2B2      ;
*$B1C8 POP BC        ;
 $B1C9 POP HL        ;
 $B1CA LD B,C        ;
 $B1CB CALL $B3A7    ;
 $B1CE LD A,E        ;
 $B1CF CP $40        ;
 $B1D1 JP NC,$B274   ;
 $B1D4 JP $B2B2      ;
*$B1D7 LD ($B040),BC ;
 $B1DB BIT 0,B       ;
 $B1DD JR Z,$B1FE    ;
 $B1DF POP BC        ;
 $B1E0 POP DE        ;
 $B1E1 POP HL        ;
 $B1E2 PUSH DE       ;
 $B1E3 PUSH HL       ;
 $B1E4 LD A,C        ;
 $B1E5 SRL A         ;
 $B1E7 SRL A         ;
 $B1E9 SLA C         ;
 $B1EB SLA C         ;
 $B1ED OR C          ;
 $B1EE AND $0F       ;
 $B1F0 LD C,A        ;
 $B1F1 LD L,C        ;
 $B1F2 PUSH BC       ;
 $B1F3 LD BC,($B040) ;
 $B1F7 LD A,B        ;
 $B1F8 LD B,C        ;
 $B1F9 LD C,A        ;
 $B1FA LD ($B040),BC ;
*$B1FE LD A,B        ;
 $B1FF ADD A,C       ;
 $B200 CP $07        ;
 $B202 LD H,$00      ;
 $B204 JR C,$B232    ;
 $B206 CP $0C        ;
 $B208 LD H,$03      ;
 $B20A JR NC,$B232   ;
 $B20C LD A,B        ;
 $B20D XOR C         ;
 $B20E DEC H         ;
 $B20F CP $08        ;
 $B211 JR NC,$B232   ;
 $B213 DEC H         ;
 $B214 CP $04        ;
 $B216 JR C,$B232    ;
 $B218 CP $05        ;
 $B21A JR Z,$B22C    ;
 $B21C LD A,B        ;
 $B21D XOR $06       ;
 $B21F LD H,$03      ;
 $B221 AND C         ;
 $B222 JR Z,$B232    ;
 $B224 CP $06        ;
 $B226 JR Z,$B232    ;
 $B228 LD H,$00      ;
 $B22A JR $B232      ;
*$B22C LD A,B        ;
 $B22D CP $02        ;
 $B22F JR NZ,$B232   ;
 $B231 INC H         ;
*$B232 LD A,L        ;
 $B233 AND $0C       ;
 $B235 OR H          ;
 $B236 LD B,A        ;
 $B237 LD HL,$8040   ;
 $B23A CALL $B3A7    ;
 $B23D LD ($B042),BC ;
 $B241 POP BC        ;
 $B242 POP HL        ;
 $B243 LD B,C        ;
 $B244 CALL $B3A7    ;
 $B247 LD DE,($B042) ;
 $B24B LD A,B        ;
 $B24C XOR D         ;
 $B24D AND $10       ;
 $B24F JR Z,$B253    ;
 $B251 LD E,$FF      ;
*$B253 LD HL,($B040) ;
 $B256 BIT 4,B       ;
 $B258 JR Z,$B260    ;
 $B25A BIT 1,H       ;
 $B25C JR NZ,$B264   ;
 $B25E JR $B26E      ;
*$B260 BIT 1,H       ;
 $B262 JR NZ,$B26E   ;
*$B264 LD A,E        ;
 $B265 SUB C         ;
 $B266 JR NC,$B272   ;
*$B268 BIT 1,H       ;
 $B26A JR Z,$B2B2    ;
 $B26C JR $B274      ;
*$B26E LD A,C        ;
 $B26F SUB E         ;
 $B270 JR C,$B268    ;
*$B272 POP HL        ;
 $B273 RET           ;
*$B274 POP DE        ;
 $B275 PUSH BC       ;
 $B276 LD A,E        ;
 $B277 SUB $40       ;
 $B279 LD E,A        ;
 $B27A LD L,B        ;
 $B27B BIT 4,B       ;
 $B27D JR NZ,$B284   ;
 $B27F CALL $B2F0    ;
 $B282 JR $B288      ;
*$B284 LD B,C        ;
 $B285 CALL $B2FE    ;
*$B288 LD A,L        ;
 $B289 RRA           ;
 $B28A RRA           ;
 $B28B XOR L         ;
 $B28C AND $02       ;
 $B28E JR NZ,$B2AC   ;
 $B290 LD A,D        ;
 $B291 SUB C         ;
 $B292 LD D,A        ;
 $B293 POP BC        ;
 $B294 JR NC,$B29D   ;
 $B296 NEG           ;
 $B298 LD D,A        ;
 $B299 LD A,B        ;
 $B29A XOR $02       ;
 $B29C LD B,A        ;
*$B29D LD E,$3F      ;
 $B29F LD A,D        ;
 $B2A0 CP $80        ;
 $B2A2 JR C,$B2A6    ;
 $B2A4 LD D,$7F      ;
*$B2A6 CALL $B308    ;
 $B2A9 JP $B362      ;
*$B2AC LD A,D        ;
 $B2AD ADD A,C       ;
 $B2AE LD D,A        ;
 $B2AF POP BC        ;
 $B2B0 JR $B29D      ;
*$B2B2 POP DE        ;
 $B2B3 PUSH BC       ;
 $B2B4 LD A,D        ;
 $B2B5 SUB $80       ;
 $B2B7 LD D,A        ;
 $B2B8 LD L,B        ;
 $B2B9 BIT 4,B       ;
 $B2BB JR Z,$B2C2    ;
 $B2BD CALL $B2F0    ;
 $B2C0 JR $B2C6      ;
*$B2C2 LD B,C        ;
 $B2C3 CALL $B2FE    ;
*$B2C6 LD A,L        ;
 $B2C7 RRA           ;
 $B2C8 RRA           ;
 $B2C9 XOR L         ;
 $B2CA AND $01       ;
 $B2CC JR NZ,$B2EA   ;
 $B2CE LD A,E        ;
 $B2CF SUB C         ;
 $B2D0 LD E,A        ;
 $B2D1 POP BC        ;
 $B2D2 JR NC,$B2DB   ;
 $B2D4 NEG           ;
 $B2D6 LD E,A        ;
 $B2D7 LD A,B        ;
 $B2D8 XOR $01       ;
 $B2DA LD B,A        ;
*$B2DB LD D,$7F      ;
 $B2DD LD A,E        ;
 $B2DE CP $40        ;
 $B2E0 JR C,$B2E4    ;
 $B2E2 LD E,$3F      ;
*$B2E4 CALL $B308    ;
 $B2E7 JP $B362      ;
*$B2EA LD A,E        ;
 $B2EB ADD A,C       ;
 $B2EC LD E,A        ;
 $B2ED POP BC        ;
 $B2EE JR $B2DB      ;

; Routine at B2F0
;
; Used by the routine at #R$B044.
;
; I:A First number
; I:C Second number
; O:C (((A + C) / 2)^2 - ((A - C) / 2)^2 + 128) / 256
@label=calc_something
c$B2F0 PUSH DE       ;
 $B2F1 PUSH HL       ;
 $B2F2 LD B,A        ;
 $B2F3 CALL $AB34    ;
 $B2F6 LD DE,$0080   ;
 $B2F9 ADD HL,DE     ;
 $B2FA LD C,H        ;
 $B2FB POP HL        ;
 $B2FC POP DE        ;
 $B2FD RET           ;

; Routine at B2FE
;
; Used by the routines at #R$B044, #R$B362 and #R$B3A7.
c$B2FE LD C,$FE      ;
 $B300 PUSH DE       ;
 $B301 LD E,$00      ;
 $B303 CALL $AC8B    ;
 $B306 POP DE        ;
 $B307 RET           ;

; Routine at B308
;
; Used by the routine at #R$B044.
c$B308 PUSH BC       ;
 $B309 PUSH BC       ;
 $B30A PUSH DE       ;
 $B30B EXX           ;
 $B30C POP BC        ;
 $B30D POP DE        ;
 $B30E BIT 1,D       ;
 $B310 JR NZ,$B317   ;
 $B312 LD A,$7F      ;
 $B314 ADD A,B       ;
 $B315 JR $B31A      ;
*$B317 LD A,$7F      ;
 $B319 SUB B         ;
*$B31A LD B,A        ;
 $B31B BIT 0,D       ;
 $B31D JR Z,$B324    ;
 $B31F LD A,$3F      ;
 $B321 ADD A,C       ;
 $B322 JR $B327      ;
*$B324 LD A,$3F      ;
 $B326 SUB C         ;
*$B327 LD C,B        ;
 $B328 LD B,A        ;
 $B329 LD A,C        ;
 $B32A AND $07       ;
 $B32C LD D,B        ;
 $B32D LD B,A        ;
 $B32E INC B         ;
 $B32F LD A,$01      ;
*$B331 RRCA          ;
 $B332 DJNZ $B331    ;
 $B334 LD B,D        ;
 $B335 LD D,A        ;
 $B336 SRL C         ;
 $B338 SRL C         ;
 $B33A SRL C         ;
 $B33C LD A,B        ;
 $B33D RRA           ;
 $B33E RRA           ;
 $B33F RRA           ;
 $B340 AND $18       ;
 $B342 LD H,A        ;
 $B343 LD A,B        ;
 $B344 AND $07       ;
 $B346 OR H          ;
 $B347 OR $C0        ;
 $B349 LD H,A        ;
 $B34A LD A,B        ;
 $B34B AND $38       ;
 $B34D ADD A,A       ;
 $B34E ADD A,A       ;
 $B34F OR C          ;
 $B350 LD L,A        ;
 $B351 LD A,H        ;
 $B352 AND $07       ;
 $B354 INC A         ;
 $B355 LD B,A        ;
 $B356 LD C,D        ;
 $B357 POP AF        ;
 $B358 BIT 2,A       ;
 $B35A JR NZ,$B360   ;
 $B35C LD A,$09      ;
 $B35E SUB B         ;
 $B35F LD B,A        ;
*$B360 EXX           ;
 $B361 RET           ;

; Routine at B362
;
; Used by the routine at #R$B044.
c$B362 PUSH BC       ;
 $B363 LD HL,$8040   ;
 $B366 LD A,B        ;
 $B367 RRA           ;
 $B368 RRA           ;
 $B369 AND $03       ;
 $B36B SLA B         ;
 $B36D SLA B         ;
 $B36F OR B          ;
 $B370 XOR $03       ;
 $B372 AND $0F       ;
 $B374 LD B,A        ;
 $B375 CALL $B3A7    ;
 $B378 POP DE        ;
 $B379 LD A,B        ;
 $B37A XOR D         ;
 $B37B AND $10       ;
 $B37D JR Z,$B381    ;
 $B37F LD C,$FF      ;
*$B381 BIT 4,D       ;
 $B383 JR Z,$B391    ;
 $B385 LD A,E        ;
 $B386 SUB C         ;
 $B387 LD A,H        ;
 $B388 JP C,$B0E0    ;
 $B38B JP Z,$B0E0    ;
 $B38E LD A,L        ;
 $B38F JR $B39B      ;
*$B391 LD A,E        ;
 $B392 SUB C         ;
 $B393 LD A,L        ;
 $B394 JP C,$B0E0    ;
 $B397 JP Z,$B0E0    ;
 $B39A LD A,H        ;
*$B39B LD B,E        ;
 $B39C AND A         ;
 $B39D JR Z,$B3A0    ;
 $B39F DEC A         ;
*$B3A0 CALL $B2FE    ;
 $B3A3 LD A,C        ;
 $B3A4 JP $B0E0      ;

; Routine at B3A7
;
; Used by the routines at #R$B044 and #R$B362.
c$B3A7 LD A,B        ;
 $B3A8 SRL A         ;
 $B3AA SRL A         ;
 $B3AC XOR B         ;
 $B3AD ADD A,A       ;
 $B3AE ADD A,A       ;
 $B3AF ADD A,A       ;
 $B3B0 ADD A,A       ;
 $B3B1 OR B          ;
 $B3B2 OR $03        ;
 $B3B4 LD B,A        ;
 $B3B5 RES 5,B       ;
 $B3B7 AND $20       ;
 $B3B9 LD A,D        ;
 $B3BA JR Z,$B3C7    ;
 $B3BC BIT 3,B       ;
 $B3BE JR Z,$B3C2    ;
 $B3C0 SET 5,B       ;
*$B3C2 ADD A,H       ;
 $B3C3 JR NC,$B3DA   ;
 $B3C5 JR $B3DC      ;
*$B3C7 SUB H         ;
 $B3C8 JR C,$B3D2    ;
 $B3CA BIT 3,B       ;
 $B3CC JR Z,$B3DA    ;
 $B3CE SET 5,B       ;
 $B3D0 JR $B3DA      ;
*$B3D2 NEG           ;
 $B3D4 BIT 3,B       ;
 $B3D6 JR NZ,$B3DA   ;
 $B3D8 SET 5,B       ;
*$B3DA RES 1,B       ;
*$B3DC LD H,A        ;
 $B3DD BIT 4,B       ;
 $B3DF LD A,E        ;
 $B3E0 RES 4,B       ;
 $B3E2 JR Z,$B3EF    ;
 $B3E4 BIT 2,B       ;
 $B3E6 JR Z,$B3EA    ;
 $B3E8 SET 4,B       ;
*$B3EA ADD A,L       ;
 $B3EB JR NC,$B402   ;
 $B3ED JR $B404      ;
*$B3EF SUB L         ;
 $B3F0 JR C,$B3FA    ;
 $B3F2 BIT 2,B       ;
 $B3F4 JR Z,$B402    ;
 $B3F6 SET 4,B       ;
 $B3F8 JR $B402      ;
*$B3FA NEG           ;
 $B3FC BIT 2,B       ;
 $B3FE JR NZ,$B402   ;
 $B400 SET 4,B       ;
*$B402 RES 0,B       ;
*$B404 LD L,A        ;
 $B405 LD C,L        ;
 $B406 RRC B         ;
 $B408 RR C          ;
 $B40A LD A,H        ;
 $B40B RRC B         ;
 $B40D RRA           ;
 $B40E CP C          ;
 $B40F JR C,$B41C    ;
 $B411 SET 4,B       ;
 $B413 PUSH BC       ;
 $B414 BIT 7,B       ;
 $B416 JR Z,$B426    ;
 $B418 LD B,A        ;
 $B419 LD A,C        ;
 $B41A JR $B42C      ;
*$B41C RES 4,B       ;
 $B41E PUSH BC       ;
 $B41F BIT 6,B       ;
 $B421 JR Z,$B42A    ;
 $B423 LD B,C        ;
 $B424 JR $B42C      ;
*$B426 LD A,L        ;
 $B427 LD B,H        ;
 $B428 JR $B42C      ;
*$B42A LD A,H        ;
 $B42B LD B,L        ;
*$B42C CALL $B2FE    ;
 $B42F LD A,C        ;
 $B430 POP BC        ;
 $B431 LD C,A        ;
 $B432 RET           ;

; Routine at B433
c$B433 DEC H         ;
; This entry point is used by the routine at #R$B044.
*$B434 LD A,(HL)     ;
 $B435 OR C          ;
 $B436 LD (HL),A     ;
 $B437 DEC D         ;
 $B438 RET Z         ;
 $B439 LD A,E        ;
 $B43A ADD A,$00     ;
 $B43C LD E,A        ;
 $B43D JR NC,$B443   ;
 $B43F RRC C         ;
 $B441 JR C,$B458    ;
*$B443 DJNZ $B433    ;
 $B445 LD B,$08      ;
 $B447 LD A,H        ;
 $B448 ADD A,$07     ;
 $B44A LD H,A        ;
 $B44B LD A,L        ;
 $B44C SUB $20       ;
 $B44E LD L,A        ;
 $B44F JP NC,$B434   ;
 $B452 LD A,H        ;
 $B453 SUB B         ;
 $B454 LD H,A        ;
 $B455 JP $B434      ;
*$B458 INC L         ;
 $B459 JP $B443      ;

; Routine at B45C
;
; Used by the routine at #R$B460.
c$B45C INC L         ;
 $B45D JP $B464      ;

; Routine at B460
c$B460 RRC C         ;
 $B462 JR C,$B45C    ;
; This entry point is used by the routines at #R$B044 and #R$B45C.
*$B464 LD A,(HL)     ;
 $B465 OR C          ;
 $B466 LD (HL),A     ;
 $B467 DEC D         ;
 $B468 RET Z         ;
 $B469 LD A,E        ;
 $B46A ADD A,$00     ;
 $B46C LD E,A        ;
 $B46D JR NC,$B460   ;
 $B46F DEC H         ;
 $B470 DJNZ $B460    ;
 $B472 LD B,$08      ;
 $B474 LD A,H        ;
 $B475 ADD A,B       ;
 $B476 LD H,A        ;
 $B477 LD A,L        ;
 $B478 SUB $20       ;
 $B47A LD L,A        ;
 $B47B JP NC,$B460   ;
 $B47E LD A,H        ;
 $B47F SUB B         ;
 $B480 LD H,A        ;
 $B481 JP $B460      ;

; Routine at B484
c$B484 INC H         ;
; This entry point is used by the routine at #R$B044.
*$B485 LD A,(HL)     ;
 $B486 OR C          ;
 $B487 LD (HL),A     ;
 $B488 DEC D         ;
 $B489 RET Z         ;
 $B48A LD A,E        ;
 $B48B ADD A,$00     ;
 $B48D LD E,A        ;
 $B48E JR NC,$B494   ;
 $B490 RRC C         ;
 $B492 JR C,$B4A9    ;
*$B494 DJNZ $B484    ;
 $B496 LD B,$08      ;
 $B498 LD A,H        ;
 $B499 SUB $07       ;
 $B49B LD H,A        ;
 $B49C LD A,L        ;
 $B49D ADD A,$20     ;
 $B49F LD L,A        ;
 $B4A0 JP NC,$B485   ;
 $B4A3 LD A,H        ;
 $B4A4 ADD A,B       ;
 $B4A5 LD H,A        ;
 $B4A6 JP $B485      ;
*$B4A9 INC L         ;
 $B4AA JP $B494      ;

; Routine at B4AD
c$B4AD RRC C         ;
 $B4AF JR C,$B4D1    ;
; This entry point is used by the routine at #R$B044.
*$B4B1 LD A,(HL)     ;
 $B4B2 OR C          ;
 $B4B3 LD (HL),A     ;
 $B4B4 DEC D         ;
 $B4B5 RET Z         ;
 $B4B6 LD A,E        ;
 $B4B7 ADD A,$00     ;
 $B4B9 LD E,A        ;
 $B4BA JR NC,$B4AD   ;
 $B4BC INC H         ;
 $B4BD DJNZ $B4AD    ;
 $B4BF LD B,$08      ;
 $B4C1 LD A,H        ;
 $B4C2 SUB B         ;
 $B4C3 LD H,A        ;
 $B4C4 LD A,L        ;
 $B4C5 ADD A,$20     ;
 $B4C7 LD L,A        ;
 $B4C8 JP NC,$B4AD   ;
 $B4CB LD A,H        ;
 $B4CC ADD A,B       ;
 $B4CD LD H,A        ;
 $B4CE JP $B4AD      ;
*$B4D1 INC L         ;
 $B4D2 JP $B4B1      ;

; Data block at B4D5
@label=byte_at_B4D5
b$B4D5 DEFB $00

; Data block at B4D6
@label=byte_at_B4D6
b$B4D6 DEFB $00

; Data block at B4D7
@label=byte_at_B4D7
b$B4D7 DEFB $00

; Routine at B4D8
;
; Used by the routine at #R$9CBB.
c$B4D8 LD A,($711F)   ;
 $B4DB AND A          ;
 $B4DC RET NZ         ;
 $B4DD LD D,$00       ;
 $B4DF LD E,(IY+$01)  ;
 $B4E2 BIT 0,(IX+$26) ;
 $B4E6 JR Z,$B4F0     ;
 $B4E8 LD A,(IX+$25)  ;
 $B4EB AND A          ;
 $B4EC JR NZ,$B4F0    ;
 $B4EE LD D,$01       ;
*$B4F0 BIT 1,(IX+$26) ;
 $B4F4 JR Z,$B4F8     ;
 $B4F6 LD E,$B4       ;
*$B4F8 LD L,(IX+$00)  ;
 $B4FB LD H,(IX+$01)  ;
 $B4FE SBC HL,DE      ;
 $B500 RET NC         ;
 $B501 AND A          ;
 $B502 LD L,(IX+$03)  ;
 $B505 LD H,(IX+$04)  ;
 $B508 SBC HL,DE      ;
 $B50A RET NC         ;
 $B50B AND A          ;
 $B50C LD L,(IX+$06)  ;
 $B50F LD H,(IX+$07)  ;
 $B512 SBC HL,DE      ;
 $B514 RET NC         ;
 $B515 LD A,(IX+$08)  ;
 $B518 ADD A,A        ;
 $B519 RET NZ         ;
 $B51A BIT 1,(IX+$26) ;
 $B51E JR Z,$B55D     ;
 $B520 BIT 7,(IX+$05) ;
 $B524 JP Z,$B5A8     ;
 $B527 LD A,($D088)   ;
 $B52A AND A          ;
 $B52B JR Z,$B5A8     ;
 $B52D XOR A          ;
 $B52E LD (IX+$22),A  ;
 $B531 CALL $B5DF     ;
 $B534 LD A,($D07C)   ;
 $B537 AND A          ;
 $B538 JR Z,$B5A8     ;
 $B53A LD A,(IY+$00)  ;
 $B53D AND $F0        ;
 $B53F JR Z,$B548     ;
 $B541 RRCA           ;
 $B542 RRCA           ;
 $B543 RRCA           ;
 $B544 RRCA           ;
 $B545 INC A          ;
 $B546 JR $B55A       ;
*$B548 LD A,($9CB2)   ;
 $B54B SUB $03        ;
 $B54D JR NZ,$B555    ;
 $B54F LD ($9CB2),A   ;
 $B552 DEC A          ;
 $B553 JR $B55A       ;
*$B555 CALL $B799     ;
 $B558 AND $07        ;
*$B55A JP $D0E4       ;
*$B55D BIT 2,(IX+$26) ;
 $B561 JR Z,$B5A8     ;
 $B563 BIT 7,(IX+$0E) ;
 $B567 JR Z,$B5D3     ;
 $B569 BIT 7,(IX+$08) ;
 $B56D JR NZ,$B5D3    ;
 $B56F BIT 2,(IX+$21) ;
 $B573 JR NZ,$B5D3    ;
 $B575 LD A,(IX+$0A)  ;
 $B578 ADD A,A        ;
 $B579 CP $DC         ;
 $B57B JR NC,$B5D3    ;
 $B57D LD B,A         ;
 $B57E LD A,(IX+$0C)  ;
 $B581 ADD A,A        ;
 $B582 CP $DC         ;
 $B584 JR NC,$B5D3    ;
 $B586 CP $3C         ;
 $B588 JR NC,$B595    ;
 $B58A LD A,B         ;
 $B58B CP $3C         ;
 $B58D JR NC,$B595    ;
 $B58F LD A,$01       ;
 $B591 LD ($9C9A),A   ;
 $B594 RET            ;
*$B595 LD HL,$7128    ;
 $B598 SET 6,(HL)     ;
 $B59A LD HL,$70E6    ;
 $B59D LD A,($9CA3)   ;
 $B5A0 ADD A,$0C      ;
 $B5A2 ADD A,(HL)     ;
 $B5A3 ADD A,(HL)     ;
 $B5A4 LD ($9CA3),A   ;
 $B5A7 RET            ;
*$B5A8 XOR A          ;
 $B5A9 LD (IX+$22),A  ;
 $B5AC LD B,(IY+$01)  ;
 $B5AF BIT 6,(IX+$26) ;
 $B5B3 JR Z,$B5BF     ;
 $B5B5 LD A,($9CB2)   ;
 $B5B8 AND A          ;
 $B5B9 JR Z,$B5BF     ;
 $B5BB XOR A          ;
 $B5BC LD ($9CB2),A   ;
*$B5BF LD HL,$7128    ;
 $B5C2 SET 2,(HL)     ;
 $B5C4 BIT 7,(IX+$08) ;
 $B5C8 JR Z,$B5D8     ;
 $B5CA LD A,($9CA4)   ;
 $B5CD ADD A,B        ;
 $B5CE LD ($9CA4),A   ;
 $B5D1 JR $B5DF       ;
*$B5D3 INC A          ;
 $B5D4 LD ($711F),A   ;
 $B5D7 RET            ;
*$B5D8 LD A,($9CA3)   ;
 $B5DB ADD A,B        ;
 $B5DC LD ($9CA3),A   ;
; This entry point is used by the routines at #R$9CBB and #R$9F82.
*$B5DF LD A,($9CB4)   ;
 $B5E2 LD H,A         ;
 $B5E3 PUSH IY        ;
 $B5E5 LD IY,$6048    ;
 $B5E9 LD DE,$0027    ;
 $B5EC LD B,$07       ;
*$B5EE ADD IY,DE      ;
 $B5F0 LD A,(IY+$22)  ;
 $B5F3 AND A          ;
 $B5F4 JR Z,$B600     ;
 $B5F6 LD A,(IY+$25)  ;
 $B5F9 CP H           ;
 $B5FA JR NZ,$B600    ;
 $B5FC SET 4,(IY+$20) ;
*$B600 DJNZ $B5EE     ;
 $B602 POP IY         ;
 $B604 LD A,($D047)   ;
 $B607 CP $02         ;
 $B609 RET NZ         ;
 $B60A LD A,($D0E3)   ;
 $B60D SUB H          ;
 $B60E RET NZ         ;
 $B60F LD ($D047),A   ;
 $B612 LD HL,$D0C1    ;
 $B615 SET 7,(HL)     ;
 $B617 RET            ;

; Routine at B618
;
; Used by the routine at #R$9C9F.
c$B618 LD HL,$7128   ;
 $B61B SET 2,(HL)    ;
 $B61D XOR A         ;
 $B61E LD ($70E3),A  ;
 $B621 LD IX,$6021   ;
 $B625 LD DE,$0027   ;
 $B628 LD B,$08      ;
*$B62A ADD IX,DE     ;
 $B62C LD (IX+$22),A ;
 $B62F DJNZ $B62A    ;
 $B631 LD A,$16      ;
 $B633 CALL $B867    ;
 $B636 LD A,$15      ;
 $B638 CALL $B867    ;
 $B63B RET           ;

; Routine at B63C
;
; Used by the routine at #R$B7B4.
c$B63C LD A,($B4D7)   ;
 $B63F LD C,A         ;
 $B640 XOR A          ;
 $B641 LD ($B4D7),A   ;
 $B644 LD A,($70F0)   ;
 $B647 CP $02         ;
 $B649 JR NC,$B64D    ;
 $B64B LD A,$02       ;
*$B64D SUB $02        ;
 $B64F LD ($70F0),A   ;
 $B652 LD HL,$FC0B    ;
 $B655 BIT 0,(HL)     ;
 $B657 RET Z          ;
 $B658 RES 0,(HL)     ;
 $B65A CP $90         ;
 $B65C RET NC         ;
 $B65D LD B,A         ;
 $B65E LD A,($70E3)   ;
 $B661 LD HL,$D07D    ;
 $B664 LD D,$00       ;
 $B666 LD E,A         ;
 $B667 ADD HL,DE      ;
 $B668 LD A,(HL)      ;
 $B669 AND A          ;
 $B66A RET Z          ;
 $B66B LD E,C         ;
 $B66C LD C,A         ;
 $B66D DEC A          ;
 $B66E JR NZ,$B672    ;
 $B670 LD D,$01       ;
*$B672 SUB $03        ;
 $B674 JR NZ,$B678    ;
 $B676 LD D,$07       ;
*$B678 LD A,E         ;
 $B679 AND E          ;
 $B67A LD A,$01       ;
 $B67C LD ($B4D7),A   ;
 $B67F JR Z,$B686     ;
 $B681 LD A,($9C93)   ;
 $B684 AND D          ;
 $B685 RET NZ         ;
*$B686 LD A,($9CA2)   ;
 $B689 INC A          ;
 $B68A LD ($9CA2),A   ;
 $B68D LD HL,$7128    ;
 $B690 SET 4,(HL)     ;
 $B692 LD A,C         ;
 $B693 SUB $03        ;
 $B695 LD A,$0F       ;
 $B697 JR C,$B69F     ;
 $B699 JR Z,$B69D     ;
 $B69B ADD A,$1B      ;
*$B69D ADD A,$08      ;
*$B69F LD C,A         ;
 $B6A0 LD A,D         ;
 $B6A1 DEC A          ;
 $B6A2 AND $01        ;
 $B6A4 RLA            ;
 $B6A5 ADD A,$08      ;
 $B6A7 ADD A,B        ;
 $B6A8 CP $A0         ;
 $B6AA JR C,$B6AE     ;
 $B6AC LD A,$A0       ;
*$B6AE LD ($70F0),A   ;
 $B6B1 LD A,($9C97)   ;
 $B6B4 AND A          ;
 $B6B5 JP Z,$B749     ;
 $B6B8 DEC A          ;
 $B6B9 SUB $09        ;
 $B6BB CPL            ;
 $B6BC LD IX,$6048    ;
 $B6C0 LD DE,$0027    ;
*$B6C3 DEC A          ;
 $B6C4 JR Z,$B6CA     ;
 $B6C6 ADD IX,DE      ;
 $B6C8 JR $B6C3       ;
*$B6CA SET 2,(IX+$21) ;
 $B6CE LD HL,$7128    ;
 $B6D1 SET 3,(HL)     ;
 $B6D3 BIT 2,(IX+$26) ;
 $B6D7 JR NZ,$B749    ;
 $B6D9 BIT 5,(IX+$20) ;
 $B6DD JR NZ,$B749    ;
 $B6DF LD A,(IX+$25)  ;
 $B6E2 LD B,A         ;
 $B6E3 SUB $0E        ;
 $B6E5 JR NC,$B6EB    ;
 $B6E7 AND $01        ;
 $B6E9 ADD A,$06      ;
*$B6EB RLA            ;
 $B6EC SLA B          ;
 $B6EE RRA            ;
 $B6EF LD (IX+$25),A  ;
 $B6F2 LD A,(IX+$22)  ;
 $B6F5 CP $FF         ;
 $B6F7 JR Z,$B749     ;
 $B6F9 SUB C          ;
 $B6FA LD (IX+$22),A  ;
 $B6FD JR Z,$B701     ;
 $B6FF JR NC,$B749    ;
*$B701 XOR A          ;
 $B702 DEC A          ;
 $B703 SET 4,(IX+$20) ;
 $B707 LD (IX+$22),A  ;
 $B70A BIT 6,(IX+$26) ;
 $B70E JR Z,$B722     ;
 $B710 LD A,($9CB2)   ;
 $B713 AND A          ;
 $B714 JR Z,$B722     ;
 $B716 CP $03         ;
 $B718 JR Z,$B722     ;
 $B71A LD A,$03       ;
 $B71C LD ($9CB2),A   ;
 $B71F ADD A,A        ;
 $B720 JR $B746       ;
*$B722 LD H,(IX+$24)  ;
 $B725 LD L,(IX+$23)  ;
 $B728 LD A,(HL)      ;
 $B729 AND $0F        ;
 $B72B LD A,$06       ;
 $B72D JR NZ,$B746    ;
 $B72F LD DE,$0007    ;
 $B732 ADD HL,DE      ;
 $B733 LD A,(HL)      ;
 $B734 CP $55         ;
 $B736 LD A,$05       ;
 $B738 JR NC,$B746    ;
 $B73A LD A,(HL)      ;
 $B73B CP $3C         ;
 $B73D JR NZ,$B749    ;
 $B73F LD A,C         ;
 $B740 CP $32         ;
 $B742 JR NZ,$B749    ;
 $B744 LD A,$08       ;
*$B746 CALL $B867     ;
*$B749 CALL $B799     ;
 $B74C LD B,A         ;
 $B74D AND $0C        ;
 $B74F LD C,A         ;
 $B750 LD ($B4D6),A   ;
 $B753 LD A,B         ;
 $B754 AND $03        ;
 $B756 OR $01         ;
 $B758 SUB $01        ;
 $B75A LD D,A         ;
 $B75B RLC B          ;
 $B75D RLC B          ;
 $B75F LD A,B         ;
 $B760 AND $03        ;
 $B762 OR $01         ;
 $B764 SUB $01        ;
 $B766 LD E,A         ;
 $B767 PUSH DE        ;
 $B768 LD A,C         ;
 $B769 OR $03         ;
 $B76B LD C,A         ;
 $B76C LD HL,$543F    ;
 $B76F PUSH HL        ;
 $B770 CALL $B044     ;
 $B773 POP HL         ;
 $B774 POP DE         ;
 $B775 LD A,($B4D6)   ;
 $B778 OR $01         ;
 $B77A LD C,A         ;
 $B77B PUSH DE        ;
 $B77C CALL $B044     ;
 $B77F POP DE         ;
 $B780 LD HL,$403F    ;
 $B783 LD A,($B4D6)   ;
 $B786 OR $03         ;
 $B788 LD C,A         ;
 $B789 PUSH HL        ;
 $B78A PUSH DE        ;
 $B78B CALL $B044     ;
 $B78E POP DE         ;
 $B78F POP HL         ;
 $B790 LD A,($B4D6)   ;
 $B793 OR $01         ;
 $B795 LD C,A         ;
 $B796 JP $B044       ;

; Routine at B799
;
; Used by the routines at #R$A2C0, #R$A3A2, #R$A587, #R$A84D, #R$B4D8, #R$B63C,
; #R$B898, #R$B96B, #R$B9E7, #R$BA83, #R$BA94, #R$BBBA, #R$BBF2, #R$BC21 and
; #R$BC78.
; .
; Is this some kind of random number generator?
@label=rand_no
c$B799 PUSH HL       ;
 $B79A PUSH BC       ;
 $B79B LD HL,($B7AA) ; Get old value
 $B79E LD A,H        ; A=H
 $B79F ADC A,A       ; A=2*H
 $B7A0 LD B,A        ; B=2*H
 $B7A1 ADC A,L       ; A=2*H+L
 $B7A2 LD H,A        ; H=2*H+L
 $B7A3 LD L,B        ; L=2*H
 $B7A4 LD ($B7AA),HL ; Save new value
 $B7A7 POP BC        ;
 $B7A8 POP HL        ;
 $B7A9 RET           ;

; Data block at B7AA
@label=word_at_B7AA
w$B7AA DEFW $F562

; Routine at B7AC
;
; Used by the routine at #R$B7B4.
c$B7AC XOR A         ;
 $B7AD LD ($7043),A  ;
 $B7B0 LD ($7044),A  ;
 $B7B3 RET           ;

; Routine at B7B4
;
; Used by the routines at #R$9C8C and #R$9CB5.
c$B7B4 LD A,($711F)  ;
 $B7B7 AND A         ;
 $B7B8 JR NZ,$B7AC   ;
 $B7BA LD A,($70E3)  ;
 $B7BD CP $04        ;
 $B7BF RET NC        ;
 $B7C0 LD HL,$D07D   ;
 $B7C3 LD D,$00      ;
 $B7C5 LD E,A        ;
 $B7C6 ADD HL,DE     ;
 $B7C7 LD A,(HL)     ;
 $B7C8 AND A         ;
 $B7C9 JR Z,$B7F4    ;
 $B7CB LD HL,$0800   ;
 $B7CE LD DE,$1000   ;
 $B7D1 LD C,$0A      ;
 $B7D3 PUSH DE       ;
 $B7D4 PUSH HL       ;
 $B7D5 CALL $B044    ;
 $B7D8 POP HL        ;
 $B7D9 POP DE        ;
 $B7DA LD C,E        ;
 $B7DB CALL $B044    ;
 $B7DE LD HL,$0010   ;
 $B7E1 LD DE,$0008   ;
 $B7E4 LD C,D        ;
 $B7E5 PUSH DE       ;
 $B7E6 PUSH HL       ;
 $B7E7 CALL $B044    ;
 $B7EA POP HL        ;
 $B7EB POP DE        ;
 $B7EC LD C,$05      ;
 $B7EE CALL $B044    ;
 $B7F1 CALL $B63C    ;
*$B7F4 LD A,($D0B0)  ;
 $B7F7 BIT 7,A       ;
 $B7F9 JR Z,$B801    ;
 $B7FB LD A,($D0AF)  ;
 $B7FE CP $04        ;
 $B800 RET Z         ;
*$B801 LD HL,$FC0B   ;
 $B804 LD B,(HL)     ;
 $B805 RES 4,(HL)    ;
 $B807 LD A,($D085)  ;
 $B80A LD C,A        ;
 $B80B LD A,($9C9B)  ;
 $B80E AND A         ;
 $B80F JR Z,$B82C    ;
 $B811 DEC A         ;
 $B812 LD ($9C9B),A  ;
 $B815 JR NZ,$B819   ;
 $B817 RES 7,C       ;
*$B819 LD HL,$7128   ;
 $B81C SET 5,(HL)    ;
 $B81E LD A,C        ;
 $B81F AND A         ;
 $B820 RET Z         ;
 $B821 LD ($D085),A  ;
 $B824 LD A,($9CA2)  ;
 $B827 INC A         ;
 $B828 LD ($9CA2),A  ;
 $B82B RET           ;
*$B82C LD A,C        ;
 $B82D AND A         ;
 $B82E RET Z         ;
 $B82F BIT 4,B       ;
 $B831 RET Z         ;
 $B832 OR $80        ;
 $B834 LD ($D085),A  ;
 $B837 LD A,$0A      ;
 $B839 LD ($9C9B),A  ;
 $B83C RET           ;

; Data block at B83D
@label=byte_at_B83D
b$B83D DEFB $00

; Data block at B83E
@label=ship_init_data
b$B83E DEFB $00,$32,$00,$00,$32,$00,$00,$32
 $B846 DEFB $00,$00,$00,$00,$00,$FF,$FF,$00
 $B84E DEFB $00,$FF,$7F,$00,$00,$FF,$FF,$00
 $B856 DEFB $00,$00,$00,$00,$00,$00,$00

; Data block at B85D
@label=orient_vectors_init
b$B85D DEFB $58,$44,$41,$98,$64,$CB,$5A,$A7
 $B865 DEFB $D1

; Byte at B866
b$B866 DEFB $00

; Routine at B867
;
; Used by the routines at #R$9C9C, #R$9CBB, #R$A3A2, #R$B618 and #R$B63C.
;
; A Some value, e.g. $79, lower nybble is action, upper nybble is ship
@label=ship_action
c$B867 LD C,A        ; {Set C to upper nybble shifted down
 $B868 SRL C         ;
 $B86A SRL C         ;
 $B86C SRL C         ;
 $B86E SRL C         ; }
 $B870 AND $0F       ; Isolate lower nybble in A
 $B872 JP Z,$BBBA    ; Jump if lower nybble is 0
 $B875 DEC A         ;
 $B876 JP Z,$B96B    ; Jump if lower nybble was 1
 $B879 DEC A         ;
 $B87A JP Z,$B99F    ; Jump if lower nybble was 2
 $B87D DEC A         ;
 $B87E RET Z         ; Return if lower nybble was 3
 $B87F DEC A         ;
 $B880 JP Z,$B9E7    ; Jump if lower nybble was 4
 $B883 DEC A         ;
 $B884 JP Z,$BA94    ; Jump if lower nybble was 5
 $B887 DEC A         ;
 $B888 JP Z,$BAF2    ; Jump if lower nybble was 6
 $B88B DEC A         ;
 $B88C JP Z,$BAFA    ; Jump if lower nybble was 7
 $B88F DEC A         ;
 $B890 JP Z,$BB4D    ; Jump if lower nybble was 8
 $B893 DEC A         ;
 $B894 JP Z,$BB75    ; Jump if lower nybble was 9
 $B897 RET           ;

; Create a ship from a blueprint
;
; Used by the routines at #R$B91E, #R$B94A, #R$B96B, #R$BB75, #R$BBF2, #R$BC21
; and #R$BC78.
;
; A Index of ship blueprint
; IX Address of ship buffer, e.g. current_ship
@label=create_ship
c$B898 LD HL,$6180    ; Table of ship blueprints
 $B89B LD B,A         ; Copy index to B
 $B89C AND $3F        ; Cap at 63
 $B89E ADD A,A        ; Index x 2
 $B89F ADD A,A        ; Index x 4
 $B8A0 ADD A,L        ; {Add offset to HL
 $B8A1 LD L,A         ;
 $B8A2 JR NC,$B8A5    ;
 $B8A4 INC H          ; }
*$B8A5 INC HL         ; Skip past first byte
 $B8A6 LD E,(HL)      ; Get LSB of blueprint
 $B8A7 INC HL         ; Skip past LSB
 $B8A8 LD D,(HL)      ; Get MSB of blueprint
 $B8A9 PUSH DE        ; {Copy blueprint address into IY
 $B8AA POP IY         ; }
 $B8AC LD (IX+$24),D  ; {Also store in ship buffer bytes $23-$24
 $B8AF LD (IX+$23),E  ; }
 $B8B2 PUSH IX        ; {Set DE=ship structure
 $B8B4 POP DE         ; }
 $B8B5 LD BC,$001F    ; Number of bytes to copy
 $B8B8 LD HL,$B83E    ; Ship init data
 $B8BB LDIR           ; Copy $1F bytes to ship buffer
 $B8BD LD A,(IY+$07)  ; Max energy from blueprint
 $B8C0 LD (IX+$22),A  ; Copy into ship buffer byte $22 -> energy
 $B8C3 LD A,(IY+$12)  ; Unknown blueprint property
 $B8C6 LD C,A         ;
 $B8C7 AND $6F        ;
 $B8C9 LD (IX+$21),A  ; Store in ship buffer byte $21
 $B8CC LD A,(IY+$0A)  ; Unknown blueprint property
 $B8CF AND $07        ; Preserve 3 bits
 $B8D1 RLA            ; Roll A left
 $B8D2 RL C           ; Place bit 7 of C in carry flag
 $B8D4 RRA            ; Roll A right, getting bit 7 from C
 $B8D5 LD (IX+$20),A  ; Store in ship buffer byte $20
 $B8D8 LD A,(IY+$06)  ; Max speed
 $B8DB SRL A          ; Divide by 2
 $B8DD LD (IX+$1B),A  ; Store in ship buffer byte $1B -> speed
 $B8E0 LD A,$7E       ; {Store $7E in ship buffer byte $25
 $B8E2 LD (IX+$25),A  ; }
 $B8E5 XOR A          ; {Store $00 in ship buffer byte $26
 $B8E6 LD (IX+$26),A  ; }
 $B8E9 SET 6,(IX+$20) ;
 $B8ED BIT 2,(IX+$21) ;
 $B8F1 JR NZ,$B903    ;
 $B8F3 CALL $B799     ; Random number
 $B8F6 AND $07        ;
 $B8F8 LD (IX+$01),A  ; x_hi
 $B8FB CALL $B799     ; Random number
 $B8FE AND $07        ;
 $B900 LD (IX+$04),A  ; y_hi
*$B903 CALL $B799     ; Random number
 $B906 LD (IX+$00),A  ; x_lo
 $B909 CALL $B799     ; Random number
 $B90C LD (IX+$03),A  ; y_lo
 $B90F CALL $B799     ; Random number
 $B912 RRA            ;
 $B913 RR (IX+$02)    ; x_sign
 $B917 RRA            ;
 $B918 RR (IX+$05)    ; y_sign
 $B91C XOR A          ;
 $B91D RET            ;

; Routine at B91E
;
; Used by the routines at #R$B99F, #R$B9E7, #R$BB2F and #R$BB4D.
c$B91E LD C,A        ;
 $B91F PUSH IX       ;
 $B921 CALL $B936    ;
 $B924 POP HL        ;
 $B925 RET NZ        ;
 $B926 PUSH HL       ;
 $B927 LD A,C        ;
 $B928 CALL $B898    ;
 $B92B POP HL        ;
 $B92C PUSH IX       ;
 $B92E POP DE        ;
 $B92F LD BC,$001B   ;
 $B932 LDIR          ;
 $B934 XOR A         ;
 $B935 RET           ;

; Routine at B936
;
; Used by the routines at #R$B91E, #R$B94A, #R$B96B, #R$B99F, #R$BBBA, #R$BBF2,
; #R$BC21 and #R$BC78.
c$B936 LD IX,$6048   ;
 $B93A LD DE,$0027   ;
 $B93D LD B,$06      ;
*$B93F ADD IX,DE     ;
 $B941 LD A,(IX+$22) ;
 $B944 AND A         ;
 $B945 RET Z         ;
 $B946 DJNZ $B93F    ;
 $B948 INC B         ;
 $B949 RET           ;

; Routine at B94A
;
; Used by the routine at #R$BA94.
c$B94A LD C,A         ;
 $B94B CALL $B936     ;
 $B94E RET NZ         ;
 $B94F LD A,C         ;
; This entry point is used by the routines at #R$B99F and #R$BAE8.
*$B950 CALL $B898     ;
 $B953 RES 7,(IX+$0E) ;
 $B957 RES 7,(IX+$16) ;
 $B95B LD (IX+$00),A  ;
 $B95E LD (IX+$01),A  ;
 $B961 LD (IX+$04),A  ;
 $B964 LD (IX+$06),A  ;
 $B967 LD (IX+$07),A  ;
 $B96A RET            ;

; Routine at B96B
;
; Used by the routine at #R$B867.
c$B96B CALL $B799     ;
 $B96E AND $01        ;
 $B970 ADD A,$03      ;
 $B972 LD C,A         ;
*$B973 CALL $B936     ;
 $B976 RET NZ         ;
 $B977 LD A,$0F       ;
 $B979 PUSH BC        ;
 $B97A CALL $B898     ;
 $B97D SET 0,(IX+$25) ;
 $B981 CALL $B799     ;
 $B984 AND $0F        ;
 $B986 OR $04         ;
 $B988 LD (IX+$07),A  ;
 $B98B RRA            ;
 $B98C RRA            ;
 $B98D RRA            ;
 $B98E AND $01        ;
 $B990 LD (IX+$01),A  ;
 $B993 XOR A          ;
 $B994 LD (IX+$04),A  ;
 $B997 CALL $BA83     ;
 $B99A POP BC         ;
 $B99B DEC C          ;
 $B99C JR NZ,$B973    ;
 $B99E RET            ;

; Routine at B99F
;
; Used by the routine at #R$B867.
c$B99F LD A,C         ;
 $B9A0 AND A          ;
 $B9A1 JR Z,$B9CF     ;
 $B9A3 LD IX,$6048    ;
 $B9A7 LD DE,$0111    ;
 $B9AA ADD IX,DE      ;
 $B9AC LD A,(IX+$22)  ;
 $B9AF AND A          ;
 $B9B0 JR Z,$B9B6     ;
 $B9B2 CALL $B936     ;
 $B9B5 RET NZ         ;
*$B9B6 LD A,$01       ;
 $B9B8 PUSH BC        ;
 $B9B9 CALL $B950     ;
 $B9BC POP BC         ;
 $B9BD LD A,$6A       ;
 $B9BF LD (IX+$06),A  ;
 $B9C2 LD A,$29       ;
 $B9C4 LD (IX+$03),A  ;
 $B9C7 LD A,$80       ;
 $B9C9 LD (IX+$05),A  ;
 $B9CC LD A,C         ;
 $B9CD JR $B9DE       ;
*$B9CF LD A,$01       ;
 $B9D1 CALL $B91E     ;
 $B9D4 RET NZ         ;
 $B9D5 LD A,($70E6)   ;
 $B9D8 ADD A,(IX+$1B) ;
 $B9DB LD (IX+$1B),A  ;
*$B9DE LD (IX+$25),C  ;
 $B9E1 SET 0,(IX+$26) ;
 $B9E5 XOR A          ;
 $B9E6 RET            ;

; Routine at B9E7
;
; Used by the routine at #R$B867.
c$B9E7 LD A,$08       ;
 $B9E9 DEC C          ;
 $B9EA JR Z,$BA0D     ;
 $B9EC CALL $B799     ;
 $B9EF AND $01        ;
 $B9F1 ADD A,$09      ;
 $B9F3 DEC C          ;
 $B9F4 JR Z,$BA0D     ;
 $B9F6 LD A,$12       ;
 $B9F8 DEC C          ;
 $B9F9 JR Z,$BA0D     ;
 $B9FB LD A,$0F       ;
 $B9FD DEC C          ;
 $B9FE JR Z,$BA0D     ;
 $BA00 DEC C          ;
 $BA01 RET NZ         ;
 $BA02 CALL $B799     ;
 $BA05 BIT 0,A        ;
 $BA07 LD A,$10       ;
 $BA09 JR Z,$BA0D     ;
 $BA0B LD A,$11       ;
*$BA0D PUSH IX        ;
 $BA0F CALL $B91E     ;
 $BA12 POP IY         ;
 $BA14 RET NZ         ;
 $BA15 BIT 2,(IY+$26) ;
 $BA19 CALL Z,$BA27   ;
 $BA1C BIT 2,(IY+$21) ;
 $BA20 RET Z          ;
 $BA21 SET 2,(IX+$21) ;
 $BA25 XOR A          ;
 $BA26 RET            ;

; Routine at BA27
;
; Used by the routines at #R$B9E7 and #R$BB4D.
c$BA27 LD A,($B866)  ;
 $BA2A XOR $01       ;
 $BA2C LD ($B866),A  ;
 $BA2F JR Z,$BA58    ;
 $BA31 PUSH IX       ;
 $BA33 CALL $BA3F    ;
 $BA36 CALL $BA3F    ;
 $BA39 CALL $BA3F    ;
 $BA3C POP IX        ;
 $BA3E RET           ;

; Routine at BA3F
;
; Used by the routine at #R$BA27.
c$BA3F LD A,(IX+$0A) ;
 $BA42 LD B,(IX+$10) ;
 $BA45 LD (IX+$10),A ;
 $BA48 LD (IX+$0A),B ;
 $BA4B LD A,(IX+$16) ;
 $BA4E XOR $80       ;
 $BA50 LD (IX+$16),A ;
 $BA53 INC IX        ;
 $BA55 INC IX        ;
 $BA57 RET           ;

; Routine at BA58
;
; Used by the routine at #R$BA27.
c$BA58 LD A,(IX+$10) ;
 $BA5B XOR $80       ;
 $BA5D LD B,(IX+$0A) ;
 $BA60 LD (IX+$0A),A ;
 $BA63 LD (IX+$10),B ;
 $BA66 LD A,(IX+$12) ;
 $BA69 XOR $80       ;
 $BA6B LD B,(IX+$0C) ;
 $BA6E LD (IX+$0C),A ;
 $BA71 LD (IX+$12),B ;
 $BA74 LD A,(IX+$14) ;
 $BA77 XOR $80       ;
 $BA79 LD B,(IX+$0E) ;
 $BA7C LD (IX+$0E),A ;
 $BA7F LD (IX+$14),B ;
 $BA82 RET           ;

; Routine at BA83
;
; Used by the routines at #R$B96B, #R$BA94 and #R$BAE8.
c$BA83 CALL $B799    ;
 $BA86 AND $87       ;
 $BA88 LD (IX+$0A),A ;
 $BA8B CALL $B799    ;
 $BA8E AND $87       ;
 $BA90 LD (IX+$0C),A ;
 $BA93 RET           ;

; Routine at BA94
;
; Used by the routine at #R$B867.
c$BA94 BIT 0,C        ;
 $BA96 JR Z,$BAE8     ;
 $BA98 CALL $BA9C     ;
 $BA9B RET NZ         ;
*$BA9C LD A,$03       ;
; This entry point is used by the routine at #R$BAE8.
*$BA9E CALL $B94A     ;
 $BAA1 RET NZ         ;
 $BAA2 CALL $BA83     ;
 $BAA5 RES 6,(IX+$20) ;
 $BAA9 CALL $B799     ;
 $BAAC AND $3F        ;
 $BAAE OR $10         ;
 $BAB0 LD (IX+$00),A  ;
 $BAB3 LD A,(IX+$0A)  ;
 $BAB6 AND $80        ;
 $BAB8 XOR $80        ;
 $BABA LD (IX+$02),A  ;
 $BABD CALL $B799     ;
 $BAC0 AND $3F        ;
 $BAC2 OR $10         ;
 $BAC4 LD (IX+$03),A  ;
 $BAC7 LD A,(IX+$0C)  ;
 $BACA AND $80        ;
 $BACC XOR $80        ;
 $BACE LD (IX+$05),A  ;
 $BAD1 LD A,$19       ;
 $BAD3 LD (IX+$06),A  ;
 $BAD6 CALL $B799     ;
 $BAD9 LD (IX+$1D),A  ;
 $BADC CALL $B799     ;
 $BADF AND $1F        ;
 $BAE1 OR $08         ;
 $BAE3 LD (IX+$1B),A  ;
 $BAE6 XOR A          ;
 $BAE7 RET            ;

; Routine at BAE8
;
; Used by the routine at #R$BA94.
c$BAE8 LD A,$03       ;
 $BAEA CALL $BB55     ;
 $BAED RET NZ         ;
 $BAEE LD A,$03       ;
 $BAF0 JR $BB55       ;
; This entry point is used by the routine at #R$B867.
*$BAF2 BIT 0,C        ;
 $BAF4 LD A,$04       ;
 $BAF6 JR Z,$BB2F     ;
 $BAF8 JR $BA9E       ;
; This entry point is used by the routine at #R$B867.
*$BAFA BIT 0,C        ;
 $BAFC LD A,$02       ;
 $BAFE JR Z,$BB2F     ;
 $BB00 LD A,$09       ;
 $BB02 LD IX,$6132    ;
 $BB06 CALL $B950     ;
 $BB09 CALL $BA83     ;
 $BB0C LD A,$80       ;
 $BB0E LD (IX+$05),A  ;
 $BB11 LD A,$1C       ;
 $BB13 LD (IX+$03),A  ;
 $BB16 RES 6,(IX+$20) ;
 $BB1A LD A,$4C       ;
 $BB1C LD (IX+$06),A  ;
 $BB1F LD A,$C0       ;
 $BB21 LD (IX+$1E),A  ;
 $BB24 LD A,($70E6)   ;
 $BB27 ADD A,(IX+$1B) ;
 $BB2A LD (IX+$1B),A  ;
 $BB2D XOR A          ;
 $BB2E RET            ;

; Routine at BB2F
;
; Used by the routine at #R$BAE8.
c$BB2F PUSH IX        ;
 $BB31 CALL $B91E     ;
 $BB34 EX (SP),IX     ;
 $BB36 POP HL         ;
 $BB37 RET NZ         ;
 $BB38 PUSH HL        ;
 $BB39 EX (SP),IX     ;
 $BB3B RES 6,(IX+$20) ;
 $BB3F LD A,$0A       ;
 $BB41 LD (IX+$26),A  ;
 $BB44 LD A,$80       ;
 $BB46 LD (IX+$1D),A  ;
 $BB49 XOR A          ;
 $BB4A POP IX         ;
 $BB4C RET            ;

; Routine at BB4D
;
; Used by the routine at #R$B867.
c$BB4D LD A,$05       ;
 $BB4F CALL $BB55     ;
 $BB52 RET NZ         ;
 $BB53 LD A,$05       ;
; This entry point is used by the routine at #R$BAE8.
*$BB55 PUSH IX        ;
 $BB57 CALL $B91E     ;
 $BB5A EX (SP),IX     ;
 $BB5C POP HL         ;
 $BB5D RET NZ         ;
 $BB5E PUSH HL        ;
 $BB5F EX (SP),IX     ;
 $BB61 CALL $BA27     ;
 $BB64 LD A,$0A       ;
 $BB66 LD (IX+$26),A  ;
 $BB69 RES 6,(IX+$20) ;
 $BB6D SET 7,(IX+$1D) ;
 $BB71 POP IX         ;
 $BB73 XOR A          ;
 $BB74 RET            ;

; Routine at BB75
;
; Used by the routine at #R$B867.
@label=create_current_ship
c$BB75 LD IX,$6159    ; Ship structure
 $BB79 LD A,C         ; Upper nybble from action
 $BB7A ADD A,$02      ; {Add 2, and use as index of blueprint for creating ship
 $BB7C CALL $B898     ; }
 $BB7F LD A,$C0       ;
 $BB81 LD (IX+$1D),A  ; Probably not roll counter and pitch counter
 $BB84 LD (IX+$1E),A  ;
 $BB87 XOR A          ;
 $BB88 LD (IX+$06),A  ; z_lo = 0
 $BB8B LD (IX+$00),A  ; x_lo = 0
 $BB8E LD (IX+$01),A  ; x_hi = 0
 $BB91 LD (IX+$03),A  ; y_lo = 0
 $BB94 LD (IX+$04),A  ; y_hi = 0
 $BB97 LD (IX+$08),A  ; z_sign = 0
 $BB9A LD (IX+$1B),A  ; Speed
 $BB9D RES 6,(IX+$20) ;
 $BBA1 INC A          ;
 $BBA2 INC A          ;
 $BBA3 LD (IX+$07),A  ; z_hi = 2
 $BBA6 PUSH IX        ; {HL = Ship structure
 $BBA8 POP HL         ; }
 $BBA9 LD DE,$0009    ; DE = 9
 $BBAC LD B,D         ; {BC = 9
 $BBAD LD C,E         ; }
 $BBAE ADD HL,DE      ; HL = Orientation vectors
 $BBAF EX DE,HL       ; DE = Orientation vectors
 $BBB0 LD HL,$B85D    ; Init data for orientation vectors
*$BBB3 INC DE         ; {Skip low byte Copy init data to ship structure High
 $BBB4 LDI            ; bytes only
 $BBB6 JP PE,$BBB3    ; }
 $BBB9 RET            ;

; Routine at BBBA
;
; Used by the routine at #R$B867.
c$BBBA LD A,($D06E)  ;
 $BBBD LD C,A        ;
 $BBBE LD A,($D071)  ;
 $BBC1 ADD A,C       ;
 $BBC2 ADD A,A       ;
 $BBC3 LD C,A        ;
 $BBC4 LD A,($D075)  ;
 $BBC7 ADD A,C       ;
 $BBC8 LD C,A        ;
 $BBC9 LD A,($9CB2)  ;
 $BBCC AND A         ;
 $BBCD JR NZ,$BBFD   ;
 $BBCF CALL $B799    ;
 $BBD2 CP $1E        ;
 $BBD4 JR NC,$BBFD   ;
 $BBD6 LD A,($D0B0)  ;
 $BBD9 AND $42       ;
 $BBDB CP $02        ;
 $BBDD JR NZ,$BBFD   ;
 $BBDF DEC A         ;
 $BBE0 LD ($9CB2),A  ;
 $BBE3 LD A,$0F      ;
 $BBE5 LD HL,$BBF2   ;
 $BBE8 PUSH HL       ;
 $BBE9 PUSH AF       ;
 $BBEA CALL $B936    ;
 $BBED RET NZ        ;
 $BBEE LD A,$0D      ;
 $BBF0 JR $BC65      ;

; Routine at BBF2
c$BBF2 SET 6,(IX+$26) ;
 $BBF6 SET 2,(IX+$20) ;
 $BBFA JP $BCAB       ;
; This entry point is used by the routine at #R$BBBA.
*$BBFD CALL $B799     ;
 $BC00 SUB C          ;
 $BC01 JR C,$BC21     ;
 $BC03 CP $5A         ;
 $BC05 RET NC         ;
 $BC06 CP $50         ;
 $BC08 JR C,$BC21     ;
 $BC0A CALL $B936     ;
 $BC0D RET NZ         ;
 $BC0E LD A,$06       ;
 $BC10 CALL $B898     ;
 $BC13 SET 7,(IX+$0E) ;
 $BC17 RES 6,(IX+$20) ;
 $BC1B LD A,$C0       ;
 $BC1D LD (IX+$1D),A  ;
 $BC20 RET            ;

; Routine at BC21
;
; Used by the routine at #R$BBF2.
c$BC21 LD B,A         ;
 $BC22 AND $07        ;
 $BC24 LD E,A         ;
 $BC25 LD A,($D0AF)   ;
 $BC28 CP $04         ;
 $BC2A LD D,A         ;
 $BC2B LD C,$0F       ;
 $BC2D JR Z,$BC78     ;
 $BC2F LD A,D         ;
 $BC30 CP $01         ;
 $BC32 LD C,$0A       ;
 $BC34 JR Z,$BC78     ;
 $BC36 LD A,($D09D)   ;
 $BC39 AND $07        ;
 $BC3B JR Z,$BC40     ;
 $BC3D INC E          ;
 $BC3E CP E           ;
 $BC3F RET NC         ;
*$BC40 LD C,A         ;
 $BC41 BIT 3,B        ;
 $BC43 JP Z,$BC7F     ;
 $BC46 CALL $B936     ;
 $BC49 RET NZ         ;
 $BC4A CALL $B799     ;
 $BC4D AND $3F        ;
 $BC4F LD B,$0F       ;
 $BC51 JR Z,$BC63     ;
 $BC53 DEC B          ;
 $BC54 SUB $0C        ;
 $BC56 JR C,$BC63     ;
 $BC58 DEC B          ;
 $BC59 SUB $12        ;
 $BC5B JR C,$BC63     ;
 $BC5D DEC B          ;
 $BC5E SUB $10        ;
 $BC60 JR C,$BC63     ;
 $BC62 DEC B          ;
*$BC63 LD A,B         ;
; This entry point is used by the routine at #R$BC78.
*$BC64 PUSH AF        ;
; This entry point is used by the routine at #R$BBBA.
*$BC65 CALL $B898     ;
 $BC68 POP AF         ;
 $BC69 CP $0F         ;
 $BC6B JR Z,$BC73     ;
 $BC6D CALL $B799     ;
 $BC70 CP $33         ;
 $BC72 RET NC         ;
*$BC73 SET 0,(IX+$25) ;
 $BC77 RET            ;

; Routine at BC78
;
; Used by the routine at #R$BC21.
c$BC78 CALL $B936    ;
 $BC7B RET NZ        ;
 $BC7C LD A,C        ;
 $BC7D JR $BC64      ;
; This entry point is used by the routine at #R$BC21.
*$BC7F CALL $B799    ;
 $BC82 LD B,A        ;
 $BC83 AND $07       ;
 $BC85 CP E          ;
 $BC86 JR NC,$BCAB   ;
 $BC88 RLC B         ;
 $BC8A RLC B         ;
 $BC8C RLC B         ;
 $BC8E LD C,B        ;
 $BC8F CALL $B936    ;
 $BC92 RET NZ        ;
 $BC93 LD A,C        ;
 $BC94 AND $07       ;
 $BC96 CP $02        ;
 $BC98 JR C,$BCA3    ;
 $BC9A DEC A         ;
 $BC9B SRL A         ;
 $BC9D SRL A         ;
 $BC9F ADD A,$09     ;
 $BCA1 JR $BC64      ;
*$BCA3 LD A,C        ;
 $BCA4 RLCA          ;
 $BCA5 AND $01       ;
 $BCA7 ADD A,$07     ;
 $BCA9 JR $BC64      ;
; This entry point is used by the routine at #R$BBF2.
*$BCAB CALL $B799    ;
 $BCAE AND $03       ;
 $BCB0 RRA           ;
 $BCB1 ADC A,$02     ;
 $BCB3 LD C,A        ;
*$BCB4 CALL $B936    ;
 $BCB7 RET NZ        ;
 $BCB8 PUSH BC       ;
 $BCB9 CALL $B799    ;
 $BCBC AND $01       ;
 $BCBE ADD A,$10     ;
 $BCC0 CALL $B898    ;
 $BCC3 POP BC        ;
 $BCC4 DEC C         ;
 $BCC5 JR NZ,$BCB4   ;
 $BCC7 RET           ;

; Data block at BCC8
@label=saved_ship_address
w$BCC8 DEFW $0000

; Data block at BCCA
@label=normal_scaling
b$BCCA DEFB $00

; Data block at BCCB
@label=word_at_BCCB
w$BCCB DEFW $0000

; Data block at BCCD
@label=word_at_BCCD
w$BCCD DEFW $0000

; Data block at BCCF
@label=word_at_BCCF
w$BCCF DEFW $0000

; Data block at BCD1
@label=byte_at_BCD1
b$BCD1 DEFB $00

; Data block at BCD2
@label=byte_at_BCD2
b$BCD2 DEFB $00

; Data block at BCD3
@label=byte_at_BCD3
b$BCD3 DEFB $00

; Routine at BCD4
;
; Used by the routine at #R$A84D.
@label=face_visibility
c$BCD4 PUSH IX       ; Push ship address
 $BCD6 PUSH IY       ; Push blueprint address
 $BCD8 PUSH IY       ; Push blueprint address
 $BCDA EX (SP),IX    ; IX = blueprint, stack = ship
 $BCDC POP HL        ; HL = Ship address
 $BCDD LD ($BCC8),HL ; Save ship address
 $BCE0 LD D,(IX+$11) ; {DE = Offset to faces
 $BCE3 LD E,(IX+$10) ; }
 $BCE6 ADD IX,DE     ; IX = Address of faces
 $BCE8 LD DE,$A984   ; Face visibility table
 $BCEB LD A,(IY+$13) ; Normal scaling
 $BCEE LD ($BCCA),A  ; Save it
 $BCF1 LD A,(IY+$05) ; Number of faces
 $BCF4 AND A         ;
 $BCF5 LD IY,$A994   ; Table of ship calculations
 $BCF9 JR NZ,$BCFF   ; Jump if number of faces > 0
 $BCFB INC A         ; A = 1
 $BCFC LD (DE),A     ; Write to face visibility table
 $BCFD JR $BD5A      ; Return
*$BCFF PUSH AF       ;
 $BD00 PUSH DE       ;
 $BD01 LD A,(IX+$03) ; Get visibility distance and sign bits
 $BD04 AND $1F       ; Isolate visibility distance
 $BD06 CP $1F        ; Is it max?
 $BD08 JR Z,$BD15    ; Continue if so
 $BD0A LD B,A        ; {Compare with ship distance
 $BD0B LD A,($A9B8)  ;
 $BD0E CP B          ; }
 $BD0F JR C,$BD15    ; Continue if higher than ship distance
 $BD11 POP DE        ;
 $BD12 XOR A         ; Flag value 0
 $BD13 JR $BD4F      ; Jump to set flag
*$BD15 PUSH IY       ; Push table of ship calculations
 $BD17 LD HL,($BCC8) ; Restore ship address
 $BD1A PUSH HL       ; Push ship address
 $BD1B CALL $BDB4    ; Calculate for x
 $BD1E LD ($BCD1),A  ;
 $BD21 LD ($BCCB),HL ;
 $BD24 CALL $BDB4    ; Calculate for y
 $BD27 LD ($BCD2),A  ;
 $BD2A LD ($BCCD),HL ;
 $BD2D CALL $BDB4    ; Calculate for z
 $BD30 LD ($BCD3),A  ;
 $BD33 LD ($BCCF),HL ;
 $BD36 POP HL        ; Restore ship address
 $BD37 PUSH IX       ; Restore
 $BD39 LD IY,$BCCB   ; Vector
 $BD3D LD IX,$BCD1   ; Signs
 $BD41 CALL $BD5F    ; Cross product?
 $BD44 POP IX        ;
 $BD46 POP IY        ;
 $BD48 POP DE        ;
 $BD49 XOR A         ;
 $BD4A SLA H         ;
 $BD4C JR NC,$BD4F   ; H msb indicates if face is visible
 $BD4E INC A         ;
*$BD4F LD (DE),A     ; Record in face visibility table
 $BD50 INC DE        ;
 $BD51 LD BC,$0004   ; {Advance to next face
 $BD54 ADD IX,BC     ; }
 $BD56 POP AF        ;
 $BD57 DEC A         ; Dec face counter
 $BD58 JR NZ,$BCFF   ; Loop
*$BD5A POP IY        ;
 $BD5C POP IX        ;
 $BD5E RET           ;

; Routine at BD5F
;
; Used by the routine at #R$BCD4.
c$BD5F LD E,(IY+$01) ;
 $BD62 LD C,(IY+$00) ;
 $BD65 LD A,(IX+$00) ;
 $BD68 CALL $BD95    ;
 $BD6B PUSH HL       ;
 $BD6C LD E,(IY+$03) ;
 $BD6F LD C,(IY+$02) ;
 $BD72 LD A,(IX+$01) ;
 $BD75 CALL $BD95    ;
 $BD78 PUSH HL       ;
 $BD79 LD E,(IY+$05) ;
 $BD7C LD C,(IY+$04) ;
 $BD7F LD A,(IX+$02) ;
 $BD82 CALL $BD95    ;
 $BD85 POP DE        ;
 $BD86 CALL $AFCD    ;
 $BD89 ADC HL,HL     ;
 $BD8B BIT 7,B       ;
 $BD8D JR Z,$BD91    ;
 $BD8F SET 7,H       ;
*$BD91 POP DE        ;
 $BD92 JP $AFCD      ;

; Routine at BD95
;
; Used by the routine at #R$BD5F.
c$BD95 LD B,A        ;
 $BD96 SLA B         ;
 $BD98 AND $80       ;
 $BD9A XOR E         ;
 $BD9B LD E,A        ;
 $BD9C CALL $AB0B    ;
 $BD9F LD D,E        ;
 $BDA0 LD E,A        ;
 $BDA1 LD C,D        ;
 $BDA2 RES 7,C       ;
 $BDA4 PUSH DE       ;
 $BDA5 CALL $AB34    ;
 $BDA8 POP DE        ;
 $BDA9 LD A,D        ;
 $BDAA LD D,$00      ;
 $BDAC ADD HL,DE     ;
 $BDAD ADD HL,HL     ;
 $BDAE RLA           ;
 $BDAF RR H          ;
 $BDB1 RR L          ;
 $BDB3 RET           ;

; Routine at BDB4
;
; Used by the routine at #R$BCD4.
;
; I:IX Address of face structure
; I:IY Table of ship calculations
; O:A
; O:HL
;
c$BDB4 CALL $AC01    ; HL = normal_xyz ⋅ some vector, IY += 6
 $BDB7 POP BC        ; BC = return address
 $BDB8 EX (SP),IX    ; IX = Ship structure, stack = face structure
 $BDBA LD E,(IX+$00) ; Ship x_lo
 $BDBD LD D,(IX+$01) ; Ship x_hi
 $BDC0 LD A,(IX+$02) ; Ship x_sign
 $BDC3 INC IX        ; {Advance ship structure ptr 3 bytes
 $BDC5 INC IX        ; so for next calls we will use y or z
 $BDC7 INC IX        ; }
 $BDC9 EX (SP),IX    ; IX = face structure, stack = ship structure + 3
 $BDCB PUSH BC       ; Restore return address
 $BDCC LD C,A        ; C = x_sign
 $BDCD LD A,($BCCA)  ; Scaling
 $BDD0 SLA L         ; Magnitude of dot product
 $BDD2 PUSH HL       ; Save dot product
 $BDD3 LD B,A        ; Scaling
 $BDD4 INC B         ; {Scale down magnitude
*$BDD5 SRL L         ;
 $BDD7 DJNZ $BDD5    ; }
 $BDD9 RL L          ; Double
 $BDDB LD A,C        ; x_sign
 $BDDC XOR H         ; Combine with sign of dot product
 $BDDD SLA H         ; Move sign of dot product to carry
 $BDDF RLA           ; Move sign into A
 $BDE0 JR C,$BDE5    ; {Add ship x in DE
 $BDE2 ADD HL,DE     ; to HL
 $BDE3 JR $BDF4      ;
*$BDE5 EX DE,HL      ;
 $BDE6 AND A         ;
 $BDE7 SBC HL,DE     ;
 $BDE9 JR NC,$BDF4   ;
 $BDEB ADD HL,DE     ;
 $BDEC EX DE,HL      ;
 $BDED AND A         ;
 $BDEE SBC HL,DE     ;
 $BDF0 LD A,C        ;
 $BDF1 XOR $80       ; Flip sign
 $BDF3 LD C,A        ; }
*$BDF4 SLA C         ;
 $BDF6 RR H          ;
 $BDF8 RR L          ;
 $BDFA POP DE        ; Restore dot product in DE
 $BDFB LD A,E        ; Magnitude
 $BDFC RL D          ; Sign
 $BDFE RRA           ; Sign into A
 $BDFF RET           ;

; Table of squares
@label=sqr_table
b$BE00 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE08 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE10 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE18 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE20 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE28 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE30 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE38 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE40 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE48 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE50 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE58 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE60 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE68 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE70 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE78 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE80 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE88 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE90 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BE98 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEA0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEA8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEB0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEB8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEC0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEC8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BED0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BED8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEE0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEE8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEF0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BEF8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF00 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF08 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF10 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF18 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF20 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF28 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF30 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF38 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF40 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF48 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF50 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF58 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF60 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF68 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF70 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF78 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF80 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF88 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF90 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BF98 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFA0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFA8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFB0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFB8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFC0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFC8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFD0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFD8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFE0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFE8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFF0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $BFF8 DEFB $00,$00,$00,$00,$00,$00,$00,$00

; Screen buffer
@label=screen_buffer
b$C000 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C008 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C010 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C018 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C020 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C028 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C030 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C038 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C040 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C048 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C050 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C058 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C060 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C068 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C070 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C078 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C080 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C088 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C090 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C098 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0A8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0B0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0B8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0C8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0D0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0D8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0E8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0F0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C0F8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C100 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C108 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C110 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C118 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C120 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C128 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C130 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C138 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C140 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C148 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C150 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C158 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C160 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C168 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C170 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C178 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C180 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C188 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C190 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C198 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1A0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1A8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1B0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1B8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1C0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1C8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1D0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1D8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1E0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1E8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1F0 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C1F8 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C200 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C208 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C210 DEFB $00,$00,$00

; Lenslock
;
; Used by the routines at #R$C24A and #R$D07C.
c$C213 LD IX,$C7B6   ;
 $C217 LD IY,$5C3A   ;
 $C21B LD A,$02      ;
 $C21D CALL $1601    ;
 $C220 CALL $0D6B    ;
 $C223 CALL $C25D    ;

; Routine at C226 (lenslock)
c$C226 CALL $C3A8    ;
 $C229 LD A,($C781)  ;
 $C22C RR A          ;
 $C22E JR $C25C      ;

; Routine at C230 (lenslock)
c$C230 CALL $C727    ;

; Message at C233 (lenslock)
t$C233 DEFM "  WRONG - TRY AGAIN   "

; Data block at C249 (lenslock)
b$C249 DEFB $5E

; Routine at C24A (lenslock)
c$C24A LD HL,$0000   ;
*$C24D DEC HL        ;
 $C24E LD A,H        ;
 $C24F OR L          ;
 $C250 JR NZ,$C24D   ;
 $C252 LD A,($C78A)  ;
 $C255 DEC A         ;
 $C256 LD ($C78A),A  ;
 $C259 JR NZ,$C213   ;
 $C25B RST $00       ;

; Routine at C25C (lenslock)
;
; Used by the routine at #R$C226.
c$C25C RET           ;

; Routine at C25D (lenslock)
;
; Used by the routine at #R$C213.
c$C25D CALL $C2BA    ;
 $C260 LD A,$23      ;
 $C262 LD ($5C09),A  ;
 $C265 CALL $C414    ;

; Routine at C268 (lenslock)
c$C268 LD C,A        ;
 $C269 LD B,$00      ;
 $C26B LD DE,$000B   ;
 $C26E CALL $C408    ;
 $C271 LD (IX+$00),C ;
 $C274 CALL $C37C    ;
 $C277 CALL $C391    ;
 $C27A XOR A         ;
 $C27B LD ($5C09),A  ;
 $C27E LD HL,$5C6A   ;
 $C281 SET 3,(HL)    ;
 $C283 LD A,$04      ;
 $C285 LD ($C77E),A  ;
*$C288 LD A,($C77E)  ;
 $C28B DEC A         ;
 $C28C LD ($C77E),A  ;
 $C28F JR Z,$C2B5    ;
 $C291 CALL $C2BA    ;
 $C294 CALL $C4D0    ;
 $C297 LD A,R        ;
 $C299 LD H,A        ;
 $C29A LD A,R        ;
 $C29C LD L,A        ;
 $C29D LD ($C784),HL ;
 $C2A0 CALL $C37C    ;
 $C2A3 CALL $C6A6    ;
 $C2A6 CALL $C2C9    ;
 $C2A9 CALL $C608    ;
 $C2AC JR C,$C288    ;
 $C2AE LD A,$01      ;
 $C2B0 LD ($C781),A  ;
 $C2B3 JR $C2B9      ;
*$C2B5 XOR A         ;
 $C2B6 LD ($C781),A  ;
*$C2B9 RET           ;

; Routine at C2BA (lenslock)
;
; Used by the routines at #R$C25D, #R$C268 and #R$C414.
c$C2BA LD HL,$4000   ;
 $C2BD LD DE,$1800   ;
*$C2C0 XOR A         ;
 $C2C1 LD (HL),A     ;
 $C2C2 DEC DE        ;
 $C2C3 INC HL        ;
 $C2C4 LD A,D        ;
 $C2C5 OR E          ;
 $C2C6 RET Z         ;
 $C2C7 JR $C2C0      ;

; Routine at C2C9 (lenslock)
;
; Used by the routines at #R$C268 and #R$C4FF.
c$C2C9 LD BC,$5880   ;
 $C2CC LD A,B        ;
 $C2CD PUSH AF       ;
 $C2CE PUSH BC       ;
 $C2CF CALL $C2F7    ;
 $C2D2 POP BC        ;
 $C2D3 POP AF        ;
 $C2D4 DEC C         ;
 $C2D5 CALL $C2F7    ;
 $C2D8 LD BC,$0808   ;
*$C2DB PUSH BC       ;
 $C2DC CALL $C6E6    ;
 $C2DF CALL $C59C    ;
 $C2E2 POP DE        ;
 $C2E3 PUSH DE       ;
 $C2E4 CALL $C303    ;
 $C2E7 POP BC        ;
 $C2E8 DJNZ $C2DB    ;
 $C2EA RET           ;

; Routine at C2EB (lenslock)
;
; Used by the routines at #R$C3DF and #R$C4D0.
c$C2EB PUSH AF       ;
 $C2EC PUSH BC       ;
 $C2ED CALL $22DF    ;
 $C2F0 POP BC        ;
 $C2F1 INC C         ;
 $C2F2 POP AF        ;
 $C2F3 DEC A         ;
 $C2F4 JR NZ,$C2EB   ;
 $C2F6 RET           ;

; Routine at C2F7 (lenslock)
;
; Used by the routines at #R$C2C9 and #R$C4D0.
c$C2F7 PUSH AF       ;
 $C2F8 PUSH BC       ;
 $C2F9 CALL $22DF    ;
 $C2FC POP BC        ;
 $C2FD INC B         ;
 $C2FE POP AF        ;
 $C2FF DEC A         ;
 $C300 JR NZ,$C2F7   ;
 $C302 RET           ;

; Routine at C303 (lenslock)
;
; Used by the routine at #R$C2C9.
c$C303 LD A,E        ;
 $C304 SUB D         ;
 $C305 LD E,A        ;
 $C306 INC E         ;
 $C307 PUSH DE       ;
 $C308 LD C,$14      ;
 $C30A LD E,(IX+$00) ;
 $C30D XOR A         ;
 $C30E LD B,A        ;
 $C30F LD D,A        ;
 $C310 CALL $C3F3    ;
 $C313 LD E,$64      ;
 $C315 CALL $C408    ;
 $C318 LD A,C        ;
 $C319 LD ($C77C),A  ;
 $C31C POP DE        ;
 $C31D LD D,$00      ;
 $C31F CALL $C3F3    ;
 $C322 LD A,$78      ;
 $C324 SUB C         ;
 $C325 LD D,A        ;
 $C326 PUSH DE       ;
 $C327 LD HL,$C796   ;
 $C32A LD DE,$C790   ;
 $C32D LD BC,$0003   ;
 $C330 LDIR          ;
 $C332 LD B,$0E      ;
 $C334 LD A,$01      ;
 $C336 LD ($C376),A  ;
 $C339 POP DE        ;
*$C33A PUSH BC       ;
 $C33B PUSH DE       ;
 $C33C CALL $C374    ;
 $C33F LD D,A        ;
 $C340 CALL $C374    ;
 $C343 LD E,A        ;
 $C344 BIT 7,D       ;
 $C346 JR Z,$C359    ;
 $C348 LD A,E        ;
 $C349 NEG           ;
 $C34B LD E,A        ;
 $C34C LD A,D        ;
 $C34D NEG           ;
 $C34F LD D,A        ;
 $C350 SUB E         ;
 $C351 CALL $C3B8    ;
 $C354 POP DE        ;
 $C355 SUB C         ;
 $C356 LD E,A        ;
 $C357 JR $C361      ;
*$C359 LD A,E        ;
 $C35A SUB D         ;
 $C35B CALL $C3B8    ;
 $C35E POP DE        ;
 $C35F ADD A,C       ;
 $C360 LD E,A        ;
*$C361 PUSH DE       ;
 $C362 LD A,$01      ;
 $C364 LD HL,$C792   ;
 $C367 CALL $C5F5    ;
 $C36A POP DE        ;
 $C36B PUSH DE       ;
 $C36C CALL C,$C3DF  ;
 $C36F POP DE        ;
 $C370 POP BC        ;
 $C371 DJNZ $C33A    ;
 $C373 RET           ;

; Routine at C374 (lenslock)
;
; Used by the routines at #R$C303 and #R$C59C.
c$C374 LD A,(IX+$00) ;
 $C377 LD HL,$C376   ;
 $C37A INC (HL)      ;
 $C37B RET           ;

; Routine at C37C (lenslock)
;
; Used by the routine at #R$C268.
c$C37C LD A,$80      ;
 $C37E CALL $C68E    ;
 $C381 RES 0,A       ;
 $C383 LD ($C77F),A  ;
 $C386 LD A,$80      ;
 $C388 CALL $C68E    ;
 $C38B RES 0,A       ;
 $C38D LD ($C780),A  ;
 $C390 RET           ;

; Routine at C391 (lenslock)
;
; Used by the routine at #R$C268.
c$C391 LD B,$05      ;
 $C393 LD A,(IX+$03) ;
 $C396 LD (IX+$02),A ;
 $C399 SUB B         ;
 $C39A LD (IX+$01),A ;
 $C39D LD A,(IX+$1A) ;
 $C3A0 LD (IX+$1B),A ;
 $C3A3 ADD A,B       ;
 $C3A4 LD (IX+$1C),A ;
 $C3A7 RET           ;

; Routine at C3A8 (lenslock)
;
; Used by the routines at #R$C226, #R$C414 and #R$C608.
c$C3A8 LD B,$14      ;
 $C3AA LD C,$02      ;
 $C3AC JR $C3B0      ;

; Routine at C3AE (lenslock)
;
; Used by the routines at #R$C43F and #R$C4B0.
c$C3AE LD C,$05      ;
; This entry point is used by the routine at #R$C3A8.
*$C3B0 LD A,$16      ;
 $C3B2 RST $10       ;
 $C3B3 LD A,B        ;
 $C3B4 RST $10       ;
 $C3B5 LD A,C        ;
 $C3B6 RST $10       ;
 $C3B7 RET           ;

; Routine at C3B8 (lenslock)
;
; Used by the routine at #R$C303.
c$C3B8 PUSH DE       ;
 $C3B9 LD C,A        ;
 $C3BA LD E,(IX+$00) ;
 $C3BD XOR A         ;
 $C3BE LD B,A        ;
 $C3BF LD D,A        ;
 $C3C0 CALL $C3F3    ;
 $C3C3 LD E,$0A      ;
 $C3C5 CALL $C408    ;
 $C3C8 LD ($C782),BC ;
 $C3CC POP DE        ;
 $C3CD LD C,D        ;
 $C3CE LD E,(IX+$00) ;
 $C3D1 XOR A         ;
 $C3D2 LD D,A        ;
 $C3D3 LD B,A        ;
 $C3D4 CALL $C3F3    ;
 $C3D7 LD E,$0A      ;
 $C3D9 CALL $C408    ;
 $C3DC LD A,$80      ;
 $C3DE RET           ;

; Routine at C3DF (lenslock)
;
; Used by the routine at #R$C303.
c$C3DF LD A,($C77C)  ;
 $C3E2 LD B,A        ;
*$C3E3 PUSH BC       ;
 $C3E4 PUSH DE       ;
 $C3E5 LD A,($C782)  ;
 $C3E8 LD B,D        ;
 $C3E9 LD C,E        ;
 $C3EA CALL $C2EB    ;
 $C3ED POP DE        ;
 $C3EE DEC D         ;
 $C3EF POP BC        ;
 $C3F0 DJNZ $C3E3    ;
 $C3F2 RET           ;

; Routine at C3F3 (lenslock)
;
; Used by the routines at #R$C303, #R$C3B8 and #R$C608.
c$C3F3 LD A,D        ;
 $C3F4 OR E          ;
 $C3F5 JR NZ,$C3FB   ;
 $C3F7 LD BC,$0000   ;
 $C3FA RET           ;
*$C3FB LD H,B        ;
 $C3FC LD L,C        ;
*$C3FD DEC DE        ;
 $C3FE LD A,D        ;
 $C3FF OR E          ;
 $C400 JR Z,$C405    ;
 $C402 ADD HL,BC     ;
 $C403 JR $C3FD      ;
*$C405 LD B,H        ;
 $C406 LD C,L        ;
 $C407 RET           ;

; Routine at C408 (lenslock)
;
; Used by the routines at #R$C268, #R$C303, #R$C3B8 and #R$C43F.
c$C408 LD H,B        ;
 $C409 LD L,C        ;
 $C40A LD BC,$0000   ;
*$C40D INC BC        ;
 $C40E SBC HL,DE     ;
 $C410 JR NC,$C40D   ;
 $C412 DEC BC        ;
 $C413 RET           ;

; Routine at C414 (lenslock)
;
; Used by the routine at #R$C25D.
c$C414 LD A,$90      ;
 $C416 LD ($C77D),A  ;
; This entry point is used by the routine at #R$C478.
*$C419 CALL $C2BA    ;
 $C41C CALL $C3A8    ;
 $C41F CALL $C727    ;

; Message at C422 (lenslock)
t$C422 DEFM "<(5) DECREASE - INCREASE (8)>"

; Routine at C43F (lenslock)
c$C43F LD E,(HL)     ;
 $C440 LD B,$15      ;
 $C442 CALL $C3AE    ;
 $C445 CALL $C52F    ;
 $C448 LD A,$78      ;
 $C44A LD ($C776),A  ;
 $C44D SUB $14       ;
 $C44F LD ($C777),A  ;
 $C452 CALL $C50B    ;
 $C455 LD A,($C77D)  ;
 $C458 LD C,A        ;
 $C459 LD B,$00      ;
 $C45B LD DE,$000B   ;
 $C45E CALL $C408    ;
 $C461 LD (IX+$00),C ;
 $C464 CALL $C4FF    ;
 $C467 LD A,($C77D)  ;
 $C46A LD B,A        ;
 $C46B LD A,$FF      ;
 $C46D SUB B         ;
 $C46E RRA           ;
 $C46F LD ($C77A),A  ;
 $C472 CALL $C4D0    ;
; This entry point is used by the routine at #R$C478.
*$C475 CALL $C67D    ;

; Routine at C478 (lenslock)
c$C478 PUSH AF       ;
 $C479 LD A,($C77D)  ;
 $C47C LD B,A        ;
 $C47D POP AF        ;
 $C47E CP $35        ;
 $C480 JR NZ,$C486   ;
 $C482 DEC B         ;
 $C483 DEC B         ;
 $C484 JR $C48C      ;
*$C486 CP $38        ;
 $C488 JR NZ,$C49C   ;
 $C48A INC B         ;
 $C48B INC B         ;
*$C48C LD A,B        ;
 $C48D LD ($C77B),A  ;
 $C490 CP $50        ;
 $C492 JR NC,$C496   ;
 $C494 LD A,$50      ;
*$C496 LD ($C77D),A  ;
 $C499 JP $C419      ;
*$C49C CP $0D        ;
 $C49E JR NZ,$C475   ;
 $C4A0 CALL $C511    ;
 $C4A3 LD B,$14      ;
 $C4A5 CALL $C4B0    ;
 $C4A8 INC B         ;
 $C4A9 CALL $C4B0    ;
 $C4AC LD A,($C77D)  ;
 $C4AF RET           ;

; Routine at C4B0 (lenslock)
;
; Used by the routine at #R$C478.
c$C4B0 CALL $C3AE    ;
 $C4B3 CALL $C727    ;
 $C4B6 JR NZ,$C4D8   ;
 $C4B8 JR NZ,$C4DA   ;
 $C4BA JR NZ,$C4DC   ;
 $C4BC JR NZ,$C4DE   ;
 $C4BE JR NZ,$C4E0   ;
 $C4C0 JR NZ,$C4E2   ;
 $C4C2 JR NZ,$C4E4   ;
 $C4C4 JR NZ,$C4E6   ;
 $C4C6 JR NZ,$C4E8   ;
 $C4C8 JR NZ,$C4EA   ;
 $C4CA JR NZ,$C4EC   ;
 $C4CC JR NZ,$C4EE   ;
 $C4CE LD E,(HL)     ;
 $C4CF RET           ;

; Routine at C4D0 (lenslock)
;
; Used by the routines at #R$C268 and #R$C43F.
c$C4D0 LD A,($C777)  ;
 $C4D3 LD B,A        ;
 $C4D4 LD A,($C77A)  ;
 $C4D7 LD C,A        ;
; This entry point is used by the routine at #R$C4B0.
*$C4D8 LD A,$28      ;
; This entry point is used by the routine at #R$C4B0.
*$C4DA DEC C         ;
 $C4DB CALL $C2F7    ;
; This entry point is used by the routine at #R$C4B0.
*$C4DE LD A,($C776)  ;
 $C4E1 LD B,A        ;
; This entry point is used by the routine at #R$C4B0.
*$C4E2 LD A,($C77A)  ;
 $C4E5 LD C,A        ;
; This entry point is used by the routine at #R$C4B0.
*$C4E6 LD A,($C77D)  ;
 $C4E9 CALL $C2EB    ;
; This entry point is used by the routine at #R$C4B0.
*$C4EC LD A,($C777)  ;
 $C4EF LD B,A        ;
 $C4F0 LD A,($C77A)  ;
 $C4F3 LD C,A        ;
 $C4F4 LD A,($C77D)  ;
 $C4F7 ADD A,C       ;
 $C4F8 LD C,A        ;
 $C4F9 LD A,$28      ;
 $C4FB CALL $C2F7    ;
 $C4FE RET           ;

; Routine at C4FF (lenslock)
;
; Used by the routine at #R$C43F.
c$C4FF LD HL,$C799   ;
 $C502 LD (HL),$4F   ;
 $C504 INC HL        ;
 $C505 LD (HL),$4B   ;
 $C507 CALL $C2C9    ;
 $C50A RET           ;

; Routine at C50B (lenslock)
;
; Used by the routine at #R$C43F.
c$C50B LD HL,$5C91   ;
 $C50E SET 1,(HL)    ;
 $C510 RET           ;

; Routine at C511 (lenslock)
;
; Used by the routine at #R$C478.
c$C511 LD HL,$5C91   ;
 $C514 RES 1,(HL)    ;
 $C516 RES 0,(HL)    ;
 $C518 RET           ;

; Routine at C519 (lenslock)
;
; Used by the routine at #R$C54B.
c$C519 PUSH HL       ;
 $C51A PUSH BC       ;
 $C51B LD HL,$C7A9   ;
 $C51E LD B,A        ;
*$C51F LD A,(HL)     ;
 $C520 INC HL        ;
 $C521 CP $5E        ;
 $C523 JR Z,$C52A    ;
 $C525 CP B          ;
 $C526 JR Z,$C52B    ;
 $C528 JR $C51F      ;
*$C52A AND A         ;
*$C52B LD A,B        ;
 $C52C POP BC        ;
 $C52D POP HL        ;
 $C52E RET           ;

; Routine at C52F (lenslock)
;
; Used by the routine at #R$C43F.
c$C52F CALL $C727    ;

; Message at C532 (lenslock)
t$C532 DEFM "PRESS ENTER WHEN READY "

; Data block at C549 (lenslock)
b$C549 DEFB $5E,$C9

; Routine at C54B (lenslock)
;
; Used by the routine at #R$C6A6.
c$C54B LD A,$07      ;
 $C54D LD B,$00      ;
 $C54F LD HL,$C78D   ;
 $C552 BIT 0,A       ;
 $C554 PUSH AF       ;
 $C555 JR Z,$C566    ;
*$C557 LD A,$09      ;
 $C559 CALL $C68E    ;
 $C55C ADD A,$30     ;
 $C55E CALL $C519    ;
 $C561 JR Z,$C557    ;
 $C563 LD (HL),A     ;
 $C564 INC B         ;
 $C565 INC HL        ;
*$C566 POP AF        ;
 $C567 BIT 1,A       ;
 $C569 PUSH AF       ;
 $C56A JR Z,$C57B    ;
*$C56C LD A,$19      ;
 $C56E CALL $C68E    ;
 $C571 ADD A,$41     ;
 $C573 CALL $C519    ;
 $C576 JR Z,$C56C    ;
 $C578 LD (HL),A     ;
 $C579 INC HL        ;
 $C57A INC B         ;
*$C57B POP AF        ;
 $C57C BIT 2,A       ;
 $C57E JR Z,$C58E    ;
*$C580 LD A,$19      ;
 $C582 CALL $C68E    ;
 $C585 ADD A,$61     ;
 $C587 CALL $C519    ;
 $C58A JR Z,$C580    ;
 $C58C LD (HL),A     ;
 $C58D INC B         ;
*$C58E LD A,B        ;
 $C58F CALL $C68E    ;
 $C592 INC A         ;
 $C593 LD HL,$C78C   ;
 $C596 LD B,A        ;
*$C597 INC HL        ;
 $C598 DJNZ $C597    ;
 $C59A LD A,(HL)     ;
 $C59B RET           ;

; Routine at C59C (lenslock)
;
; Used by the routine at #R$C2C9.
c$C59C LD A,($C77F)  ;
 $C59F RR A          ;
 $C5A1 LD ($C77F),A  ;
 $C5A4 CALL $C5EC    ;
 $C5A7 LD B,$01      ;
*$C5A9 PUSH BC       ;
 $C5AA LD BC,$0003   ;
 $C5AD LD HL,$C790   ;
 $C5B0 LD DE,$C793   ;
 $C5B3 LDIR          ;
 $C5B5 LD A,$1D      ;
 $C5B7 LD ($C376),A  ;
 $C5BA POP BC        ;
 $C5BB PUSH BC       ;
 $C5BC LD C,$01      ;
*$C5BE CALL $C374    ;
 $C5C1 CP B          ;
 $C5C2 JR Z,$C5C7    ;
 $C5C4 INC C         ;
 $C5C5 JR $C5BE      ;
*$C5C7 LD A,C        ;
 $C5C8 LD HL,$C795   ;
 $C5CB CALL $C5F5    ;
 $C5CE CALL $C5EC    ;
 $C5D1 POP BC        ;
 $C5D2 INC B         ;
 $C5D3 LD A,$0D      ;
 $C5D5 CP B          ;
 $C5D6 JR NZ,$C5A9   ;
 $C5D8 LD A,($C780)  ;
 $C5DB RR A          ;
 $C5DD LD ($C780),A  ;
 $C5E0 CALL $C5EC    ;
 $C5E3 LD A,$0A      ;
 $C5E5 LD HL,$C798   ;
 $C5E8 CALL $C5F5    ;
 $C5EB RET           ;

; Routine at C5EC (lenslock)
;
; Used by the routine at #R$C59C.
c$C5EC LD A,$01      ;
 $C5EE LD HL,$C798   ;
 $C5F1 CALL $C5F5    ;
 $C5F4 RET           ;

; Routine at C5F5 (lenslock)
;
; Used by the routines at #R$C303, #R$C59C and #R$C5EC.
c$C5F5 LD B,A        ;
*$C5F6 LD C,B        ;
 $C5F7 PUSH BC       ;
 $C5F8 PUSH HL       ;
 $C5F9 LD B,$03      ;
*$C5FB RL (HL)       ;
 $C5FD PUSH AF       ;
 $C5FE DEC HL        ;
 $C5FF POP AF        ;
 $C600 DJNZ $C5FB    ;
 $C602 POP HL        ;
 $C603 POP BC        ;
 $C604 LD B,C        ;
 $C605 DJNZ $C5F6    ;
 $C607 RET           ;

; Routine at C608 (lenslock)
;
; Used by the routine at #R$C268.
c$C608 XOR A         ;
 $C609 LD ($C779),A  ;
 $C60C LD HL,$C7A1   ;
 $C60F LD ($C786),HL ;
 $C612 CALL $C3A8    ;
 $C615 CALL $C727    ;
 $C618 LD B,L        ;
 $C619 LD C,(HL)     ;
 $C61A LD D,H        ;
 $C61B LD B,L        ;
 $C61C LD D,D        ;
 $C61D JR NZ,$C662   ;
 $C61F LD C,A        ;
 $C620 LD B,H        ;
 $C621 LD B,L        ;
 $C622 LD A,($0E5E)  ;
 $C625 INC C         ;
 $C626 LD E,$32      ;
 $C628 XOR A         ;
 $C629 LD B,A        ;
 $C62A LD D,A        ;
 $C62B CALL $C3F3    ;
 $C62E LD ($C78B),BC ;
*$C632 HALT          ;
 $C633 LD BC,($C78B) ;
 $C637 DEC BC        ;
 $C638 LD ($C78B),BC ;
 $C63C LD A,B        ;
 $C63D OR C          ;
 $C63E JR Z,$C662    ;
 $C640 CALL $C688    ;
 $C643 JR Z,$C632    ;
 $C645 RES 5,(HL)    ;
 $C647 LD A,($5C08)  ;
 $C64A PUSH AF       ;
 $C64B RST $10       ;
 $C64C POP AF        ;
 $C64D LD HL,($C786) ;
 $C650 LD (HL),A     ;
 $C651 INC HL        ;
 $C652 LD ($C786),HL ;
 $C655 LD A,($C779)  ;
 $C658 INC A         ;
 $C659 LD ($C779),A  ;
 $C65C CP $02        ;
 $C65E JR Z,$C664    ;
 $C660 JR $C632      ;
*$C662 SCF           ;
 $C663 RET           ;
*$C664 LD HL,$C799   ;
 $C667 LD DE,$C7A1   ;
 $C66A LD B,$02      ;
*$C66C LD A,(DE)     ;
 $C66D INC DE        ;
 $C66E CP (HL)       ;
 $C66F JR Z,$C676    ;
 $C671 ADD A,$20     ;
 $C673 CP (HL)       ;
 $C674 JR NZ,$C67B   ;
*$C676 INC HL        ;
 $C677 DJNZ $C66C    ;
 $C679 AND A         ;
 $C67A RET           ;
*$C67B SCF           ;
 $C67C RET           ;

; Routine at C67D (lenslock)
;
; Used by the routine at #R$C43F.
c$C67D CALL $C688    ;
 $C680 JR Z,$C67D    ;
 $C682 RES 5,(HL)    ;
 $C684 LD A,($5C08)  ;
 $C687 RET           ;

; Routine at C688 (lenslock)
;
; Used by the routines at #R$C608 and #R$C67D.
c$C688 LD HL,$5C3B   ;
 $C68B BIT 5,(HL)    ;
 $C68D RET           ;

; Routine at C68E (lenslock)
;
; Used by the routines at #R$C37C and #R$C54B.
c$C68E PUSH HL       ;
 $C68F PUSH BC       ;
 $C690 LD HL,($C784) ;
 $C693 LD DE,$0031   ;
 $C696 ADD HL,DE     ;
 $C697 LD H,$00      ;
 $C699 LD ($C784),HL ;
 $C69C LD B,A        ;
 $C69D LD A,L        ;
 $C69E CCF           ;
*$C69F SUB B         ;
 $C6A0 JR NC,$C69F   ;
 $C6A2 ADD A,B       ;
 $C6A3 POP BC        ;
 $C6A4 POP HL        ;
 $C6A5 RET           ;

; Routine at C6A6 (lenslock)
;
; Used by the routine at #R$C268.
c$C6A6 LD C,$02      ;
 $C6A8 LD B,C        ;
 $C6A9 LD HL,$C799   ;
*$C6AC PUSH HL       ;
 $C6AD PUSH BC       ;
*$C6AE CALL $C54B    ;
 $C6B1 POP BC        ;
 $C6B2 PUSH BC       ;
 $C6B3 LD HL,$C79D   ;
 $C6B6 CALL $C6D7    ;
 $C6B9 JR C,$C6AE    ;
 $C6BB POP BC        ;
 $C6BC PUSH BC       ;
 $C6BD LD HL,$C799   ;
 $C6C0 CALL $C6D7    ;
 $C6C3 JR C,$C6AE    ;
 $C6C5 POP BC        ;
 $C6C6 POP HL        ;
 $C6C7 LD (HL),A     ;
 $C6C8 INC HL        ;
 $C6C9 DJNZ $C6AC    ;
 $C6CB LD HL,$C799   ;
 $C6CE LD DE,$C79D   ;
 $C6D1 LD BC,$0004   ;
 $C6D4 LDIR          ;
 $C6D6 RET           ;

; Routine at C6D7 (lenslock)
;
; Used by the routine at #R$C6A6.
c$C6D7 LD B,C        ;
 $C6D8 LD C,A        ;
*$C6D9 LD A,(HL)     ;
 $C6DA INC HL        ;
 $C6DB CP C          ;
 $C6DC JR Z,$C6E3    ;
 $C6DE DJNZ $C6D9    ;
 $C6E0 AND A         ;
 $C6E1 JR $C6E4      ;
*$C6E3 CCF           ;
*$C6E4 LD A,C        ;
 $C6E5 RET           ;

; Routine at C6E6 (lenslock)
;
; Used by the routine at #R$C2C9.
c$C6E6 CALL $C733    ;
 $C6E9 CALL $C71C    ;
 $C6EC LD DE,$0002   ;
 $C6EF LD B,E        ;
 $C6F0 LD HL,$C7A5   ;
 $C6F3 DEC E         ;
 $C6F4 ADD HL,DE     ;
*$C6F5 LD A,(HL)     ;
 $C6F6 SRA A         ;
 $C6F8 DEC HL        ;
 $C6F9 PUSH HL       ;
 $C6FA PUSH BC       ;
 $C6FB CALL $C703    ;
 $C6FE POP BC        ;
 $C6FF POP HL        ;
 $C700 DJNZ $C6F5    ;
 $C702 RET           ;

; Routine at C703 (lenslock)
;
; Used by the routine at #R$C6E6.
c$C703 LD HL,$C790   ;
 $C706 LD B,$06      ;
*$C708 RR A          ;
 $C70A PUSH AF       ;
 $C70B PUSH BC       ;
 $C70C LD B,$03      ;
 $C70E PUSH HL       ;
*$C70F RR (HL)       ;
 $C711 PUSH AF       ;
 $C712 INC HL        ;
 $C713 POP AF        ;
 $C714 DJNZ $C70F    ;
 $C716 POP HL        ;
 $C717 POP BC        ;
 $C718 POP AF        ;
 $C719 DJNZ $C708    ;
 $C71B RET           ;

; Routine at C71C (lenslock)
;
; Used by the routine at #R$C6E6.
c$C71C LD B,$04      ;
 $C71E LD HL,$C790   ;
*$C721 XOR A         ;
 $C722 LD (HL),A     ;
 $C723 INC HL        ;
 $C724 DJNZ $C721    ;
 $C726 RET           ;

; Routine at C727 (lenslock)
;
; Used by the routines at #R$C230, #R$C414, #R$C4B0, #R$C52F and #R$C608.
c$C727 POP HL        ;
*$C728 LD A,(HL)     ;
 $C729 INC HL        ;
 $C72A CP $5E        ;
 $C72C JR Z,$C731    ;
 $C72E RST $10       ;
 $C72F JR $C728      ;
*$C731 PUSH HL       ;
 $C732 RET           ;

; Routine at C733 (lenslock)
;
; Used by the routine at #R$C6E6.
c$C733 PUSH BC       ;
 $C734 LD A,C        ;
 $C735 SUB B         ;
 $C736 LD HL,($5C36) ;
 $C739 INC H         ;
 $C73A LD DE,$C799   ;
 $C73D LD ($C779),A  ;
 $C740 PUSH HL       ;
 $C741 LD HL,$C7A5   ;
 $C744 LD ($C788),HL ;
 $C747 POP HL        ;
 $C748 POP BC        ;
*$C749 PUSH BC       ;
 $C74A LD A,(DE)     ;
 $C74B INC DE        ;
 $C74C SUB $20       ;
 $C74E LD C,A        ;
 $C74F LD B,$00      ;
 $C751 RL C          ;
 $C753 RL B          ;
 $C755 RL C          ;
 $C757 RL B          ;
 $C759 RL C          ;
 $C75B RL B          ;
 $C75D PUSH HL       ;
 $C75E ADD HL,BC     ;
 $C75F LD A,($C779)  ;
 $C762 LD C,A        ;
 $C763 LD B,$00      ;
 $C765 ADD HL,BC     ;
 $C766 LD A,(HL)     ;
 $C767 LD HL,($C788) ;
 $C76A LD (HL),A     ;
 $C76B INC HL        ;
 $C76C LD ($C788),HL ;
 $C76F POP HL        ;
 $C770 POP BC        ;
 $C771 DJNZ $C749    ;
 $C773 RET           ;

; Data block at C774 (junk)
@label=data_at_C774
b$C774 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C77C DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C784 DEFB $E8,$03,$E8,$03,$00,$00,$02,$00
 $C78C DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C794 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C79C DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C7A4 DEFB $00,$00,$00,$00,$00,$54,$4C,$57
 $C7AC DEFB $4D,$49,$59,$66,$6D,$77,$74,$7A
 $C7B4 DEFB $6C,$5E,$0D,$D3,$D8,$D8,$E3,$E3
 $C7BC DEFB $EA,$EB,$F0,$F1,$F5,$F6,$F9,$F9
 $C7C4 DEFB $FE,$02,$07,$08,$0C,$0C,$11,$11
 $C7CC DEFB $16,$16,$1E,$1E,$26,$26,$2B,$03
 $C7D4 DEFB $02,$01,$07,$04,$05,$0A,$06,$08
 $C7DC DEFB $09,$0C,$0B,$00,$00,$00,$00,$00
 $C7E4 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C7EC DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C7F4 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $C7FC DEFB $00,$00,$00,$00

; Control panel graphics
; #UDGTABLE
; { #SCR1,0,0,32,8,$c800,$5b00(ctrl_panel) | control panel. }
; TABLE#
@label=ctrl_panel_gfx
b$C800 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $C820 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $C840 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$7F,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$20,$00,$05,$00,$00,$00,$00,$01,$00,$01,$00
 $C860 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$00,$08,$00,$08,$02,$00,$00,$00,$40,$10,$00,$10,$08,$00,$11,$00,$00,$00,$00,$01,$00,$01,$00
 $C880 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$80,$00,$08,$00,$00,$02,$00,$40,$00,$00,$10,$00,$01,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $C8A0 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$01,$00,$08,$00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$80,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $C8C0 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$01,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$80,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $C8E0 DEFB $00,$80,$01,$00,$00,$00,$00,$81,$00,$00,$00,$00,$0F,$80,$00,$00,$00,$01,$F0,$00,$00,$00,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $C900 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $C920 DEFB $00,$BF,$3D,$FF,$FF,$FF,$FE,$01,$03,$C0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$7E,$01,$00,$00,$00,$00,$01,$3E,$FD,$00
 $C940 DEFB $00,$BC,$3D,$FF,$FC,$00,$00,$01,$7F,$FE,$00,$00,$00,$00,$55,$55,$55,$00,$00,$00,$00,$20,$00,$05,$00,$00,$18,$00,$01,$7E,$81,$00
 $C960 DEFB $00,$BF,$45,$FF,$FF,$FF,$FF,$FD,$00,$00,$20,$00,$00,$01,$00,$00,$00,$80,$00,$00,$04,$04,$00,$21,$00,$18,$00,$00,$01,$78,$FD,$00
 $C980 DEFB $00,$BF,$7D,$E0,$00,$00,$00,$01,$00,$00,$00,$00,$00,$00,$01,$00,$80,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$C1,$03,$81,$00
 $C9A0 DEFB $00,$A0,$7D,$00,$00,$00,$00,$01,$01,$00,$00,$00,$00,$00,$00,$08,$00,$00,$00,$00,$00,$00,$80,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $C9C0 DEFB $00,$BC,$41,$FF,$FF,$FF,$FF,$FD,$00,$00,$60,$00,$00,$00,$00,$08,$00,$00,$00,$00,$06,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $C9E0 DEFB $00,$B0,$01,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$7F,$80,$08,$01,$FE,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$06,$01,$00
 $CA00 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $CA20 DEFB $00,$A0,$41,$FF,$FF,$FF,$FE,$01,$0F,$F0,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$81,$81,$00,$00,$00,$00,$01,$40,$85,$00
 $CA40 DEFB $00,$A2,$41,$FF,$FC,$00,$00,$01,$7F,$FE,$00,$00,$00,$15,$00,$00,$00,$54,$00,$00,$00,$20,$00,$05,$00,$00,$18,$00,$01,$42,$81,$00
 $CA60 DEFB $00,$A0,$45,$FF,$FF,$FF,$FF,$FD,$00,$00,$80,$00,$20,$00,$80,$00,$01,$00,$04,$00,$01,$02,$00,$41,$00,$18,$00,$00,$01,$44,$81,$00
 $CA80 DEFB $00,$A0,$11,$E0,$00,$00,$00,$01,$01,$00,$00,$20,$00,$00,$00,$81,$00,$00,$00,$04,$00,$00,$80,$01,$FF,$FF,$FF,$FF,$C1,$01,$81,$00
 $CAA0 DEFB $00,$A0,$11,$00,$00,$00,$00,$01,$00,$80,$20,$00,$00,$00,$00,$00,$00,$00,$00,$00,$04,$01,$00,$01,$FF,$FF,$FF,$FF,$FF,$00,$61,$00
 $CAC0 DEFB $00,$A2,$41,$FF,$FF,$FF,$FF,$FD,$00,$00,$18,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$00,$61,$00
 $CAE0 DEFB $00,$AF,$F9,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$00,$7F,$FF,$FE,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$06,$61,$00
 $CB00 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $CB20 DEFB $00,$BF,$39,$FF,$FF,$FF,$FE,$01,$1F,$F8,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$41,$00,$00,$00,$00,$01,$3C,$F9,$00
 $CB40 DEFB $00,$BE,$39,$FF,$FC,$00,$00,$01,$3F,$FC,$00,$00,$05,$C0,$00,$00,$00,$01,$A0,$00,$00,$20,$00,$05,$00,$00,$18,$00,$01,$7C,$81,$00
 $CB60 DEFB $00,$BF,$45,$FF,$FF,$FF,$FF,$FD,$00,$02,$22,$22,$04,$44,$40,$00,$02,$22,$20,$44,$44,$41,$81,$81,$00,$18,$00,$00,$01,$42,$81,$00
 $CB80 DEFB $00,$A0,$11,$E0,$00,$00,$00,$01,$02,$00,$00,$00,$00,$00,$00,$42,$00,$00,$00,$00,$00,$00,$40,$01,$FF,$FF,$FF,$FF,$C1,$01,$81,$00
 $CBA0 DEFB $00,$A0,$11,$00,$00,$00,$00,$01,$00,$40,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00,$00,$02,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $CBC0 DEFB $00,$BE,$41,$FF,$FF,$FF,$FF,$FD,$00,$00,$06,$00,$00,$00,$00,$10,$00,$00,$00,$00,$60,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $CBE0 DEFB $00,$BF,$FD,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$06,$61,$00
 $CC00 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $CC20 DEFB $00,$A0,$05,$FF,$FF,$FF,$FE,$01,$3F,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$04,$00,$21,$00,$00,$00,$00,$01,$02,$81,$00
 $CC40 DEFB $00,$A2,$05,$FF,$FC,$00,$00,$01,$3F,$FC,$00,$00,$F0,$A0,$00,$00,$00,$05,$0F,$00,$00,$20,$00,$05,$00,$00,$18,$00,$01,$44,$81,$00
 $CC60 DEFB $00,$A0,$45,$FF,$FF,$FF,$FF,$FD,$00,$08,$00,$00,$80,$00,$20,$00,$04,$00,$01,$00,$00,$10,$7E,$01,$00,$18,$00,$00,$01,$42,$81,$00
 $CC80 DEFB $00,$A0,$11,$E0,$00,$00,$00,$01,$02,$00,$00,$80,$00,$00,$00,$24,$00,$00,$00,$01,$00,$00,$40,$01,$FF,$FF,$FF,$FF,$C1,$01,$81,$00
 $CCA0 DEFB $00,$A0,$11,$00,$00,$00,$00,$01,$00,$20,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$04,$00,$01,$FF,$FF,$FF,$FF,$FF,$06,$01,$00
 $CCC0 DEFB $00,$A2,$41,$FF,$FF,$FF,$FF,$FD,$00,$00,$01,$C0,$00,$00,$00,$00,$00,$00,$00,$03,$80,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$00,$61,$00
 $CCE0 DEFB $00,$AF,$F9,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $CD00 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $CD20 DEFB $00,$A0,$79,$FF,$FF,$FF,$FE,$01,$3F,$FC,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$08,$00,$11,$00,$00,$00,$00,$01,$7C,$81,$00
 $CD40 DEFB $00,$A2,$79,$FF,$FC,$00,$00,$01,$1F,$F8,$00,$0E,$00,$10,$00,$00,$00,$08,$00,$70,$00,$20,$00,$05,$00,$00,$18,$00,$01,$42,$FD,$00
 $CD60 DEFB $00,$A0,$7D,$FF,$FF,$FF,$FF,$FD,$00,$00,$00,$00,$00,$00,$10,$00,$08,$00,$00,$00,$00,$00,$00,$01,$00,$18,$00,$00,$01,$7E,$FD,$00
 $CD80 DEFB $00,$BF,$11,$E0,$00,$00,$00,$01,$03,$11,$10,$11,$11,$11,$11,$18,$88,$88,$88,$88,$11,$11,$40,$01,$FF,$FF,$FF,$FF,$C1,$07,$E1,$00
 $CDA0 DEFB $00,$BE,$11,$00,$00,$00,$00,$01,$00,$10,$00,$00,$00,$00,$00,$08,$00,$00,$00,$00,$00,$08,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $CDC0 DEFB $00,$A2,$7D,$FF,$FF,$FF,$FF,$FD,$00,$00,$00,$38,$00,$00,$00,$08,$00,$00,$00,$1C,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$07,$E1,$00
 $CDE0 DEFB $00,$B0,$01,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$00,$61,$00
 $CE00 DEFB $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
 $CE20 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$7F,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$09,$00,$00,$00,$00,$01,$00,$01,$00
 $CE40 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$0F,$F0,$00,$60,$02,$08,$00,$00,$00,$10,$40,$06,$00,$10,$00,$09,$00,$00,$00,$00,$01,$00,$01,$00
 $CE60 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$20,$00,$02,$00,$00,$08,$00,$10,$00,$00,$40,$00,$04,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $CE80 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$02,$00,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$40,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $CEA0 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$0A,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$50,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $CEC0 DEFB $00,$80,$01,$00,$00,$00,$00,$01,$00,$00,$00,$07,$00,$00,$00,$00,$00,$00,$00,$E0,$00,$00,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $CEE0 DEFB $00,$80,$01,$00,$00,$00,$00,$81,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$00,$00,$00,$00,$01,$00,$01,$00
 $CF00 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CF20 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$7F,$FE,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$10,$00,$09,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CF40 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$03,$C0,$03,$00,$00,$04,$00,$00,$00,$20,$00,$00,$C0,$10,$00,$09,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CF60 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$00,$00,$00,$00,$04,$00,$20,$00,$00,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CF80 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$02,$00,$00,$00,$00,$00,$00,$10,$00,$00,$00,$00,$00,$00,$40,$01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CFA0 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$06,$88,$88,$88,$88,$88,$91,$11,$11,$11,$11,$11,$60,$00,$01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CFC0 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$00,$00,$F0,$00,$00,$10,$00,$00,$0F,$00,$00,$00,$00,$01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00
 $CFE0 DEFB $00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00

; Routine at D000
@label=jump_table_at_D000
c$D000 JP $E6AE      ;

; Routine at D003
c$D003 JP $E8AE      ;

; Routine at D006
c$D006 JP $E973      ;

; Routine at D009
c$D009 JP $EB7C      ;

; Routine at D00C
c$D00C JP $EC58      ;

; Routine at D00F
c$D00F JP $EDDF      ;

; Routine at D012
c$D012 JP $EF48      ;

; Routine at D015
;
; Used by the routines at #R$7378 and #R$7471.
c$D015 JP $EF87      ;

; Routine at D018
c$D018 JP $F0B8      ;
 $D01B JP $E4F9      ;
 $D01E JP $E509      ;
 $D021 JP $E4E6      ;
 $D024 JP $E4D4      ;
 $D027 JP $E51A      ;
 $D02A JP $E45B      ;
 $D02D JP $E398      ;
 $D030 JP $DF03      ;

; Routine at D033
;
; Used by the routine at #R$7378.
c$D033 JP $D298      ;

; Routine at D036
;
; Used by the routines at #R$7378 and #R$8042.
c$D036 JP $D61D      ;

; Jump to print other token
;
; Used by the routines at #R$7430 and #R$7471.
@label=jump_to_print_other_token
c$D039 JP $D45F      ;

; Routine at D03C
;
; Used by the routines at #R$7471 and #R$928C.
c$D03C JP $DA7A      ;

; Unused
s$D03F DEFS $03

; Routine at D042
;
; Used by the routine at #R$7471.
c$D042 JP $DBA2      ;

; Print x
@label=print_x
b$D045 DEFB $00

; Print y
@label=print_y
b$D046 DEFB $00

; Data block at D047
@label=byte_at_D047
b$D047 DEFB $00

; Jump to print token
;
; Used by the routines at #R$7447, #R$99A4, #R$9B01, #R$9B57 and #R$9B74.
@label=jump_to_print_token
c$D048 JP $D425      ;

; Data block at D04B
@label=word_at_D04B
w$D04B DEFW $D548

; Data block at D04D
b$D04D DEFB $00

; Routine at D04E
;
; Used by the routines at #R$7378 and #R$7471.
c$D04E JP $D90A      ;

; Data block at D051
@label=byte_at_D051
b$D051 DEFB $00

; Data block at D052
@label=byte_at_D052
b$D052 DEFB $00

; Data block at D053
@label=byte_at_D053
b$D053 DEFB $00

; Message at D054
t$D054 DEFM "          "

; Data block at D05E
b$D05E DEFB $00

; loader
c$D05F LD IX,$D0BA   ;
 $D063 LD DE,$2EEE   ;
 $D066 LD A,$FF      ;
 $D068 SCF           ;
 $D069 CALL $0802    ;
 $D06C LD IX,$5B00   ;
 $D070 LD DE,$0548   ;
 $D073 LD A,$FF      ;
 $D075 SCF           ;
 $D076 CALL $0802    ;
 $D079 NOP           ;
 $D07A NOP           ;
 $D07B NOP           ;

; Call lenslock
c$D07C CALL $C213    ;

; After lenslock
c$D07F LD HL,$C800   ; {Copy 2K from C800 to C000
 $D082 LD DE,$C000   ;
 $D085 LD BC,$0800   ;
 $D088 LDIR          ; }
 $D08A LD DE,$BE00   ; {Generate table of squares
 $D08D LD B,$00      ;
 $D08F LD C,B        ;
 $D090 LD H,B        ;
 $D091 LD L,B        ;
*$D092 LD A,L        ;
 $D093 LD (DE),A     ;
 $D094 INC D         ;
 $D095 LD A,H        ;
 $D096 LD (DE),A     ;
 $D097 DEC D         ;
 $D098 INC E         ;
 $D099 ADD HL,BC     ;
 $D09A INC C         ;
 $D09B ADD HL,BC     ;
 $D09C JR NZ,$D092   ; }
 $D09E LD A,$FD      ; {Set interrupt mode
 $D0A0 LD I,A        ;
 $D0A2 IM 2          ; }
 $D0A4 JP $70E0      ;

; Data block at D0A7
@label=data_at_D0A7
b$D0A7 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D0AF DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D0B7 DEFB $00,$00,$00,$00,$00,$00

; Data block at D0BD
@label=data_at_D0BD
b$D0BD DEFB $08,$C9

; Data block at D0BF
@label=data_at_D0BF
b$D0BF DEFB $07,$78

; Data block at D0C1
@label=data_at_D0C1
b$D0C1 DEFB $09,$C8,$02,$FD,$0C,$E2,$0B,$00
 $D0C9 DEFB $06,$65,$00,$01,$00,$00,$0A,$1F

; Data block at D0D1
@label=byte_at_D0D1
b$D0D1 DEFB $00

; Data block at D0D2
@label=byte_at_D0D2
b$D0D2 DEFB $01

; Data block at D0D3
@label=byte_at_D0D3
b$D0D3 DEFB $00

; Data block at D0D4
b$D0D4 DEFB $00

; Pointer to LD HL,$4000 instruction
@label=byte_at_D0D4
@label=ptr_to_ld_hl
w$D0D5 DEFW $D508

; Routine at D0D7
;
; Used by the routine at #R$728D.
c$D0D7 JP $D0F6      ;

; Routine at D0DA
;
; Used by the routine at #R$9946.
c$D0DA JP $DB91      ;

; Routine at D0DD
;
; Used by the routine at #R$7278.
c$D0DD JP $D123      ;

; Routine at D0E0
c$D0E0 JP $DE97      ;
 $D0E3 NOP           ;
; This entry point is used by the routine at #R$B4D8.
*$D0E4 JP $D190      ;
; This entry point is used by the routine at #R$9CBB.
*$D0E7 JP $D1D9      ;
; This entry point is used by the routines at #R$9CBB and #R$A4C4.
*$D0EA JP $D1C7      ;
; This entry point is used by the routine at #R$7278.
*$D0ED JP $D14D      ;
 $D0F0 NOP           ;
 $D0F1 NOP           ;
 $D0F2 NOP           ;
; This entry point is used by the routine at #R$9AA7.
*$D0F3 JP $D1E9      ;

; Routine at D0F6
;
; Used by the routine at #R$D0D7.
c$D0F6 PUSH AF       ;
 $D0F7 LD DE,$0B17   ;
 $D0FA LD HL,$0703   ;
 $D0FD CALL $D162    ;
 $D100 POP AF        ;
 $D101 CALL $D45F    ;
 $D104 LD A,$5D      ;
 $D106 CALL $D45F    ;
 $D109 LD HL,$0B04   ;
 $D10C LD ($D045),HL ;
 $D10F LD A,$FF      ;
 $D111 CALL $D45F    ;
; This entry point is used by the routine at #R$D138.
*$D114 CALL $E1E8    ;
 $D117 CALL $E1F7    ;
 $D11A CALL $D61D    ;
 $D11D CALL $E35E    ;
 $D120 JP $E205      ;
; This entry point is used by the routine at #R$D0DD.
*$D123 LD DE,$DF1F   ;
 $D126 LD HL,$0405   ;
 $D129 CALL $D162    ;
 $D12C CALL $E1F7    ;
 $D12F CP $59        ;
 $D131 JR Z,$D138    ;
 $D133 XOR A         ;
 $D134 LD ($D0AF),A  ;
 $D137 RET           ;

; Routine at D138
;
; Used by the routine at #R$D0F6.
c$D138 LD HL,$D0B0   ;
 $D13B SET 7,(HL)    ;
 $D13D LD A,$03      ;
 $D13F LD ($D0AF),A  ;
 $D142 LD DE,$E017   ;
 $D145 LD HL,$0200   ;
; This entry point is used by the routine at #R$E8AE.
*$D148 CALL $D162    ;
 $D14B JR $D114      ;
; This entry point is used by the routine at #R$D0E0.
*$D14D LD HL,$D062   ;
 $D150 INC (HL)      ;
 $D151 XOR A         ;
 $D152 LD ($D0AF),A  ;
 $D155 LD HL,$D0B0   ;
 $D158 SET 3,(HL)    ;
 $D15A LD DE,$0A0F   ;
 $D15D LD HL,$0300   ;
 $D160 JR $D148      ;
; This entry point is used by the routines at #R$D0F6 and #R$E6AE.
*$D162 PUSH HL       ;
 $D163 PUSH DE       ;
 $D164 CALL $D61D    ;
 $D167 LD A,$5C      ;
 $D169 CALL $D45F    ;
 $D16C POP DE        ;
 $D16D POP HL        ;
 $D16E LD ($D045),HL ;
 $D171 LD HL,$5800   ;
 $D174 LD BC,$0300   ;
*$D177 LD (HL),E     ;
 $D178 INC HL        ;
 $D179 DEC C         ;
 $D17A JR NZ,$D177   ;
 $D17C DEC B         ;
 $D17D JR NZ,$D177   ;
 $D17F LD A,D        ;
 $D180 JP $D45F      ;
*$D183 LD HL,$D0B0   ;
 $D186 SET 6,(HL)    ;
 $D188 LD HL,$D062   ;
 $D18B INC (HL)      ;
 $D18C LD A,$7D      ;
 $D18E JR $D1A3      ;
; This entry point is used by the routine at #R$D0E0.
*$D190 PUSH AF       ;
 $D191 CP $FF        ;
 $D193 JR Z,$D183    ;
 $D195 LD HL,$D07C   ;
 $D198 DEC (HL)      ;
 $D199 LD E,A        ;
 $D19A LD D,$00      ;
 $D19C LD HL,$D06B   ;
 $D19F ADD HL,DE     ;
 $D1A0 INC (HL)      ;
 $D1A1 ADD A,$D0     ;
*$D1A3 LD HL,$D0C7   ;
 $D1A6 SET 7,(HL)    ;
 $D1A8 INC HL        ;
 $D1A9 LD (HL),A     ;
 $D1AA POP AF        ;
 $D1AB LD B,$01      ;
; This entry point is used by the routine at #R$E7DB.
*$D1AD CP $0A        ;
 $D1AF JR Z,$D1BA    ;
 $D1B1 CP $03        ;
 $D1B3 JR Z,$D1B8    ;
 $D1B5 CP $06        ;
 $D1B7 RET NZ        ;
*$D1B8 SLA B         ;
*$D1BA SLA B         ;
 $D1BC LD HL,$D05F   ;
 $D1BF LD A,(HL)     ;
 $D1C0 ADD A,B       ;
 $D1C1 JR NC,$D1C5   ;
 $D1C3 LD A,$FF      ;
*$D1C5 LD (HL),A     ;
 $D1C6 RET           ;

; Routine at D1C7
;
; Used by the routine at #R$D0E0.
c$D1C7 LD HL,$D060   ;
 $D1CA LD A,(HL)     ;
 $D1CB ADD A,E       ;
 $D1CC LD (HL),A     ;
 $D1CD INC HL        ;
 $D1CE LD A,(HL)     ;
 $D1CF ADC A,D       ;
 $D1D0 LD (HL),A     ;
 $D1D1 RET NC        ;
 $D1D2 INC HL        ;
 $D1D3 INC (HL)      ;
 $D1D4 LD HL,$D0C9   ;
 $D1D7 JR $D1E6      ;
; This entry point is used by the routine at #R$D0E0.
*$D1D9 LD A,D        ;
 $D1DA OR E          ;
 $D1DB RET Z         ;
 $D1DC LD ($DA77),DE ;
 $D1E0 CALL $D3D3    ;
 $D1E3 LD HL,$D0C5   ;
*$D1E6 SET 7,(HL)    ;
 $D1E8 RET           ;

; Routine at D1E9
;
; Used by the routine at #R$D0E0.
c$D1E9 LD A,($DA76)  ;
 $D1EC CP $FD        ;
 $D1EE RET Z         ;
 $D1EF LD A,($7105)  ;
 $D1F2 RRCA          ;
 $D1F3 RRCA          ;
 $D1F4 AND $3F       ;
 $D1F6 JP Z,$DE97    ;
 $D1F9 CP $11        ;
 $D1FB RET NC        ;
 $D1FC DEC A         ;
 $D1FD CP $06        ;
 $D1FF JR NC,$D21F   ;
 $D201 LD HL,$D085   ;
 $D204 AND A         ;
 $D205 JR Z,$D209    ;
 $D207 ADD A,$02     ;
*$D209 CALL $EB3E    ;
 $D20C LD A,(HL)     ;
 $D20D AND A         ;
 $D20E RET Z         ;
 $D20F LD (HL),D     ;
 $D210 LD A,E        ;
 $D211 ADD A,$6C     ;
; This entry point is used by the routine at #R$D21F.
*$D213 LD ($DA79),A  ;
 $D216 CALL $712D    ;
 $D219 LD HL,$D0C3   ;
 $D21C SET 7,(HL)    ;
 $D21E RET           ;

; Routine at D21F
;
; Used by the routine at #R$D1E9.
c$D21F LD HL,$D067   ;
 $D222 CALL $EB3E    ;
 $D225 LD A,(HL)     ;
 $D226 AND A         ;
 $D227 RET Z         ;
 $D228 DEC (HL)      ;
 $D229 LD HL,$D07C   ;
 $D22C INC (HL)      ;
 $D22D LD A,$CC      ;
 $D22F ADD A,E       ;
 $D230 JR $D213      ;

; Message at D232
t$D232 DEFM "JAMESON   "

; Data block at D23C
b$D23C DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D244 DEFB $00,$00,$E8,$03,$00,$00,$00,$00
 $D24C DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D254 DEFB $00,$00,$00,$00,$00,$00,$14,$01
 $D25C DEFB $00,$00,$00,$00,$46,$03,$00,$00
 $D264 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D26C DEFB $00,$00

; Data block at D26E
b$D26E DEFB $4A,$5A,$48,$02,$53,$B7,$38,$AD
 $D276 DEFB $9C,$14,$1D,$15,$05,$03,$11,$12
 $D27E DEFB $1A,$0E,$27,$08,$00,$00,$0A,$19
 $D286 DEFB $00,$00,$3D,$0E,$11,$0C,$00,$00
 $D28E DEFB $00,$27,$08,$01,$2A,$4D,$8F,$F2
 $D296 DEFB $88,$05

; Routine at D298
;
; Used by the routine at #R$D033.
c$D298 CALL $DB91    ;
 $D29B LD HL,$D232   ;
 $D29E LD DE,$D054   ;
 $D2A1 LD BC,$005D   ;
 $D2A4 LDIR          ;
 $D2A6 LD A,($D099)  ;
 $D2A9 LD ($D0BB),A  ;
 $D2AC LD A,($D097)  ;
 $D2AF LD ($D0BC),A  ;
 $D2B2 CALL $DF74    ;
 $D2B5 LD HL,$E1B0   ;
 $D2B8 LD (HL),$00   ;
 $D2BA PUSH HL       ;
 $D2BB CALL $E148    ;
 $D2BE POP HL        ;
 $D2BF LD (HL),$77   ;
 $D2C1 LD HL,$DEED   ;
 $D2C4 LD DE,$DEE4   ;
 $D2C7 LD BC,$0008   ;
 $D2CA LDIR          ;
 $D2CC LD HL,$D28F   ;
 $D2CF LD DE,$7107   ;
 $D2D2 LD BC,$0009   ;
 $D2D5 LDIR          ;
 $D2D7 XOR A         ;
 $D2D8 LD ($DBA1),A  ;
 $D2DB RET           ;

; Data block at D2DC
@label=word_at_D2DC
w$D2DC DEFW $0000

; Routine at D2DE
;
; Used by the routines at #R$D837 and #R$EDDF.
c$D2DE SCF           ;
 $D2DF JR $D2E2      ;

; Routine at D2E1
;
; Used by the routines at #R$D84B, #R$DC29, #R$E212, #R$E268, #R$E973 and
; #R$EDDF.
c$D2E1 AND A         ;
; This entry point is used by the routine at #R$D2DE.
*$D2E2 LD H,$00      ;
 $D2E4 LD L,A        ;
; This entry point is used by the routines at #R$D32D, #R$D946, #R$DAEF,
; #R$E107, #R$E212, #R$EDDF and #R$EF21.
*$D2E5 PUSH AF       ;
 $D2E6 PUSH HL       ;
 $D2E7 CALL $D37D    ;
 $D2EA POP HL        ;
 $D2EB LD A,$01      ;
 $D2ED LD ($D0CC),A  ;
 $D2F0 LD ($D2DC),HL ;
 $D2F3 LD DE,$2710   ;
 $D2F6 CALL $D357    ;
 $D2F9 LD DE,$03E8   ;
 $D2FC CALL $D357    ;
 $D2FF LD DE,$0064   ;
 $D302 CALL $D357    ;
 $D305 LD DE,$000A   ;
 $D308 CALL $D357    ;
 $D30B POP AF        ;
 $D30C JR NC,$D31D   ;
 $D30E LD A,($D0CC)  ;
 $D311 AND A         ;
 $D312 JP Z,$D319    ;
 $D315 XOR A         ;
 $D316 CALL $D371    ;
*$D319 CALL $D421    ;
 $D31C LD L,$2A      ;
 $D31E CALL C,$7DD2  ;
 $D321 CALL $D371    ;
 $D324 XOR A         ;
 $D325 LD ($D0CE),A  ;
 $D328 INC A         ;
 $D329 LD ($D0CC),A  ;
 $D32C RET           ;

; Routine at D32D
;
; Used by the routine at #R$D822.
c$D32D LD HL,($D066) ;
 $D330 LD DE,($D068) ;
; This entry point is used by the routine at #R$E973.
*$D334 PUSH DE       ;
 $D335 LD A,L        ;
 $D336 OR H          ;
 $D337 JR Z,$D34D    ;
 $D339 LD A,$03      ;
 $D33B LD ($D0CE),A  ;
 $D33E AND A         ;
 $D33F CALL $D2E5    ;
 $D342 XOR A         ;
 $D343 LD ($D0CC),A  ;
 $D346 LD A,$04      ;
 $D348 LD ($D0CE),A  ;
 $D34B JR $D352      ;
*$D34D LD A,$07      ;
 $D34F LD ($D0CE),A  ;
*$D352 POP HL        ;
 $D353 SCF           ;
 $D354 JP $D2E5      ;

; Routine at D357
;
; Used by the routine at #R$D2E1.
c$D357 LD HL,($D2DC) ;
 $D35A XOR A         ;
 $D35B AND A         ;
*$D35C SBC HL,DE     ;
 $D35E JP C,$D364    ;
 $D361 INC A         ;
 $D362 JR $D35C      ;
*$D364 ADD HL,DE     ;
 $D365 LD ($D2DC),HL ;
 $D368 AND A         ;
 $D369 JR Z,$D376    ;
 $D36B LD B,A        ;
 $D36C XOR A         ;
 $D36D LD ($D0CC),A  ;
 $D370 LD A,B        ;
; This entry point is used by the routine at #R$D2E1.
*$D371 ADD A,$30     ;
 $D373 JP $D425      ;
*$D376 LD A,($D0CC)  ;
 $D379 AND A         ;
 $D37A JR Z,$D371    ;
 $D37C RET           ;

; Routine at D37D
;
; Used by the routine at #R$D2E1.
c$D37D LD B,$01      ;
 $D37F JR NC,$D38B   ;
 $D381 PUSH HL       ;
 $D382 AND A         ;
 $D383 LD DE,$000A   ;
 $D386 SBC HL,DE     ;
 $D388 POP HL        ;
 $D389 JR C,$D3AF    ;
*$D38B AND A         ;
 $D38C LD DE,$000A   ;
 $D38F CALL $D3CE    ;
 $D392 JR C,$D3B0    ;
 $D394 LD DE,$0064   ;
 $D397 CALL $D3CE    ;
 $D39A JR C,$D3AF    ;
 $D39C LD DE,$03E8   ;
 $D39F CALL $D3CE    ;
 $D3A2 JR C,$D3AE    ;
 $D3A4 LD DE,$2710   ;
 $D3A7 CALL $D3CE    ;
 $D3AA JR C,$D3AD    ;
 $D3AC INC B         ;
*$D3AD INC B         ;
*$D3AE INC B         ;
*$D3AF INC B         ;
*$D3B0 LD A,($D0CE)  ;
 $D3B3 CP B          ;
 $D3B4 RET Z         ;
 $D3B5 RET C         ;
 $D3B6 SUB B         ;
 $D3B7 LD B,A        ;
*$D3B8 PUSH BC       ;
 $D3B9 LD A,($D0CC)  ;
 $D3BC AND A         ;
 $D3BD JP Z,$D3C5    ;
 $D3C0 LD A,$20      ;
 $D3C2 JP $D3C7      ;
*$D3C5 LD A,$30      ;
*$D3C7 CALL $D425    ;
 $D3CA POP BC        ;
 $D3CB DJNZ $D3B8    ;
 $D3CD RET           ;

; Routine at D3CE
;
; Used by the routine at #R$D37D.
c$D3CE PUSH HL       ;
 $D3CF SBC HL,DE     ;
 $D3D1 POP HL        ;
 $D3D2 RET           ;

; Routine at D3D3
;
; Used by the routines at #R$D1C7, #R$E935 and #R$E973.
c$D3D3 LD HL,($D068) ;
 $D3D6 ADD HL,DE     ;
 $D3D7 LD ($D068),HL ;
 $D3DA AND A         ;
 $D3DB LD DE,$2710   ;
 $D3DE SBC HL,DE     ;
 $D3E0 RET C         ;
 $D3E1 LD ($D068),HL ;
 $D3E4 LD DE,$0001   ;
; This entry point is used by the routine at #R$E973.
*$D3E7 LD HL,($D066) ;
 $D3EA ADD HL,DE     ;
 $D3EB LD ($D066),HL ;
 $D3EE RET           ;

; Routine at D3EF
;
; Used by the routine at #R$E973.
c$D3EF LD HL,($D066) ;
 $D3F2 SBC HL,DE     ;
 $D3F4 JR C,$D3FB    ;
 $D3F6 LD ($D066),HL ;
 $D3F9 AND A         ;
 $D3FA RET           ;
*$D3FB SCF           ;
 $D3FC RET           ;

; Routine at D3FD
;
; Used by the routines at #R$E7DB and #R$E973.
c$D3FD LD HL,($D068) ;
 $D400 AND A         ;
 $D401 SBC HL,DE     ;
 $D403 JR NC,$D41B   ;
 $D405 LD HL,($D066) ;
 $D408 LD A,L        ;
 $D409 OR H          ;
 $D40A SCF           ;
 $D40B RET Z         ;
 $D40C DEC HL        ;
 $D40D LD ($D066),HL ;
 $D410 LD HL,$2710   ;
 $D413 AND A         ;
 $D414 SBC HL,DE     ;
 $D416 LD DE,($D068) ;
 $D41A ADD HL,DE     ;
*$D41B LD ($D068),HL ;
 $D41E AND A         ;
 $D41F RET           ;

; Data block at D420
@label=other_token_flag
b$D420 DEFB $01

; Print token
;
; Used by the routines at #R$D2E1, #R$D837, #R$E107, #R$E212, #R$E2F8, #R$E31E,
; #R$E398, #R$E3CC, #R$E7CF, #R$E818, #R$E87E, #R$E8EA, #R$E973, #R$EB47,
; #R$EDDF, #R$EEA8, #R$EF87 and #R$F0A1.
@label=print_token
c$D421 POP HL        ; Get pointer to token number from stack
 $D422 LD A,(HL)     ; Get the token number
 $D423 INC HL        ; Point to next token number
 $D424 PUSH HL       ; Save on stack
; This entry point is used by the routines at #R$D048, #R$D357, #R$D37D,
; #R$D470, #R$D8F8, #R$DA7A, #R$DAEF, #R$E212, #R$E268, #R$E297, #R$E29E,
; #R$E2A6, #R$E2F8, #R$E306, #R$E311, #R$E31E, #R$E3E9, #R$E776, #R$E818,
; #R$E87E, #R$E973, #R$EEA8, #R$EECE, #R$F068 and #R$F07A.
*$D425 CP $0E        ; {Jump if token < 14
 $D427 JP C,$D7B5    ; }
 $D42A CP $20        ; {Jump if 14 <= token < 32
 $D42C JP C,$D441    ; }
 $D42F CP $60        ; {Jump if 32 <= token < 96
 $D431 JP C,$D499    ; }
 $D434 CP $80        ; {Jump if 96 <= token < 128
 $D436 JR C,$D443    ; }
 $D438 CP $A0        ; {Jump if 128 <= token < 160
 $D43A JP C,$D59C    ; }
 $D43D SUB $A0       ; If token >= 160, subtract 160, so now 0 <= token < 96
 $D43F JR $D443      ;
*$D441 ADD A,$72     ; If 14 <= token < 32, add 114, so now 128 <= token < 146
@label=print_recursive_token
*$D443 LD HL,($F11A) ; Get base address of tokens
 $D446 LD D,A        ; D=number of tokens to search through
 $D447 INC D         ; Start one higher
*$D448 DEC D         ; One less token to search through
 $D449 JP Z,$D454    ; Jump if we're now at the right token
 $D44C LD BC,$FFFF   ; Search through all memory
 $D44F XOR A         ; {Look for a zero (end of token)
 $D450 CPIR          ; }
 $D452 JR $D448      ; And loop
@recursive_token_loop
*$D454 LD A,(HL)     ; Get next char code of token
 $D455 AND A         ; {Return if we're at the end
 $D456 RET Z         ; }
 $D457 PUSH HL       ; Save token address
 $D458 CALL $D425    ; Call routine recursively
 $D45B POP HL        ; Restore token address
 $D45C INC HL        ; Increment token address
 $D45D JR $D454      ; Loop to process next char code

; Print other recursive token
;
; Used by the routines at #R$D039, #R$D0F6, #R$D138, #R$D470, #R$D5B4, #R$D90A,
; #R$D946, #R$DA5A, #R$DBA2, #R$E292, #R$E3E9, #R$E8E5, #R$EDDF, #R$EF87 and
; #R$F0A1.
@label=print_other_recursive_token
c$D45F LD HL,($F11C) ; Get base address of other tokens
 $D462 LD D,A        ; D=number of tokens to search through
*$D463 DEC D         ; One less token to search through
 $D464 JR Z,$D48E    ; Jump if we're now at the right token
 $D466 LD BC,$FFFF   ; Search through all memory
 $D469 LD A,$00      ; {Look for a zero (end of token)
 $D46B CPIR          ; }
 $D46D JP $D463      ; And loop

; Print other/extra token
;
; Used by the routine at #R$D48E.
@label_print_other_token
c$D470 LD B,A        ;
 $D471 LD A,($D420)  ; Test flag
 $D474 CP $00        ;
 $D476 LD A,B        ;
 $D477 JR Z,$D425    ; Jump if flag is reset
 $D479 CP $20        ; {Jump if token < 32
 $D47B JP C,$D7B0    ; }
 $D47E CP $5B        ; {Jump if 32 <= token < 91
 $D480 JR C,$D499    ; }
 $D482 CP $81        ; {Jump if 92 <= token < 129
 $D484 JP C,$D5B4    ; }
 $D487 CP $D7        ; {Jump if 129 <= token < 215
 $D489 JR C,$D45F    ; }
 $D48B JP $D595      ; Jump if token >= 215

; Other token loop
;
; Used by the routine at #R$D45F.
@recursive_other_token_loop
c$D48E LD A,(HL)     ; Get next char code of token
 $D48F AND A         ; {Return if we're at the end
 $D490 RET Z         ; }
 $D491 PUSH HL       ; Save token address
 $D492 CALL $D470    ; Call routine recursively
 $D495 POP HL        ; Restore token address
 $D496 INC HL        ; Increment token address
 $D497 JR $D48E      ; Loop to process next char code

; Print ASCII character
;
; Used by the routines at #R$D421, #R$D470 and #R$D59C.
@label=print_ascii_char
c$D499 CP $41        ; Char A?
 $D49B JR C,$D4D2    ; Jump if < A
 $D49D CP $5B        ; Char [ (after Z)?
 $D49F JR NC,$D4D2   ; Jump if > Z
 $D4A1 PUSH AF       ; Save ASCII code
 $D4A2 LD A,($D0D1)  ;
 $D4A5 CP $01        ;
 $D4A7 JR Z,$D4D8    ;
 $D4A9 LD A,($D0D3)  ;
 $D4AC AND A         ;
 $D4AD JR Z,$D4B8    ;
 $D4AF XOR A         ;
 $D4B0 LD ($D0D3),A  ;
 $D4B3 LD ($D0D2),A  ;
 $D4B6 JR $D4D8      ;
*$D4B8 LD A,($D0D2)  ;
 $D4BB CP $01        ;
 $D4BD JR NZ,$D4CC   ;
 $D4BF XOR A         ;
 $D4C0 LD ($D0D2),A  ;
 $D4C3 LD A,($D0D1)  ;
 $D4C6 CP $02        ;
 $D4C8 JR Z,$D4CC    ;
 $D4CA JR $D4D8      ;
*$D4CC POP AF        ; Restore ASCII code
 $D4CD ADD A,$20     ; Add 32
 $D4CF PUSH AF       ; Save new code
 $D4D0 JR $D4D8      ;
*$D4D2 PUSH AF       ;
 $D4D3 LD A,$01      ;
 $D4D5 LD ($D0D2),A  ;
*$D4D8 LD A,($D0D4)  ;
 $D4DB CP $01        ;
 $D4DD JP Z,$D6B9    ;
 $D4E0 POP AF        ;
; This entry point is used by the routine at #R$D6B9.
@label=inc_print_char
*$D4E1 PUSH AF       ; Save ASCII code
 $D4E2 LD HL,$D045   ; X coord
 $D4E5 INC (HL)      ; Increment x
 $D4E6 LD A,(HL)     ; Get new x
 $D4E7 CP $20        ; {Jump if not at end of row
 $D4E9 JR C,$D4F1    ; }
 $D4EB LD A,$01      ; {Set x to 1
 $D4ED LD (HL),A     ; }
 $D4EE CALL $E2B1    ; Increment y
@label=print_char
*$D4F1 POP AF        ; ASCII code
 $D4F2 LD HL,$5D70   ; Font base address
 $D4F5 SUB $20       ; Code - 32
 $D4F7 LD C,A        ;
 $D4F8 LD B,$00      ; BC = 0A
 $D4FA SLA C         ; * 2
 $D4FC RL B          ;
 $D4FE SLA C         ; * 4
 $D500 RL B          ;
 $D502 SLA C         ; * 8
 $D504 RL B          ;
 $D506 ADD HL,BC     ; Add to font base address
 $D507 PUSH HL       ; Push character source address
@label=ld_hl_4000_instr
 $D508 LD HL,$4000   ; Self-modified (screen or buffer)
 $D50B LD A,($D046)  ; Y coord
 $D50E CP $10        ; {Jump if >= 16
 $D510 JP NC,$D51C   ; }
 $D513 CP $08        ; {Jump if >= 8
 $D515 JP NC,$D526   ; }
 $D518 LD B,A        ; Y coord within 3rd
 $D519 JP $D52D      ;
*$D51C SUB $10       ; Bottom 3rd of screen
 $D51E LD B,A        ; Y coord within 3rd
 $D51F LD DE,$1000   ; Offset to bottom 3rd
 $D522 ADD HL,DE     ; Add offset to destination
 $D523 JP $D52D      ;
*$D526 SUB $08       ; Middle 3rd of screen
 $D528 LD B,A        ; Y coord within 3rd
 $D529 LD DE,$0800   ; Offset to middle 3rd
 $D52C ADD HL,DE     ; Add offset to destination
*$D52D LD C,$00      ; BC = 00000rrr00000000
 $D52F SRL B         ; >> 1
 $D531 RR C          ;
 $D533 SRL B         ; >> 2
 $D535 RR C          ;
 $D537 SRL B         ; >> 3
 $D539 RR C          ; BC = 00000000rrr00000
 $D53B ADD HL,BC     ; HL = xxxss000rrr00000
 $D53C LD B,$00      ;
 $D53E LD A,($D045)  ; X coord
 $D541 LD C,A        ;
 $D542 ADD HL,BC     ; HL = xxxss000rrrccccc
 $D543 POP DE        ; DE = source
 $D544 LD B,$08      ; 8 bytes in character
*$D546 LD A,(DE)     ; Get source byte
 $D547 LD C,(HL)     ; Get destination byte
 $D548 XOR C         ; XOR source with destination
 $D549 LD (HL),A     ; Write destination byte
 $D54A INC H         ; Next pixel line
 $D54B INC DE        ; Next source byte
 $D54C DJNZ $D546    ; Repeat 8 times
 $D54E RET           ;

; Routine at D54F
;
; Used by the routines at #R$D90A, #R$E707, #R$E8D9, #R$E973 and #R$EC58.
c$D54F LD HL,$5AA1   ;
 $D552 LD A,$05      ;
; This entry point is used by the routine at #R$F0A1.
*$D554 LD B,$1E      ;
 $D556 CALL $D563    ;
 $D559 INC HL        ;
 $D55A INC HL        ;
 $D55B RET           ;

; Routine at D55C
c$D55C LD HL,$4340   ;
; This entry point is used by the routines at #R$D61D, #R$EB63 and #R$EB7C. HL
; Screen address
@label=draw_h_line
*$D55F LD A,$FF      ;
 $D561 LD B,$20      ;
; This entry point is used by the routines at #R$D54F, #R$D568, #R$EB63 and
; #R$EB7C.
*$D563 LD (HL),A     ;
 $D564 INC HL        ;
 $D565 DJNZ $D563    ;
 $D567 RET           ;

; Routine at D568
;
; Used by the routines at #R$D90A, #R$E707, #R$E8D9, #R$EDDF, #R$EF48, #R$EF87
; and #R$F0A1.
c$D568 LD HL,$5821   ;
*$D56B LD A,(DE)     ;
 $D56C INC DE        ;
 $D56D PUSH AF       ;
 $D56E AND $F8       ;
 $D570 RRCA          ;
 $D571 RRCA          ;
 $D572 RRCA          ;
 $D573 LD B,A        ;
 $D574 PUSH HL       ;
 $D575 LD A,$05      ;
 $D577 CALL $D563    ;
 $D57A POP HL        ;
 $D57B POP AF        ;
 $D57C AND $07       ;
 $D57E JR Z,$D58C    ;
 $D580 LD B,A        ;
*$D581 LD A,$20      ;
 $D583 ADD A,L       ;
 $D584 LD L,A        ;
 $D585 JR NC,$D588   ;
 $D587 INC H         ;
*$D588 DJNZ $D581    ;
 $D58A JR $D56B      ;
*$D58C LD HL,$5822   ;
 $D58F LD A,$07      ;
 $D591 LD (HL),A     ;
 $D592 INC HL        ;
 $D593 LD (HL),A     ;
 $D594 RET           ;

; Routine at D595
;
; Used by the routine at #R$D470.
@label=other_token_gt_214
c$D595 SUB $D7       ;
 $D597 LD HL,$FD99   ;
 $D59A JR $D5A1      ;

; Print two-letter token
;
; Used by the routine at #R$D421.
@label=print_two_letter_token
c$D59C SUB $80       ; Offset from 128
 $D59E LD HL,$FDB3   ; Two letter tokens base address
; This entry point is used by the routine at #R$D595.
*$D5A1 ADD A,A       ; * 2
 $D5A2 LD D,$00      ; {DE=0A
 $D5A4 LD E,A        ; }
 $D5A5 ADD HL,DE     ; Add to base address
 $D5A6 LD A,(HL)     ; Get char
 $D5A7 PUSH HL       ; Push char address
 $D5A8 CALL $D499    ; Print first char
 $D5AB POP HL        ; Pop char address
 $D5AC INC HL        ; Point to next char
 $D5AD LD A,(HL)     ; Get char
 $D5AE CP $3F        ; Question mark?
 $D5B0 RET Z         ; Then return
 $D5B1 JP $D499      ; Print second char

; Routine at D5B4
;
; Used by the routine at #R$D470.
@label=other_token_92_to_128
c$D5B4 LD D,$00      ;
 $D5B6 SUB $5B       ;
 $D5B8 LD E,A        ;
 $D5B9 LD HL,$D5F5   ;
 $D5BC ADD HL,DE     ;
 $D5BD LD A,(HL)     ;
 $D5BE PUSH AF       ;
 $D5BF CALL $D5E1    ;
 $D5C2 LD B,$00      ;
 $D5C4 CP $33        ;
 $D5C6 JP C,$D5DC    ;
 $D5C9 CP $66        ;
 $D5CB JP C,$D5DB    ;
 $D5CE CP $99        ;
 $D5D0 JP C,$D5DA    ;
 $D5D3 CP $CC        ;
 $D5D5 JP C,$D5D9    ;
 $D5D8 INC B         ;
*$D5D9 INC B         ;
*$D5DA INC B         ;
*$D5DB INC B         ;
*$D5DC POP AF        ;
 $D5DD ADD A,B       ;
 $D5DE JP $D45F      ;

; Routine at D5E1
;
; Used by the routines at #R$D5B4 and #R$D885.
c$D5E1 LD HL,($DECC) ;
 $D5E4 SLA L         ;
 $D5E6 EX DE,HL      ;
 $D5E7 LD HL,($DECE) ;
 $D5EA ADC HL,DE     ;
 $D5EC LD A,H        ;
 $D5ED LD ($DECC),HL ;
 $D5F0 EX DE,HL      ;
 $D5F1 LD ($DECE),HL ;
 $D5F4 RET           ;

; Data block at D5F5
b$D5F5 DEFB $10,$15,$1A,$1F,$9B,$A0,$2E,$A5
 $D5FD DEFB $24,$29,$3D,$33,$38,$AA,$42,$47
 $D605 DEFB $4C,$51,$56,$8C,$60,$65,$87,$82
 $D60D DEFB $5B,$6A,$B4,$B9,$BE,$E1,$E6,$EB
 $D615 DEFB $F0,$F5,$FA,$73,$78,$7D,$00,$00

; Clear screen with border
;
; Used by the routines at #R$D036, #R$D0F6, #R$D138, #R$D90A, #R$DBA2, #R$E707,
; #R$E973, #R$EB7C and #R$EC58.
; .
; Clear the screen and draw a one pixel border
@label=clear_screen_border
c$D61D DI            ;
 $D61E LD ($D61B),SP ; Store the stack pointer
 $D622 LD SP,$5B00   ; Set stack to end of attributes
 $D625 LD DE,$0707   ; Attribute value
 $D628 LD C,$18      ; 24 rows
*$D62A LD B,$10      ; 2x16 attributes per row
*$D62C PUSH DE       ; Write two attributes
 $D62D DJNZ $D62C    ; Repeat for one row
 $D62F DEC C         ;
 $D630 JP NZ,$D62A   ; Repeat for 24 rows
 $D633 LD DE,$0000   ; Empty bitmap pattern
 $D636 LD C,$C0      ; 192 lines
*$D638 LD B,$10      ; 2x16 bytes per line
*$D63A PUSH DE       ; Write two bytes
 $D63B DJNZ $D63A    ; Repeat for one line
 $D63D DEC C         ;
 $D63E JP NZ,$D638   ; Repeat for 192 lines
 $D641 LD SP,($D61B) ; Restore stack pointer
 $D645 EI            ;
; This entry point is used by the routines at #R$EB7C and #R$EF87.
*$D646 LD B,$C0      ; 192 lines
 $D648 LD DE,$0020   ; Increment per line
 $D64B LD HL,$4000   ; Screen address at 0,0
*$D64E LD A,(HL)     ; Read screen byte
 $D64F OR $80        ; Set leftmost pixel
 $D651 LD (HL),A     ; Write screen byte
 $D652 ADD HL,DE     ; Next line
 $D653 DJNZ $D64E    ; Repeat for 192 lines
 $D655 LD B,$C0      ; 192 lines
 $D657 LD HL,$401F   ; Screen address at 255,0
*$D65A LD A,(HL)     ; Read screen byte
 $D65B OR $01        ; Set rightmost pixel
 $D65D LD (HL),A     ; Write screen byte
 $D65E ADD HL,DE     ; Next line
 $D65F DJNZ $D65A    ; Repeat for 192 lines
 $D661 LD HL,$4000   ; Screen address at 0,0
 $D664 CALL $D55F    ; Draw a horizontal line
 $D667 LD HL,$57E0   ; Screen address at 0,191
 $D66A CALL $D55F    ; Draw a horizontal line
 $D66D XOR A         ;
 $D66E LD L,A        ;
 $D66F INC A         ;
 $D670 LD H,A        ; HL=$0100
 $D671 LD ($D045),HL ;
 $D674 RET           ;

; Data block at D675
@label=data_at_D675
b$D675 DEFB $20,$00,$00,$00,$00,$00,$00,$00
 $D67D DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D685 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D68D DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D695 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D69D DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D6A5 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D6AD DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $D6B5 DEFB $00,$00,$00,$00

; Routine at D6B9
;
; Used by the routine at #R$D499.
c$D6B9 LD HL,($D6B5) ;
 $D6BC INC HL        ;
 $D6BD LD ($D6B5),HL ;
 $D6C0 POP AF        ;
 $D6C1 LD (HL),A     ;
 $D6C2 CP $2E        ;
 $D6C4 JP Z,$D71A    ;
 $D6C7 LD B,A        ;
 $D6C8 LD A,($D6B4)  ;
 $D6CB INC A         ;
 $D6CC LD ($D6B4),A  ;
 $D6CF CP $1F        ;
 $D6D1 RET C         ;
 $D6D2 LD A,$20      ;
 $D6D4 CP B          ;
 $D6D5 JP Z,$D71A    ;
 $D6D8 CALL $D783    ;
 $D6DB LD A,B        ;
 $D6DC LD ($D6B3),A  ;
 $D6DF AND A         ;
 $D6E0 JR Z,$D70F    ;
 $D6E2 LD HL,($D6B5) ;
 $D6E5 INC HL        ;
 $D6E6 LD C,B        ;
 $D6E7 LD B,$00      ;
 $D6E9 LD DE,$D695   ;
 $D6EC LDIR          ;
 $D6EE LD HL,$D675   ;
 $D6F1 LD A,($D6B3)  ;
 $D6F4 LD E,A        ;
 $D6F5 LD D,$00      ;
 $D6F7 ADD HL,DE     ;
 $D6F8 LD ($D6B7),HL ;
 $D6FB LD A,($D6B3)  ;
 $D6FE CP $1F        ;
 $D700 JP NC,$D71A   ;
 $D703 LD HL,($D6B5) ;
 $D706 LD B,A        ;
*$D707 LD (HL),$00   ;
 $D709 INC HL        ;
 $D70A DJNZ $D707    ;
 $D70C LD A,($D6B3)  ;
*$D70F PUSH AF       ;
 $D710 CALL $D783    ;
 $D713 CALL $D7A1    ;
 $D716 POP AF        ;
 $D717 DEC A         ;
 $D718 JR NZ,$D70F   ;
; This entry point is used by the routine at #R$D776.
*$D71A LD HL,$D676   ;
 $D71D LD B,$1E      ;
*$D71F PUSH BC       ;
 $D720 PUSH HL       ;
 $D721 LD A,(HL)     ;
 $D722 CALL $D4E1    ;
 $D725 POP HL        ;
 $D726 INC HL        ;
 $D727 POP BC        ;
 $D728 DJNZ $D71F    ;
 $D72A CALL $E2A9    ;
 $D72D LD A,$00      ;
 $D72F LD ($D0D2),A  ;
; This entry point is used by the routine at #R$D75A.
*$D732 LD HL,($D6B7) ;
 $D735 LD ($D6B5),HL ;
 $D738 LD HL,$D675   ;
 $D73B LD ($D6B7),HL ;
 $D73E LD A,($D6B3)  ;
 $D741 LD ($D6B4),A  ;
 $D744 XOR A         ;
 $D745 LD ($D6B3),A  ;
 $D748 LD B,$1E      ;
 $D74A LD C,$20      ;
 $D74C LD HL,$D695   ;
 $D74F LD DE,$D676   ;
*$D752 LD A,(HL)     ;
 $D753 LD (DE),A     ;
 $D754 LD (HL),C     ;
 $D755 INC HL        ;
 $D756 INC DE        ;
 $D757 DJNZ $D752    ;
 $D759 RET           ;

; Routine at D75A
c$D75A LD A,$01      ;
 $D75C LD ($D0D4),A  ;
 $D75F LD B,$1F      ;
 $D761 LD A,$20      ;
 $D763 LD HL,$D695   ;
*$D766 LD (HL),A     ;
 $D767 INC HL        ;
 $D768 DJNZ $D766    ;
 $D76A LD HL,$D675   ;
 $D76D LD ($D6B7),HL ;
 $D770 XOR A         ;
 $D771 LD ($D6B3),A  ;
 $D774 JR $D732      ;

; Routine at D776
c$D776 LD A,$00      ;
 $D778 LD ($D0D4),A  ;
 $D77B LD A,($D6B4)  ;
 $D77E AND A         ;
 $D77F CALL NZ,$D71A ;
 $D782 RET           ;

; Routine at D783
;
; Used by the routine at #R$D6B9.
c$D783 LD HL,($D6B5) ;
 $D786 LD B,$00      ;
*$D788 DEC HL        ;
 $D789 LD A,(HL)     ;
 $D78A INC B         ;
 $D78B CP $20        ;
 $D78D JR NZ,$D788   ;
 $D78F LD ($D6B5),HL ;
 $D792 LD DE,$D676   ;
 $D795 AND A         ;
 $D796 SBC HL,DE     ;
 $D798 RET NC        ;
 $D799 LD HL,$D694   ;
 $D79C LD ($D6B5),HL ;
 $D79F JR $D783      ;

; Routine at D7A1
;
; Used by the routine at #R$D6B9.
c$D7A1 LD B,$20      ;
 $D7A3 LD HL,($D6B5) ;
*$D7A6 LD A,(HL)     ;
 $D7A7 LD C,A        ;
 $D7A8 LD (HL),B     ;
 $D7A9 LD B,C        ;
 $D7AA INC HL        ;
 $D7AB XOR A         ;
 $D7AC CP C          ;
 $D7AD JR NZ,$D7A6   ;
 $D7AF RET           ;

; Routine at D7B0
;
; Used by the routine at #R$D470.
@label=other_token_lt_32
c$D7B0 LD HL,$D7DF   ;
 $D7B3 JR $D7B8      ;

; Routine at D7B5
;
; Used by the routine at #R$D421.
@label=print_control_code
c$D7B5 LD HL,$D7C3   ;
; This entry point is used by the routine at #R$D7B0.
*$D7B8 LD D,$00      ;
 $D7BA SLA A         ;
 $D7BC LD E,A        ;
 $D7BD ADD HL,DE     ;
 $D7BE LD E,(HL)     ;
 $D7BF INC HL        ;
 $D7C0 LD D,(HL)     ;
 $D7C1 EX DE,HL      ;
 $D7C2 JP (HL)       ;

; Data block at D7C3
@label=jump_table_at_D7C3
w$D7C3 DEFW $D884
 $D7C5 DEFW $D84B
 $D7C7 DEFW $D86A
 $D7C9 DEFW $D872
 $D7CB DEFW $D82E
 $D7CD DEFW $D837
 $D7CF DEFW $D8AE
 $D7D1 DEFW $D822
 $D7D3 DEFW $D833
 $D7D5 DEFW $E2A9
 $D7D7 DEFW $D8E5
 $D7D9 DEFW $D857
 $D7DB DEFW $D884
 $D7DD DEFW $D884
 $D7DF DEFW $D884
 $D7E1 DEFW $D8AE
 $D7E3 DEFW $D833
 $D7E5 DEFW $D872
 $D7E7 DEFW $D82E
 $D7E9 DEFW $D8E5
 $D7EB DEFW $D8E9
 $D7ED DEFW $E1E8
 $D7EF DEFW $D87B
 $D7F1 DEFW $D61D
 $D7F3 DEFW $E2B1
 $D7F5 DEFW $D55C
 $D7F7 DEFW $E2A9
 $D7F9 DEFW $D8A9
 $D7FB DEFW $D75A
 $D7FD DEFW $D776
 $D7FF DEFW $D857
 $D801 DEFW $D8B4
 $D803 DEFW $D885
 $D805 DEFW $D87F
 $D807 DEFW $D884
 $D809 DEFW $E36B
 $D80B DEFW $E35A
 $D80D DEFW $D8F3
 $D80F DEFW $E35E
 $D811 DEFW $D81F
 $D813 DEFW $D884
 $D815 DEFW $D884
 $D817 DEFW $D884
 $D819 DEFW $D8EF
 $D81B DEFW $D884
 $D81D DEFW $D884

; Routine at D81F
c$D81F JP $E35E      ;

; Routine at D822
c$D822 LD A,$C5      ;
 $D824 CALL $E297    ;
 $D827 CALL $D32D    ;
 $D82A LD A,$E2      ;
 $D82C JR $D848      ;

; Routine at D82E
c$D82E LD HL,$D054   ;
 $D831 JR $D878      ;

; Routine at D833
c$D833 LD A,$00      ;
 $D835 JR $D8B0      ;

; Routine at D837
c$D837 LD A,$69      ;
 $D839 CALL $E297    ;
 $D83C CALL $D421    ;
 $D83F JR NZ,$D87B   ;
 $D841 ADD A,D       ;
 $D842 RET NC        ;
 $D843 CALL $D2DE    ;
 $D846 LD A,$C3      ;
; This entry point is used by the routine at #R$D822.
*$D848 JP $E2A6      ;

; Routine at D84B
c$D84B LD A,$02      ;
 $D84D LD ($D0CE),A  ;
 $D850 LD A,($D065)  ;
 $D853 INC A         ;
 $D854 JP $D2E1      ;

; Routine at D857
c$D857 LD HL,$D090   ;
 $D85A LD DE,$DEC0   ;
 $D85D LD BC,$0006   ;
 $D860 LDIR          ;
 $D862 CALL $E01C    ;
 $D865 LD HL,$DEDB   ;
 $D868 JR $D878      ;

; Routine at D86A
c$D86A CALL $D87F    ;
 $D86D LD HL,$DEE4   ;
 $D870 JR $D878      ;

; Routine at D872
c$D872 CALL $D87F    ;
 $D875 LD HL,$DEED   ;
; This entry point is used by the routines at #R$D82E, #R$D857, #R$D86A and
; #R$D8B4.
*$D878 JP $E311      ;

; Routine at D87B
;
; Used by the routine at #R$D837.
c$D87B CALL $E2BC    ;
 $D87E INC B         ;
; This entry point is used by the routines at #R$D86A, #R$D872, #R$D885 and
; #R$D8B4.
*$D87F LD A,$01      ;
 $D881 LD ($D0D3),A  ;
 $D884 RET           ;

; Routine at D885
c$D885 CALL $D87F    ;
 $D888 CALL $D5E1    ;
 $D88B AND $03       ;
*$D88D PUSH AF       ;
 $D88E CALL $D5E1    ;
 $D891 AND $3E       ;
 $D893 LD HL,$FD9B   ;
 $D896 LD D,$00      ;
 $D898 LD E,A        ;
 $D899 ADD HL,DE     ;
 $D89A PUSH HL       ;
 $D89B CALL $D8F8    ;
 $D89E POP HL        ;
 $D89F INC HL        ;
 $D8A0 CALL $D8F8    ;
 $D8A3 POP AF        ;
 $D8A4 AND A         ;
 $D8A5 RET Z         ;
 $D8A6 DEC A         ;
 $D8A7 JR $D88D      ;

; Routine at D8A9
c$D8A9 LD A,$02      ;
 $D8AB JR $D8B0      ;

; Routine at D8AD
@label=unused_D8AD
c$D8AD RET           ;

; Routine at D8AE
c$D8AE LD A,$01      ;
; This entry point is used by the routines at #R$D833 and #R$D8A9.
*$D8B0 LD ($D0D1),A  ;
 $D8B3 RET           ;

; Routine at D8B4
c$D8B4 CALL $D87F    ;
 $D8B7 LD HL,$DEED   ;
 $D8BA CALL $E311    ;
 $D8BD DEC HL        ;
 $D8BE LD A,(HL)     ;
 $D8BF LD B,$05      ;
 $D8C1 LD HL,$D8E0   ;
*$D8C4 CP (HL)       ;
 $D8C5 JR Z,$D8CF    ;
 $D8C7 INC HL        ;
 $D8C8 DJNZ $D8C4    ;
*$D8CA LD HL,$D8DC   ;
 $D8CD JR $D878      ;
*$D8CF LD HL,$D6B4   ;
 $D8D2 DEC (HL)      ;
 $D8D3 LD HL,($D6B5) ;
 $D8D6 DEC HL        ;
 $D8D7 LD ($D6B5),HL ;
 $D8DA JR $D8CA      ;

; Data block at D8DC
b$D8DC DEFB $49,$41,$4E,$00,$41,$45,$49,$4F
 $D8E4 DEFB $55

; Routine at D8E5
c$D8E5 LD A,$01      ;
 $D8E7 JR $D8EB      ;

; Routine at D8E9
c$D8E9 LD A,$00      ;
; This entry point is used by the routine at #R$D8E5.
*$D8EB LD ($D420),A  ;
 $D8EE RET           ;

; Routine at D8EF
c$D8EF LD A,$06      ;
 $D8F1 JR $D8F5      ;

; Routine at D8F3
c$D8F3 LD A,$0A      ;
; This entry point is used by the routine at #R$D8EF.
*$D8F5 JP $E2C8      ;

; Routine at D8F8
;
; Used by the routine at #R$D885.
c$D8F8 LD A,(HL)     ;
 $D8F9 CP $3F        ;
 $D8FB RET Z         ;
 $D8FC JP $D425      ;

; Data block at D8FF
b$D8FF DEFB $00,$00,$00,$0C,$12,$12,$13,$80
 $D907 DEFB $00,$00,$00

; Routine at D90A
;
; Used by the routine at #R$D04E.
c$D90A CALL $D61D    ;
 $D90D LD DE,$D902   ;
 $D910 CALL $D568    ;
 $D913 CALL $D54F    ;
 $D916 LD A,$0F      ;
 $D918 CALL $EB6E    ;
 $D91B XOR A         ;
 $D91C LD ($D907),A  ;
 $D91F INC A         ;
 $D920 CALL $D45F    ;
 $D923 LD ($D908),SP ;
; This entry point is used by the routine at #R$D946.
*$D927 LD SP,($D908) ;
 $D92B CALL $E1F7    ;
 $D92E SUB $31       ;
 $D930 JR Z,$D946    ;
 $D932 DEC A         ;
 $D933 JP Z,$D980    ;
 $D936 DEC A         ;
 $D937 JR NZ,$D927   ;
 $D939 CALL $E832    ;
 $D93C CALL $E205    ;
 $D93F LD A,($D907)  ;
 $D942 AND A         ;
 $D943 RET NZ        ;
 $D944 XOR A         ;
 $D945 RET           ;

; Routine at D946
;
; Used by the routine at #R$D90A.
c$D946 LD HL,$DED0   ;
 $D949 CALL $DA53    ;
*$D94C CALL $DA49    ;
 $D94F SCF           ;
 $D950 INC D         ;
 $D951 EX AF,AF'     ;
 $D952 DEC D         ;
 $D953 DI            ;
 $D954 CALL $0562    ;
 $D957 EI            ;
 $D958 JP NC,$DA25   ;
 $D95B LD A,$01      ;
 $D95D LD ($D907),A  ;
 $D960 LD A,$D6      ;
 $D962 CALL $DA5A    ;
 $D965 LD HL,$DED0   ;
 $D968 LD DE,$D054   ;
 $D96B LD A,(HL)     ;
 $D96C AND A         ;
 $D96D JP Z,$DA08    ;
 $D970 LD B,$0B      ;
*$D972 LD A,(DE)     ;
 $D973 CP (HL)       ;
 $D974 JR NZ,$D94C   ;
 $D976 OR (HL)       ;
 $D977 JP Z,$DA08    ;
 $D97A INC HL        ;
 $D97B INC DE        ;
 $D97C DJNZ $D972    ;
 $D97E JR $D94C      ;
; This entry point is used by the routine at #R$D90A.
*$D980 LD HL,$D054   ;
 $D983 CALL $DA53    ;
 $D986 LD HL,$7107   ;
 $D989 LD DE,$D0B1   ;
 $D98C LD BC,$0009   ;
 $D98F LDIR          ;
 $D991 LD A,$02      ;
 $D993 CALL $DA5A    ;
 $D996 CALL $E1F7    ;
 $D999 CALL $DA49    ;
 $D99C CALL $04C6    ;
 $D99F LD A,$00      ;
 $D9A1 OUT ($FE),A   ;
 $D9A3 EI            ;
 $D9A4 JP NC,$DA2D   ;
 $D9A7 LD A,$97      ;
 $D9A9 CALL $DA5A    ;
 $D9AC LD HL,$0C01   ;
 $D9AF LD ($D045),HL ;
 $D9B2 LD A,$04      ;
 $D9B4 CALL $D45F    ;
 $D9B7 LD HL,($D061) ;
 $D9BA RL L          ;
 $D9BC LD E,H        ;
 $D9BD RL E          ;
 $D9BF LD A,($D065)  ;
 $D9C2 LD HL,$D0B0   ;
 $D9C5 BIT 3,(HL)    ;
 $D9C7 JR Z,$D9CB    ;
 $D9C9 SET 3,A       ;
*$D9CB BIT 6,(HL)    ;
 $D9CD JR Z,$D9D1    ;
 $D9CF SET 4,A       ;
*$D9D1 LD HL,($D066) ;
 $D9D4 RLCA          ;
 $D9D5 RLCA          ;
 $D9D6 RLCA          ;
 $D9D7 LD D,A        ;
 $D9D8 LD A,E        ;
 $D9D9 CALL $DA16    ;
 $D9DC LD A,H        ;
 $D9DD CALL $DA16    ;
 $D9E0 LD A,L        ;
 $D9E1 CALL $DA16    ;
 $D9E4 LD A,L        ;
 $D9E5 XOR D         ;
 $D9E6 ADD A,$3D     ;
 $D9E8 LD D,A        ;
 $D9E9 XOR E         ;
 $D9EA ADD A,$66     ;
 $D9EC LD E,A        ;
 $D9ED XOR H         ;
 $D9EE ADD A,$8F     ;
 $D9F0 LD H,A        ;
 $D9F1 XOR L         ;
 $D9F2 ADD A,$C7     ;
 $D9F4 LD L,A        ;
 $D9F5 PUSH DE       ;
 $D9F6 AND A         ;
 $D9F7 CALL $D2E5    ;
 $D9FA LD A,$05      ;
 $D9FC LD ($D0CE),A  ;
 $D9FF XOR A         ;
 $DA00 LD ($D0CC),A  ;
 $DA03 POP HL        ;
 $DA04 AND A         ;
 $DA05 CALL $D2E5    ;
*$DA08 LD HL,$D054   ;
 $DA0B LD DE,$D232   ;
 $DA0E LD BC,$005D   ;
 $DA11 LDIR          ;
; This entry point is used by the routine at #R$DA25.
*$DA13 JP $D927      ;

; Routine at DA16
;
; Used by the routine at #R$D946.
c$DA16 LD B,$08      ;
 $DA18 LD C,$00      ;
*$DA1A RRA           ;
 $DA1B JR NC,$DA1E   ;
 $DA1D INC C         ;
*$DA1E DJNZ $DA1A    ;
 $DA20 RR C          ;
 $DA22 RR D          ;
 $DA24 RET           ;

; Routine at DA25
;
; Used by the routine at #R$D946.
c$DA25 HALT          ;
 $DA26 LD A,($FC0D)  ;
 $DA29 CP $20        ;
 $DA2B JR NZ,$DA37   ;
; This entry point is used by the routine at #R$D946.
*$DA2D CALL $E36B    ;
 $DA30 LD A,$C7      ;
 $DA32 CALL $DA5A    ;
 $DA35 JR $DA13      ;
*$DA37 LD A,$03      ;
 $DA39 CALL $DA5A    ;
 $DA3C LD HL,$D232   ;
 $DA3F LD DE,$D054   ;
 $DA42 LD BC,$005D   ;
 $DA45 LDIR          ;
 $DA47 JR $DA13      ;

; Routine at DA49
;
; Used by the routine at #R$D946.
c$DA49 LD IX,$D054   ;
 $DA4D LD DE,$0066   ;
 $DA50 LD A,$FF      ;
 $DA52 RET           ;

; Routine at DA53
;
; Used by the routine at #R$D946.
c$DA53 LD B,$0A      ;
 $DA55 LD A,$08      ;
 $DA57 JP $E3CC      ;

; Routine at DA5A
;
; Used by the routines at #R$D946 and #R$DA25.
c$DA5A PUSH AF       ;
 $DA5B XOR A         ;
 $DA5C LD ($D0D1),A  ;
 $DA5F LD HL,$1600   ;
 $DA62 LD ($D045),HL ;
 $DA65 CALL $E37A    ;
 $DA68 POP AF        ;
 $DA69 CALL $D45F    ;
 $DA6C CALL $E2A9    ;
 $DA6F JP $E1E8      ;

; Data block at DA72
b$DA72 DEFB $00,$00,$00,$00,$00,$00,$00,$F5

; Routine at DA7A
;
; Used by the routine at #R$D03C.
c$DA7A XOR A         ;
 $DA7B LD ($D0D1),A  ;
 $DA7E LD A,($70E3)  ;
 $DA81 CP $04        ;
 $DA83 JR C,$DA93    ;
 $DA85 LD HL,$D548   ;
 $DA88 LD (HL),$00   ;
 $DA8A CALL $DAB4    ;
 $DA8D LD HL,$D548   ;
 $DA90 LD (HL),$A9   ;
 $DA92 RET           ;
*$DA93 LD HL,$D50A   ;
 $DA96 SET 7,(HL)    ;
 $DA98 LD HL,$010A   ;
 $DA9B LD ($D045),HL ;
 $DA9E LD A,($70E3)  ;
 $DAA1 ADD A,$60     ;
 $DAA3 CALL $D425    ;
 $DAA6 LD A,$AF      ;
 $DAA8 CALL $E2A6    ;
 $DAAB CALL $DAB4    ;
 $DAAE LD HL,$D50A   ;
 $DAB1 RES 7,(HL)    ;
 $DAB3 RET           ;

; Routine at DAB4
;
; Used by the routine at #R$DA7A.
c$DAB4 CALL $DC29    ;
 $DAB7 CALL $7121    ;
 $DABA LD HL,$DA73   ;
 $DABD LD A,(HL)     ;
 $DABE AND A         ;
 $DABF JR NZ,$DAEF   ;
 $DAC1 LD HL,$DA74   ;
 $DAC4 INC (HL)      ;
 $DAC5 BIT 0,(HL)    ;
 $DAC7 JR NZ,$DB2E   ;
 $DAC9 LD B,$0A      ;
 $DACB LD HL,$D0BD   ;
*$DACE BIT 7,(HL)    ;
 $DAD0 JR NZ,$DAD7   ;
 $DAD2 INC HL        ;
 $DAD3 INC HL        ;
 $DAD4 DJNZ $DACE    ;
 $DAD6 RET           ;

; Routine at DAD7
;
; Used by the routine at #R$DAB4.
c$DAD7 RES 7,(HL)    ;
 $DAD9 LD C,(HL)     ;
 $DADA INC HL        ;
 $DADB LD B,(HL)     ;
; This entry point is used by the routine at #R$DBA2.
*$DADC PUSH BC       ;
 $DADD CALL $E1E8    ;
 $DAE0 POP BC        ;
; This entry point is used by the routine at #R$DB62.
*$DAE1 LD A,$0E      ;
 $DAE3 LD ($DA73),A  ;
; This entry point is used by the routine at #R$DBA2.
*$DAE6 LD A,C        ;
 $DAE7 LD ($DA75),A  ;
 $DAEA LD A,B        ;
 $DAEB LD ($DA76),A  ;
 $DAEE RET           ;

; Routine at DAEF
;
; Used by the routine at #R$DAB4.
c$DAEF DEC (HL)      ;
 $DAF0 CP $04        ;
 $DAF2 RET C         ;
 $DAF3 LD A,($70E3)  ;
 $DAF6 CP $04        ;
 $DAF8 RET NC        ;
 $DAF9 LD A,($DA75)  ;
 $DAFC LD L,A        ;
 $DAFD LD H,$0E      ;
 $DAFF LD ($D045),HL ;
 $DB02 LD A,($DA76)  ;
 $DB05 CP $FD        ;
 $DB07 JR Z,$DB13    ;
 $DB09 CP $E2        ;
 $DB0B JR Z,$DB25    ;
*$DB0D LD A,($DA76)  ;
 $DB10 JP $E2A6      ;
*$DB13 LD A,($DA79)  ;
 $DB16 CP $73        ;
 $DB18 JR Z,$DB20    ;
 $DB1A LD HL,$D045   ;
 $DB1D INC (HL)      ;
 $DB1E INC (HL)      ;
 $DB1F INC (HL)      ;
*$DB20 CALL $D425    ;
 $DB23 JR $DB0D      ;
*$DB25 LD HL,($DA77) ;
 $DB28 SCF           ;
 $DB29 CALL $D2E5    ;
 $DB2C JR $DB0D      ;
; This entry point is used by the routine at #R$DAB4.
*$DB2E LD A,($70FC)  ;
 $DB31 CP $9F        ;
 $DB33 JR C,$DB7D    ;
 $DB35 LD A,($711E)  ;
 $DB38 AND A         ;
 $DB39 JR NZ,$DB6C   ;
 $DB3B LD A,($7129)  ;
 $DB3E AND A         ;
 $DB3F JR NZ,$DB67   ;
 $DB41 LD HL,$DA72   ;
 $DB44 LD A,(HL)     ;
 $DB45 AND A         ;
 $DB46 JR NZ,$DB60   ;
 $DB48 LD A,$46      ;
 $DB4A LD (HL),A     ;
 $DB4B LD A,($D0AF)  ;
 $DB4E DEC A         ;
 $DB4F JR Z,$DB62    ;
 $DB51 LD A,($D081)  ;
 $DB54 AND A         ;
 $DB55 RET Z         ;
 $DB56 LD A,($D0BA)  ;
 $DB59 AND A         ;
 $DB5A RET NZ        ;
 $DB5B LD BC,$C202   ;
 $DB5E JR $DB8E      ;
*$DB60 DEC (HL)      ;
 $DB61 RET           ;

; Routine at DB62
;
; Used by the routine at #R$DAEF.
c$DB62 LD BC,$0F03   ;
 $DB65 JR $DB8E      ;
; This entry point is used by the routine at #R$DAEF.
*$DB67 LD BC,$7B05   ;
 $DB6A JR $DB8E      ;
; This entry point is used by the routine at #R$DAEF.
*$DB6C LD A,($D088)  ;
 $DB6F AND A         ;
 $DB70 RET Z         ;
 $DB71 LD A,($D082)  ;
 $DB74 INC A         ;
 $DB75 CALL $DEA2    ;
 $DB78 LD BC,$A008   ;
 $DB7B JR $DB8E      ;
; This entry point is used by the routine at #R$DAEF.
*$DB7D XOR A         ;
 $DB7E LD ($D041),A  ;
 $DB81 LD L,$07      ;
 $DB83 LD A,($70E3)  ;
 $DB86 CP $04        ;
 $DB88 CALL C,$6FF8  ;
 $DB8B LD BC,$640A   ;
; This entry point is used by the routine at #R$DAEF.
*$DB8E JP $DAE1      ;

; Routine at DB91
;
; Used by the routines at #R$D0DA, #R$D298 and #R$DC29.
c$DB91 LD B,$0A      ;
 $DB93 LD HL,$D0BD   ;
*$DB96 RES 7,(HL)    ;
 $DB98 INC HL        ;
 $DB99 INC HL        ;
 $DB9A DJNZ $DB96    ;
 $DB9C XOR A         ;
 $DB9D LD ($DA76),A  ;
 $DBA0 RET           ;

; Data block at DBA1
@label=byte_at_DBA1
b$DBA1 DEFB $00

; Routine at DBA2
;
; Used by the routine at #R$D042.
c$DBA2 LD HL,$FC0A   ;
 $DBA5 LD A,(HL)     ;
 $DBA6 AND $30       ;
 $DBA8 RET Z         ;
 $DBA9 LD B,A        ;
 $DBAA LD A,(HL)     ;
 $DBAB AND $CF       ;
 $DBAD LD (HL),A     ;
 $DBAE LD A,($DBA1)  ;
 $DBB1 AND A         ;
 $DBB2 RET NZ        ;
 $DBB3 LD A,($7104)  ;
 $DBB6 AND A         ;
 $DBB7 JR Z,$DC0A    ;
 $DBB9 BIT 5,B       ;
 $DBBB JR Z,$DBCF    ;
 $DBBD BIT 4,B       ;
 $DBBF RET Z         ;
 $DBC0 LD A,($D08D)  ;
 $DBC3 AND A         ;
 $DBC4 RET Z         ;
 $DBC5 LD A,$02      ;
 $DBC7 LD ($D03F),A  ;
 $DBCA LD BC,$7406   ;
 $DBCD JR $DBEB      ;
*$DBCF CALL $DF60    ;
 $DBD2 LD HL,($DEF6) ;
 $DBD5 LD A,H        ;
 $DBD6 AND A         ;
 $DBD7 JR NZ,$DC04   ;
 $DBD9 LD A,L        ;
 $DBDA AND A         ;
 $DBDB RET Z         ;
 $DBDC LD B,A        ;
 $DBDD LD A,($D082)  ;
 $DBE0 SUB B         ;
 $DBE1 JR C,$DC04    ;
 $DBE3 LD A,$01      ;
 $DBE5 LD ($D03F),A  ;
 $DBE8 LD BC,$C005   ;
*$DBEB LD A,$15      ;
 $DBED LD ($DBA1),A  ;
 $DBF0 LD ($DA73),A  ;
 $DBF3 CALL $DAE6    ;
 $DBF6 CALL $E1E8    ;
 $DBF9 LD A,($70E3)  ;
 $DBFC CP $04        ;
 $DBFE RET NC        ;
 $DBFF XOR A         ;
 $DC00 LD ($70E3),A  ;
 $DC03 RET           ;
*$DC04 LD BC,$C106   ;
 $DC07 JP $DADC      ;
*$DC0A CALL $D61D    ;
 $DC0D LD HL,$070B   ;
 $DC10 LD ($D045),HL ;
 $DC13 LD A,$01      ;
 $DC15 LD ($D0D1),A  ;
 $DC18 LD A,$CD      ;
 $DC1A CALL $D45F    ;
 $DC1D CALL $E1E8    ;
 $DC20 CALL $E35E    ;
 $DC23 CALL $E205    ;
 $DC26 JP $EF87      ;

; Routine at DC29
;
; Used by the routine at #R$DAB4.
c$DC29 LD HL,$DBA1   ;
 $DC2C LD A,(HL)     ;
 $DC2D AND A         ;
 $DC2E RET Z         ;
 $DC2F DEC (HL)      ;
 $DC30 JR Z,$DC44    ;
 $DC32 LD B,A        ;
 $DC33 LD A,$02      ;
 $DC35 LD ($D0CE),A  ;
 $DC38 LD HL,$0101   ;
 $DC3B LD ($D045),HL ;
 $DC3E LD A,B        ;
 $DC3F SRL A         ;
 $DC41 JP $D2E1      ;
*$DC44 CALL $DB91    ;
 $DC47 LD A,($D03F)  ;
 $DC4A SUB $02       ;
 $DC4C JR NZ,$DC8E   ;
; This entry point is used by the routine at #R$DC8E.
*$DC4E XOR A         ;
 $DC4F LD ($D0AF),A  ;
 $DC52 LD A,($D081)  ;
 $DC55 AND A         ;
 $DC56 JR Z,$DC5F    ;
 $DC58 XOR A         ;
 $DC59 LD ($D081),A  ;
 $DC5C LD ($D0BA),A  ;
*$DC5F LD ($D08D),A  ;
 $DC62 LD A,($D065)  ;
 $DC65 INC A         ;
 $DC66 LD ($7060),A  ;
 $DC69 AND $07       ;
 $DC6B LD ($D065),A  ;
 $DC6E LD HL,$D090   ;
 $DC71 CALL $DC83    ;
 $DC74 CALL $DC83    ;
 $DC77 CALL $DC83    ;
 $DC7A XOR A         ;
 $DC7B LD ($D05F),A  ;
 $DC7E CALL $DF60    ;
 $DC81 JR $DCE9      ;

; Routine at DC83
;
; Used by the routine at #R$DC29.
c$DC83 LD E,(HL)     ;
 $DC84 RLC E         ;
 $DC86 LD (HL),E     ;
 $DC87 INC HL        ;
 $DC88 LD D,(HL)     ;
 $DC89 RLC D         ;
 $DC8B LD (HL),D     ;
 $DC8C INC HL        ;
 $DC8D RET           ;

; Routine at DC8E
;
; Used by the routine at #R$DC29.
c$DC8E LD A,($D081)  ;
 $DC91 AND A         ;
 $DC92 JR NZ,$DC4E   ;
 $DC94 LD A,($DEF6)  ;
 $DC97 LD B,A        ;
 $DC98 LD A,($D082)  ;
 $DC9B SUB B         ;
 $DC9C LD C,A        ;
 $DC9D CALL $DEA2    ;
 $DCA0 LD A,$46      ;
 $DCA2 SUB C         ;
 $DCA3 LD B,A        ;
 $DCA4 LD A,($DEF8)  ;
 $DCA7 SLA A         ;
 $DCA9 ADD A,B       ;
 $DCAA LD ($7060),A  ;
 $DCAD LD HL,$D05F   ;
 $DCB0 SRL (HL)      ;
 $DCB2 LD A,($FC0E)  ;
 $DCB5 BIT 6,A       ;
 $DCB7 JR NZ,$DCC0   ;
 $DCB9 LD A,($7105)  ;
 $DCBC CP $F9        ;
 $DCBE JR NZ,$DCE9   ;
*$DCC0 INC A         ;
 $DCC1 LD ($7103),A  ;
 $DCC4 LD HL,$D099   ;
 $DCC7 LD DE,$D0BB   ;
 $DCCA LD A,(DE)     ;
 $DCCB ADD A,(HL)    ;
 $DCCC RR A          ;
 $DCCE LD (HL),A     ;
 $DCCF LD (DE),A     ;
 $DCD0 LD HL,$D097   ;
 $DCD3 LD DE,$D0BC   ;
 $DCD6 LD A,(DE)     ;
 $DCD7 ADD A,(HL)    ;
 $DCD8 RR A          ;
 $DCDA LD (HL),A     ;
 $DCDB LD (DE),A     ;
 $DCDC XOR A         ;
 $DCDD LD ($711C),A  ;
 $DCE0 LD ($DEE4),A  ;
 $DCE3 LD ($DEED),A  ;
 $DCE6 JP $DE4C      ;
; This entry point is used by the routine at #R$DC29.
*$DCE9 XOR A         ;
 $DCEA LD ($7103),A  ;
 $DCED LD HL,$DEBA   ;
 $DCF0 LD DE,$D096   ;
 $DCF3 LD BC,$0006   ;
 $DCF6 LDIR          ;
 $DCF8 LD HL,$DEED   ;
 $DCFB LD DE,$DEE4   ;
 $DCFE LD BC,$0008   ;
 $DD01 LDIR          ;
 $DD03 LD A,($DEFA)  ;
 $DD06 LD ($D09C),A  ;
 $DD09 LD A,($DEF9)  ;
 $DD0C LD ($D09D),A  ;
 $DD0F CALL $E142    ;
 $DD12 LD B,$12      ;
 $DD14 XOR A         ;
 $DD15 LD HL,$7107   ;
*$DD18 LD (HL),A     ;
 $DD19 INC HL        ;
 $DD1A DJNZ $DD18    ;
 $DD1C LD A,$FF      ;
 $DD1E LD ($711D),A  ;
 $DD21 LD HL,($DEBA) ;
 $DD24 LD DE,($DEBC) ;
 $DD28 LD BC,($DEBE) ;
 $DD2C LD A,B        ;
 $DD2D AND $83       ;
 $DD2F OR $01        ;
 $DD31 LD ($7109),A  ;
 $DD34 LD A,C        ;
 $DD35 AND $83       ;
 $DD37 OR $01        ;
 $DD39 LD ($710C),A  ;
 $DD3C LD A,D        ;
 $DD3D OR E          ;
 $DD3E AND $07       ;
 $DD40 ADD A,$04     ;
 $DD42 OR $81        ;
 $DD44 LD ($710F),A  ;
 $DD47 LD A,L        ;
 $DD48 AND $83       ;
 $DD4A OR $01        ;
 $DD4C LD ($7112),A  ;
 $DD4F LD A,E        ;
 $DD50 AND $83       ;
 $DD52 OR $01        ;
 $DD54 LD ($7115),A  ;
 $DD57 LD A,H        ;
 $DD58 OR L          ;
 $DD59 AND $07       ;
 $DD5B ADD A,$03     ;
 $DD5D LD ($7118),A  ;
 $DD60 PUSH BC       ;
 $DD61 LD BC,$0009   ;
 $DD64 LD HL,$7110   ;
 $DD67 LD DE,$6048   ;
 $DD6A LDIR          ;
 $DD6C POP BC        ;
 $DD6D LD A,($7118)  ;
 $DD70 LD HL,$604F   ;
 $DD73 SRL C         ;
 $DD75 JR C,$DD7D    ;
 $DD77 LD A,($7112)  ;
 $DD7A LD HL,$6049   ;
*$DD7D SET 7,(HL)    ;
 $DD7F LD B,A        ;
 $DD80 AND $7F       ;
 $DD82 SRL C         ;
 $DD84 JR C,$DD96    ;
 $DD86 CP $01        ;
 $DD88 JR NZ,$DD92   ;
 $DD8A LD D,A        ;
 $DD8B LD A,B        ;
 $DD8C XOR $80       ;
 $DD8E LD B,A        ;
 $DD8F LD A,D        ;
 $DD90 JR $DD93      ;
*$DD92 DEC A         ;
*$DD93 DEC A         ;
 $DD94 JR $DD97      ;
*$DD96 INC A         ;
*$DD97 SLA A         ;
 $DD99 SLA B         ;
 $DD9B RR A          ;
 $DD9D INC HL        ;
 $DD9E LD (HL),A     ;
 $DD9F XOR A         ;
 $DDA0 LD HL,$6051   ;
 $DDA3 LD B,$12      ;
*$DDA5 LD (HL),A     ;
 $DDA6 INC HL        ;
 $DDA7 DJNZ $DDA5    ;
 $DDA9 LD HL,$7117   ;
 $DDAC LD A,($604F)  ;
 $DDAF CP (HL)       ;
 $DDB0 LD A,$7F      ;
 $DDB2 LD ($605A),A  ;
 $DDB5 JR NZ,$DDD0   ;
 $DDB7 LD BC,$6062   ;
 $DDBA LD DE,$6052   ;
 $DDBD LD (BC),A     ;
 $DDBE LD (DE),A     ;
 $DDBF LD HL,$7112   ;
 $DDC2 LD A,($604A)  ;
 $DDC5 CP (HL)       ;
 $DDC6 LD A,$FF      ;
 $DDC8 JR C,$DDCD    ;
 $DDCA LD (DE),A     ;
 $DDCB JR $DDEB      ;
*$DDCD LD (BC),A     ;
 $DDCE JR $DDEB      ;
*$DDD0 LD BC,$605E   ;
 $DDD3 LD DE,$6056   ;
 $DDD6 LD HL,$7118   ;
 $DDD9 LD A,($6050)  ;
 $DDDC CP (HL)       ;
 $DDDD JR C,$DDE7    ;
 $DDDF LD A,$FF      ;
 $DDE1 JR $DDE9      ;

; Routine at DDE3
c$DDE3 LD A,$05      ;
 $DDE5 JR $DE22      ;
; This entry point is used by the routine at #R$DC8E.
*$DDE7 LD A,$7F      ;
; This entry point is used by the routine at #R$DC8E.
*$DDE9 LD (BC),A     ;
 $DDEA LD (DE),A     ;
; This entry point is used by the routine at #R$DC8E.
*$DDEB LD A,($D0BB)  ;
 $DDEE LD ($D099),A  ;
 $DDF1 LD A,($D0BC)  ;
 $DDF4 LD ($D097),A  ;
 $DDF7 LD A,($D065)  ;
 $DDFA AND A         ;
 $DDFB JR Z,$DE4C    ;
 $DDFD LD HL,$606E   ;
 $DE00 BIT 7,(HL)    ;
 $DE02 RES 7,(HL)    ;
 $DE04 JR NZ,$DDE3   ;
 $DE06 LD HL,$D0AF   ;
 $DE09 LD A,(HL)     ;
 $DE0A AND A         ;
 $DE0B JR Z,$DE25    ;
 $DE0D DEC A         ;
 $DE0E JR NZ,$DE13   ;
 $DE10 INC (HL)      ;
 $DE11 JR $DE18      ;
*$DE13 CP $03        ;
 $DE15 JR NZ,$DE18   ;
 $DE17 LD (HL),A     ;
*$DE18 LD HL,$D096   ;
 $DE1B CALL $EF37    ;
 $DE1E JR C,$DE25    ;
 $DE20 LD A,$04      ;
*$DE22 LD ($D0AF),A  ;
*$DE25 LD HL,($D063) ;
 $DE28 INC HL        ;
 $DE29 LD ($D063),HL ;
 $DE2C LD DE,$D0B0   ;
 $DE2F LD A,(DE)     ;
 $DE30 RRCA          ;
 $DE31 JR NC,$DE67   ;
 $DE33 RRCA          ;
 $DE34 JR NC,$DE7E   ;
 $DE36 RRCA          ;
 $DE37 JR NC,$DE88   ;
; This entry point is used by the routine at #R$DE67.
*$DE39 LD HL,$7105   ;
 $DE3C LD A,($D09D)  ;
 $DE3F XOR $FF       ;
 $DE41 AND $07       ;
 $DE43 RRA           ;
 $DE44 CP (HL)       ;
 $DE45 JR C,$DE4C    ;
 $DE47 LD HL,$6065   ;
 $DE4A RES 7,(HL)    ;
; This entry point is used by the routines at #R$DC8E and #R$DE67.
*$DE4C LD A,$01      ;
 $DE4E LD ($D040),A  ;
 $DE51 XOR A         ;
 $DE52 LD ($70E3),A  ;
 $DE55 LD ($70EE),A  ;
 $DE58 LD ($711E),A  ;
 $DE5B LD ($D047),A  ;
 $DE5E LD ($9CB2),A  ;
 $DE61 LD A,$A0      ;
 $DE63 LD ($70F2),A  ;
 $DE66 RET           ;

; Routine at DE67
;
; Used by the routine at #R$DDE3.
c$DE67 LD A,L        ;
 $DE68 CP $20        ;
 $DE6A JR C,$DE39    ;
 $DE6C EX DE,HL      ;
 $DE6D SET 0,(HL)    ;
 $DE6F LD A,$01      ;
 $DE71 LD ($D081),A  ;
 $DE74 LD L,$02      ;
 $DE76 CALL $6FF8    ;
 $DE79 CALL $DE97    ;
 $DE7C JR $DE4C      ;
; This entry point is used by the routine at #R$DDE3.
*$DE7E LD A,L        ;
 $DE7F CP $80        ;
 $DE81 JR C,$DE39    ;
 $DE83 EX DE,HL      ;
 $DE84 SET 1,(HL)    ;
 $DE86 JR $DE4C      ;
; This entry point is used by the routine at #R$DDE3.
*$DE88 LD A,L        ;
 $DE89 CP $FE        ;
 $DE8B JR C,$DE39    ;
 $DE8D EX DE,HL      ;
 $DE8E SET 2,(HL)    ;
 $DE90 LD A,$01      ;
 $DE92 LD ($D0AF),A  ;
 $DE95 JR $DE4C      ;
; This entry point is used by the routines at #R$D0E0 and #R$D1E9.
*$DE97 LD A,($D082)  ;
 $DE9A AND A         ;
 $DE9B RET Z         ;
 $DE9C LD HL,$D0CF   ;
 $DE9F SET 7,(HL)    ;
 $DEA1 XOR A         ;

; Routine at DEA2
;
; Used by the routines at #R$DB62, #R$DC8E and #R$E973.
c$DEA2 CP $47        ;
 $DEA4 JR C,$DEA8    ;
 $DEA6 LD A,$46      ;
*$DEA8 LD ($D082),A  ;
 $DEAB SLA A         ;
 $DEAD LD B,A        ;
 $DEAE SRL A         ;
 $DEB0 SRL A         ;
 $DEB2 SRL A         ;
 $DEB4 ADD A,B       ;
 $DEB5 LD ($70EC),A  ;
 $DEB8 RET           ;

; Unused
s$DEB9 DEFS $17

; Message at DED0
t$DED0 DEFM "JAMESON   "

; Unused
s$DEDA DEFS $01

; Message at DEDB
t$DEDB DEFM "TEMPNAME"

; Unused
s$DEE3 DEFS $01

; Message at DEE4
t$DEE4 DEFM "LAVE"

; Unused
s$DEE8 DEFS $05

; Message at DEED
t$DEED DEFM "LAVE"

; Data block at DEF1
b$DEF1 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $DEF9 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $DF01 DEFB $00,$00

; Routine at DF03
;
; Used by the routine at #R$D018.
c$DF03 LD HL,$D065   ;
 $DF06 LD A,(HL)     ;
 $DF07 INC A         ;
 $DF08 AND $07       ;
 $DF0A LD (HL),A     ;
 $DF0B LD HL,$D090   ;
 $DF0E CALL $DF1A    ;
 $DF11 LD HL,$D092   ;
 $DF14 CALL $DF1A    ;
 $DF17 LD HL,$D094   ;
*$DF1A LD E,(HL)     ;
 $DF1B RLC E         ;
 $DF1D LD (HL),E     ;
 $DF1E INC HL        ;
 $DF1F LD D,(HL)     ;
 $DF20 RLC D         ;
 $DF22 LD (HL),D     ;
 $DF23 RET           ;
; This entry point is used by the routine at #R$E398.
*$DF24 CALL $E126    ;
 $DF27 XOR A         ;
 $DF28 LD ($DF00),A  ;
*$DF2B CALL $E12E    ;
 $DF2E CALL $E01C    ;
 $DF31 LD HL,$DED0   ;
 $DF34 LD DE,$DEDB   ;
*$DF37 LD B,(HL)     ;
 $DF38 LD A,(DE)     ;
 $DF39 CP B          ;
 $DF3A JR NZ,$DF43   ;
 $DF3C AND A         ;
 $DF3D JR Z,$DF4C    ;
 $DF3F INC HL        ;
 $DF40 INC DE        ;
 $DF41 JR $DF37      ;
*$DF43 LD HL,$DF00   ;
 $DF46 INC (HL)      ;
 $DF47 JP NZ,$DF2B   ;
 $DF4A SCF           ;
 $DF4B RET           ;

; Routine at DF4C
;
; Used by the routine at #R$DF03.
c$DF4C CALL $E136    ;
 $DF4F CALL $E46F    ;
 $DF52 CALL $E08C    ;
 $DF55 CALL $E46F    ;
 $DF58 CALL $E080    ;
 $DF5B JP $DFB5      ;

; Data block at DF5E
@label=word_at_DF5E
w$DF5E DEFW $0000

; Routine at DF60
;
; Used by the routines at #R$DBA2, #R$DC29, #R$E3E9 and #R$EDDF.
c$DF60 LD A,($70E3)  ;
 $DF63 CP $07        ;
 $DF65 JR C,$DF74    ;
 $DF67 CP $09        ;
 $DF69 JR NC,$DF74   ;
 $DF6B CALL $E46F    ;
 $DF6E CALL $DF74    ;
 $DF71 JP $E46F      ;
; This entry point is used by the routine at #R$D298.
*$DF74 CALL $E126    ;
 $DF77 LD HL,$FFFF   ;
 $DF7A LD ($DF5E),HL ;
 $DF7D LD B,$00      ;
*$DF7F PUSH BC       ;
 $DF80 LD A,($DEC3)  ;
 $DF83 LD B,A        ;
 $DF84 LD A,($DEC1)  ;
 $DF87 CALL $DFCE    ;
 $DF8A JR C,$DF9C    ;
 $DF8C EX DE,HL      ;
 $DF8D LD HL,($DF5E) ;
 $DF90 AND A         ;
 $DF91 SBC HL,DE     ;
 $DF93 JR C,$DF9C    ;
 $DF95 LD ($DF5E),DE ;
 $DF99 CALL $E12E    ;
*$DF9C CALL $DFC4    ;
 $DF9F POP BC        ;
 $DFA0 DJNZ $DF7F    ;
 $DFA2 LD HL,($DF5E) ;
 $DFA5 AND A         ;
 $DFA6 CALL $DFF2    ;
 $DFA9 CALL $E136    ;
 $DFAC CALL $E08C    ;
 $DFAF CALL $E01C    ;
 $DFB2 CALL $E080    ;
; This entry point is used by the routine at #R$DF4C.
*$DFB5 LD A,($D099)  ;
 $DFB8 LD B,A        ;
 $DFB9 LD A,($D097)  ;
 $DFBC CALL $DFCE    ;
 $DFBF CALL $DFF2    ;
 $DFC2 AND A         ;
 $DFC3 RET           ;

; Routine at DFC4
;
; Used by the routines at #R$DF60, #R$EB7C, #R$ECD2 and #R$ED27.
c$DFC4 LD B,$04      ;
*$DFC6 PUSH BC       ;
 $DFC7 CALL $E063    ;
 $DFCA POP BC        ;
 $DFCB DJNZ $DFC6    ;
 $DFCD RET           ;

; Routine at DFCE
;
; Used by the routine at #R$DF60.
c$DFCE PUSH AF       ;
 $DFCF LD A,($D0BB)  ;
 $DFD2 CALL $DFEA    ;
 $DFD5 LD D,A        ;
 $DFD6 CALL $E009    ;
 $DFD9 POP BC        ;
 $DFDA PUSH HL       ;
 $DFDB LD A,($D0BC)  ;
 $DFDE CALL $DFEA    ;
 $DFE1 SRL A         ;
 $DFE3 LD D,A        ;
 $DFE4 CALL $E009    ;
 $DFE7 POP DE        ;
 $DFE8 ADD HL,DE     ;
 $DFE9 RET           ;

; Routine at DFEA
;
; Used by the routine at #R$DFCE.
c$DFEA CP B          ;
 $DFEB JR NC,$DFF0   ;
 $DFED LD C,B        ;
 $DFEE LD B,A        ;
 $DFEF LD A,C        ;
*$DFF0 SUB B         ;
 $DFF1 RET           ;

; Routine at DFF2
;
; Used by the routine at #R$DF60.
c$DFF2 JR C,$DFF6    ;
 $DFF4 JR $DFF9      ;
*$DFF6 LD HL,$FFFF   ;
*$DFF9 LD A,H        ;
 $DFFA OR L          ;
 $DFFB JR Z,$E005    ;
 $DFFD CALL $9C86    ;
 $E000 LD L,H        ;
 $E001 LD H,$00      ;
 $E003 ADD HL,HL     ;
 $E004 ADD HL,HL     ;
*$E005 LD ($DEF6),HL ;
 $E008 RET           ;

; Routine at E009
;
; Used by the routines at #R$DFCE and #R$E08C.
c$E009 LD E,$00      ;
 $E00B LD B,$08      ;
 $E00D LD HL,$0000   ;
*$E010 SRL D         ;
 $E012 RR E          ;
 $E014 RL A          ;
 $E016 JR NC,$E019   ;
 $E018 ADD HL,DE     ;
*$E019 DJNZ $E010    ;
 $E01B RET           ;

; Routine at E01C
;
; Used by the routines at #R$D857, #R$DF03, #R$DF60 and #R$ED78.
c$E01C LD HL,$DEDB   ;
 $E01F LD ($DF01),HL ;
 $E022 LD B,$08      ;
*$E024 LD (HL),$00   ;
 $E026 INC HL        ;
 $E027 DJNZ $E024    ;
 $E029 LD HL,($DEC0) ;
 $E02C LD A,L        ;
 $E02D AND $40       ;
 $E02F AND A         ;
 $E030 PUSH AF       ;
 $E031 CALL $E03D    ;
 $E034 CALL $E03D    ;
 $E037 CALL $E03D    ;
 $E03A POP AF        ;
 $E03B JR Z,$E063    ;
*$E03D LD HL,($DEC4) ;
 $E040 LD A,H        ;
 $E041 AND $1F       ;
 $E043 AND A         ;
 $E044 JR Z,$E063    ;
 $E046 LD HL,$FDB3   ;
 $E049 ADD A,A       ;
 $E04A LD D,$00      ;
 $E04C LD E,A        ;
 $E04D ADD HL,DE     ;
 $E04E LD A,(HL)     ;
 $E04F INC HL        ;
 $E050 PUSH HL       ;
 $E051 LD HL,($DF01) ;
 $E054 LD (HL),A     ;
 $E055 INC HL        ;
 $E056 EX DE,HL      ;
 $E057 POP HL        ;
 $E058 LD A,(HL)     ;
 $E059 EX DE,HL      ;
 $E05A CP $3F        ;
 $E05C JR Z,$E060    ;
 $E05E LD (HL),A     ;
 $E05F INC HL        ;
*$E060 LD ($DF01),HL ;
; This entry point is used by the routine at #R$DFC4.
*$E063 LD HL,($DEC0) ;
 $E066 LD DE,($DEC2) ;
 $E06A ADD HL,DE     ;
 $E06B EX DE,HL      ;
 $E06C LD HL,($DEC2) ;
 $E06F LD ($DEC0),HL ;
 $E072 LD HL,($DEC4) ;
 $E075 LD ($DEC2),HL ;
 $E078 LD HL,($DEC2) ;
 $E07B ADD HL,DE     ;
 $E07C LD ($DEC4),HL ;
 $E07F RET           ;

; Routine at E080
;
; Used by the routines at #R$DF4C and #R$DF60.
c$E080 LD BC,$0008   ;
 $E083 LD HL,$DEDB   ;
 $E086 LD DE,$DEED   ;
 $E089 LDIR          ;
 $E08B RET           ;

; Routine at E08C
;
; Used by the routines at #R$DF4C and #R$DF60.
c$E08C LD HL,($DEC0) ;
 $E08F LD ($DEBA),HL ;
 $E092 LD A,H        ;
 $E093 LD ($D0BC),A  ;
 $E096 AND $07       ;
 $E098 LD ($DEF8),A  ;
 $E09B LD HL,($DEC2) ;
 $E09E LD ($DEBC),HL ;
 $E0A1 LD A,H        ;
 $E0A2 LD ($D0BB),A  ;
 $E0A5 LD A,L        ;
 $E0A6 SRL A         ;
 $E0A8 SRL A         ;
 $E0AA SRL A         ;
 $E0AC AND $07       ;
 $E0AE LD ($DEF9),A  ;
 $E0B1 SRL A         ;
 $E0B3 JR NZ,$E0BD   ;
 $E0B5 LD A,($DEF8)  ;
 $E0B8 OR $02        ;
 $E0BA LD ($DEF8),A  ;
*$E0BD LD A,($DEF8)  ;
 $E0C0 XOR $07       ;
 $E0C2 AND A         ;
 $E0C3 LD B,A        ;
 $E0C4 LD A,H        ;
 $E0C5 AND $03       ;
 $E0C7 ADD A,B       ;
 $E0C8 LD B,A        ;
 $E0C9 LD A,($DEF9)  ;
 $E0CC SRL A         ;
 $E0CE ADC A,B       ;
 $E0CF LD ($DEFA),A  ;
 $E0D2 ADD A,A       ;
 $E0D3 ADD A,A       ;
 $E0D4 LD B,A        ;
 $E0D5 LD A,($DEF9)  ;
 $E0D8 LD C,A        ;
 $E0D9 LD A,($DEF8)  ;
 $E0DC ADC A,B       ;
 $E0DD ADC A,C       ;
 $E0DE ADC A,$01     ;
 $E0E0 LD ($DEFB),A  ;
 $E0E3 LD A,($DEF8)  ;
 $E0E6 XOR $07       ;
 $E0E8 ADC A,$03     ;
 $E0EA LD D,A        ;
 $E0EB LD A,($DEF9)  ;
 $E0EE ADC A,$04     ;
 $E0F0 CALL $E009    ;
 $E0F3 LD A,($DEFB)  ;
 $E0F6 LD D,L        ;
 $E0F7 CALL $E009    ;
 $E0FA ADD HL,HL     ;
 $E0FB ADD HL,HL     ;
 $E0FC ADD HL,HL     ;
 $E0FD LD ($DEFC),HL ;
 $E100 LD HL,($DEC4) ;
 $E103 LD ($DEBE),HL ;
 $E106 RET           ;

; Routine at E107
;
; Used by the routines at #R$E3E9 and #R$EDDF.
c$E107 LD HL,($DEF6) ;
 $E10A LD A,H        ;
 $E10B OR L          ;
 $E10C JR Z,$E123    ;
 $E10E LD A,$BF      ;
 $E110 CALL $E297    ;
 $E113 LD A,$04      ;
 $E115 LD ($D0CE),A  ;
 $E118 LD HL,($DEF6) ;
 $E11B SCF           ;
 $E11C CALL $D2E5    ;
 $E11F CALL $D421    ;
 $E122 JP $A9C3      ; Jump to data!

; Routine at E125
c$E125 JP PO,$9021   ;
 $E128 RET NC        ;
 $E129 LD DE,$DEC0   ;
 $E12C JR $E13C      ;

; Routine at E12E
;
; Used by the routines at #R$DF03 and #R$DF60.
c$E12E LD HL,$DEC0   ;
 $E131 LD DE,$DEC6   ;
 $E134 JR $E13C      ;

; Routine at E136
;
; Used by the routines at #R$DF4C and #R$DF60.
c$E136 LD HL,$DEC6   ;
 $E139 LD DE,$DEC0   ;
; This entry point is used by the routines at #R$E125 and #R$E12E.
*$E13C LD BC,$0006   ;
 $E13F LDIR          ;
 $E141 RET           ;

; Routine at E142
;
; Used by the routine at #R$DC8E.
c$E142 LD A,($7105)  ;
 $E145 LD ($D06A),A  ;

; Routine at E148
;
; Used by the routine at #R$D298.
c$E148 LD HL,$D09E   ;
 $E14B LD DE,$E1BD   ;
 $E14E EXX           ;
 $E14F LD HL,$701B   ;
 $E152 LD B,$11      ;
*$E154 PUSH BC       ;
 $E155 LD E,(HL)     ;
 $E156 INC HL        ;
 $E157 LD A,(HL)     ;
 $E158 LD D,A        ;
 $E159 PUSH DE       ;
 $E15A AND $1F       ;
 $E15C JR Z,$E167    ;
 $E15E LD B,A        ;
 $E15F LD A,($DEF8)  ;
 $E162 LD C,A        ;
 $E163 XOR A         ;
*$E164 ADD A,C       ;
 $E165 DJNZ $E164    ;
*$E167 LD E,A        ;
 $E168 INC HL        ;
 $E169 LD B,(HL)     ;
 $E16A INC HL        ;
 $E16B LD C,(HL)     ;
 $E16C INC HL        ;
 $E16D LD A,($D06A)  ;
 $E170 AND C         ;
 $E171 ADD A,B       ;
 $E172 LD B,A        ;
 $E173 LD A,E        ;
 $E174 BIT 7,D       ;
 $E176 JR NZ,$E17B   ;
 $E178 INC A         ;
 $E179 NEG           ;
*$E17B ADD A,B       ;
 $E17C BIT 7,A       ;
 $E17E JR Z,$E181    ;
 $E180 XOR A         ;
*$E181 AND $3F       ;
 $E183 LD B,E        ;
 $E184 POP DE        ;
 $E185 PUSH AF       ;
 $E186 LD A,($D06A)  ;
 $E189 AND C         ;
 $E18A ADD A,E       ;
 $E18B LD E,$00      ;
 $E18D RL E          ;
 $E18F LD C,A        ;
 $E190 LD A,B        ;
 $E191 BIT 7,D       ;
 $E193 JR Z,$E19A    ;
 $E195 LD D,A        ;
 $E196 LD A,C        ;
 $E197 SUB D         ;
 $E198 JR $E19E      ;
*$E19A ADD A,C       ;
 $E19B JR NC,$E19E   ;
 $E19D INC E         ;
*$E19E LD B,E        ;
 $E19F ADD A,A       ;
 $E1A0 RL B          ;
 $E1A2 ADD A,A       ;
 $E1A3 RL B          ;
 $E1A5 LD C,A        ;
 $E1A6 PUSH BC       ;
 $E1A7 EXX           ;
 $E1A8 POP BC        ;
 $E1A9 LD A,C        ;
 $E1AA LD (DE),A     ;
 $E1AB INC DE        ;
 $E1AC LD A,B        ;
 $E1AD LD (DE),A     ;
 $E1AE INC DE        ;
 $E1AF POP AF        ;
 $E1B0 LD (HL),A     ;
 $E1B1 INC HL        ;
 $E1B2 EXX           ;
 $E1B3 POP BC        ;
 $E1B4 DJNZ $E154    ;
 $E1B6 LD HL,$D0AE   ;
 $E1B9 LD (HL),B     ;
 $E1BA RET           ;

; Data block at E1BB
@label=data_at_1EBB
b$E1BB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $E1C3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $E1CB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $E1D3 DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $E1DB DEFB $00,$00,$00,$00,$00,$00,$00,$00
 $E1E3 DEFB $00,$00,$00,$00,$00

; Routine at E1E8
;
; Used by the routines at #R$D0F6, #R$DA5A, #R$DAD7, #R$DBA2, #R$E398, #R$E3E9
; and #R$E832.
c$E1E8 LD A,($FC0E)  ;
 $E1EB BIT 7,A       ;
 $E1ED RET Z         ;
 $E1EE LD HL,$0080   ;
 $E1F1 LD DE,$0060   ;
 $E1F4 JP $03B5      ;

; Routine at E1F7
;
; Used by the routines at #R$D0F6, #R$D90A, #R$D946, #R$E3E9, #R$E6AE, #R$E776
; and #R$E973.
c$E1F7 CALL $E35A    ;
 $E1FA CALL $E205    ;
*$E1FD LD A,($FC0D)  ;
 $E200 CP $FF        ;
 $E202 JR Z,$E1FD    ;
 $E204 RET           ;

; Routine at E205
;
; Used by the routines at #R$D0F6, #R$D90A, #R$DBA2, #R$E1F7, #R$E398 and
; #R$E3E9.
c$E205 DI            ;
 $E206 LD HL,$FC08   ;
 $E209 LD B,$04      ;
*$E20B LD (HL),$00   ;
 $E20D INC HL        ;
 $E20E DJNZ $E20B    ;
 $E210 EI            ;
 $E211 RET           ;

; Routine at E212
;
; Used by the routines at #R$E707 and #R$EF48.
c$E212 LD A,($E1DF)  ;
 $E215 ADD A,$D0     ;
 $E217 CALL $D425    ;
 $E21A CALL $E2BC    ;
 $E21D DEC C         ;
 $E21E CALL $E31E    ;
 $E221 CALL $E2BC    ;
 $E224 RRCA          ;
 $E225 LD HL,($E1E2) ;
 $E228 INC HL        ;
 $E229 INC HL        ;
 $E22A LD ($E1E2),HL ;
 $E22D LD E,(HL)     ;
 $E22E INC HL        ;
 $E22F LD D,(HL)     ;
 $E230 EX DE,HL      ;
 $E231 SCF           ;
 $E232 LD A,$04      ;
 $E234 LD ($D0CE),A  ;
 $E237 CALL $D2E5    ;
 $E23A CALL $E2BC    ;
 $E23D RLA           ;
 $E23E LD HL,($E1E4) ;
 $E241 INC HL        ;
 $E242 LD A,(HL)     ;
 $E243 LD ($E1E4),HL ;
 $E246 AND A         ;
 $E247 JR NZ,$E254   ;
 $E249 CALL $D421    ;
 $E24C JR NZ,$E28C   ;
 $E24E DEC L         ;
 $E24F CALL $E2A6    ;
 $E252 SCF           ;
 $E253 RET           ;
*$E254 LD A,$02      ;
 $E256 LD ($D0CE),A  ;
 $E259 LD HL,($E1E4) ;
 $E25C LD A,(HL)     ;
 $E25D CALL $D2E1    ;
 $E260 CALL $E31E    ;
 $E263 CALL $E2A9    ;
 $E266 AND A         ;
 $E267 RET           ;

; Routine at E268
;
; Used by the routines at #R$E8EA and #R$F0A1.
c$E268 LD HL,($E1E0) ;
 $E26B INC HL        ;
 $E26C LD ($E1E0),HL ;
 $E26F LD A,(HL)     ;
 $E270 AND A         ;
 $E271 JR Z,$E290    ;
 $E273 LD A,($E1DF)  ;
 $E276 ADD A,$D0     ;
 $E278 CALL $D425    ;
 $E27B CALL $E2BC    ;
 $E27E DEC C         ;
 $E27F LD A,$03      ;
 $E281 LD ($D0CE),A  ;
 $E284 LD HL,($E1E0) ;
 $E287 LD A,(HL)     ;
 $E288 CALL $D2E1    ;
 $E28B CALL $E31E    ;
 $E28E AND A         ;
 $E28F RET           ;
*$E290 SCF           ;
 $E291 RET           ;

; Routine at E292
;
; Used by the routines at #R$EDDF, #R$EEA8 and #R$EF87.
c$E292 CALL $D45F    ;
 $E295 JR $E29A      ;

; Routine at E297
;
; Used by the routines at #R$D822, #R$D837, #R$E107 and #R$EDDF.
c$E297 CALL $D425    ;
; This entry point is used by the routine at #R$E292.
*$E29A LD A,$3A      ;
 $E29C JR $E2A3      ;

; Routine at E29E
;
; Used by the routines at #R$E973, #R$EB47, #R$EECE and #R$F07A.
c$E29E CALL $D425    ;
 $E2A1 LD A,$20      ;
; This entry point is used by the routine at #R$E297.
*$E2A3 JP $D425      ;

; Routine at E2A6
;
; Used by the routines at #R$D837, #R$DA7A, #R$DAEF, #R$E212, #R$E707, #R$E87E,
; #R$E973, #R$EE9D, #R$EF48, #R$EF87 and #R$F0A1.
c$E2A6 CALL $D425    ;
; This entry point is used by the routines at #R$D6B9, #R$DA5A, #R$E212,
; #R$E2BC, #R$E3E9, #R$E8EA, #R$E973, #R$EDDF, #R$EEA2, #R$F068 and #R$F0A1.
*$E2A9 LD A,$01      ;
 $E2AB LD ($D0D2),A  ; Set something to 1
 $E2AE CALL $E2B7    ; Set x to zero
; This entry point is used by the routine at #R$D499.
@label=increment_y
*$E2B1 LD A,($D046)  ; Get y
 $E2B4 INC A         ; Add one
 $E2B5 JR $E2C8      ;

; Routine at E2B7
;
; Used by the routines at #R$E2A6, #R$E2C8 and #R$E36B.
@label=set_x_to_zero
c$E2B7 XOR A         ; {Set x to 0
 $E2B8 LD ($D045),A  ; }
 $E2BB RET           ;

; Routine at E2BC
;
; Used by the routines at #R$D87B, #R$E212, #R$E268, #R$E707, #R$E7CF, #R$E818,
; #R$E973, #R$EB63, #R$EF87 and #R$F0A1.
c$E2BC POP HL        ;
 $E2BD LD A,(HL)     ;
 $E2BE INC HL        ;
 $E2BF PUSH HL       ;
; This entry point is used by the routines at #R$E973 and #R$F068.
*$E2C0 LD ($D045),A  ; Get x
 $E2C3 CP $20        ; End of row?
 $E2C5 RET C         ; Return if not
 $E2C6 JR $E2A9      ;

; Routine at E2C8
;
; Used by the routines at #R$D8F3, #R$E2A6, #R$E36B, #R$E973, #R$EDDF, #R$EF87
; and #R$F0A1.
@label=save_and_wrap_y
c$E2C8 LD ($D046),A  ; Save y
 $E2CB CP $18        ; Last row?
 $E2CD RET C         ; Return of not
 $E2CE LD A,$01      ; {Set y to 1
 $E2D0 LD ($D046),A  ; }
 $E2D3 JR $E2B7      ;

; Routine at E2D5
;
; Used by the routines at #R$E3E9 and #R$E76E.
c$E2D5 LD A,($D046)  ;
 $E2D8 LD B,$A1      ;
 $E2DA CP $15        ;
 $E2DC JR Z,$E2E0    ;
 $E2DE LD B,$C1      ;
*$E2E0 LD A,($D045)  ;
 $E2E3 AND A         ;
 $E2E4 RET Z         ;
 $E2E5 DEC A         ;
 $E2E6 LD ($D045),A  ;
 $E2E9 ADD A,B       ;
 $E2EA LD ($E2EE),A  ;
 $E2ED LD HL,$5000   ;
 $E2F0 XOR A         ;
 $E2F1 LD B,$08      ;
*$E2F3 LD (HL),A     ;
 $E2F4 INC H         ;
 $E2F5 DJNZ $E2F3    ;
 $E2F7 RET           ;

; Routine at E2F8
;
; Used by the routines at #R$E306, #R$E3E9 and #R$EDDF.
c$E2F8 PUSH AF       ;
 $E2F9 CALL $D421    ;
 $E2FC LD B,$F1      ;
 $E2FE CALL $D425    ;
 $E301 LD A,$08      ;
 $E303 JP $D425      ;

; Routine at E306
;
; Used by the routines at #R$E8EA, #R$EB63, #R$EDDF, #R$EF48 and #R$F0A1.
c$E306 CALL $E2F8    ;
 $E309 CALL $7121    ;
 $E30C LD A,$77      ;
 $E30E JP $D425      ;

; Routine at E311
;
; Used by the routines at #R$D872, #R$D8B4, #R$E398 and #R$ED78.
c$E311 LD A,(HL)     ;
 $E312 CP $00        ;
 $E314 SCF           ;
 $E315 RET Z         ;
 $E316 INC HL        ;
 $E317 PUSH HL       ;
 $E318 CALL $D425    ;
 $E31B POP HL        ;
 $E31C JR $E311      ;

; Routine at E31E
;
; Used by the routines at #R$E212, #R$E268, #R$E87E and #R$EDDF.
c$E31E LD A,$00      ;
 $E320 LD ($D0D2),A  ;
 $E323 LD A,($E1DF)  ;
 $E326 CP $0D        ;
 $E328 JR C,$E336    ;
 $E32A CP $0F        ;
 $E32C JR C,$E33A    ;
 $E32E JR Z,$E33F    ;
 $E330 CP $11        ;
 $E332 JR C,$E336    ;
 $E334 JR $E343      ;
*$E336 LD A,$54      ;
 $E338 JR $E349      ;
*$E33A LD A,$4B      ;
 $E33C CALL $D425    ;
*$E33F LD A,$47      ;
 $E341 JR $E349      ;
*$E343 CALL $D421    ;
 $E346 LD C,E        ;
 $E347 LD A,$4D      ;
*$E349 JP $D425      ;

; Routine at E34C
;
; Used by the routines at #R$E7DB and #R$E935.
c$E34C LD A,($E1DF)  ;
 $E34F CP $0D        ;
 $E351 RET C         ;
 $E352 CP $10        ;
 $E354 JR NZ,$E358   ;
 $E356 SCF           ;
 $E357 RET           ;
*$E358 AND A         ;
 $E359 RET           ;

; Routine at E35A
;
; Used by the routines at #R$E1F7 and #R$E3E9.
c$E35A LD B,$14      ;
 $E35C JR $E360      ;

; Routine at E35E
;
; Used by the routines at #R$D0F6, #R$D81F, #R$DBA2, #R$E6AE, #R$E832 and
; #R$E8EA.
c$E35E LD B,$24      ;
; This entry point is used by the routine at #R$E35A.
*$E360 HALT          ;
 $E361 DJNZ $E360    ;
 $E363 RET           ;

; Routine at E364
;
; Used by the routines at #R$E707 and #R$E8EA.
c$E364 LD HL,($D045) ;
 $E367 LD ($E1E6),HL ;
 $E36A RET           ;

; Routine at E36B
;
; Used by the routines at #R$DA25, #R$E398, #R$E3CC, #R$E3E9, #R$E87E and
; #R$E973.
c$E36B LD A,$15      ;
 $E36D CALL $E2C8    ;
 $E370 CALL $E2B7    ;
 $E373 XOR A         ;
 $E374 LD HL,$50A1   ;
 $E377 CALL $E37D    ;
; This entry point is used by the routine at #R$DA5A.
*$E37A LD HL,$50C1   ;
*$E37D LD B,$08      ;
*$E37F PUSH BC       ;
 $E380 LD B,$1E      ;
 $E382 PUSH HL       ;
*$E383 LD (HL),A     ;
 $E384 INC HL        ;
 $E385 DJNZ $E383    ;
 $E387 POP HL        ;
 $E388 INC H         ;
 $E389 POP BC        ;
 $E38A DJNZ $E37F    ;
 $E38C RET           ;

; Routine at E38D
;
; Used by the routines at #R$E707 and #R$E8EA.
c$E38D LD HL,($E1E6) ;
 $E390 LD ($D045),HL ;
 $E393 RET           ;

; Data block at E394
b$E394 DEFB $00,$00,$00,$00

; Routine at E398
;
; Used by the routine at #R$D018.
c$E398 LD A,$0E      ;
 $E39A LD B,$08      ;
 $E39C LD HL,$DED0   ;
 $E39F CALL $E3CC    ;
 $E3A2 LD A,($E394)  ;
 $E3A5 AND A         ;
 $E3A6 JP Z,$E36B    ;
 $E3A9 CALL $DF24    ;
 $E3AC JR NC,$E3C2   ;
 $E3AE LD HL,$DED0   ;
 $E3B1 CALL $E311    ;
 $E3B4 CALL $D421    ;
 $E3B7 EX AF,AF'     ;
 $E3B8 CALL $D421    ;
 $E3BB POP HL        ;
 $E3BC CALL $E1E8    ;
 $E3BF JP $E205      ;
*$E3C2 CALL $D421    ;
 $E3C5 EX AF,AF'     ;
 $E3C6 JP $E45E      ;

; Data block at E3C9
b$E3C9 DEFB $00,$00,$00

; Routine at E3CC
;
; Used by the routines at #R$DA53 and #R$E398.
c$E3CC LD ($E3C9),A  ;
 $E3CF LD A,B        ;
 $E3D0 LD ($E413),A  ;
 $E3D3 LD ($E3CA),HL ;
 $E3D6 LD HL,($E3CA) ;
 $E3D9 LD ($E395),HL ;
 $E3DC XOR A         ;
 $E3DD LD ($E394),A  ;
 $E3E0 CALL $E36B    ;
 $E3E3 CALL $D421    ;
 $E3E6 LD B,$3A      ;
 $E3E8 RET           ;

; Routine at E3E9
@label_unused_E3E9
c$E3E9 EX (SP),HL    ;
 $E3EA CALL $D45F    ;
*$E3ED CALL $E1F7    ;
 $E3F0 LD ($E397),A  ;
 $E3F3 CP $0D        ;
 $E3F5 JR Z,$E446    ;
 $E3F7 CP $FE        ;
 $E3F9 JR Z,$E428    ;
 $E3FB LD A,($E397)  ;
 $E3FE CP $30        ;
 $E400 JR C,$E3ED    ;
 $E402 CP $5B        ;
 $E404 JR NC,$E3ED   ;
 $E406 CP $3A        ;
 $E408 JR C,$E40E    ;
 $E40A CP $40        ;
 $E40C JR C,$E3ED    ;
*$E40E LD D,A        ;
 $E40F LD A,($E394)  ;
 $E412 CP $0A        ;
 $E414 JR NC,$E446   ;
 $E416 INC A         ;
 $E417 LD ($E394),A  ;
 $E41A LD A,D        ;
 $E41B LD HL,($E395) ;
 $E41E LD (HL),A     ;
 $E41F INC HL        ;
 $E420 LD ($E395),HL ;
 $E423 CALL $D425    ;
 $E426 JR $E3ED      ;
*$E428 LD A,($E394)  ;
 $E42B AND A         ;
 $E42C JR Z,$E3ED    ;
 $E42E DEC A         ;
 $E42F LD ($E394),A  ;
 $E432 LD HL,($E395) ;
 $E435 DEC HL        ;
 $E436 LD ($E395),HL ;
 $E439 CALL $E2D5    ;
 $E43C LD B,$06      ;
*$E43E HALT          ;
 $E43F DJNZ $E43E    ;
 $E441 CALL $E205    ;
 $E444 JR $E3ED      ;
*$E446 LD HL,($E395) ;
 $E449 LD (HL),$00   ;
 $E44B CALL $E2A9    ;
 $E44E CALL $E35A    ;
*$E451 LD A,($FC0D)  ;
 $E454 CP $0D        ;
 $E456 JR Z,$E451    ;
 $E458 JP $E205      ;
; This entry point is used by the routine at #R$D018.
*$E45B CALL $DF60    ;
; This entry point is used by the routine at #R$E398.
*$E45E CALL $E36B    ;
 $E461 LD A,$03      ;
 $E463 CALL $E2F8    ;
 $E466 CALL $E2A9    ;
 $E469 CALL $E107    ;
 $E46C JP $E1E8      ;

; Routine at E46F
;
; Used by the routines at #R$DF4C, #R$DF60, #R$E4D4, #R$EB7C and #R$EC58.
c$E46F LD A,($E52B)  ;
 $E472 CP $0A        ;
 $E474 JR Z,$E4C1    ;
 $E476 LD A,($D099)  ;
 $E479 LD B,A        ;
 $E47A LD A,($D0BB)  ;
 $E47D SUB B         ;
 $E47E JR C,$E48B    ;
 $E480 ADD A,A       ;
 $E481 RET C         ;
 $E482 ADD A,A       ;
 $E483 RET C         ;
 $E484 LD B,A        ;
 $E485 LD A,$61      ;
 $E487 ADD A,B       ;
 $E488 RET C         ;
 $E489 JR $E496      ;
*$E48B NEG           ;
 $E48D ADD A,A       ;
 $E48E RET C         ;
 $E48F ADD A,A       ;
 $E490 RET C         ;
 $E491 LD B,A        ;
 $E492 LD A,$61      ;
 $E494 SUB B         ;
 $E495 RET C         ;
*$E496 LD ($D051),A  ;
 $E499 LD A,($D097)  ;
 $E49C LD B,A        ;
 $E49D LD A,($D0BC)  ;
 $E4A0 SUB B         ;
 $E4A1 JR C,$E4AC    ;
 $E4A3 ADD A,A       ;
 $E4A4 RET C         ;
 $E4A5 LD B,A        ;
 $E4A6 LD A,$60      ;
 $E4A8 ADD A,B       ;
 $E4A9 RET C         ;
 $E4AA JR $E4B6      ;
*$E4AC NEG           ;
 $E4AE SLA A         ;
 $E4B0 RET C         ;
 $E4B1 LD B,A        ;
 $E4B2 LD A,$60      ;
 $E4B4 SUB B         ;
 $E4B5 RET C         ;
*$E4B6 CP $19        ;
 $E4B8 RET C         ;
 $E4B9 CP $A7        ;
 $E4BB RET NC        ;
 $E4BC LD ($D052),A  ;
 $E4BF JR $E4D1      ;
*$E4C1 LD A,($D0BB)  ;
 $E4C4 LD ($D051),A  ;
 $E4C7 LD A,($D0BC)  ;
 $E4CA SRL A         ;
 $E4CC ADD A,$18     ;
 $E4CE LD ($D052),A  ;
*$E4D1 JP $E52E      ;

; Routine at E4D4
;
; Used by the routine at #R$D018.
c$E4D4 CALL $E46F    ;
 $E4D7 LD A,($D0BC)  ;
 $E4DA DEC A         ;
 $E4DB DEC A         ;
 $E4DC CP $FE        ;
 $E4DE JR C,$E4E1    ;
 $E4E0 XOR A         ;
*$E4E1 LD ($D0BC),A  ;
 $E4E4 JR $E506      ;
; This entry point is used by the routine at #R$D018.
*$E4E6 CALL $E46F    ;
 $E4E9 LD A,($D0BC)  ;
 $E4EC INC A         ;
 $E4ED INC A         ;
 $E4EE CP $02        ;
 $E4F0 JR NC,$E4F4   ;
 $E4F2 LD A,$FF      ;
*$E4F4 LD ($D0BC),A  ;
 $E4F7 JR $E506      ;
; This entry point is used by the routine at #R$D018.
*$E4F9 CALL $E46F    ;
 $E4FC LD A,($D0BB)  ;
 $E4FF DEC A         ;
 $E500 JR NZ,$E503   ;
 $E502 INC A         ;
*$E503 LD ($D0BB),A  ;
*$E506 JP $E46F      ;
; This entry point is used by the routine at #R$D018.
*$E509 CALL $E46F    ;
 $E50C LD A,($D0BB)  ;
 $E50F INC A         ;
 $E510 CP $FF        ;
 $E512 JR NZ,$E515   ;
 $E514 DEC A         ;
*$E515 LD ($D0BB),A  ;
 $E518 JR $E506      ;
; This entry point is used by the routine at #R$D018.
*$E51A CALL $E46F    ;
 $E51D LD A,($D099)  ;
 $E520 LD ($D0BB),A  ;
 $E523 LD A,($D097)  ;
 $E526 LD ($D0BC),A  ;
 $E529 JR $E506      ;

; Data block at E52B
b$E52B DEFB $00,$00,$00

; Routine at E52E
;
; Used by the routines at #R$E46F, #R$EB7C and #R$EC58.
c$E52E LD A,($E52B)  ;
 $E531 SRL A         ;
 $E533 LD B,A        ;
 $E534 LD A,($D051)  ;
 $E537 SUB B         ;
 $E538 JR C,$E56F    ;
 $E53A JR Z,$E56F    ;
 $E53C LD D,A        ;
 $E53D LD A,($D052)  ;
 $E540 LD C,A        ;
 $E541 LD A,D        ;
 $E542 CALL $E621    ;
 $E545 LD A,($D051)  ;
 $E548 ADD A,B       ;
 $E549 JR C,$E594    ;
 $E54B AND $07       ;
 $E54D JR NZ,$E551   ;
 $E54F LD A,$08      ;
*$E551 LD E,A        ;
 $E552 LD A,($E52B)  ;
 $E555 SUB E         ;
 $E556 LD C,A        ;
 $E557 AND $07       ;
 $E559 JR NZ,$E561   ;
 $E55B LD D,$08      ;
 $E55D LD A,C        ;
 $E55E SUB D         ;
 $E55F JR $E563      ;
*$E561 LD D,A        ;
 $E562 LD A,C        ;
*$E563 AND $F8       ;
 $E565 JR Z,$E5B4    ;
 $E567 RRA           ;
 $E568 RRA           ;
 $E569 RRA           ;
 $E56A AND $1F       ;
 $E56C JP $E5CF      ;
*$E56F LD A,($D052)  ;
 $E572 LD C,A        ;
 $E573 XOR A         ;
 $E574 CALL $E621    ;
 $E577 LD A,($D051)  ;
 $E57A ADD A,B       ;
 $E57B LD C,A        ;
 $E57C AND $07       ;
 $E57E JR NZ,$E586   ;
 $E580 LD E,$08      ;
 $E582 LD A,C        ;
 $E583 SUB E         ;
 $E584 JR $E588      ;
*$E586 LD E,A        ;
 $E587 LD A,C        ;
*$E588 AND $F8       ;
 $E58A JR Z,$E5C0    ;
 $E58C RRA           ;
 $E58D RRA           ;
 $E58E RRA           ;
 $E58F AND $1F       ;
 $E591 JP $E5E4      ;
*$E594 LD A,($D051)  ;
 $E597 LD C,A        ;
 $E598 XOR A         ;
 $E599 SUB C         ;
 $E59A ADD A,B       ;
 $E59B LD C,A        ;
 $E59C AND $07       ;
 $E59E JR NZ,$E5A6   ;
 $E5A0 LD D,$08      ;
 $E5A2 LD A,C        ;
 $E5A3 SUB D         ;
 $E5A4 JR $E5A8      ;
*$E5A6 LD D,A        ;
 $E5A7 LD A,C        ;
*$E5A8 AND $F8       ;
 $E5AA JR Z,$E5C7    ;
 $E5AC RRA           ;
 $E5AD RRA           ;
 $E5AE RRA           ;
 $E5AF AND $1F       ;
 $E5B1 JP $E5F9      ;
*$E5B4 CALL $E611    ;
 $E5B7 CALL $E619    ;
 $E5BA LD A,(HL)     ;
 $E5BB XOR D         ;
 $E5BC LD (HL),A     ;
 $E5BD INC HL        ;
 $E5BE JR $E5E1      ;
*$E5C0 CALL $E611    ;
 $E5C3 RES 7,E       ;
 $E5C5 JR $E5E1      ;
*$E5C7 CALL $E619    ;
 $E5CA RES 0,D       ;
 $E5CC JP $E644      ;
*$E5CF LD B,A        ;
 $E5D0 CALL $E611    ;
 $E5D3 CALL $E619    ;
 $E5D6 LD A,(HL)     ;
 $E5D7 XOR D         ;
 $E5D8 LD (HL),A     ;
 $E5D9 INC HL        ;
*$E5DA LD A,(HL)     ;
 $E5DB XOR $FF       ;
 $E5DD LD (HL),A     ;
 $E5DE INC HL        ;
 $E5DF DJNZ $E5DA    ;
*$E5E1 JP $E63F      ;
*$E5E4 LD B,A        ;
 $E5E5 CALL $E611    ;
 $E5E8 LD A,(HL)     ;
 $E5E9 XOR $7F       ;
 $E5EB LD (HL),A     ;
 $E5EC INC HL        ;
 $E5ED DEC B         ;
 $E5EE JR Z,$E5E1    ;
*$E5F0 LD A,(HL)     ;
 $E5F1 XOR $FF       ;
 $E5F3 LD (HL),A     ;
 $E5F4 INC HL        ;
 $E5F5 DJNZ $E5F0    ;
 $E5F7 JR $E5E1      ;
*$E5F9 LD B,A        ;
 $E5FA CALL $E619    ;
 $E5FD LD A,(HL)     ;
 $E5FE XOR D         ;
 $E5FF LD (HL),A     ;
 $E600 INC HL        ;
 $E601 DEC B         ;
 $E602 JR Z,$E60B    ;
*$E604 LD A,(HL)     ;
 $E605 XOR $FF       ;
 $E607 LD (HL),A     ;
 $E608 INC HL        ;
 $E609 DJNZ $E604    ;
*$E60B LD A,(HL)     ;
 $E60C XOR $FE       ;
 $E60E LD (HL),A     ;
 $E60F JR $E647      ;

; Routine at E611
;
; Used by the routine at #R$E52E.
c$E611 XOR A         ;
*$E612 SCF           ;
 $E613 RRA           ;
 $E614 DEC E         ;
 $E615 JR NZ,$E612   ;
 $E617 LD E,A        ;
 $E618 RET           ;

; Routine at E619
;
; Used by the routine at #R$E52E.
c$E619 XOR A         ;
*$E61A SCF           ;
 $E61B RLA           ;
 $E61C DEC D         ;
 $E61D JR NZ,$E61A   ;
 $E61F LD D,A        ;
 $E620 RET           ;

; Routine at E621
;
; Used by the routines at #R$E52E and #R$E647.
c$E621 RRA           ;
 $E622 RRA           ;
 $E623 RRA           ;
 $E624 AND $1F       ;
 $E626 LD L,A        ;
 $E627 LD A,C        ;
 $E628 AND $38       ;
 $E62A ADD A,A       ;
 $E62B ADD A,A       ;
 $E62C OR L          ;
 $E62D LD L,A        ;
 $E62E LD A,C        ;
 $E62F AND $07       ;
 $E631 OR $40        ;
 $E633 LD H,A        ;
 $E634 LD A,C        ;
 $E635 AND $C0       ;
 $E637 RRA           ;
 $E638 RRA           ;
 $E639 RRA           ;
 $E63A AND $1F       ;
 $E63C OR H          ;
 $E63D LD H,A        ;
 $E63E RET           ;

; Routine at E63F
;
; Used by the routine at #R$E52E.
c$E63F LD A,(HL)     ;
 $E640 XOR E         ;
 $E641 LD (HL),A     ;
 $E642 JR $E647      ;

; Routine at E644
;
; Used by the routine at #R$E52E.
c$E644 LD A,(HL)     ;
 $E645 XOR D         ;
 $E646 LD (HL),A     ;

; Routine at E647
;
; Used by the routines at #R$E52E and #R$E63F.
c$E647 LD A,($E52B)  ;
 $E64A SRL A         ;
 $E64C LD B,A        ;
 $E64D LD A,($E52C)  ;
 $E650 LD C,A        ;
 $E651 LD A,($D052)  ;
 $E654 SUB B         ;
 $E655 JR C,$E674    ;
 $E657 CP C          ;
 $E658 JR C,$E674    ;
 $E65A LD C,A        ;
 $E65B LD A,($D051)  ;
 $E65E CALL $E621    ;
 $E661 LD A,($E52D)  ;
 $E664 LD C,A        ;
 $E665 LD A,($D052)  ;
 $E668 ADD A,B       ;
 $E669 SUB C         ;
 $E66A LD C,A        ;
 $E66B LD A,($E52B)  ;
 $E66E JR C,$E671    ;
 $E670 SUB C         ;
*$E671 LD B,A        ;
 $E672 JR $E683      ;
*$E674 LD D,A        ;
 $E675 LD A,C        ;
 $E676 SUB D         ;
 $E677 LD D,A        ;
 $E678 LD A,($E52B)  ;
 $E67B SUB D         ;
 $E67C LD B,A        ;
 $E67D LD A,($D051)  ;
 $E680 CALL $E621    ;
*$E683 LD A,($D051)  ;
 $E686 AND $07       ;
 $E688 INC A         ;
 $E689 LD C,A        ;
 $E68A XOR A         ;
 $E68B SCF           ;
 $E68C RRA           ;
 $E68D DEC C         ;
 $E68E JR Z,$E695    ;
*$E690 SRL A         ;
 $E692 DEC C         ;
 $E693 JR NZ,$E690   ;
*$E695 LD E,A        ;
*$E696 LD A,(HL)     ;
 $E697 XOR E         ;
 $E698 LD (HL),A     ;
 $E699 INC H         ;
 $E69A LD A,H        ;
 $E69B AND $07       ;
 $E69D CALL Z,$E6A3  ;
 $E6A0 DJNZ $E696    ;
 $E6A2 RET           ;

; Routine at E6A3
;
; Used by the routine at #R$E647.
c$E6A3 LD A,L        ;
 $E6A4 ADD A,$20     ;
 $E6A6 LD L,A        ;
 $E6A7 RET C         ;
 $E6A8 LD A,H        ;
 $E6A9 SUB $08       ;
 $E6AB LD H,A        ;
 $E6AC RET           ;

; Data block at E6AD
b$E6AD DEFB $00

; Routine at E6AE
;
; Used by the routine at #R$D000.
c$E6AE LD A,($D0B0)  ;
 $E6B1 BIT 5,A       ;
 $E6B3 JR NZ,$E6F2   ;
 $E6B5 LD A,($D081)  ;
 $E6B8 AND A         ;
 $E6B9 JR Z,$E707    ;
 $E6BB LD DE,$5B17   ;
 $E6BE LD HL,$0201   ;
 $E6C1 CALL $D162    ;
 $E6C4 LD A,$B6      ;
 $E6C6 LD ($D051),A  ;
 $E6C9 LD A,$76      ;
 $E6CB LD ($D052),A  ;
 $E6CE LD A,$3D      ;
 $E6D0 LD ($D053),A  ;
 $E6D3 CALL $7119    ;
 $E6D6 CALL $E1F7    ;
 $E6D9 CP $59        ;
 $E6DB JR NZ,$E6F2   ;
 $E6DD LD ($D084),A  ;
 $E6E0 XOR A         ;
 $E6E1 LD ($D07C),A  ;
 $E6E4 LD HL,$D06B   ;
 $E6E7 LD B,$11      ;
*$E6E9 LD (HL),A     ;
 $E6EA INC HL        ;
 $E6EB DJNZ $E6E9    ;
 $E6ED LD HL,$D0B0   ;
 $E6F0 SET 5,(HL)    ;
*$E6F2 CALL $E35E    ;
 $E6F5 JP $F0B8      ;

; Data block at E6F8
b$E6F8 DEFB $F1,$F0

; Routine at E6FA
;
; Used by the routines at #R$E707 and #R$EF48.
c$E6FA LD HL,$E1D2   ;
 $E6FD LD A,(HL)     ;
 $E6FE AND A         ;
 $E6FF RET NZ        ;
 $E700 LD (HL),$02   ;
 $E702 DEC HL        ;
 $E703 LD A,$C0      ;
 $E705 LD (HL),A     ;
 $E706 RET           ;

; Routine at E707
;
; Used by the routine at #R$E6AE.
c$E707 CALL $E6FA    ;
 $E70A CALL $D61D    ;
 $E70D CALL $E2BC    ;
 $E710 DJNZ $E750    ;
 $E712 RST $38       ;
 $E713 CALL $E2A6    ;
 $E716 LD DE,$E6F8   ;
 $E719 CALL $D568    ;
 $E71C CALL $D54F    ;
 $E71F CALL $E962    ;
 $E722 LD HL,$D09D   ;
 $E725 LD ($E1E4),HL ;
*$E728 LD HL,($E1E0) ;
 $E72B INC HL        ;
 $E72C LD ($E1E0),HL ;
 $E72F CALL $E212    ;
 $E732 JR C,$E752    ;
 $E734 CALL $E364    ;
*$E737 CALL $E87E    ;
 $E73A LD HL,$E7DB   ;
 $E73D CALL $E776    ;
 $E740 JR NC,$E74C   ;
 $E742 CP $01        ;
 $E744 JR Z,$E737    ;
 $E746 CP $02        ;
 $E748 JR Z,$E74F    ;
 $E74A JR $E75B      ;
*$E74C CALL $E7CF    ;
*$E74F CALL $E38D    ;
*$E752 LD HL,$E1DF   ;
 $E755 INC (HL)      ;
 $E756 LD A,(HL)     ;
 $E757 CP $11        ;
 $E759 JR C,$E728    ;
*$E75B JP $F0B8      ;
 $E75E LD HL,$5800   ;
 $E761 CALL $E767    ;
 $E764 CALL $E767    ;
*$E767 LD B,$00      ;
*$E769 LD (HL),A     ;
 $E76A INC HL        ;
 $E76B DJNZ $E769    ;
 $E76D RET           ;

; Routine at E76E
;
; Used by the routine at #R$E776.
c$E76E CALL $E2D5    ;
 $E771 CALL $E85D    ;
 $E774 JR $E779      ;

; Routine at E776
;
; Used by the routines at #R$E707, #R$E8EA and #R$E973.
c$E776 LD ($E8AC),HL ;
; This entry point is used by the routine at #R$E76E.
*$E779 XOR A         ;
 $E77A LD ($E8AB),A  ;
*$E77D CALL $E1F7    ;
 $E780 CP $0D        ;
 $E782 JR Z,$E7CB    ;
 $E784 CP $31        ;
 $E786 JR C,$E77D    ;
 $E788 CP $FE        ;
 $E78A JR Z,$E77D    ;
 $E78C CP $3A        ;
 $E78E JR NC,$E7CD   ;
 $E790 LD B,A        ;
 $E791 SUB $30       ;
 $E793 LD ($E8AB),A  ;
 $E796 LD A,B        ;
 $E797 CALL $D425    ;
 $E79A LD HL,($E8AC) ;
 $E79D CALL $E7DA    ;
 $E7A0 JR C,$E7CD    ;
*$E7A2 CALL $E1F7    ;
 $E7A5 CP $0D        ;
 $E7A7 RET Z         ;
 $E7A8 CP $30        ;
 $E7AA JR C,$E7A2    ;
 $E7AC CP $FE        ;
 $E7AE JR Z,$E76E    ;
 $E7B0 CP $3A        ;
 $E7B2 JR NC,$E7CD   ;
 $E7B4 LD D,A        ;
 $E7B5 SUB $30       ;
 $E7B7 LD B,A        ;
 $E7B8 LD HL,$E8AB   ;
 $E7BB CALL $712A    ;
 $E7BE CALL $E85D    ;
 $E7C1 LD HL,($E8AC) ;
 $E7C4 CALL $E7DA    ;
 $E7C7 JR C,$E7CD    ;
 $E7C9 AND A         ;
 $E7CA RET           ;
*$E7CB LD A,$02      ;
*$E7CD SCF           ;
 $E7CE RET           ;

; Routine at E7CF
;
; Used by the routines at #R$E707, #R$E8EA and #R$E973.
c$E7CF CALL $E2BC    ;
 $E7D2 INC BC        ;
 $E7D3 CALL $D421    ;
 $E7D6 RLCA          ;
 $E7D7 JP $E832      ;

; Routine at E7DA
;
; Used by the routine at #R$E776.
c$E7DA JP (HL)       ;

; Routine at E7DB
c$E7DB CALL $E83C    ;
 $E7DE LD A,($E8AB)  ;
 $E7E1 LD B,A        ;
 $E7E2 LD HL,($E1E4) ;
 $E7E5 LD A,(HL)     ;
 $E7E6 SUB B         ;
 $E7E7 JR C,$E818    ;
 $E7E9 LD (HL),A     ;
*$E7EA LD HL,($E1E2) ;
 $E7ED LD E,(HL)     ;
 $E7EE INC HL        ;
 $E7EF LD D,(HL)     ;
 $E7F0 CALL $D3FD    ;
 $E7F3 JR C,$E81C    ;
 $E7F5 DJNZ $E7EA    ;
 $E7F7 CALL $E34C    ;
 $E7FA LD A,($E8AB)  ;
 $E7FD LD B,A        ;
 $E7FE JR NC,$E808   ;
 $E800 LD HL,$D07C   ;
 $E803 LD A,(HL)     ;
 $E804 SUB B         ;
 $E805 JR C,$E820    ;
 $E807 LD (HL),A     ;
*$E808 LD HL,($E1E0) ;
 $E80B LD A,(HL)     ;
 $E80C ADD A,B       ;
 $E80D JR C,$E820    ;
 $E80F LD (HL),A     ;
 $E810 LD A,($E1DF)  ;
 $E813 CALL $D1AD    ;
 $E816 AND A         ;
 $E817 RET           ;

; Routine at E818
;
; Used by the routines at #R$E7DB and #R$E935.
c$E818 LD A,$B0      ;
 $E81A JR $E822      ;
; This entry point is used by the routines at #R$E7DB and #R$E973.
*$E81C LD A,$C5      ;
 $E81E JR $E822      ;
; This entry point is used by the routine at #R$E7DB.
*$E820 LD A,$CE      ;
*$E822 PUSH AF       ;
 $E823 CALL $E2BC    ;
 $E826 INC BC        ;
 $E827 POP AF        ;
 $E828 CALL $D425    ;
 $E82B CALL $D421    ;
 $E82E CCF           ;
 $E82F CALL $E85D    ;

; Routine at E832
;
; Used by the routines at #R$D90A and #R$E7CF.
c$E832 CALL $E1E8    ;
 $E835 CALL $E35E    ;
 $E838 LD A,$01      ;
 $E83A SCF           ;
 $E83B RET           ;

; Routine at E83C
;
; Used by the routines at #R$E7DB, #R$E935 and #R$E973.
c$E83C LD HL,($D066) ;
 $E83F LD ($E8A6),HL ;
 $E842 LD HL,($D068) ;
 $E845 LD ($E8A4),HL ;
 $E848 LD HL,($E1E4) ;
 $E84B LD A,(HL)     ;
 $E84C LD ($E8A9),A  ;
 $E84F LD HL,($E1E0) ;
 $E852 LD A,(HL)     ;
 $E853 LD ($E8A8),A  ;
 $E856 LD A,($D07C)  ;
 $E859 LD ($E8AA),A  ;
 $E85C RET           ;

; Routine at E85D
;
; Used by the routines at #R$E76E, #R$E776, #R$E818 and #R$E973.
c$E85D LD HL,($E8A6) ;
 $E860 LD ($D066),HL ;
 $E863 LD HL,($E8A4) ;
 $E866 LD ($D068),HL ;
 $E869 LD HL,($E1E4) ;
 $E86C LD A,($E8A9)  ;
 $E86F LD (HL),A     ;
 $E870 LD HL,($E1E0) ;
 $E873 LD A,($E8A8)  ;
 $E876 LD (HL),A     ;
 $E877 LD A,($E8AA)  ;
 $E87A LD ($D07C),A  ;
 $E87D RET           ;

; Routine at E87E
;
; Used by the routines at #R$E707 and #R$E8EA.
c$E87E CALL $E36B    ;
 $E881 LD A,$01      ;
 $E883 LD ($D0D2),A  ;
 $E886 CALL $D421    ;
 $E889 CALL Z,$D03E  ;
 $E88C LD B,A        ;
 $E88D LD A,($E1DF)  ;
 $E890 ADD A,B       ;
 $E891 CALL $D425    ;
 $E894 CALL $D421    ;
 $E897 CPL           ;
 $E898 CALL $E31E    ;
 $E89B CALL $D421    ;
 $E89E JR NZ,$E8DE   ;
 $E8A0 CCF           ;
 $E8A1 JP $E2A6      ;

; Unused
s$E8A4 DEFS $0A

; Routine at E8AE
;
; Used by the routine at #R$D003.
c$E8AE LD A,($D081)  ;
 $E8B1 AND A         ;
 $E8B2 JR NZ,$E8EA   ;
 $E8B4 LD HL,$D0B0   ;
 $E8B7 LD A,(HL)     ;
 $E8B8 BIT 5,A       ;
 $E8BA JR Z,$E8EA    ;
 $E8BC RES 5,(HL)    ;
 $E8BE LD HL,$D062   ;
 $E8C1 INC (HL)      ;
 $E8C2 LD A,$64      ;
 $E8C4 LD ($D07A),A  ;
 $E8C7 LD A,$23      ;
 $E8C9 LD ($D07C),A  ;
 $E8CC LD DE,$0F0F   ;
 $E8CF LD HL,$0700   ;
 $E8D2 CALL $D148    ;
 $E8D5 JP $F0B8      ;

; Data block at E8D8
@label=byte_at_E8D8
b$E8D8 DEFB $F0

; Routine at E8D9
;
; Used by the routines at #R$E8EA and #R$E973.
c$E8D9 CALL $E8E5    ;
 $E8DC LD DE,$E8D8   ;
 $E8DF CALL $D568    ;
 $E8E2 JP $D54F      ;

; Routine at E8E5
;
; Used by the routines at #R$E8D9, #R$EDDF, #R$EF48, #R$EF87 and #R$F0A1.
c$E8E5 LD A,$96      ;
 $E8E7 JP $D45F      ;

; Routine at E8EA
;
; Used by the routine at #R$E8AE.
c$E8EA CALL $E8D9    ;
 $E8ED CALL $D421    ;
 $E8F0 CALL $CE3E    ;
 $E8F3 CALL $E306    ;
 $E8F6 CALL $E962    ;
*$E8F9 LD HL,($E1E2) ;
 $E8FC INC HL        ;
 $E8FD INC HL        ;
 $E8FE LD ($E1E2),HL ;
 $E901 CALL $E268    ;
 $E904 JR C,$E91D    ;
 $E906 CALL $E364    ;
*$E909 CALL $E87E    ;
 $E90C LD HL,$E935   ;
 $E90F CALL $E776    ;
 $E912 JR C,$E92C    ;
 $E914 CALL $E7CF    ;
*$E917 CALL $E38D    ;
 $E91A CALL $E2A9    ;
*$E91D LD HL,$E1DF   ;
 $E920 INC (HL)      ;
 $E921 LD A,(HL)     ;
 $E922 CP $11        ;
 $E924 JP C,$E8F9    ;
 $E927 CALL $E35E    ;
 $E92A JR $E932      ;
*$E92C DEC A         ;
 $E92D JR Z,$E909    ;
 $E92F DEC A         ;
 $E930 JR Z,$E917    ;
*$E932 JP $F0B8      ;

; Routine at E935
c$E935 CALL $E83C    ;
 $E938 LD A,($E8AB)  ;
 $E93B LD B,A        ;
 $E93C LD HL,($E1E0) ;
 $E93F LD A,(HL)     ;
 $E940 SUB B         ;
 $E941 JP C,$E818    ;
 $E944 LD (HL),A     ;
 $E945 PUSH BC       ;
 $E946 CALL $E34C    ;
 $E949 POP BC        ;
 $E94A JR NC,$E953   ;
 $E94C LD A,($D07C)  ;
 $E94F ADD A,B       ;
 $E950 LD ($D07C),A  ;
*$E953 PUSH BC       ;
 $E954 LD HL,($E1E2) ;
 $E957 LD E,(HL)     ;
 $E958 INC HL        ;
 $E959 LD D,(HL)     ;
 $E95A CALL $D3D3    ;
 $E95D POP BC        ;
 $E95E DJNZ $E953    ;
 $E960 AND A         ;
 $E961 RET           ;

; Routine at E962
;
; Used by the routines at #R$E707 and #R$E8EA.
c$E962 LD HL,$D06A   ;
 $E965 LD ($E1E0),HL ;
 $E968 LD HL,$E1BB   ;
 $E96B LD ($E1E2),HL ;
 $E96E XOR A         ;
 $E96F LD ($E1DF),A  ;
 $E972 RET           ;

; Routine at E973
;
; Used by the routine at #R$D006.
c$E973 CALL $E8D9    ;
 $E976 CALL $D421    ;
 $E979 LD B,$3E      ;
 $E97B RST $08       ;
 $E97C CALL $E29E    ;
 $E97F CALL $D421    ;
 $E982 CP C          ;
 $E983 CALL $D421    ;
 $E986 EX AF,AF'     ;
 $E987 CALL $EEA2    ;
 $E98A LD HL,$705F   ;
 $E98D LD ($EB60),HL ;
 $E990 LD A,($D09C)  ;
 $E993 ADD A,$03     ;
 $E995 CP $0C        ;
 $E997 JR C,$E99B    ;
 $E999 LD A,$0E      ;
*$E99B LD ($EB5E),A  ;
 $E99E XOR A         ;
*$E99F LD ($EB5F),A  ;
 $E9A2 LD A,$03      ;
 $E9A4 LD ($D0CE),A  ;
 $E9A7 LD A,($EB5F)  ;
 $E9AA INC A         ;
 $E9AB CALL $D2E1    ;
 $E9AE CALL $E2BC    ;
 $E9B1 INC B         ;
 $E9B2 LD B,$69      ;
 $E9B4 LD A,($EB5F)  ;
 $E9B7 ADD A,B       ;
 $E9B8 CALL $D425    ;
 $E9BB CALL $E2BC    ;
 $E9BE LD D,$2A      ;
 $E9C0 LD H,B        ;
 $E9C1 EX DE,HL      ;
 $E9C2 LD A,(HL)     ;
 $E9C3 INC HL        ;
 $E9C4 LD E,(HL)     ;
 $E9C5 INC HL        ;
 $E9C6 LD D,(HL)     ;
 $E9C7 INC HL        ;
 $E9C8 LD ($EB60),HL ;
 $E9CB LD H,$00      ;
 $E9CD LD L,A        ;
 $E9CE CALL $D334    ;
 $E9D1 CALL $E2A9    ;
 $E9D4 LD A,($EB5E)  ;
 $E9D7 LD B,A        ;
 $E9D8 LD A,($EB5F)  ;
 $E9DB INC A         ;
 $E9DC CP B          ;
 $E9DD JR NZ,$E99F   ;
*$E9DF CALL $E36B    ;
 $E9E2 CALL $D421    ;
 $E9E5 LD A,A        ;
 $E9E6 LD A,$3F      ;
 $E9E8 CALL $E29E    ;
 $E9EB CALL $E83C    ;
 $E9EE LD HL,$EB2D   ;
 $E9F1 CALL $E776    ;
 $E9F4 JR C,$EA05    ;
 $E9F6 CALL $E2A9    ;
 $E9F9 LD A,($E8AB)  ;
 $E9FC AND A         ;
 $E9FD JP Z,$EF87    ;
 $EA00 LD B,A        ;
 $EA01 LD A,($EB5E)  ;
 $EA04 CP B          ;
*$EA05 JP C,$EF87    ;
 $EA08 CALL $E83C    ;
 $EA0B LD A,($E8AB)  ;
 $EA0E CALL $EB2F    ;
 $EA11 LD D,$00      ;
 $EA13 LD E,(HL)     ;
 $EA14 PUSH HL       ;
 $EA15 CALL $D3EF    ;
 $EA18 POP HL        ;
 $EA19 JR C,$EA22    ;
 $EA1B INC HL        ;
 $EA1C LD E,(HL)     ;
 $EA1D INC HL        ;
 $EA1E LD D,(HL)     ;
 $EA1F CALL $D3FD    ;
*$EA22 JP C,$EB27    ;
 $EA25 LD A,($E8AB)  ;
 $EA28 CP $01        ;
 $EA2A JR NZ,$EA3B   ;
 $EA2C XOR A         ;
 $EA2D LD ($7060),A  ;
 $EA30 CALL $E7CF    ;
 $EA33 LD A,$46      ;
 $EA35 CALL $DEA2    ;
 $EA38 JP $E973      ;
*$EA3B CP $02        ;
 $EA3D JR NZ,$EA4C   ;
 $EA3F LD HL,$D083   ;
 $EA42 LD A,(HL)     ;
 $EA43 CP $04        ;
 $EA45 JP NC,$EB43   ;
 $EA48 INC A         ;
 $EA49 LD (HL),A     ;
 $EA4A JR $EA79      ;
*$EA4C CP $03        ;
 $EA4E JR NZ,$EA60   ;
 $EA50 LD A,($D084)  ;
 $EA53 AND A         ;
 $EA54 JP NZ,$EB47   ;
 $EA57 LD HL,$D07C   ;
 $EA5A LD A,(HL)     ;
 $EA5B ADD A,$0F     ;
 $EA5D LD (HL),A     ;
 $EA5E JR $EA74      ;
*$EA60 CP $04        ;
 $EA62 JR Z,$EA6C    ;
 $EA64 CP $07        ;
 $EA66 JR C,$EA7F    ;
 $EA68 CP $0D        ;
 $EA6A JR NC,$EA7F   ;
*$EA6C CALL $EB38    ;
 $EA6F LD A,(HL)     ;
 $EA70 AND A         ;
 $EA71 JP NZ,$EB47   ;
*$EA74 CALL $EB38    ;
 $EA77 LD (HL),$FF   ;
*$EA79 CALL $E7CF    ;
 $EA7C JP $E9DF      ;
*$EA7F LD B,$01      ;
 $EA81 CP $05        ;
 $EA83 JR Z,$EA90    ;
 $EA85 INC B         ;
 $EA86 CP $06        ;
 $EA88 JR Z,$EA90    ;
 $EA8A INC B         ;
 $EA8B CP $0D        ;
 $EA8D JR Z,$EA90    ;
 $EA8F INC B         ;
*$EA90 LD A,B        ;
 $EA91 LD ($EB62),A  ;
 $EA94 PUSH BC       ;
 $EA95 CALL $D61D    ;
 $EA98 CALL $D54F    ;
 $EA9B POP BC        ;
 $EA9C LD A,$04      ;
 $EA9E ADD A,B       ;
 $EA9F CALL $E2C0    ;
 $EAA2 LD A,$0E      ;
 $EAA4 CALL $E2C8    ;
 $EAA7 LD A,($E8AB)  ;
 $EAAA LD B,$68      ;
 $EAAC ADD A,B       ;
 $EAAD CALL $D425    ;
 $EAB0 LD A,$10      ;
 $EAB2 CALL $E2C8    ;
 $EAB5 XOR A         ;
*$EAB6 LD ($EB5F),A  ;
 $EAB9 CALL $E2BC    ;
 $EABC LD A,(BC)     ;
 $EABD LD A,($EB5F)  ;
 $EAC0 ADD A,$30     ;
 $EAC2 CALL $E29E    ;
 $EAC5 LD A,($EB5F)  ;
 $EAC8 ADD A,$60     ;
 $EACA CALL $E2A6    ;
 $EACD LD A,($EB5F)  ;
 $EAD0 INC A         ;
 $EAD1 CP $04        ;
 $EAD3 JR C,$EAB6    ;
 $EAD5 CALL $E36B    ;
 $EAD8 CALL $D421    ;
 $EADB XOR A         ;
 $EADC CALL $D421    ;
 $EADF CCF           ;
 $EAE0 CALL $E1F7    ;
 $EAE3 CP $30        ;
 $EAE5 JP C,$EB22    ;
 $EAE8 CP $34        ;
 $EAEA JP NC,$EB22   ;
 $EAED PUSH AF       ;
 $EAEE CALL $E2A6    ;
 $EAF1 POP AF        ;
 $EAF2 SUB $30       ;
 $EAF4 LD HL,$D07D   ;
 $EAF7 CALL $EB3E    ;
 $EAFA LD B,(HL)     ;
 $EAFB LD A,($EB62)  ;
 $EAFE LD (HL),A     ;
 $EAFF LD A,B        ;
 $EB00 AND A         ;
 $EB01 JR Z,$EB1C    ;
 $EB03 LD HL,$FD89   ;
 $EB06 CALL $EB3E    ;
 $EB09 LD A,(HL)     ;
 $EB0A CALL $EB2F    ;
 $EB0D LD D,$00      ;
 $EB0F LD E,(HL)     ;
 $EB10 PUSH HL       ;
 $EB11 CALL $D3E7    ;
 $EB14 POP HL        ;
 $EB15 INC HL        ;
 $EB16 LD E,(HL)     ;
 $EB17 INC HL        ;
 $EB18 LD D,(HL)     ;
 $EB19 CALL $D3D3    ;
*$EB1C CALL $E7CF    ;
 $EB1F JP $E973      ;
*$EB22 CALL $E85D    ;
 $EB25 JR $EB5B      ;
*$EB27 CALL $E81C    ;
 $EB2A JP $E9DF      ;

; Routine at EB2D
c$EB2D AND A         ;
 $EB2E RET           ;

; Routine at EB2F
;
; Used by the routine at #R$E973.
c$EB2F DEC A         ;
 $EB30 LD B,A        ;
 $EB31 ADD A,A       ;
 $EB32 ADD A,B       ;
 $EB33 LD HL,$705F   ;
 $EB36 JR $EB3E      ;

; Routine at EB38
;
; Used by the routine at #R$E973.
c$EB38 LD HL,$D081   ;
 $EB3B LD A,($E8AB)  ;

; Routine at EB3E
;
; Used by the routines at #R$D1E9, #R$D21F, #R$E973, #R$EB2F and #R$ED78.
c$EB3E LD D,$00      ;
 $EB40 LD E,A        ;
 $EB41 ADD HL,DE     ;
 $EB42 RET           ;

; Routine at EB43
;
; Used by the routine at #R$E973.
c$EB43 LD A,$7C      ;
 $EB45 JR $EB4E      ;

; Routine at EB47
;
; Used by the routine at #R$E973.
c$EB47 LD A,$68      ;
 $EB49 LD B,A        ;
 $EB4A LD A,($E8AB)  ;
 $EB4D ADD A,B       ;
; This entry point is used by the routine at #R$EB43.
*$EB4E CALL $E29E    ;
 $EB51 CALL $D421    ;
 $EB54 LD E,$CD      ;
 $EB56 LD ($CDE8),A  ;
 $EB59 LD E,L        ;
 $EB5A RET PE        ;
; This entry point is used by the routine at #R$E973.
*$EB5B JP $EF87      ;

; Data block at EB5E
@label=data_at_EB5E
b$EB5E DEFB $00,$00,$00,$00,$00

; Routine at EB63
;
; Used by the routines at #R$EB7C and #R$EC58.
c$EB63 PUSH AF       ;
 $EB64 CALL $E2BC    ;
 $EB67 LD B,$F1      ;
 $EB69 CALL $E306    ;
 $EB6C LD A,$17      ;
; This entry point is used by the routine at #R$D90A.
*$EB6E LD HL,$5800   ;
 $EB71 LD B,$60      ;
 $EB73 CALL $D563    ;
 $EB76 LD HL,$4740   ;
 $EB79 JP $D55F      ;

; Routine at EB7C
;
; Used by the routine at #R$D009.
c$EB7C CALL $D61D    ;
 $EB7F LD A,$18      ;
 $EB81 LD ($E52C),A  ;
 $EB84 LD A,$98      ;
 $EB86 LD ($E52D),A  ;
 $EB89 LD A,$10      ;
 $EB8B LD ($E52B),A  ;
 $EB8E LD A,($D099)  ;
 $EB91 LD ($D051),A  ;
 $EB94 LD A,($D097)  ;
 $EB97 SRL A         ;
 $EB99 ADD A,$18     ;
 $EB9B LD ($D052),A  ;
 $EB9E CALL $E52E    ;
 $EBA1 LD A,($D082)  ;
 $EBA4 SRL A         ;
 $EBA6 SRL A         ;
 $EBA8 LD ($D053),A  ;
 $EBAB CALL $7119    ;
 $EBAE LD HL,$4060   ;
 $EBB1 LD A,$03      ;
 $EBB3 CALL $EBEE    ;
 $EBB6 LD HL,$5100   ;
 $EBB9 LD A,$05      ;
 $EBBB CALL $EBEE    ;
 $EBBE CALL $D646    ;
 $EBC1 LD A,$0A      ;
 $EBC3 LD ($E52B),A  ;
 $EBC6 CALL $E46F    ;
 $EBC9 LD A,$C7      ;
 $EBCB CALL $EB63    ;
 $EBCE LD A,$17      ;
 $EBD0 LD HL,$5A60   ;
 $EBD3 LD B,$A0      ;
 $EBD5 CALL $D563    ;
 $EBD8 LD HL,$5060   ;
 $EBDB CALL $D55F    ;
 $EBDE CALL $E126    ;
 $EBE1 LD B,$00      ;
*$EBE3 PUSH BC       ;
 $EBE4 CALL $EC14    ;
 $EBE7 CALL $DFC4    ;
 $EBEA POP BC        ;
 $EBEB DJNZ $EBE3    ;
 $EBED RET           ;

; Routine at EBEE
;
; Used by the routine at #R$EB7C.
c$EBEE DI            ;
 $EBEF LD ($EC12),SP ;
 $EBF3 LD ($EC11),A  ;
 $EBF6 LD C,$08      ;
 $EBF8 LD DE,$0000   ;
*$EBFB LD SP,HL      ;
 $EBFC LD A,($EC11)  ;
*$EBFF LD B,$10      ;
*$EC01 PUSH DE       ;
 $EC02 DJNZ $EC01    ;
 $EC04 DEC A         ;
 $EC05 JR NZ,$EBFF   ;
 $EC07 INC H         ;
 $EC08 DEC C         ;
 $EC09 JR NZ,$EBFB   ;
 $EC0B LD SP,($EC12) ;
 $EC0F EI            ;
 $EC10 RET           ;

; Data block at EC11
@label=byte_at_EC11
b$EC11 DEFB $00

; Data block at EC12
@label=word_at_EC12
w$EC12 DEFW $0000

; Routine at EC14
;
; Used by the routine at #R$EB7C.
c$EC14 LD A,($DEC1)  ;
 $EC17 SRL A         ;
 $EC19 XOR $7F       ;
 $EC1B ADD A,$18     ;
 $EC1D LD B,A        ;
 $EC1E LD A,($DEC3)  ;
 $EC21 LD C,A        ;
 $EC22 CALL $22AA    ;
 $EC25 XOR $07       ;
 $EC27 SLA A         ;
 $EC29 SLA A         ;
 $EC2B SLA A         ;
 $EC2D OR $C0        ;
 $EC2F LD DE,$EC36   ;
 $EC32 LD (DE),A     ;
 $EC33 LD B,$00      ;
 $EC35 SET 1,B       ;
 $EC37 LD A,(HL)     ;
 $EC38 XOR B         ;
 $EC39 LD (HL),A     ;
 $EC3A RET           ;

; Routine at EC3B
;
; Used by the routine at #R$EC58.
c$EC3B XOR A         ;
 $EC3C RET           ;

; Routine at EC3D
;
; Used by the routine at #R$EC58.
c$EC3D LD A,$FF      ;
 $EC3F RET           ;

; Unused
@label=data_at_EC40
s$EC40 DEFS $18

; Routine at EC58
;
; Used by the routine at #R$D00C.
c$EC58 XOR A         ;
 $EC59 LD B,$18      ;
 $EC5B LD HL,$EC40   ;
*$EC5E LD (HL),A     ;
 $EC5F INC HL        ;
 $EC60 DJNZ $EC5E    ;
 $EC62 CALL $D61D    ;
 $EC65 LD A,$BE      ;
 $EC67 CALL $EB63    ;
 $EC6A CALL $D54F    ;
 $EC6D LD A,($D099)  ;
 $EC70 SUB $13       ;
 $EC72 CALL C,$EC3B  ;
 $EC75 LD ($ECDF),A  ;
 $EC78 LD A,($D099)  ;
 $EC7B ADD A,$13     ;
 $EC7D CALL C,$EC3D  ;
 $EC80 LD ($ECE3),A  ;
 $EC83 LD A,($D097)  ;
 $EC86 SUB $22       ;
 $EC88 CALL C,$EC3B  ;
 $EC8B LD ($ECEA),A  ;
 $EC8E LD A,($D097)  ;
 $EC91 ADD A,$22     ;
 $EC93 CALL C,$EC3D  ;
 $EC96 LD ($ECEE),A  ;
 $EC99 LD A,$18      ;
 $EC9B LD ($E52C),A  ;
 $EC9E LD A,$A7      ;
 $ECA0 LD ($E52D),A  ;
 $ECA3 LD A,$18      ;
 $ECA5 LD ($E52B),A  ;
 $ECA8 LD A,$61      ;
 $ECAA LD ($D051),A  ;
 $ECAD LD A,$60      ;
 $ECAF LD ($D052),A  ;
 $ECB2 CALL $E52E    ;
 $ECB5 LD HL,$ED27   ;
 $ECB8 CALL $ECD2    ;
 $ECBB LD HL,$ED78   ;
 $ECBE CALL $ECD2    ;
 $ECC1 LD A,($D082)  ;
 $ECC4 LD ($D053),A  ;
 $ECC7 CALL $7119    ;
 $ECCA LD A,$10      ;
 $ECCC LD ($E52B),A  ;
 $ECCF JP $E46F      ;

; Routine at ECD2
;
; Used by the routine at #R$EC58.
c$ECD2 LD ($ECF2),HL ;
 $ECD5 CALL $E126    ;
 $ECD8 LD B,$00      ;
*$ECDA PUSH BC       ;
 $ECDB LD A,($DEC3)  ;
 $ECDE CP $00        ;
 $ECE0 JR C,$ECF6    ;
 $ECE2 CP $00        ;
 $ECE4 JR NC,$ECF6   ;
 $ECE6 LD A,($DEC1)  ;
 $ECE9 CP $00        ;
 $ECEB JR C,$ECF6    ;
 $ECED CP $00        ;
 $ECEF JR NC,$ECF6   ;
*$ECF1 CALL $ECF1    ;
 $ECF4 JR $ECF9      ;
*$ECF6 CALL $DFC4    ;
*$ECF9 POP BC        ;
 $ECFA DJNZ $ECDA    ;
 $ECFC RET           ;

; Routine at ECFD
;
; Used by the routines at #R$ED27 and #R$ED78.
c$ECFD LD C,$61      ;
 $ECFF LD A,($D099)  ;
 $ED02 LD B,A        ;
 $ED03 LD A,($DEC3)  ;
 $ED06 SUB B         ;
 $ED07 SLA A         ;
 $ED09 SLA A         ;
 $ED0B ADD A,C       ;
 $ED0C SUB $03       ;
 $ED0E LD C,A        ;
 $ED0F LD D,$60      ;
 $ED11 LD A,($D097)  ;
 $ED14 LD B,A        ;
 $ED15 LD A,($DEC1)  ;
 $ED18 SUB B         ;
 $ED19 SLA A         ;
 $ED1B NEG           ;
 $ED1D ADD A,D       ;
 $ED1E SUB $0E       ;
 $ED20 LD B,A        ;
 $ED21 PUSH BC       ;
 $ED22 CALL $22AA    ;
 $ED25 POP BC        ;
 $ED26 RET           ;

; Routine at ED27
c$ED27 CALL $ECFD    ;
 $ED2A LD ($ED47),A  ;
 $ED2D LD DE,$6FFB   ;
 $ED30 LD A,($DEC5)  ;
 $ED33 AND $18       ;
 $ED35 ADD A,E       ;
 $ED36 LD E,A        ;
 $ED37 JR NC,$ED3A   ;
 $ED39 INC D         ;
*$ED3A LD B,$08      ;
*$ED3C PUSH BC       ;
 $ED3D LD A,($ED47)  ;
 $ED40 AND A         ;
 $ED41 LD A,(DE)     ;
 $ED42 LD C,$00      ;
 $ED44 JR Z,$ED4E    ;
 $ED46 LD B,$01      ;
*$ED48 SRL A         ;
 $ED4A RR C          ;
 $ED4C DJNZ $ED48    ;
*$ED4E LD B,A        ;
 $ED4F LD A,(HL)     ;
 $ED50 XOR B         ;
 $ED51 LD (HL),A     ;
 $ED52 INC HL        ;
 $ED53 LD A,(HL)     ;
 $ED54 XOR C         ;
 $ED55 LD (HL),A     ;
 $ED56 DEC HL        ;
 $ED57 LD A,H        ;
 $ED58 INC A         ;
 $ED59 AND $07       ;
 $ED5B JR NZ,$ED6D   ;
 $ED5D LD A,H        ;
 $ED5E AND $F8       ;
 $ED60 LD H,A        ;
 $ED61 LD A,$20      ;
 $ED63 ADD A,L       ;
 $ED64 LD L,A        ;
 $ED65 JR NC,$ED6E   ;
 $ED67 LD A,$08      ;
 $ED69 ADD A,H       ;
 $ED6A LD H,A        ;
 $ED6B JR $ED6E      ;
*$ED6D INC H         ;
*$ED6E INC DE        ;
 $ED6F POP BC        ;
 $ED70 DJNZ $ED3C    ;
 $ED72 JP $DFC4      ;

; Unused
s$ED75 DEFS $02

; Data block at ED77
@label=byte_at_ED77
b$ED77 DEFB $00

; Routine at ED78
c$ED78 CALL $ECFD    ;
 $ED7B PUSH BC       ;
 $ED7C CALL $E01C    ;
 $ED7F LD BC,$0009   ;
 $ED82 LD HL,$DEDB   ;
 $ED85 XOR A         ;
 $ED86 CPIR          ;
 $ED88 LD A,C        ;
 $ED89 XOR $07       ;
 $ED8B INC A         ;
 $ED8C LD ($ED77),A  ;
 $ED8F POP BC        ;
 $ED90 LD A,C        ;
 $ED91 RRA           ;
 $ED92 RRA           ;
 $ED93 RRA           ;
 $ED94 AND $1F       ;
 $ED96 INC A         ;
 $ED97 LD ($D045),A  ;
 $ED9A LD A,B        ;
 $ED9B SRL A         ;
 $ED9D SRL A         ;
 $ED9F SRL A         ;
 $EDA1 JR NC,$EDA4   ;
 $EDA3 INC A         ;
*$EDA4 NEG           ;
 $EDA6 ADD A,$16     ;
 $EDA8 LD ($D046),A  ;
 $EDAB CALL $EDC5    ;
 $EDAE RET C         ;
 $EDAF LD HL,$D046   ;
 $EDB2 DEC (HL)      ;
 $EDB3 LD A,(HL)     ;
 $EDB4 CP $03        ;
 $EDB6 JR C,$EDBC    ;
 $EDB8 CALL $EDC5    ;
 $EDBB RET C         ;
*$EDBC LD HL,$D046   ;
 $EDBF INC (HL)      ;
 $EDC0 INC (HL)      ;
 $EDC1 LD A,(HL)     ;
 $EDC2 CP $17        ;
 $EDC4 RET NC        ;
*$EDC5 LD A,($D046)  ;
 $EDC8 LD HL,$EC40   ;
 $EDCB CALL $EB3E    ;
 $EDCE LD A,(HL)     ;
 $EDCF AND A         ;
 $EDD0 RET NZ        ;
 $EDD1 LD A,$FF      ;
 $EDD3 LD (HL),A     ;
 $EDD4 LD A,$01      ;
 $EDD6 LD ($D0D2),A  ;
 $EDD9 LD HL,$DEDB   ;
 $EDDC JP $E311      ;

; Routine at EDDF
;
; Used by the routine at #R$D00F.
c$EDDF CALL $DF60    ;
 $EDE2 CALL $E8E5    ;
 $EDE5 LD DE,$FDF3   ;
 $EDE8 CALL $D568    ;
 $EDEB LD A,$A3      ;
 $EDED CALL $E306    ;
 $EDF0 LD A,$03      ;
 $EDF2 CALL $E2C8    ;
 $EDF5 CALL $E107    ;
 $EDF8 CALL $E2A9    ;
 $EDFB CALL $EEA8    ;
 $EDFE LD A,$A2      ;
 $EE00 CALL $E297    ;
*$EE03 LD A,$B1      ;
 $EE05 LD B,A        ;
 $EE06 LD A,($DEF9)  ;
 $EE09 ADD A,B       ;
 $EE0A CALL $EE9D    ;
 $EE0D LD A,$C4      ;
 $EE0F CALL $E297    ;
 $EE12 LD A,$03      ;
 $EE14 LD ($D0CE),A  ;
 $EE17 LD A,($DEFA)  ;
 $EE1A INC A         ;
 $EE1B CALL $D2E1    ;
 $EE1E CALL $EEA2    ;
 $EE21 LD A,$D7      ;
 $EE23 CALL $E292    ;
 $EE26 LD A,($DEFB)  ;
 $EE29 CALL $D2DE    ;
 $EE2C LD A,$C6      ;
 $EE2E CALL $EE9D    ;
 $EE31 CALL $D421    ;
 $EE34 JR Z,$EE03    ;
 $EE36 ADC A,$EE     ;
 $EE38 CALL $D421    ;
 $EE3B LD D,E        ;
 $EE3C LD A,$29      ;
 $EE3E CALL $EE9D    ;
 $EE41 LD A,$6F      ;
 $EE43 CALL $E292    ;
 $EE46 LD HL,($DEFC) ;
 $EE49 LD A,$05      ;
 $EE4B LD ($D0CE),A  ;
 $EE4E AND A         ;
 $EE4F CALL $D2E5    ;
 $EE52 CALL $D421    ;
 $EE55 JR NZ,$EE24   ;
 $EE57 LD HL,$4DD4   ;
 $EE5A LD A,$E2      ;
 $EE5C CALL $E2F8    ;
 $EE5F CALL $EEA2    ;
 $EE62 LD A,$FA      ;
 $EE64 CALL $E297    ;
 $EE67 CALL $EF21    ;
 $EE6A CALL $D421    ;
 $EE6D JR NZ,$EEAD   ;
 $EE6F LD DE,$DF32   ;
 $EE72 POP HL        ;
 $EE73 CALL $E31E    ;
 $EE76 CALL $EEA2    ;
 $EE79 LD A,($D0AF)  ;
 $EE7C AND A         ;
 $EE7D JR Z,$EE8C    ;
 $EE7F LD HL,$DEBA   ;
 $EE82 CALL $EF37    ;
 $EE85 JR C,$EE8C    ;
 $EE87 LD A,$DE      ;
 $EE89 JP $D45F      ;
*$EE8C LD HL,($DEBC) ;
 $EE8F LD ($DECC),HL ;
 $EE92 LD HL,($DEBE) ;
 $EE95 LD ($DECE),HL ;
 $EE98 LD A,$05      ;
 $EE9A JP $D45F      ;

; Routine at EE9D
;
; Used by the routines at #R$EDDF, #R$EEA8 and #R$EF87.
c$EE9D CALL $E2A6    ;
 $EEA0 JR $EEA5      ;

; Routine at EEA2
;
; Used by the routines at #R$E973 and #R$EDDF.
c$EEA2 CALL $E2A9    ;
; This entry point is used by the routine at #R$EE9D.
*$EEA5 JP $E2A9      ;

; Routine at EEA8
;
; Used by the routine at #R$EDDF.
c$EEA8 LD A,$70      ;
 $EEAA CALL $E292    ;
; This entry point is used by the routine at #R$EDDF.
*$EEAD LD A,($DEF8)  ;
 $EEB0 CP $04        ;
 $EEB2 JR Z,$EEC8    ;
 $EEB4 JR C,$EEB8    ;
 $EEB6 SUB $05       ;
*$EEB8 ADD A,$AA     ;
 $EEBA CALL $D425    ;
*$EEBD LD A,($DEF8)  ;
 $EEC0 SRL A         ;
 $EEC2 SRL A         ;
 $EEC4 ADD A,$A8     ;
 $EEC6 JR $EE9D      ;
*$EEC8 CALL $D421    ;
 $EECB XOR L         ;
 $EECC JR $EEBD      ;

; Routine at EECE
c$EECE LD HL,($DEBE) ;
 $EED1 LD A,L        ;
 $EED2 CP $80        ;
 $EED4 JR NC,$EEDA   ;
 $EED6 LD A,$BC      ;
 $EED8 JR $EF1E      ;
*$EEDA LD A,H        ;
 $EEDB SRL A         ;
 $EEDD SRL A         ;
 $EEDF PUSH AF       ;
 $EEE0 AND $07       ;
 $EEE2 CP $03        ;
 $EEE4 JR NC,$EEEB   ;
 $EEE6 ADD A,$E3     ;
 $EEE8 CALL $E29E    ;
*$EEEB POP AF        ;
 $EEEC SRL A         ;
 $EEEE SRL A         ;
 $EEF0 SRL A         ;
 $EEF2 CP $06        ;
 $EEF4 JR NC,$EEFB   ;
 $EEF6 ADD A,$E6     ;
 $EEF8 CALL $E29E    ;
*$EEFB LD HL,($DEBA) ;
 $EEFE LD A,H        ;
 $EEFF LD B,A        ;
 $EF00 LD HL,($DEBC) ;
 $EF03 LD A,H        ;
 $EF04 XOR B         ;
 $EF05 AND $07       ;
 $EF07 PUSH AF       ;
 $EF08 CP $06        ;
 $EF0A JR NC,$EF11   ;
 $EF0C ADD A,$EC     ;
 $EF0E CALL $E29E    ;
*$EF11 LD HL,($DEBE) ;
 $EF14 LD A,H        ;
 $EF15 AND $03       ;
 $EF17 LD B,A        ;
 $EF18 POP AF        ;
 $EF19 ADD A,B       ;
 $EF1A AND $07       ;
 $EF1C ADD A,$F2     ;
*$EF1E JP $D425      ;

; Routine at EF21
;
; Used by the routine at #R$EDDF.
c$EF21 LD HL,($DEBE) ;
 $EF24 LD A,H        ;
 $EF25 AND $0F       ;
 $EF27 ADD A,$0B     ;
 $EF29 LD HL,($DEBC) ;
 $EF2C LD L,H        ;
 $EF2D LD H,A        ;
 $EF2E LD A,$05      ;
 $EF30 LD ($D0CE),A  ;
 $EF33 AND A         ;
 $EF34 JP $D2E5      ;

; Routine at EF37
;
; Used by the routines at #R$DDE3 and #R$EDDF.
c$EF37 LD DE,$D090   ;
 $EF3A LD B,$06      ;
*$EF3C LD A,(DE)     ;
 $EF3D CP (HL)       ;
 $EF3E JR NZ,$EF46   ;
 $EF40 INC DE        ;
 $EF41 INC HL        ;
 $EF42 DJNZ $EF3C    ;
 $EF44 AND A         ;
 $EF45 RET           ;
*$EF46 SCF           ;
 $EF47 RET           ;

; Routine at EF48
;
; Used by the routine at #R$D012.
c$EF48 CALL $E6FA    ;
 $EF4B CALL $E8E5    ;
 $EF4E LD A,$A7      ;
 $EF50 CALL $E306    ;
 $EF53 LD HL,$0310   ;
 $EF56 LD ($D045),HL ;
 $EF59 LD A,$FF      ;
 $EF5B CALL $E2A6    ;
 $EF5E LD DE,$FDFB   ;
 $EF61 CALL $D568    ;
 $EF64 LD A,($7103)  ;
 $EF67 AND A         ;
 $EF68 RET NZ        ;
 $EF69 XOR A         ;
 $EF6A LD ($E1DF),A  ;
 $EF6D LD HL,$E1BB   ;
 $EF70 LD ($E1E2),HL ;
 $EF73 LD HL,$D09D   ;
 $EF76 LD ($E1E4),HL ;
*$EF79 CALL $E212    ;
 $EF7C LD HL,$E1DF   ;
 $EF7F INC (HL)      ;
 $EF80 LD A,(HL)     ;
 $EF81 CP $11        ;
 $EF83 JR C,$EF79    ;
 $EF85 RET           ;

; Data block at EF86
@label=byte_at_EF86
b$EF86 DEFB $00

; Routine at EF87
;
; Used by the routines at #R$D015, #R$DBA2, #R$E973 and #R$EB47.
c$EF87 LD A,$0B      ;
 $EF89 LD ($70E3),A  ;
 $EF8C CALL $E8E5    ;
 $EF8F CALL $7121    ;
 $EF92 LD DE,$FD8E   ;
 $EF95 CALL $D568    ;
 $EF98 CALL $E2BC    ;
 $EF9B LD B,$CD      ;
 $EF9D LD HL,$7ED4   ;
 $EFA0 LD A,$04      ;
 $EFA2 CALL $E2C8    ;
 $EFA5 LD A,$02      ;
 $EFA7 CALL $F0A1    ;
 $EFAA LD A,$03      ;
 $EFAC CALL $F0A1    ;
 $EFAF LD A,$06      ;
 $EFB1 CALL $E2C8    ;
 $EFB4 CALL $D421    ;
 $EFB7 DEC B         ;
 $EFB8 CALL $D421    ;
 $EFBB RLCA          ;
 $EFBC LD A,$71      ;
 $EFBE CALL $E292    ;
 $EFC1 CALL $D421    ;
 $EFC4 JR NZ,$EFCC   ;
 $EFC6 LD (DE),A     ;
 $EFC7 LD A,($D05F)  ;
 $EFCA AND A         ;
 $EFCB JR Z,$EFD3    ;
 $EFCD CP $32        ;
 $EFCF JR C,$EFD2    ;
 $EFD1 INC B         ;
*$EFD2 INC B         ;
*$EFD3 LD A,B        ;
 $EFD4 CALL $E2A6    ;
 $EFD7 LD A,$72      ;
 $EFD9 CALL $E292    ;
 $EFDC CALL $D421    ;
 $EFDF JR NZ,$F002   ;
 $EFE1 LD H,D        ;
 $EFE2 RET NC        ;
 $EFE3 LD A,(HL)     ;
 $EFE4 AND A         ;
 $EFE5 JR NZ,$EFEF   ;
 $EFE7 DEC HL        ;
 $EFE8 LD DE,$F0AE   ;
 $EFEB LD B,$15      ;
 $EFED JR $EFF4      ;
*$EFEF LD DE,$F0B4   ;
 $EFF2 LD B,$1A      ;
*$EFF4 LD A,(DE)     ;
 $EFF5 CP (HL)       ;
 $EFF6 JR NC,$EFFC   ;
 $EFF8 INC B         ;
 $EFF9 INC DE        ;
 $EFFA JR $EFF4      ;
*$EFFC LD A,B        ;
 $EFFD CALL $EE9D    ;
 $F000 CALL $D421    ;
 $F003 LD DE,$72CD   ;
 $F006 RET P         ;
 $F007 LD A,($D084)  ;
 $F00A CALL $F068    ;
 $F00D LD L,E        ;
 $F00E LD A,($D088)  ;
 $F011 CALL $F068    ;
 $F014 LD L,A        ;
 $F015 LD A,($D0B0)  ;
 $F018 BIT 7,A       ;
 $F01A JR Z,$F026    ;
 $F01C LD A,$CF      ;
 $F01E CALL $D45F    ;
 $F021 CALL $F072    ;
 $F024 JR $F02D      ;
*$F026 LD A,($D085)  ;
 $F029 CALL $F068    ;
 $F02C LD L,H        ;
*$F02D LD A,($D08A)  ;
 $F030 CALL $F068    ;
 $F033 LD (HL),C     ;
 $F034 LD A,($D08B)  ;
 $F037 CALL $F068    ;
 $F03A LD (HL),D     ;
 $F03B LD A,($D08C)  ;
 $F03E CALL $F068    ;
 $F041 LD (HL),E     ;
 $F042 LD A,($D08D)  ;
 $F045 CALL $F068    ;
 $F048 LD (HL),H     ;
 $F049 LD A,$FF      ;
 $F04B LD ($EF86),A  ;
 $F04E LD HL,$D07D   ;
 $F051 LD B,$04      ;
*$F053 PUSH BC       ;
 $F054 CALL $F07A    ;
 $F057 POP BC        ;
 $F058 DJNZ $F053    ;
 $F05A LD A,($D0B0)  ;
 $F05D BIT 6,A       ;
 $F05F JR Z,$F065    ;
 $F061 CALL $D421    ;
 $F064 LD A,L        ;
*$F065 JP $D646      ;

; Routine at F068
;
; Used by the routine at #R$EF87.
c$F068 POP HL        ;
 $F069 LD B,(HL)     ;
 $F06A INC HL        ;
 $F06B PUSH HL       ;
 $F06C AND A         ;
 $F06D RET Z         ;
 $F06E LD A,B        ;
 $F06F CALL $D425    ;
; This entry point is used by the routines at #R$EF87 and #R$F07A.
*$F072 CALL $E2A9    ;
 $F075 LD A,$05      ;
 $F077 JP $E2C0      ;

; Routine at F07A
;
; Used by the routine at #R$EF87.
c$F07A LD A,($EF86)  ;
 $F07D INC A         ;
 $F07E LD ($EF86),A  ;
 $F081 LD A,(HL)     ;
 $F082 INC HL        ;
 $F083 AND A         ;
 $F084 RET Z         ;
 $F085 PUSH HL       ;
 $F086 PUSH AF       ;
 $F087 LD A,($EF86)  ;
 $F08A ADD A,$60     ;
 $F08C CALL $E29E    ;
 $F08F POP AF        ;
 $F090 CP $03        ;
 $F092 JR C,$F098    ;
 $F094 LD B,$72      ;
 $F096 JR $F09A      ;
*$F098 LD B,$66      ;
*$F09A ADD A,B       ;
 $F09B CALL $D425    ;
 $F09E POP HL        ;
 $F09F JR $F072      ;

; Routine at F0A1
;
; Used by the routine at #R$EF87.
c$F0A1 EX AF,AF'     ;
 $F0A2 CALL $E2BC    ;
 $F0A5 DEC D         ;
 $F0A6 CALL $D421    ;
 $F0A9 LD A,($C308)  ;
 $F0AC AND (HL)      ;
 $F0AD JP PO,$1008   ;
 $F0B0 JR NZ,$F0F2   ;
 $F0B2 ADD A,B       ;
 $F0B3 RST $38       ;
 $F0B4 LD (BC),A     ;
 $F0B5 LD A,(BC)     ;
 $F0B6 ADD HL,DE     ;
 $F0B7 RST $38       ;
; This entry point is used by the routines at #R$D018, #R$E6AE, #R$E707,
; #R$E8AE and #R$E8EA.
*$F0B8 LD A,$0C      ;
 $F0BA LD ($70E3),A  ;
 $F0BD CALL $E8E5    ;
 $F0C0 LD A,$A4      ;
 $F0C2 CALL $E306    ;
 $F0C5 LD DE,$FD96   ;
 $F0C8 CALL $D568    ;
 $F0CB LD A,$03      ;
 $F0CD CALL $E2C8    ;
 $F0D0 CALL $D421    ;
 $F0D3 DEC B         ;
 $F0D4 LD A,$07      ;
 $F0D6 CALL $E2A6    ;
 $F0D9 LD A,($D084)  ;
 $F0DC AND A         ;
 $F0DD JR Z,$F0EB    ;
 $F0DF LD HL,$58C1   ;
 $F0E2 LD A,$05      ;
 $F0E4 CALL $D554    ;
 $F0E7 CALL $D421    ;
 $F0EA LD L,E        ;
*$F0EB CALL $E2A9    ;
 $F0EE LD A,($D0B0)  ;
 $F0F1 BIT 5,A       ;
 $F0F3 JR Z,$F0FD    ;
 $F0F5 LD A,$0C      ;
 $F0F7 CALL $D45F    ;
 $F0FA CALL $E2A9    ;
*$F0FD XOR A         ;
 $F0FE LD ($E1DF),A  ;
 $F101 LD HL,$D06A   ;
 $F104 LD ($E1E0),HL ;
*$F107 CALL $E268    ;
 $F10A CALL NC,$E2A9 ;
 $F10D LD HL,$E1DF   ;
 $F110 INC (HL)      ;
 $F111 LD A,(HL)     ;
 $F112 CP $11        ;
 $F114 JR C,$F107    ;
 $F116 RET           ;

; Data block at F117
b$F117 DEFB $00,$00,$00

; Recursive tokens

; Tokens pointer
@label=tokens_ptr
w$F11A DEFW $F11E

; Other/extra tokens pointer
@label=other_tokens_ptr
w$F11C DEFW $F4F5

; Standard recursive tokens Token $00
@label=tokens
t$F11E DEFM "o",$10,$00

; Token $01
t$F121 DEFM " CH",$8A,"T",$00

; Token $02
t$F127 DEFM "GO",$96,"RNM",$92,"T",$00

; Token $03
t$F130 DEFM $06,"D",$91,"A",$10,$03,$08,$00

; Token $04
t$F138 DEFM $06,$8C,$96,"NT",$99,"Y",$08,$00

; Token $05
t$F141 DEFM "SYS",$9C,"M",$00

; Token $06
t$F147 DEFM "P",$9E,$85,$00

; Token $07
t$F14B DEFM $02," ",$8B,"RKET ",$A6,"S",$00

; Token $08
t$F156 DEFM $8C,"D",$88,"T",$9E,$80,$00

; Token $09
t$F15D DEFM "AG",$9E,"CULTU",$94,"L",$00

; Token $0A
t$F168 DEFM $9E,"CH ",$00

; Token $0B
t$F16D DEFM "A",$96,$94,$83," ",$00

; Token $0C
t$F173 DEFM "PO",$99," ",$00

; Token $0D
t$F178 DEFM $8B,$8C,"LY ",$00

; Token $0E
t$F17E DEFM "UNIT",$00

; Token $0F
t$F183 DEFM " VIEW ",$00

; Token $10
t$F18A DEFM $9A,$9B,$97,"TY",$00

; Token $11
t$F190 DEFM $9B,$8A,"CHY",$00

; Token $12
t$F196 DEFM "FEUD",$80,$00

; Token $13
t$F19C DEFM "MUL",$97,"-",$A2,$00

; Token $14
t$F1A3 DEFM $8D,"CT",$91,$99,$B9,$00

; Token $15
t$F1AA DEFM $FB,"MUN",$9D,"T",$00

; Token $16
t$F1B1 DEFM "C",$9F,"F",$98,$90,"ACY",$00

; Token $17
t$F1BA DEFM "DEMOC",$94,"CY",$00

; Token $18
t$F1C3 DEFM "C",$99,"P",$99,$91,"E ",$CB,$91,"E",$00

; Token $19
t$F1CE DEFM "SHIP",$00

; Token $1A
t$F1D3 DEFM "P",$FE,"DUCT",$00

; Token $1B
t$F1DA DEFM " ",$95,"S",$90,$00

; Token $1C
t$F1DF DEFM "HUM",$9B," COL",$9F,"I",$80,$00

; Token $1D
t$F1EB DEFM "HYP",$90,"SPA",$85,$00

; Token $1E
t$F1F4 DEFM $06,"SH",$99,"T ",$CA,$A1,$08,$00

; Token $1F
t$F1FE DEFM $8D,$CB,$9B,$85,$00

; Token $20
t$F203 DEFM $BD," -- ",$03,$00

; Token $21
t$F20A DEFM $BD," ",$CA," ?",$00

; Token $22
t$F210 DEFM $06,"MAYDAY",$08,"* C",$99,"IOLIS ",$8C," DAN",$83,"R*",$00

; Token $23
t$F22B DEFM " LIGHT YE",$8A,"S",$00,$9C,"CH.",$81,$96,"L",$00

; Token $24
t$F23F DEFM "CASH",$00

; Token $25
t$F244 DEFM " ",$86,$0E,"I",$9F,$00

; Token $26
t$F24A DEFM $06,"z",$A1,$08,$01,$00

; Token $27
t$F250 DEFM "T",$8A,$83,"T LO",$CB,$00

; Token $28
t$F259 DEFM "j JAMM",$98,$00

; Token $29
t$F261 DEFM "R",$9B,$83,$00

; Token $2A
t$F265 DEFM "ST",$00

; Token $2B
t$F268 DEFM $B0," OF ",$00

; Token $2C
t$F26E DEFM "SE",$0E,$00

; Token $2D
t$F272 DEFM " C",$8A,"GO",$00

; Token $2E
t$F278 DEFM "E",$9A,"IP",$00

; Token $2F
t$F27D DEFM "FOOD",$00

; Token $30
t$F282 DEFM $9C,"X",$97,"L",$89,$00

; Token $31
t$F288 DEFM $94,$8D,"OAC",$97,$96,"S",$00

; Token $32
t$F291 DEFM "S",$95,$96,"S",$00

; Token $33
t$F296 DEFM "LI",$9A,$99,"/W",$8C,$89,$00

; Token $34
t$F29F DEFM "LUXU",$9E,$89,$00

; Token $35
t$F2A6 DEFM "N",$8A,"CO",$97,"CS",$00

; Token $36
t$F2AE DEFM $FB,"PUT",$90,"S",$00

; Token $37
t$F2B5 DEFM $8B,"CH",$8C,$90,"Y",$00

; Token $38
t$F2BC DEFM "ALLOYS",$00

; Token $39
t$F2C3 DEFM "FI",$8E,$8A,"MS",$00

; Token $3A
t$F2CA DEFM "FURS",$00

; Token $3B
t$F2CF DEFM "M",$8C,$90,$80,"S",$00

; Token $3C
t$F2D5 DEFM "GOLD",$00

; Token $3D
t$F2DA DEFM "PL",$91,$8C,"UM",$00

; Token $3E
t$F2E1 DEFM $83,"M-",$CB,$9F,$89,$00

; Token $3F
t$F2E8 DEFM $80,"I",$92," ",$7F,"S",$00

; Token $40
t$F2EF DEFM " NOT FOUND",$00

; Token $41
t$F2FA DEFM " CR",$00

; Token $42
t$F2FE DEFM "L",$8A,$83,$00

; Token $43
t$F302 DEFM "FI",$90,$85,$00

; Token $44
t$F307 DEFM "S",$8B,$0E,$00

; Token $45
t$F30B DEFM "G",$8E,$92,$00

; Token $46
t$F30F DEFM "R",$98,$00

; Token $47
t$F312 DEFM "YE",$0E,"OW",$00

; Token $48
t$F318 DEFM "BLUE",$00

; Token $49
t$F31D DEFM "B",$95,"CK",$00

; Token $4A
t$F322 DEFM $15,$00

; Token $4B
t$F324 DEFM "SLIMY",$00

; Token $4C
t$F32A DEFM "BUG-EY",$98,$00

; Token $4D
t$F332 DEFM "H",$99,"N",$98,$00

; Token $4E
t$F337 DEFM "B",$9F,"Y",$00

; Token $4F
t$F33B DEFM "F",$91,$00

; Token $50
t$F33E DEFM "FURRY",$00

; Token $51
t$F344 DEFM $FE,"D",$92,"T",$00

; Token $52
t$F349 DEFM "F",$FE,"G",$00

; Token $53
t$F34D DEFM "LI",$84,"RD",$00

; Token $54
t$F353 DEFM "LOB",$CB,$90,$00

; Token $55
t$F359 DEFM $86,"RD",$00

; Token $56
t$F35D DEFM "HUM",$9B,"OID",$00

; Token $57
t$F365 DEFM "FEL",$8C,"E",$00

; Token $58
t$F36B DEFM $8C,"SECT",$00

; Token $59
t$F371 DEFM $AB,$94,$8D,$88,$00

; Token $5A
t$F376 DEFM "COM",$00

; Token $5B
t$F37A DEFM $FB,"M",$9B,"D",$90,$00

; Token $5C
t$F380 DEFM " D",$89,"T",$FE,"Y",$98,$00

; Token $5D
t$F388 DEFM "RO",$00

; Token $5E
t$F38B DEFM $06,$AE,"  ",$B0,$09,$BA,"    ",$AE," ",$A6," F",$99," SA",$81,$08,$09,$00

; Token $5F
t$F3A3 DEFM "FR",$9F,"T",$00

; Token $60
t$F3A8 DEFM $8E,$8A,$00

; Token $61
t$F3AB DEFM $81,"FT",$00

; Token $62
t$F3AF DEFM $9E,"GHT",$00

; Token $63
t$F3B4 DEFM "yLOW",$00

; Token $64
t$F3B9 DEFM "c",$10,$FC,"*",$00

; Token $65
t$F3BE DEFM "EXT",$94," ",$00

; Token $66
t$F3C4 DEFM "PULSE",$BB,$00

; Token $67
t$F3CB DEFM $93,"AM",$BB,$00

; Token $68
t$F3D0 DEFM "FUEL",$00

; Token $69
t$F3D5 DEFM "M",$9D,"SI",$81,$00

; Token $6A
t$F3DB DEFM $E3,$CE," BAY",$00

; Token $6B
t$F3E2 DEFM "E.C.M.",$A5,$00

; Token $6C
t$F3EA DEFM "fgS",$00

; Token $6D
t$F3EE DEFM "fhS",$00

; Token $6E
t$F3F2 DEFM "i SCOOPS",$00

; Token $6F
t$F3FB DEFM $89,"CAPE POD",$00

; Token $70
t$F405 DEFM "yBOMB",$00

; Token $71
t$F40B DEFM "y",$AE,$00

; Token $72
t$F40E DEFM "DOCK",$8C,"G ",$D7,$00

; Token $73
t$F417 DEFM "z ",$BD,$00

; Token $74
t$F41B DEFM "MILIT",$8A,"Y",$BB,$00

; Token $75
t$F424 DEFM "M",$8C,$8C,"G",$BB,$00

; Token $76
t$F42A DEFM $09,$09,$09,$00

; Token $77
t$F42E DEFM $8C,$FB,$8C,"G j",$00

; Token $78
t$F435 DEFM $92,$90,"GY ",$00

; Token $79
t$F43B DEFM "GA",$95,"C",$97,"C",$00

; Token $7A
t$F442 DEFM "s ON",$00

; Token $7B
t$F447 DEFM "A",$0E,$00

; Token $7C
t$F44A DEFM "CLOAK",$8C,"G DEVI",$85,$00

; Token $7D
t$F458 DEFM $06,$FC," ",$04,$08,"wP",$8E,"S",$92,"T ",$A5,$09,$BD," ",$A5,$09,$00

; Token $7E
t$F46B DEFM "I",$9C,"M",$00

; Token $7F
t$F46F DEFM "LL",$00

; Token $80
t$F472 DEFM $06,"MAYDAY",$08,"* ",$0B," ",$8C,"VAD",$98,"*",$00

; Token $81
t$F485 DEFM " ",$9F," ",$00

; Token $82
t$F489 DEFM $06,$CF,"M",$92,"T",$08,":",$00

; Token $83
t$F491 DEFM "C",$81,$9B,$00

; Token $84
t$F495 DEFM "OFF",$92,"D",$90,$00

; Token $85
t$F49C DEFM "FUGI",$97,$96,$00

; Token $86
t$F4A3 DEFM "H",$8A,"M",$81,"SS",$00

; Token $87
t$F4AA DEFM "MO",$CB,"LY ",$15,$00

; Token $88
t$F4B2 DEFM $AC,$00

; Token $89
t$F4B4 DEFM $AB,$00

; Token $8A
t$F4B6 DEFM "ABO",$96," ",$AB,$00

; Token $8B
t$F4BD DEFM $FB,"PET",$92,"T",$00

; Token $8C
t$F4C4 DEFM "D",$9B,$83,$FE,$88,$00

; Token $8D
t$F4CA DEFM "DEADLY",$00

; Token $8E
t$F4D1 DEFM "---- E L I T E ----",$00

; Token $8F
t$F4E5 DEFM "P",$8E,"S",$92,"T",$00

; Token $90
t$F4EB DEFM "i ",$81,"AK*",$00

; Token $91
t$F4F2 DEFM $00

; Token $92
t$F4F3 DEFM $00

; Token $93
t$F4F4 DEFM $00

; Other/extra tokens Token $00
@label=other_tokens
t$F4F5 DEFM $01,$08,"  AC",$E9,"SS ME",$E1,$02,$0C,$0C,$0C,$0C," 1 ",$95,$0C,$0C," 2",$CB," ",$9A," ",$01,$04,$02,$0C,$0C," 3 EX",$DB,$00

; Token $01
t$F51F DEFM $DE,$EE,"T TAPE, ",$E2,$F6," P",$F2,"SS ",$FF,"Y KEY",$00

; Token $02
t$F538 DEFM "TAPE ",$E0,"AD",$C3,$F4,"R",$FD,$00

; Token $03
t$F545 DEFM $DA,$C6,"R",$DB,"Y ",$E1,"MB",$F4,": ",$00

; Token $04
t$F552 DEFM $B0,"m",$CA,"n",$B1,$00

; Token $05
t$F558 DEFM "  ",$95,$CE,$00

; Token $06
t$F55D DEFM "P",$F2,"SS ",$D1,"A",$E9,", ",$9A,$00

; Token $07
t$F569 DEFM $9A,"'S ",$C8,$00

; Token $08
t$F56F DEFM " GAME O",$FA,"R",$00

; Token $09
t$F579 DEFM $B0,$F0," APP",$F2,"CIA",$FB,$DF," OF ",$B3,"R ",$A6," C",$D9,$F8,"GE ",$93," ",$C1,"S OF ",$10," AW",$EE,"D ",$B3," ",$E2,"EIR HIGHE",$DE," H",$DF,$D9,"R - ",$93,$12
 $F5BA DEFM "-",$12,$B1,$D3,$01,"LI",$FA," ",$E0,"NG",$B2,"PRO",$D1,$F4,"*",$02,$00

; Token $0A
t$F5CF DEFM $02,"SHIP BO",$EE,"D",$C4,"BY",$01,$00

; Token $0B
t$F5DE DEFM $F2,"FU",$E7,$ED,$00

; Token $0C
t$F5E4 DEFM " PIR",$F5,"E",$00

; Token $0D
t$F5EB DEFM $15,$91," ",$C8,$1A,$00

; Token $0E
t$F5F1 DEFM $02,$B3," HA",$FA,$CB,"D ",$D9,"R LI",$FA,"S*",$D3,$18,$18,$E2,$FF,"K ",$B3,", ",$9A,"...",$00

; Token $0F
t$F611 DEFM "F",$D8,$E5,"D",$00

; Token $10
t$F616 DEFM $E3,"T",$D8,$E5,$00

; Token $11
t$F61B DEFM "WELL K",$E3,"WN",$00

; Token $12
t$F625 DEFM "FAMO",$EC,$00

; Token $13
t$F62B DEFM $E3,"T",$FC,$00

; Token $14
t$F62F DEFM $FA,"RY",$00

; Token $15
t$F633 DEFM "M",$DC,"DLY",$00

; Token $16
t$F639 DEFM "MO",$DE,$00

; Token $17
t$F63D DEFM $F2,"AS",$DF,$D8,"LY",$00

; Token $18
t$F645 DEFM $00

; Token $19
t$F646 DEFM $A5,$00

; Token $1A
t$F648 DEFM "r",$00

; Token $1B
t$F64A DEFM "G",$F2,$F5,$00

; Token $1C
t$F64E DEFM "VA",$DE,$00

; Token $1D
t$F652 DEFM "P",$F0,"K",$00

; Token $1E
t$F656 DEFM $02,"w v",$0D," ",$B9,"A",$FB,$DF,"S",$00

; Token $1F
t$F662 DEFM $9C,"S",$00

; Token $20
t$F665 DEFM "u",$00

; Token $21
t$F667 DEFM $80," F",$FD,$ED,"TS",$00

; Token $22
t$F66F DEFM "O",$E9,$FF,"S",$00

; Token $23
t$F674 DEFM "SHYN",$ED,"S",$00

; Token $24
t$F67B DEFM "S",$DC,"L",$F0,$ED,"S",$00

; Token $25
t$F682 DEFM $EF,"T",$C3,"T",$F8,$F1,$FB,$DF,"S",$00

; Token $26
t$F68C DEFM $E0,$F5,"H",$C3,"OF d",$00

; Token $27
t$F695 DEFM $E0,$FA," F",$FD," d",$00

; Token $28
t$F69D DEFM "FOOD B",$E5,"ND",$F4,"S",$00

; Token $29
t$F6A9 DEFM "T",$D9,"RI",$DE,"S",$00

; Token $2A
t$F6B0 DEFM "PO",$DD,"RY",$00

; Token $2B
t$F6B6 DEFM $F1,"SCOS",$00

; Token $2C
t$F6BC DEFM "l",$00

; Token $2D
t$F6BE DEFM "W",$E4,"K",$C3,$9E,$00

; Token $2E
t$F6C4 DEFM "C",$F8,"B",$00

; Token $2F
t$F6C8 DEFM "B",$F5,$00

; Token $30
t$F6CB DEFM $E0,"B",$DE,$00

; Token $31
t$F6CF DEFM $12,$00

; Token $32
t$F6D1 DEFM $F7,"S",$DD,$00

; Token $33
t$F6D5 DEFM "P",$F9,"GU",$FC,$00

; Token $34
t$F6DB DEFM $F8,"VAG",$FC,$00

; Token $35
t$F6E1 DEFM $C6,"RS",$FC,$00

; Token $36
t$F6E6 DEFM "SC",$D9,"RG",$FC,$00

; Token $37
t$F6ED DEFM "q CIV",$DC," W",$EE,$00

; Token $38
t$F6F7 DEFM "h _ ",$60,"S",$00

; Token $39
t$F6FE DEFM "A h ",$F1,$DA,"A",$DA,$00

; Token $3A
t$F707 DEFM "q E",$EE,$E2,$FE,"AK",$ED,$00

; Token $3B
t$F711 DEFM "q ",$EB,$F9,"R AC",$FB,"V",$DB,"Y",$00

; Token $3C
t$F71E DEFM $AF,"] ",$5E,$00

; Token $3D
t$F723 DEFM $93,$11," _ ",$60,$00

; Token $3E
t$F72A DEFM $AF,$C1,"S' b c",$00

; Token $3F
t$F733 DEFM $02,"z",$0D,$00

; Token $40
t$F737 DEFM $AF,"k l",$00

; Token $41
t$F73C DEFM "JUI",$E9,$00

; Token $42
t$F741 DEFM "B",$F8,"NDY",$00

; Token $43
t$F747 DEFM "W",$F5,$F4,$00

; Token $44
t$F74B DEFM "B",$F2,"W",$00

; Token $45
t$F74F DEFM "G",$EE,"G",$E5," B",$F9,$DE,$F4,"S",$00

; Token $46
t$F75A DEFM $12,$00

; Token $47
t$F75C DEFM $11," ",$60,$00

; Token $48
t$F760 DEFM $11," ",$12,$00

; Token $49
t$F764 DEFM $11," h",$00

; Token $4A
t$F768 DEFM "h ",$12,$00

; Token $4B
t$F76C DEFM "F",$D8,"U",$E0,$EC,$00

; Token $4C
t$F772 DEFM "EXO",$FB,"C",$00

; Token $4D
t$F778 DEFM "HOOPY",$00

; Token $4E
t$F77E DEFM "U",$E1,"SU",$E4,$00

; Token $4F
t$F784 DEFM "EXC",$DB,$F0,"G",$00

; Token $50
t$F78B DEFM $C6,$98,$F0,"E",$00

; Token $51
t$F790 DEFM "NIGHT LIFE",$00

; Token $52
t$F79B DEFM "CASI",$E3,"S",$00

; Token $53
t$F7A2 DEFM "S",$DB," COMS",$00

; Token $54
t$F7AA DEFM $02,"z",$0D,$00

; Token $55
t$F7AE DEFM $03,$00

; Token $56
t$F7B0 DEFM $93,$91," ",$03,$00

; Token $57
t$F7B5 DEFM $93,$92," ",$03,$00

; Token $58
t$F7BA DEFM $94,$91,$00

; Token $59
t$F7BD DEFM $94,$92,$00

; Token $5A
t$F7C0 DEFM $02,$93,"SUN",$CA,"GO",$C3,$E3,"VA*",$D3," W",$DC,"L ",$B3,$CB," ",$EC," ",$CE,$00

; Token $5B
t$F7DA DEFM $13,$00

; Token $5C
t$F7DC DEFM "S",$02,"*",$18,$18,$00

; Token $5D
t$F7E2 DEFM $00

; Token $5E
t$F7E3 DEFM $00

; Token $5F
t$F7E4 DEFM "N UN",$F2,$EF,"RK",$D8,$E5,$00

; Token $60
t$F7EF DEFM " B",$FD,$F0,"G",$00

; Token $61
t$F7F5 DEFM " DULL",$00

; Token $62
t$F7FB DEFM " TE",$F1,"O",$EC,$00

; Token $63
t$F802 DEFM " ",$F2,"VOLT",$F0,"G",$00

; Token $64
t$F80B DEFM $91,$00

; Token $65
t$F80D DEFM $92,$00

; Token $66
t$F80F DEFM "P",$F9,$E9,$00

; Token $67
t$F813 DEFM "L",$DB,"T",$E5," ",$91,$00

; Token $68
t$F81A DEFM "DUMP",$00

; Token $69
t$F81F DEFM $00

; Token $6A
t$F820 DEFM $00

; Token $6B
t$F821 DEFM $00

; Token $6C
t$F822 DEFM $00

; Token $6D
t$F823 DEFM $00

; Token $6E
t$F824 DEFM "GROSS ",$06,$BA,$0A,"IV",$DB,"Y",$00

; Token $6F
t$F832 DEFM "ECO",$E3,"MY",$00

; Token $70
t$F839 DEFM $E5,"G",$E4," ",$DE,$F5,$EC,$00

; Token $71
t$F841 DEFM $F8,$FB,"NG",$00

; Token $72
t$F846 DEFM "WA",$D1,$00

; Token $73
t$F84A DEFM "MO",$E2,$00

; Token $74
t$F84E DEFM "W",$EE,$E2,"OG",$00

; Token $75
t$F854 DEFM $FF,"T",$00

; Token $76
t$F857 DEFM $12,$00

; Token $77
t$F859 DEFM "PO",$DD,$00

; Token $78
t$F85D DEFM "A",$DE,"ROPHYSICI",$DE,$00

; Token $79
t$F86A DEFM "YAK",$00

; Token $7A
t$F86E DEFM "SNA",$DC,$00

; Token $7B
t$F873 DEFM "SLUG",$00

; Token $7C
t$F878 DEFM "TROPIC",$E4,$00

; Token $7D
t$F880 DEFM "D",$F6,$DA,$00

; Token $7E
t$F884 DEFM $F8,$F0,$00

; Token $7F
t$F887 DEFM "IMP",$F6,$DD,$F8,"B",$E5,$00

; Token $80
t$F890 DEFM "EXU",$F7,$F8,"NT",$00

; Token $81
t$F898 DEFM "FUNNY",$00

; Token $82
t$F89E DEFM "WEIRD",$00

; Token $83
t$F8A4 DEFM "U",$E1,"SU",$E4,$00

; Token $84
t$F8AA DEFM $DE,$F8,"N",$E7,$00

; Token $85
t$F8AF DEFM "PE",$C6,"LI",$EE,$00

; Token $86
t$F8B6 DEFM "F",$F2,$FE,$F6,"T",$00

; Token $87
t$F8BC DEFM "OCCASI",$DF,$E4,$00

; Token $88
t$F8C5 DEFM "UNP"

; Token $89
t$F8C8 DEFM $F2,$F1,"CT",$D8,$E5,$00

; Token $8A
t$F8CF DEFM "D",$F2,"ADFUL",$00

; Token $8B
t$F8D7 DEFM $AB,$00

; Token $8C
t$F8D9 DEFM "\\ [ F",$FD," e",$00

; Token $8D
t$F8E2 DEFM $8C,$B2,"e",$00

; Token $8E
t$F8E6 DEFM "f BY g",$00

; Token $8F
t$F8ED DEFM $8C," BUT ",$8E,$00

; Token $90
t$F8F5 DEFM " Ao p",$00

; Token $91
t$F8FB DEFM "PL",$FF,$DD,$00

; Token $92
t$F900 DEFM "W",$FD,"LD",$00

; Token $93
t$F905 DEFM $E2,"E ",$00

; Token $94
t$F909 DEFM $E2,$98," ",$00

; Token $95
t$F90D DEFM $E0,"AD",$D2,$9A,$00

; Token $96
t$F913 DEFM $09,$0B,$01,$08,$00

; Token $97
t$F918 DEFM $9A,$CB,"D",$00

; Token $98
t$F91C DEFM "IS",$00

; Token $99
t$F91F DEFM "I",$FF,$00

; Token $9A
t$F922 DEFM $13,"COMM",$FF,"D",$F4,$00

; Token $9B
t$F92B DEFM "h",$00

; Token $9C
t$F92D DEFM "M",$D9,"NTA",$F0,$00

; Token $9D
t$F934 DEFM $FC,"IB",$E5,$00

; Token $9E
t$F939 DEFM "T",$F2,"E",$00

; Token $9F
t$F93D DEFM $D1,"OTT",$FC,$00

; Token $A0
t$F943 DEFM "x",$00

; Token $A1
t$F945 DEFM "y",$00

; Token $A2
t$F947 DEFM "aOID",$00

; Token $A3
t$F94C DEFM $7F,$00

; Token $A4
t$F94E DEFM "~",$00

; Token $A5
t$F950 DEFM $FF,"CI",$F6,"T",$00

; Token $A6
t$F956 DEFM "EX",$E9,"P",$FB,$DF,$E4,$00

; Token $A7
t$F95E DEFM "EC",$E9,"NTRIC",$00

; Token $A8
t$F967 DEFM $F0,"G",$F8,$F0,$FC,$00

; Token $A9
t$F96D DEFM "r",$00

; Token $AA
t$F96F DEFM "K",$DC,"L",$F4,$00

; Token $AB
t$F974 DEFM "DEADLY",$00

; Token $AC
t$F97B DEFM "EV",$DC,$00

; Token $AD
t$F97F DEFM $E5,$E2,$E4,$00

; Token $AE
t$F983 DEFM "VICIO",$EC,$00

; Token $AF
t$F98A DEFM $DB,"S ",$00

; Token $B0
t$F98E DEFM $0D,$0E,$13,$00

; Token $B1
t$F992 DEFM ".",$0C,$0F,$00

; Token $B2
t$F996 DEFM " ",$FF,"D ",$00

; Token $B3
t$F99B DEFM "Y",$D9,$00

; Token $B4
t$F99E DEFM "P",$EE,"K",$C3,"M",$DD,$F4,"S",$00

; Token $B5
t$F9A7 DEFM "D",$EC,"T C",$E0,"UDS",$00

; Token $B6
t$F9B1 DEFM "I",$E9," ",$F7,"RGS",$00

; Token $B7
t$F9B9 DEFM "RO",$D5," F",$FD,$EF,$FB,$DF,"S",$00

; Token $B8
t$F9C4 DEFM "VOLCA",$E3,$ED,$00

; Token $B9
t$F9CC DEFM "PL",$FF,"T",$00

; Token $BA
t$F9D1 DEFM "TULIP",$00

; Token $BB
t$F9D7 DEFM "B",$FF,$FF,"A",$00

; Token $BC
t$F9DC DEFM "C",$FD,"N",$00

; Token $BD
t$F9E0 DEFM $12,"WE",$FC,$00

; Token $BE
t$F9E5 DEFM $12,$00

; Token $BF
t$F9E7 DEFM $11," ",$12,$00

; Token $C0
t$F9EB DEFM $11," h",$00

; Token $C1
t$F9EF DEFM $F0,"HA",$EA,"T",$FF,"T",$00

; Token $C2
t$F9F7 DEFM $BF,$00

; Token $C3
t$F9F9 DEFM $F0,"G ",$00

; Token $C4
t$F9FD DEFM $FC," ",$00

; Token $C5
t$FA00 DEFM " M",$98,"SI",$DF,$00

; Token $C6
t$FA07 DEFM "CU",$00

; Token $C7
t$FA0A DEFM "B",$F2,"AK",$00

; Token $C8
t$FA0F DEFM "NAME? ",$00

; Token $C9
t$FA16 DEFM " TO ",$00

; Token $CA
t$FA1B DEFM " ",$98," ",$00

; Token $CB
t$FA1F DEFM " SA",$FA,$00

; Token $CC
t$FA24 DEFM ".",$0C," ",$13,$00

; Token $CD
t$FA29 DEFM "DO",$D5,$FC,$00

; Token $CE
t$FA2E DEFM " ",$01,"(Y/N)?",$02,$00

; Token $CF
t$FA38 DEFM $02,$06,"l",$0A," JAMM",$F4,$00

; Token $D0
t$FA43 DEFM " A ",$00

; Token $D1
t$FA47 DEFM "SP",$00

; Token $D2
t$FA4A DEFM " NEW ",$00

; Token $D3
t$FA50 DEFM $0C,$0C,$00

; Token $D4
t$FA53 DEFM " ",$13,$E2,$EE,"G",$DF,$00

; Token $D5
t$FA5A DEFM "CK",$00

; Token $D6
t$FA5D DEFM "F",$D9,"ND ",$9A," ",$04,$00

; Token $D7
t$FA66 DEFM "POPUL",$F5,"I",$DF,$00

; Token $D8
t$FA6F DEFM $00

; Token $D9
t$FA70 DEFM "  ",$00

; Token $DA
t$FA73 DEFM "@@",$00

; Token $DB
t$FA76 DEFM " _",$00

; Token $DC
t$FA79 DEFM "@+",$00

; Token $DD
t$FA7C DEFM $00

; Token $DE
t$FA7D DEFM $B0,$01,$03,$CA,$F2,"SI",$DE,$C3,"A",$D4," ",$F0,"VASI",$DF,"*",$02,$0F,$00

; Token $DF
t$FA93 DEFM $01,"W",$FF,"T",$C4,"BY G",$E4,"COP:",$0C,$D3,"    ",$D0,"B",$F8,$FA," ",$9A," ",$D3,"   F",$FD,$D0,$D1,"ECI",$E4,$C5,$02,$D3,$D3,$0D," ",$13,"A",$F2," ",$B3," ",$F0,"TE",$F2,$DE,$C4,$CE,$00

; Token $E0
t$FACE DEFM $B0,$93,$D4,"S ",$EE,"E ",$EC,$C3,$93,$D1,"A",$E9," ",$DE,$F5,"I",$DF," ",$F5," ",$13,$10," AS",$D0,"BA",$DA," F",$FD," ",$E2,"EIR ",$F0,"VASI",$DF," F",$FD,$E9,$C9,$F5,"TA",$D5," ",$93,$91," SURFA",$E9
 $FB0F DEFM $B1,$0C,$02,$B3,"R",$C5,":",$D3,$01,$C9,"DE",$DE,"ROY ",$93,$D1,"A",$E9," ",$DE,$F5,"I",$DF,$D3," ",$F5," ",$10,$CC,$D3,$0D,"TAKE ",$94,$CF,$D3,"(",$0D,$13,$B3," W",$DC,"L NE",$C4,$DB,"*)",$0A,$0A," ",$01,"GOOD"
 $FB50 DEFM " LU",$D5,$02,"*",$00

; Token $E1
t$FB57 DEFM "SH",$F2,"W",$00

; Token $E2
t$FB5C DEFM $F7,"A",$DE,$00

; Token $E3
t$FB60 DEFM $EA,"S",$DF,$00

; Token $E4
t$FB64 DEFM "SNAKE",$00

; Token $E5
t$FB6A DEFM "WOLF",$00

; Token $E6
t$FB6F DEFM $E5,"OP",$EE,"D",$00

; Token $E7
t$FB75 DEFM "C",$F5,$00

; Token $E8
t$FB78 DEFM "M",$DF,"KEY",$00

; Token $E9
t$FB7E DEFM "GO",$F5,$00

; Token $EA
t$FB82 DEFM "F",$98,"H",$00

; Token $EB
t$FB86 DEFM "j i",$00

; Token $EC
t$FB8A DEFM $11," x {",$00

; Token $ED
t$FB90 DEFM $AF,"k y {",$00

; Token $EE
t$FB97 DEFM "| }",$00

; Token $EF
t$FB9B DEFM "j i",$00

; Token $F0
t$FB9F DEFM "ME",$F5,$00

; Token $F1
t$FBA3 DEFM $C6,"TL",$DD,$00

; Token $F2
t$FBA8 DEFM $DE,"EAK",$00

; Token $F3
t$FBAD DEFM "BURG",$F4,"S",$00

; Token $F4
t$FBB4 DEFM $EB,"UP",$00

; Token $F5
t$FBB8 DEFM "I",$E9,$00

; Token $F6
t$FBBB DEFM "MUD",$00

; Token $F7
t$FBBF DEFM "Z",$F4,"O-",$13,"G",$00

; Token $F8
t$FBC6 DEFM "VA",$C6,"UM",$00

; Token $F9
t$FBCC DEFM $11," ULT",$F8,$00

; Token $FA
t$FBD3 DEFM "HO",$D5,"EY",$00

; Token $FB
t$FBD9 DEFM "CRI",$D5,$DD,$00

; Token $FC
t$FBDF DEFM "K",$EE,$F5,"E",$00

; Token $FD
t$FBE4 DEFM "PO",$E0,$00

; Token $FE
t$FBE8 DEFM "T",$F6,"N",$98,$00

; Token $FF Last recursive token
t$FBED DEFM $E2,"EY SHOW ",$E3," M",$F4,"CY...",$00

; Data block at FC00
@label=data_at_FC00
b$FC00 DEFB $00,$00,$00,$00,$00,$00,$00,$00

; Byte at FC08
@label=byte_at_FC08
b$FC08 DEFB $00

; Byte at FC09
@label=byte_at_FC09
b$FC09 DEFB $00

; Byte at FC0A
@label=byte_at_FCA
b$FC0A DEFB $00

; Byte at FC0B
@label=byte_at_FC0B
b$FC0B DEFB $00

; Byte at FC0C
@label=byte_at_FC0C
b$FC0C DEFB $00

; Byte at FC0D
@label=byte_at_FC0D
b$FC0D DEFB $FF

; Byte at FC0E
@label=byte_at_FC0E
b$FC0E DEFB $8C

; Byte at FC0F
@label=byte_at_FC0F
b$FC0F DEFB $00

; Scan keyboard continued
;
; Used by the routine at #R$FD69.
@label=scan_keyboard_cont
c$FC10 DEC D         ;
 $FC11 JP NZ,$FD76   ;
 $FC14 LD A,($FC09)  ;
 $FC17 AND $0F       ;
 $FC19 LD D,A        ;
 $FC1A LD A,($FC0E)  ;
 $FC1D LD E,A        ;
 $FC1E AND $03       ;
 $FC20 JR Z,$FC63    ;
 $FC22 DEC A         ;
 $FC23 JR NZ,$FC3D   ;
 $FC25 LD BC,$FF1F   ;
 $FC28 IN A,(C)      ;
 $FC2A BIT 4,A       ;
 $FC2C JR Z,$FC33    ;
 $FC2E LD HL,$FC0B   ;
 $FC31 SET 0,(HL)    ;
*$FC33 AND $0F       ;
 $FC35 LD D,A        ;
 $FC36 LD A,E        ;
 $FC37 XOR $30       ;
 $FC39 LD E,A        ;
 $FC3A JP $FC63      ;
*$FC3D DEC A         ;
 $FC3E LD A,($FC0F)  ;
 $FC41 RRA           ;
 $FC42 LD D,A        ;
 $FC43 JR Z,$FC57    ;
 $FC45 LD D,$00      ;
 $FC47 RL D          ;
 $FC49 RRA           ;
 $FC4A RRA           ;
 $FC4B RL D          ;
 $FC4D SLA D         ;
 $FC4F RRA           ;
 $FC50 RR D          ;
 $FC52 RRA           ;
 $FC53 RL D          ;
 $FC55 RL D          ;
*$FC57 LD HL,$FC08   ;
 $FC5A BIT 6,(HL)    ;
 $FC5C JR Z,$FC63    ;
 $FC5E LD HL,$FC0B   ;
 $FC61 SET 0,(HL)    ;
*$FC63 BIT 4,E       ;
 $FC65 JR Z,$FC74    ;
 $FC67 LD A,D        ;
 $FC68 AND $05       ;
 $FC6A SLA A         ;
 $FC6C LD C,A        ;
 $FC6D LD A,D        ;
 $FC6E AND $0A       ;
 $FC70 SRL A         ;
 $FC72 OR C          ;
 $FC73 LD D,A        ;
*$FC74 BIT 5,E       ;
 $FC76 JR Z,$FC89    ;
 $FC78 LD A,D        ;
 $FC79 AND $03       ;
 $FC7B LD B,A        ;
 $FC7C LD A,D        ;
 $FC7D AND $0C       ;
 $FC7F LD C,A        ;
 $FC80 SRL C         ;
 $FC82 SLA A         ;
 $FC84 OR C          ;
 $FC85 AND $0C       ;
 $FC87 OR B          ;
 $FC88 LD D,A        ;
*$FC89 LD HL,$FC09   ;
 $FC8C LD A,($FC0E)  ;
 $FC8F AND $03       ;
 $FC91 JR NZ,$FCA1   ;
 $FC93 LD A,(HL)     ;
 $FC94 AND A         ;
 $FC95 JR Z,$FCA1    ;
 $FC97 INC L         ;
 $FC98 RES 7,(HL)    ;
 $FC9A INC L         ;
 $FC9B RES 2,(HL)    ;
 $FC9D RES 7,(HL)    ;
 $FC9F DEC L         ;
 $FCA0 DEC L         ;
*$FCA1 LD A,(HL)     ;
 $FCA2 AND $F0       ;
 $FCA4 OR D          ;
 $FCA5 LD (HL),A     ;
 $FCA6 LD HL,$FC08   ;
 $FCA9 BIT 6,(HL)    ;
 $FCAB RET Z         ;
 $FCAC RES 6,(HL)    ;
 $FCAE LD A,($FC0A)  ;
 $FCB1 AND $80       ;
 $FCB3 RET Z         ;
 $FCB4 LD A,$FE      ;
 $FCB6 LD ($FC0D),A  ;
 $FCB9 RET           ;

; Routine at FCBA
;
; Used by the routine at #R$FD69.
c$FCBA PUSH BC       ;
 $FCBB PUSH AF       ;
 $FCBC LD A,$05      ;
 $FCBE SUB E         ;
 $FCBF SLA A         ;
 $FCC1 SLA A         ;
 $FCC3 SLA A         ;
 $FCC5 ADD A,D       ;
 $FCC6 DEC A         ;
 $FCC7 LD B,A        ;
 $FCC8 SLA B         ;
 $FCCA LD HL,$FD41   ;
 $FCCD ADD A,L       ;
 $FCCE JR NC,$FCD1   ;
 $FCD0 INC H         ;
*$FCD1 LD L,A        ;
 $FCD2 LD A,(HL)     ;
 $FCD3 LD ($FC0D),A  ;
 $FCD6 LD HL,$FF58   ;
 $FCD9 LD A,L        ;
 $FCDA ADD A,B       ;
 $FCDB LD L,A        ;
 $FCDC LD A,(HL)     ;
 $FCDD INC HL        ;
 $FCDE LD B,(HL)     ;
 $FCDF LD HL,$FC08   ;
 $FCE2 ADD A,L       ;
 $FCE3 LD L,A        ;
 $FCE4 LD A,(HL)     ;
 $FCE5 OR B          ;
 $FCE6 LD (HL),A     ;
 $FCE7 POP AF        ;
 $FCE8 POP BC        ;
 $FCE9 RET           ;

; Data block at FCEA
b$FCEA DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FCF2 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FCFA DEFB $FE,$FE,$FE,$FE,$FE,$FE

; Interrupt vector table?
b$FD00 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD08 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD10 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD18 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD20 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD28 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD30 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD38 DEFB $FE,$FE,$FE,$FE,$FE,$FE,$FE,$FE
 $FD40 DEFB $FE

; Data block at FD41
@label=data_at_FD41
b$FD41 DEFB $20,$0D,$50,$30,$31,$51,$41,$00
 $FD49 DEFB $01,$4C,$4F,$39,$32,$57,$53,$5A
 $FD51 DEFB $4D,$4B,$49,$38,$33,$45,$44,$58
 $FD59 DEFB $4E,$4A,$55,$37,$34,$52,$46,$43
 $FD61 DEFB $42,$48,$59,$36,$35,$54,$47,$56

; Scan keyboard
;
; Used by the routine at #R$FF25.
@label=scan_keyboard
c$FD69 XOR A         ;
 $FD6A LD ($FC0F),A  ;
 $FD6D DEC A         ;
 $FD6E LD ($FC0D),A  ;
 $FD71 LD BC,$7FFE   ;
 $FD74 LD D,$08      ;
; This entry point is used by the routine at #R$FC10.
*$FD76 RLC B         ;
 $FD78 IN A,(C)      ;
 $FD7A AND $1F       ;
 $FD7C XOR $1F       ;
 $FD7E LD E,$05      ;
*$FD80 RRA           ;
 $FD81 CALL C,$FCBA  ;
 $FD84 DEC E         ;
 $FD85 JR NZ,$FD80   ;
 $FD87 JP $FC10      ;

; Data block at FD8A
b$FD8A DEFB $05,$06,$0D,$0E

; Data block at FD8E
b$FD8E DEFB $CB,$71,$89,$21,$21,$61,$32,$48
 $FD96 DEFB $7A,$21,$20,$40,$40

; More 2-letter tokens
@label=more_two_letter_tokens
t$FD9B DEFM "ABOUSEITILETSTONLONUTHNO"

; Standard 2-letter tokens
@label=two_letter_tokens
t$FDB3 DEFM "ALLEXEGEZACEBISOUSESARMAINDIREA?ERATENBERALAVETIEDORQUANTEISRION"

; Data block at FDF3
b$FDF3 DEFB $B2,$42,$3A,$52,$52,$54,$92,$70
 $FDFB DEFB $DA,$F1,$F0,$FE,$FE,$FE

; Routine at FE01
;
; Used by the routine at #R$FF25.
c$FE01 LD A,($70E3)  ;
 $FE04 CP $04        ;
 $FE06 RET NC        ;
 $FE07 LD A,($FC09)  ;
 $FE0A LD B,A        ;
 $FE0B LD A,($FC0E)  ;
 $FE0E LD C,A        ;
 $FE0F LD HL,($FF08) ;
 $FE12 BIT 0,B       ;
 $FE14 JR NZ,$FE41   ;
 $FE16 BIT 1,B       ;
 $FE18 JR NZ,$FE2E   ;
 $FE1A BIT 3,C       ;
 $FE1C JR Z,$FE7A    ;
 $FE1E LD DE,$003C   ;
 $FE21 AND A         ;
 $FE22 SBC HL,DE     ;
 $FE24 BIT 6,H       ;
 $FE26 JR Z,$FE7A    ;
 $FE28 LD HL,$0000   ;
 $FE2B JP $FE7A      ;
*$FE2E LD A,H        ;
 $FE2F AND $7F       ;
 $FE31 OR L          ;
 $FE32 JR NZ,$FE3A   ;
 $FE34 LD HL,$00FF   ;
 $FE37 JP $FE7A      ;
*$FE3A BIT 7,H       ;
 $FE3C JR Z,$FE55    ;
 $FE3E JP $FE63      ;
*$FE41 BIT 1,B       ;
 $FE43 JR NZ,$FE7A   ;
 $FE45 LD A,H        ;
 $FE46 AND $7F       ;
 $FE48 OR L          ;
 $FE49 JR NZ,$FE51   ;
 $FE4B LD HL,$80FF   ;
 $FE4E JP $FE7A      ;
*$FE51 BIT 7,H       ;
 $FE53 JR Z,$FE63    ;
*$FE55 LD DE,$00FF   ;
 $FE58 ADD HL,DE     ;
 $FE59 BIT 4,H       ;
 $FE5B JR Z,$FE7A    ;
 $FE5D AND A         ;
 $FE5E SBC HL,DE     ;
 $FE60 JP $FE7A      ;
*$FE63 BIT 2,C       ;
 $FE65 JR Z,$FE6D    ;
 $FE67 LD HL,$0000   ;
 $FE6A JP $FE7A      ;
*$FE6D LD DE,$00FF   ;
 $FE70 AND A         ;
 $FE71 SBC HL,DE     ;
 $FE73 BIT 6,H       ;
 $FE75 JR Z,$FE7A    ;
 $FE77 LD HL,$0000   ;
*$FE7A LD ($FF08),HL ;
 $FE7D LD HL,($FF0A) ;
 $FE80 BIT 2,B       ;
 $FE82 JR NZ,$FEAF   ;
 $FE84 BIT 3,B       ;
 $FE86 JR NZ,$FE9C   ;
 $FE88 BIT 3,C       ;
 $FE8A JR Z,$FEE8    ;
 $FE8C LD DE,$0024   ;
 $FE8F AND A         ;
 $FE90 SBC HL,DE     ;
 $FE92 BIT 6,H       ;
 $FE94 JR Z,$FEE8    ;
 $FE96 LD HL,$0000   ;
 $FE99 JP $FEE8      ;
*$FE9C LD A,H        ;
 $FE9D AND $7F       ;
 $FE9F OR L          ;
 $FEA0 JR NZ,$FEA8   ;
 $FEA2 LD HL,$0066   ;
 $FEA5 JP $FEE8      ;
*$FEA8 BIT 7,H       ;
 $FEAA JR Z,$FEC3    ;
 $FEAC JP $FED1      ;
*$FEAF BIT 3,B       ;
 $FEB1 JR NZ,$FEE8   ;
 $FEB3 LD A,H        ;
 $FEB4 AND $7F       ;
 $FEB6 OR L          ;
 $FEB7 JR NZ,$FEBF   ;
 $FEB9 LD HL,$8066   ;
 $FEBC JP $FEE8      ;
*$FEBF BIT 7,H       ;
 $FEC1 JR Z,$FED1    ;
*$FEC3 LD DE,$0066   ;
 $FEC6 ADD HL,DE     ;
 $FEC7 BIT 4,H       ;
 $FEC9 JR Z,$FEE8    ;
 $FECB AND A         ;
 $FECC SBC HL,DE     ;
 $FECE JP $FEE8      ;
*$FED1 BIT 2,C       ;
 $FED3 JR Z,$FEDB    ;
 $FED5 LD HL,$0000   ;
 $FED8 JP $FEE8      ;
*$FEDB LD DE,$0066   ;
 $FEDE AND A         ;
 $FEDF SBC HL,DE     ;
 $FEE1 BIT 6,H       ;
 $FEE3 JR Z,$FEE8    ;
 $FEE5 LD HL,$0000   ;
*$FEE8 LD ($FF0A),HL ;
 $FEEB LD HL,($FF0C) ;
 $FEEE LD DE,$00A0   ;
 $FEF1 BIT 4,B       ;
 $FEF3 JR NZ,$FF00   ;
 $FEF5 BIT 5,B       ;
 $FEF7 JR Z,$FF1D    ;
 $FEF9 AND A         ;
 $FEFA SBC HL,DE     ;
 $FEFC JR $FF0E      ;

; Routine at FEFE
@label=interrupt_jump
c$FEFE JR $FF25      ;

; Routine at FF00
;
; Used by the routine at #R$FE01.
c$FF00 BIT 5,B       ;
 $FF02 JR NZ,$FF1D   ;
 $FF04 ADD HL,DE     ;
 $FF05 JP $FF16      ;

; Data block at FF08
@label=word_at_FF08
w$FF08 DEFW $0000

; Data block at FF0A
@label=word_at_FF0A
w$FF0A DEFW $0000

; Data block at FF0C
@label=word_at_FF0C
w$FF0C DEFW $0000

; Routine at FF0E
;
; Used by the routine at #R$FE01.
c$FF0E JR NC,$FF1D   ;
 $FF10 LD HL,$0000   ;
 $FF13 JP $FF1D      ;

; Routine at FF16
;
; Used by the routine at #R$FF00.
c$FF16 BIT 5,H       ;
 $FF18 JR Z,$FF1D    ;
 $FF1A AND A         ;
 $FF1B SBC HL,DE     ;
; This entry point is used by the routines at #R$FE01, #R$FF00 and #R$FF0E.
*$FF1D LD ($FF0C),HL ;
 $FF20 XOR A         ;
 $FF21 LD ($FC09),A  ;
 $FF24 RET           ;

; Interrupt routine
;
; Used by the routine at #R$FEFE.
@label=interrupt_routine
c$FF25 DI            ;
 $FF26 LD ($FF56),SP ;
 $FF2A LD SP,$FFBF   ;
 $FF2D PUSH HL       ;
 $FF2E PUSH DE       ;
 $FF2F PUSH BC       ;
 $FF30 PUSH AF       ;
 $FF31 PUSH IX       ;
 $FF33 PUSH IY       ;
 $FF35 CALL $FD69    ;
 $FF38 CALL $FE01    ;
 $FF3B CALL $7125    ;
 $FF3E POP IY        ;
 $FF40 POP IX        ;
 $FF42 POP AF        ;
 $FF43 POP BC        ;
 $FF44 POP DE        ;
 $FF45 POP HL        ;
 $FF46 LD SP,($FF56) ;
 $FF4A EI            ;
 $FF4B RET           ;

; Set IM2
@label=set_im2
c$FF4C LD A,$FD      ;
 $FF4E LD I,A        ;
 $FF50 IM 2          ;
 $FF52 RET           ;

; Set IM1
@label=set_im1
c$FF53 IM 1          ;
 $FF55 RET           ;

; Word at FF56
@label=save_sp_intrpt
w$FF56 DEFW $0000

; Stack
b$FF58 DEFB $01,$10,$00,$01,$00,$08,$00,$40
 $FF60 DEFB $02,$01,$03,$40,$03,$01,$02,$80
 $FF68 DEFB $01,$20,$00,$02,$00,$10,$07,$01
 $FF70 DEFB $02,$02,$03,$20,$01,$08,$00,$00
 $FF78 DEFB $01,$02,$00,$04,$00,$20,$07,$04
 $FF80 DEFB $02,$04,$03,$10,$04,$20,$01,$04
 $FF88 DEFB $01,$01,$02,$40,$03,$08,$07,$10
 $FF90 DEFB $02,$08,$04,$40,$03,$04,$03,$80
 $FF98 DEFB $04,$10,$02,$10,$00,$80,$07,$08
 $FFA0 DEFB $07,$02,$03,$02,$02,$20,$3C,$00
 $FFA8 DEFB $07,$F3,$31,$FF,$FF,$ED,$5F,$F6
 $FFB0 DEFB $80,$ED,$4F,$37,$3E,$FF,$DD,$21
 $FFB8 DEFB $00,$40,$11,$A9,$BF,$CD,$56,$05
 $FFC0 DEFB $F3,$EE,$DC,$20,$E4,$3E,$18,$32
 $FFC8 DEFB $2E,$C2,$FB,$C3,$79,$D0,$3C,$00
 $FFD0 DEFB $00,$7C,$42,$42,$7C,$40,$40,$00
 $FFD8 DEFB $00,$3C,$42,$42,$52,$4A,$3C,$00
 $FFE0 DEFB $00,$7C,$42,$42,$7C,$44,$42,$00
 $FFE8 DEFB $00,$3C,$40,$3C,$02,$42,$3C,$00
 $FFF0 DEFB $00,$FE,$10,$10,$10,$10,$10,$E6
 $FFF8 DEFB $05,$CD,$05,$82,$DC,$C0,$FF
 $FFFF DEFB $00
